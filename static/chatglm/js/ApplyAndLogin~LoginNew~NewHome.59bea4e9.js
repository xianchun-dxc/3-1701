(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ApplyAndLogin~LoginNew~NewHome"],{"0032":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"icon",class:e.svgClass,attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":e.iconName}})])},i=[],r=(n("ef53"),n("0637"),{name:"SvgIcon",props:{iconClass:{type:String,required:!0},className:{type:String,default:""}},computed:{isExternal:function(){return/^(https?:|mailto:|tel:)/.test(this.iconClass)},iconName:function(){return"#icon-".concat(this.iconClass)},svgClass:function(){return this.className?"svg-icon "+this.className:"svg-icon"},styleExternalIcon:function(){return{mask:"url(".concat(this.iconClass,") no-repeat 50% 50%"),"-webkit-mask":"url(".concat(this.iconClass,") no-repeat 50% 50%")}}}}),s=r,a=(n("997e"),n("d30c")),c=Object(a["a"])(s,o,i,!1,null,"60d75eb4",null);t["a"]=c.exports},2360:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));n("e5e7"),n("6006"),n("43bf");var o=[{name:"清华大学",univ:"thu"},{name:"安徽大学",univ:"ahu"},{name:"中山大学",univ:"sysu"},{name:"四川大学",univ:"scu"}],i=function(e,t){var n=t.find((function(t){return t.univ===e}));return null===n||void 0===n?void 0:n.name}},"2cdc":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{"append-to-body":"",visible:e.dialogVisible,"before-close":e.handleClose,top:"30vh",modal:!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"refresh-btn",on:{click:e.onRefresh}},[n("SvgIcon",{attrs:{iconClass:"refresh"}})],1),n("div",{staticClass:"shumei_captcha_demo_form"},[n("div",{staticClass:"shumei_form_item"},[n("label",{staticStyle:{"vertical-align":"top"}},[e._v("验证码")]),n("span",{attrs:{id:e.captchaId}},[e._v("滑动验证码加载中...")])])])])},i=[],r=n("ca39"),s=n("6c71");n("1b12"),n("f574"),n("9e21");function a(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}function c(e,t){if(null==e)return{};var n,o,i=a(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=n("d0c0"),u=n.n(l),d=["check"],h={initSMCaptcha:"/smcp/smcp.min.js"},f=function(e,t,n){window.requireJsRegistry||(window.requireJsRegistry={});var o=window.requireJsRegistry[e];if(o)return n&&n(o),o;var i=t.check,r=c(t,d),s=h[e]||e;u()(s,r,(function(){var t=m(i);!t&&i||(window.requireJsRegistry[e]=t,n&&n(t))}))},m=function(e){return"string"===typeof e?window[e]:e&&1===e.length?window[e[0]]:!(!e||2!==e.length)&&(window[e[0]]&&window[e[0]][e[1]])},p=function(e){f("initSMCaptcha",{check:"initSMCaptcha"},e)},v=n("0032"),g={name:"VerificationCodeModel",data:function(){return{dialogVisible:!1,sMCaptcha:null,captchaId:"shumei_form_captcha_wrapper"}},components:{SvgIcon:v["a"]},computed:Object(r["a"])({},Object(s["e"])("Home",["isMobile"])),created:function(){},mounted:function(){},props:{visible:{type:Boolean,default:function(){return!1}}},watch:{visible:function(e){var t=this;this.dialogVisible=e,e?setTimeout((function(){t.dialogVisible&&t.onInitSMCaptcha()}),10):this.sMCaptcha=null}},methods:{handleClose:function(){this.$emit("closeModel")},onInitSMCaptcha:function(){var e=this;p((function(t){t({organization:"599zinRadlRxTLrOkTR9",appendTo:e.captchaId,product:"embed",width:"100%",hideRefreshOnImage:!1,style:{slideBar:{color:"#999",background:"#F3F7FA",successColor:"#FFF",border:"1px solid #3e6ffb",process:{background:"rgba(62, 111, 251,.1)",successBackground:"rgba(62, 111, 251,.1)",failBackground:"#F5E0E2"},button:{boxShadow:"none",color:"#fff",successColor:"#3e6ffb",failColor:"#Fff",background:"#3e6ffb",successBackground:"#3e6ffb",failBackground:"#f56c6c"}}}},e.smCaptchaCallback)}))},smCaptchaCallback:function(e){var t=this;this.sMCaptcha=e,e.onReady((function(e,t){})),e.onSuccess((function(n){var o=n.rid,i=n.pass;i?(e.onClose(),t.$emit("setRid",o),t.$emit("closeModel",!0)):t.$emit("setRid")}))},onRefresh:function(){this.sMCaptcha&&this.sMCaptcha.reset()}}},b=g,y=(n("8e7d"),n("d30c")),C=Object(y["a"])(b,o,i,!1,null,"5e24c8f8",null);t["a"]=C.exports},"588e":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container",class:{mobile:e.isMobile,pc:!e.isMobile}},[n("el-form",{ref:"ruleForm",staticClass:"form",attrs:{model:e.ruleForm,rules:e.rules}},[1===e.loginType?n("el-form-item",{attrs:{prop:"invite_code"}},[n("el-input",{attrs:{placeholder:"邀请码"},model:{value:e.ruleForm.invite_code,callback:function(t){e.$set(e.ruleForm,"invite_code",t)},expression:"ruleForm.invite_code"}})],1):e._e(),n("el-form-item",{attrs:{prop:"phone",error:e.loginError.phone,label:"手机号"}},[n("el-input",{attrs:{maxLength:"11",placeholder:"请输入手机号",type:"number",oninput:"if(value.length>11)value=value.slice(0,11)"},on:{input:e.onChangePhone},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),n("el-form-item",{attrs:{prop:"code",error:e.loginError.code,label:"验证码"}},[n("div",{staticClass:"code-box"},[n("el-input",{attrs:{maxLength:"6",placeholder:"请输入短信验证码",type:"number",oninput:"if(value.length>6)value=value.slice(0,6)"},on:{input:e.onChangeCode},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}}),n("div",{staticClass:"code-btn",class:{nouse:e.codeTextStatus},on:{click:e.handelGetCode}},[e._v(" "+e._s(e.codeText)+" ")])],1)]),n("el-form-item",{staticClass:"checkbox-box",attrs:{prop:"checkPrivacy"}},[n("el-checkbox-group",{model:{value:e.ruleForm.checkPrivacy,callback:function(t){e.$set(e.ruleForm,"checkPrivacy",t)},expression:"ruleForm.checkPrivacy"}},[n("el-checkbox",{attrs:{name:"checkPrivacy"},model:{value:e.ruleForm.checkPrivacy,callback:function(t){e.$set(e.ruleForm,"checkPrivacy",t)},expression:"ruleForm.checkPrivacy"}},[n("span",[e._v("未注册手机号将自动注册。勾选即代表您阅读并同意")]),n("a",{attrs:{href:"/agreement"}},[e._v("《用户协议》")]),e._v(" 与 "),n("a",{attrs:{href:"/privacypolicy"}},[e._v("《隐私政策》")])])],1)],1),n("el-form-item",{staticClass:"submit-box"},[n("el-button",{staticClass:"submit-btn apply-btn",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[n("div",{staticClass:"apply-btn-flex"},[n("span",[e._v("登录")]),n("Logo",{staticClass:"arrow_logo",attrs:{image:e.arrow}})],1)])],1)],1),n("div",[n("VerificationCodeModel",{attrs:{visible:e.visible},on:{closeModel:e.closeModel,setRid:e.setRid}})],1)],1)},i=[],r=(n("5bdf"),n("cb52")),s=n("ca39"),a=(n("3fa6"),n("ef53"),n("0637"),n("61f7")),c=n("6c71"),l=n("60fe"),u=n("2cdc"),d=n("3191"),h=n("5f87"),f=n("c913"),m=n("060e"),p={name:"LoginForm",data:function(){return{arrow:m,loginTypeList:["短信登录"],loginType:0,ruleForm:{invite_code:"",phone:this.phone||"",code:"",checkPrivacy:[]},rules:{invite_code:[{required:!0,message:"请输入邀请码",trigger:"blur"}],checkPrivacy:[{required:!0,message:'请勾选 "用户协议与隐私政策"',trigger:"change"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{required:!0,validator:a["c"],trigger:"blur"}],code:[{required:!0,message:"请输入短信验证码",trigger:"blur"},{min:0,max:6,message:"验证码长度为6",trigger:"blur"}]},visible:!1,codeText:"获取验证码",codeTextStatus:!1,timer:null,loginError:{phone:"",code:""},defaultForm:{1:"phone",2:"code"},disabled:!0,lastGetCodePhone:"",md5:this.$route.query.md5}},props:{tab:{type:String,default:function(){return""}},phone:{type:String,default:function(){return""}}},components:{VerificationCodeModel:u["a"]},computed:Object(s["a"])({},Object(c["e"])("Home",["isMobile"])),created:function(){this.closeModel(),this.setRid()},mounted:function(){window.changeSelectIndex=this.changeSelectIndex},watch:{"ruleForm.phone":function(e){e||this.toast&&this.toast.clear()}},methods:Object(s["a"])(Object(s["a"])({},Object(c["b"])("Home",["Login"])),{},{changeSelectIndex:function(){this.$emit("changeSelectIndex",0,this.ruleForm.phone),this.toast.clear()},handelGetCode:function(){var e=this;this.codeTextStatus||this.$refs.ruleForm.validateField("phone",(function(t){t||e.openModel()}))},openModel:function(){this.visible=!0},closeModel:function(e){this.visible=!1,e&&this.onSendCode()},setRid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(h["i"])(e)},getRid:function(){var e=window.localStorage.getItem("captcha_rid");return e},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.onLogin()}))},onSendCode:function(){var e=this,t=this.getRid()||"";if(!this.codeTextStatus){if(!t)return this.clearValidate(),setTimeout((function(){e.loginError={code:"短信验证码错误"}}),0),!1;this.clearValidate();var n=this.ruleForm.phone;Object(d["H"])({phone:n,rid:t,status:0,md5:this.md5}).then((function(t){3===t.status?e.$message.error(t.message):2===t.status?(e.loginError={phone:t.message},e.toast&&e.toast.clear(),e.toast=Object(r["a"])({type:"html",message:'<div style="width: max-content">还未进行过内测申请，<span style="color: #88A8FF" onclick="changeSelectIndex()">去申请</span></div>',position:"bottom",duration:0})):1===t.status?e.loginError={phone:t.message}:(e.$message.success(t.message),e.runTimer(),e.lastGetCodePhone=n)}))}},runTimer:function(){var e=this,t=60,n=this;this.codeText="还剩 ".concat(t," 秒"),this.codeTextStatus=!0,this.timer=window.setInterval((function(){n.codeText="还剩 ".concat(--t," 秒"),t<0&&e.destroyInterval()}),1e3)},destroyInterval:function(){this.timer&&(window.clearInterval(this.timer),this.timer=null,this.codeText="获取验证码",this.codeTextStatus=!1)},onLogin:function(){var e=this,t=this.getRid()||"";if(!t)return this.clearValidate(),setTimeout((function(){e.loginError={code:"短信验证码错误"}}),0),!1;this.clearValidate();var n=this.ruleForm,o=n.phone,i=n.code,r={phone:o,code:i,rid:t,encrypt_phone:this.md5};this.Login(r).then((function(t){var n=t||{},o=n.status,i=n.result,r=void 0===i?[]:i;if(1===o){var s={};r.map((function(t){var n=t||{},o=n.status,i=n.message,r=e.defaultForm[o];r&&(s[r]=i)})),e.loginError=s,s=null}else if(0===o){var a,c;null!==t&&void 0!==t&&null!==(a=t.result)&&void 0!==a&&a.id&&null!==(c=window.sensors)&&void 0!==c&&c.login&&window.sensors.login(t.result.id);var l=Object(f["b"])("source");"share"===l?e.sendCl({md:"return",ct:"login_done"}):e.sendCl({md:"home",ct:"login_done"}),e.$message.success("登录成功!"),e.$emit("loginResult",!0)}}))},clearValidate:function(){this.$refs.ruleForm.clearValidate(),this.loginError={phone:"",code:"",checkPrivacy:""}},onCheck:function(e,t){var n=this.ruleForm,o=n.phone,i=void 0===o?"":o,r=n.code,s=void 0===r?"":r,a=n.checkPrivacy,c=void 0===a?[]:a,u=i&&l["b"].test(i);return"phone"===t&&u&&i!==this.lastGetCodePhone&&this.destroyInterval(),!u||!c.length||!s||s.length>6?(this.disabled=!0,!1):(this.disabled=!1,!0)},onChangePhone:function(){this.toast&&this.toast.clear()},onChangeCode:function(e){var t=this.ruleForm,n=t.phone,o=void 0===n?"":n,i=t.checkPrivacy,r=void 0===i?[]:i,s=o&&l["b"].test(o);6===e.length&&s&&r.length&&this.submitForm("ruleForm")}}),beforeDestroy:function(){this.destroyInterval(),this.toast&&this.toast.clear()}},v=p,g=(n("ed36"),n("d30c")),b=Object(g["a"])(v,o,i,!1,null,"11a7ef2c",null);t["a"]=b.exports},"8d5c":function(e,t,n){},"8e7d":function(e,t,n){"use strict";n("ea01")},9159:function(e,t,n){},"997e":function(e,t,n){"use strict";n("8d5c")},d0c0:function(e,t){function n(e,t){for(var n in t)e.setAttribute(n,t[n])}function o(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function i(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,t,r){var s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"===typeof t&&(r=t,t={}),t=t||{},r=r||function(){},a.type=t.type||"text/javascript",a.charset=t.charset||"utf8",a.async=!("async"in t)||!!t.async,a.src=e,t.attrs&&n(a,t.attrs),t.text&&(a.text=""+t.text);var c="onload"in a?o:i;c(a,r),a.onload||o(a,r),s.appendChild(a)}},e5e7:function(e,t,n){"use strict";var o=n("22a5"),i=n("3d02").find,r=n("af00"),s="find",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),o({target:"Array",proto:!0,forced:a},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},ea01:function(e,t,n){},ed36:function(e,t,n){"use strict";n("9159")}}]);