"use strict";
(self.webpackChunkxfgpt = self.webpackChunkxfgpt || []).push([
  [54],
  {
    62995: function (e, t, n) {
      n(47313),
        (t.Z =
          n.p + "static/media/checkIcon.28d444a7cb7aa9a335bef3586e3cb386.svg");
    },
    80552: function (e, t, n) {
      n.d(t, {
        Z: function () {
          return o;
        }
      }),
        n(47313);
      var a = "audioAmation_hr__XBJHC",
        c = n(46417),
        o = function () {
          return (0, c.jsx)("div", {
            className: "audioAmation_audio_play_wrap__w5CwF",
            children: (0, c.jsxs)("span", {
              className: "".concat("audioAmation_start_taste_line__C7Mvh"),
              children: [
                (0, c.jsx)("hr", {
                  className: "".concat(a, " ").concat("audioAmation_hr2__IIx85")
                }),
                (0, c.jsx)("hr", {
                  className: "".concat(a, " ").concat("audioAmation_hr3__Ndv1A")
                }),
                (0, c.jsx)("hr", {
                  className: "".concat(a, " ").concat("audioAmation_hr4__7ybRI")
                }),
                (0, c.jsx)("hr", {
                  className: "".concat(a, " ").concat("audioAmation_hr5__ViuYQ")
                }),
                (0, c.jsx)("hr", {
                  className: "".concat(a, " ").concat("audioAmation_hr6__L9wXB")
                }),
                (0, c.jsx)("hr", {
                  className: "".concat(a, " ").concat("audioAmation_hr7__ksieM")
                }),
                (0, c.jsx)("hr", {
                  className: "".concat(a, " ").concat("audioAmation_hr8__2MGmf")
                })
              ]
            })
          });
        };
    },
    20054: function (e, t, n) {
      function a(e) {
        return (
          (e = e.color),
          (0, k.jsx)(k.Fragment, {
            children: (0, k.jsx)("svg", {
              width: "15px",
              height: "16px",
              viewBox: "0 0 15 16",
              version: "1.1",
              xmlns: "http://www.w3.org/2000/svg",
              xmlnsXlink: "http://www.w3.org/1999/xlink",
              children: (0, k.jsx)("g", {
                id: "\u9875\u9762-1",
                stroke: "none",
                strokeWidth: "1",
                fill: "none",
                fillRule: "evenodd",
                strokeLinecap: "round",
                strokeLinejoin: "round",
                children: (0, k.jsx)("g", {
                  id: "\u5bf9\u8bdd\u9875\u9762",
                  transform: "translate(-282.250000, -535.250000)",
                  stroke: e,
                  strokeWidth: "1.5",
                  children: (0, k.jsx)("g", {
                    id: "\u7f16\u7ec4-4",
                    transform: "translate(196.000000, 536.000000)",
                    children: (0, k.jsx)("g", {
                      id: "\u4f18\u79c0_good-one",
                      transform: "translate(87.000000, 0.000000)",
                      children: (0, k.jsx)("path", {
                        d: "M11.0200263,13.4635421 L12.9983,6.46354211 C13.1311895,5.99328947 12.7778737,5.52631579 12.2892,5.52631579 L8.0591,5.52631579 C7.79998947,5.52631579 7.60826316,5.28529474 7.66651053,5.03281579 L7.85053684,4.23540526 C8.01934737,3.50394211 8.07354211,2.75074211 8.01116842,2.00266316 L7.97731053,1.59625789 C7.94098421,1.16028684 7.75132105,0.751302632 7.44195789,0.441957895 C7.15897368,0.158977368 6.77518947,0 6.37497368,0 L6.28688421,0 C6.04483158,0 5.82182632,0.131216842 5.7043,0.34279 L4.725,2.10548947 C4.28580526,2.89608421 3.63112105,3.54568421 2.83717368,3.97876316 L0.384005263,5.31686842 C0.147283684,5.44596316 0,5.69409474 0,5.96374211 L0,13.2631579 C0,13.6701158 0.329895263,14 0.736842105,14 L10.3109632,14 C10.6407368,14 10.9303526,13.7809 11.0200263,13.4635421 Z",
                        id: "\u8def\u5f84"
                      })
                    })
                  })
                })
              })
            })
          })
        );
      }
      function c(e) {
        return (
          (e = e.color),
          (0, k.jsx)(k.Fragment, {
            children: (0, k.jsx)("svg", {
              width: "15px",
              height: "16px",
              viewBox: "0 0 15 16",
              version: "1.1",
              xmlns: "http://www.w3.org/2000/svg",
              xmlnsXlink: "http://www.w3.org/1999/xlink",
              children: (0, k.jsx)("g", {
                id: "\u9875\u9762-1",
                stroke: "none",
                strokeWidth: "1",
                fill: "none",
                fillRule: "evenodd",
                strokeLinecap: "round",
                strokeLinejoin: "round",
                children: (0, k.jsx)("g", {
                  id: "\u5bf9\u8bdd\u9875\u9762",
                  transform: "translate(-324.250000, -535.250000)",
                  stroke: e,
                  strokeWidth: "1.5",
                  children: (0, k.jsx)("g", {
                    id: "\u7f16\u7ec4-4",
                    transform: "translate(196.000000, 536.000000)",
                    children: (0, k.jsx)("g", {
                      id: "\u4f18\u79c0_good-one",
                      transform:
                        "translate(135.513255, 7.000000) scale(-1, -1) translate(-135.513255, -7.000000) translate(129.000000, 0.000000)",
                      children: (0, k.jsx)("path", {
                        d: "M11.0200263,13.4635421 L12.9983,6.46354211 C13.1311895,5.99328947 12.7778737,5.52631579 12.2892,5.52631579 L8.0591,5.52631579 C7.79998947,5.52631579 7.60826316,5.28529474 7.66651053,5.03281579 L7.85053684,4.23540526 C8.01934737,3.50394211 8.07354211,2.75074211 8.01116842,2.00266316 L7.97731053,1.59625789 C7.94098421,1.16028684 7.75132105,0.751302632 7.44195789,0.441957895 C7.15897368,0.158977368 6.77518947,0 6.37497368,0 L6.28688421,0 C6.04483158,0 5.82182632,0.131216842 5.7043,0.34279 L4.725,2.10548947 C4.28580526,2.89608421 3.63112105,3.54568421 2.83717368,3.97876316 L0.384005263,5.31686842 C0.147283684,5.44596316 0,5.69409474 0,5.96374211 L0,13.2631579 C0,13.6701158 0.329895263,14 0.736842105,14 L10.3109632,14 C10.6407368,14 10.9303526,13.7809 11.0200263,13.4635421 Z",
                        id: "\u8def\u5f84"
                      })
                    })
                  })
                })
              })
            })
          })
        );
      }
      function o(e) {
        function t() {
          g([]), i("");
        }
        var n = e.judgeObj,
          a = e.visible,
          c = e.onClose,
          o = e.changeTemStatus,
          s = ((e = (0, u.useState)("")), (e = (0, r.Z)(e, 2))[0]),
          i = e[1],
          h = ((e = (0, u.useState)([])), (e = (0, r.Z)(e, 2))[0]),
          g = e[1];
        return (0, k.jsx)("div", {
          className: a ? S : "".concat(S, " ").concat(A),
          children: (0, k.jsx)("div", {
            className: b,
            children: (0, k.jsxs)("div", {
              className: L,
              children: [
                (0, k.jsx)("div", {
                  className: y,
                  children: "\u4fe1\u606f\u53cd\u9988"
                }),
                (0, k.jsxs)(d.XZ.Group, {
                  value: h,
                  onChange: function (e) {
                    g(e);
                  },
                  children: [
                    (0, k.jsxs)(d.T, {
                      direction: "vertical",
                      className: B,
                      children: [
                        1 === n.status
                          ? (0, k.jsx)(k.Fragment, {
                              children:
                                null == q
                                  ? void 0
                                  : q.map(function (e) {
                                      return (0, k.jsx)(
                                        d.XZ,
                                        {
                                          value: e.value,
                                          icon: function (e) {
                                            return e
                                              ? (0, k.jsx)("img", {
                                                  src: I,
                                                  className: R
                                                })
                                              : (0, k.jsx)("div", {
                                                  className: T
                                                });
                                          },
                                          style: { width: "100%" },
                                          children: e.label
                                        },
                                        e.code
                                      );
                                    })
                            })
                          : null,
                        2 === n.status
                          ? (0, k.jsx)(k.Fragment, {
                              children:
                                null == P
                                  ? void 0
                                  : P.map(function (e) {
                                      return (0, k.jsx)(
                                        d.XZ,
                                        {
                                          value: e.value,
                                          icon: function (e) {
                                            return e
                                              ? (0, k.jsx)("img", {
                                                  src: I,
                                                  className: R
                                                })
                                              : (0, k.jsx)("div", {
                                                  className: T
                                                });
                                          },
                                          style: { width: "100%" },
                                          children: e.label
                                        },
                                        e.code
                                      );
                                    })
                            })
                          : null
                      ]
                    }),
                    (0, k.jsx)(d.Kx, {
                      placeholder:
                        1 === n.status
                          ? "\u60a8\u4e3a\u4ec0\u4e48\u559c\u6b22\u8fd9\u6761\u56de\u7b54\uff1f"
                          : "\u60a8\u8ba4\u4e3a\u66f4\u4f18\u7684\u7b54\u6848\u5e94\u8be5\u662f\u4ec0\u4e48\uff1f",
                      value: s,
                      onChange: function (e) {
                        i(e);
                      },
                      maxLength: 300,
                      className: F
                    })
                  ]
                }),
                (0, k.jsxs)("div", {
                  className: E,
                  children: [
                    (0, k.jsx)(d.zx, {
                      className: O,
                      block: !0,
                      onClick: function () {
                        t(), c();
                      },
                      children: "\u53d6\u6d88"
                    }),
                    (0, k.jsx)(d.zx, {
                      block: !0,
                      className: D,
                      onClick: function () {
                        var e;
                        0 !== h.length || s
                          ? ((e = (0, l.Z)(
                              (0, l.Z)({}, n),
                              {},
                              { reason: h.join(","), remark: s }
                            )),
                            (0, m.SN)(e)
                              .then(function (e) {
                                console.log(e),
                                  1 === n.status && p.Z.userLike(),
                                  d.FN.show(
                                    "\u4fe1\u606f\u53cd\u9988\u6210\u529f\uff01"
                                  ),
                                  o(n.status),
                                  c();
                              })
                              .catch(function () {
                                d.FN.show(
                                  "\u4fe1\u606f\u53cd\u9988\u5931\u8d25\uff01"
                                ),
                                  c();
                              })
                              .finally(function () {
                                t();
                              }))
                          : d.FN.show(
                              "\u8bf7\u586b\u5199\u53cd\u9988\u5185\u5bb9\uff01"
                            );
                      },
                      children: "\u63d0\u4ea4\u53cd\u9988"
                    })
                  ]
                })
              ]
            })
          })
        });
      }
      n.r(t),
        n.d(t, {
          default: function () {
            return W;
          }
        });
      var s,
        i = n(93433),
        l = n(1413),
        r = n(29439),
        u = n(47313),
        d = n(92715),
        h = n(95295),
        g = n(15292),
        _ = n(10025),
        m = n(96604),
        f = n(7431),
        p = n(87530),
        x = n(79243),
        v = n(21114),
        w = "chatList_divider__yxydn",
        j = n(80552),
        k = n(46417),
        C = n(62995),
        Z = n(99353),
        N = (0, u.forwardRef)(function (e, t) {
          function n() {
            E(!1);
          }
          function o(e, t, n) {
            "false" !== n &&
              (F && e === q
                ? (p.Z.pauseText(), P(""), E(!1))
                : (P(e),
                  p.Z.playText(JSON.stringify({ text: t, language: n })),
                  E(!0)));
          }
          var s = e.$answerRef,
            i = e.chatType,
            l = e.checkable,
            h = e.list,
            g = e.lastTipShow,
            _ = e.skeletonShow,
            m = e.tempInputContent,
            f = e.enable,
            N = e.answerLoading,
            I = e.answerComplete,
            S = e.setCheckable,
            A = e.reAnswerEvent,
            b = e.setTempInputContent,
            L = e.reSubmit,
            y = e.judge,
            B = e.toggleCheck,
            R = ((e = (0, u.useState)(!1)), (e = (0, r.Z)(e, 2))[0]),
            T = e[1],
            F = ((e = (0, u.useState)(!1)), (e = (0, r.Z)(e, 2))[0]),
            E = e[1],
            O = ((e = (0, u.useState)("")), (e = (0, r.Z)(e, 2))[0]),
            D = e[1],
            q = ((e = (0, u.useState)("")), (e = (0, r.Z)(e, 2))[0]),
            P = e[1];
          return (
            (0, u.useEffect)(
              function () {
                (window.audioEnded = function () {
                  D("");
                }),
                  (window.textEnded = function () {
                    console.log("text ended"), E(!1), P("");
                  });
              },
              [D, E, P]
            ),
            (0, u.useEffect)(
              function () {
                T(!1);
              },
              [h]
            ),
            (0, u.useImperativeHandle)(
              t,
              function () {
                return { setFalse: n, changePlay: o };
              },
              [n, o]
            ),
            (0, k.jsxs)(k.Fragment, {
              children: [
                _
                  ? (0, k.jsxs)("div", {
                      children: [
                        (0, k.jsx)(d.Od.Title, { animated: !0 }),
                        (0, k.jsx)(d.Od.Paragraph, {
                          lineCount: 5,
                          animated: !0
                        })
                      ]
                    })
                  : (0, k.jsx)(k.Fragment, {
                      children:
                        null == h
                          ? void 0
                          : h.map(function (e, t) {
                              var n;
                              return e
                                ? ((n = (null == e ? void 0 : e.id) + "_" + t),
                                  (0, k.jsxs)(
                                    "div",
                                    {
                                      className: "chatList_chatItem__hvkVV",
                                      id: "chat_item_".concat(t),
                                      hidden: e.hidden,
                                      onClick: function (e) {
                                        var n;
                                        (n = t),
                                          l
                                            ? B(n)
                                            : "img" ===
                                                (n =
                                                  e.nativeEvent
                                                    .target).tagName.toLocaleLowerCase() &&
                                              p.Z.previewImage(n.src);
                                      },
                                      children: [
                                        "req" ===
                                        (null == e ? void 0 : e.origin)
                                          ? (0, k.jsxs)("div", {
                                              className:
                                                "chatList_reqWrapper__ACgNn",
                                              children: [
                                                l &&
                                                  (0, k.jsx)("div", {
                                                    className: ""
                                                      .concat(
                                                        "chatList_checkbox__AkpkB",
                                                        " "
                                                      )
                                                      .concat(
                                                        e.checked
                                                          ? "chatList_checked__5aE3C"
                                                          : ""
                                                      ),
                                                    children:
                                                      e.checked &&
                                                      (0, k.jsx)("img", {
                                                        className:
                                                          "chatList_checkIcon__-rQhS",
                                                        src: C.Z,
                                                        alt: ""
                                                      })
                                                  }),
                                                (0, k.jsx)("span", {
                                                  className:
                                                    "chatList_userImage__ta-WN",
                                                  onClick: function (e) {
                                                    l || e.stopPropagation();
                                                  }
                                                }),
                                                (0, k.jsxs)("div", {
                                                  className:
                                                    "chatList_reqContent__HhccX",
                                                  children: [
                                                    (0, k.jsxs)("div", {
                                                      children: [
                                                        e.image
                                                          ? (0, k.jsx)("img", {
                                                              src: e.image
                                                            })
                                                          : null,
                                                        (0, k.jsx)("pre", {
                                                          children:
                                                            (null == e
                                                              ? void 0
                                                              : e.message) || ""
                                                        })
                                                      ]
                                                    }),
                                                    !l && e.recorder_url
                                                      ? (0, k.jsxs)("div", {
                                                          className: ""
                                                            .concat(
                                                              "chatList_recorderButton__A+F-r",
                                                              " "
                                                            )
                                                            .concat(
                                                              O ===
                                                                e.recorder_url
                                                                ? "chatList_playing__QVpqI"
                                                                : ""
                                                            ),
                                                          onClick: function () {
                                                            !N &&
                                                              I &&
                                                              (O ===
                                                              e.recorder_url
                                                                ? (D(""),
                                                                  p.Z.pauseAudio())
                                                                : (D(
                                                                    e.recorder_url
                                                                  ),
                                                                  p.Z.playAudio(
                                                                    e.recorder_url
                                                                  )));
                                                          },
                                                          children: [
                                                            (0, k.jsx)(
                                                              "span",
                                                              {}
                                                            ),
                                                            (0, k.jsx)(
                                                              "span",
                                                              {}
                                                            ),
                                                            (0, k.jsx)(
                                                              "span",
                                                              {}
                                                            ),
                                                            (0, k.jsx)(
                                                              "span",
                                                              {}
                                                            ),
                                                            (0, k.jsx)(
                                                              "span",
                                                              {}
                                                            )
                                                          ]
                                                        })
                                                      : null,
                                                    l ||
                                                    e.recorder_url ||
                                                    !e.message
                                                      ? null
                                                      : (0, k.jsx)("span", {
                                                          hidden:
                                                            1 !== f ||
                                                            "sparkTalk" === i,
                                                          className:
                                                            t ===
                                                              (null == h
                                                                ? void 0
                                                                : h.length) -
                                                                2 ||
                                                            t ===
                                                              (null == h
                                                                ? void 0
                                                                : h.length) -
                                                                1
                                                              ? "chatList_editIcon__Dtd6Y"
                                                              : "chatList_hiddenIcon__xU7rq",
                                                          onClick: function () {
                                                            1 !== f
                                                              ? d.FN.show(
                                                                  "\u5bf9\u8bdd\u6d89\u53ca\u654f\u611f\u8bcd!"
                                                                )
                                                              : !N &&
                                                                I &&
                                                                (T(!0),
                                                                b(e.message),
                                                                setTimeout(
                                                                  function () {
                                                                    var e =
                                                                      document.querySelector(
                                                                        "#editTextarea"
                                                                      );
                                                                    e.focus(),
                                                                      e.setSelectionRange(
                                                                        e.value
                                                                          .length,
                                                                        e.value
                                                                          .length
                                                                      );
                                                                  },
                                                                  400
                                                                ));
                                                          }
                                                        })
                                                  ]
                                                })
                                              ]
                                            })
                                          : null,
                                        "resp" ===
                                        (null == e ? void 0 : e.origin)
                                          ? (0, k.jsxs)(k.Fragment, {
                                              children: [
                                                (0, k.jsxs)("div", {
                                                  className:
                                                    "chatList_gptContent__wO749",
                                                  ref:
                                                    t === h.length - 1
                                                      ? s
                                                      : null,
                                                  children: [
                                                    (0, k.jsx)(
                                                      x.Z,
                                                      {
                                                        mdText:
                                                          (null == e
                                                            ? void 0
                                                            : e.message) || ""
                                                      },
                                                      n
                                                    ),
                                                    f &&
                                                    ((I && !N) ||
                                                      t !==
                                                        (null == h
                                                          ? void 0
                                                          : h.length) -
                                                          1)
                                                      ? (0, k.jsxs)("div", {
                                                          className:
                                                            "chatList_footerWrapper__O3Oz3",
                                                          onClick: function (
                                                            e
                                                          ) {
                                                            return e.stopPropagation();
                                                          },
                                                          children: [
                                                            l ||
                                                            null == e ||
                                                            !e.sid ||
                                                            ("en" !==
                                                              (null == e
                                                                ? void 0
                                                                : e.language) &&
                                                              "cn" !==
                                                                (null == e
                                                                  ? void 0
                                                                  : e.language))
                                                              ? null
                                                              : (0, k.jsx)(
                                                                  "div",
                                                                  {
                                                                    className:
                                                                      "chatList_playStatus__mvW1q",
                                                                    children:
                                                                      (0,
                                                                      k.jsx)(
                                                                        "div",
                                                                        {
                                                                          style:
                                                                            {
                                                                              cursor:
                                                                                "pointer",
                                                                              display:
                                                                                "flex",
                                                                              alignItems:
                                                                                "center"
                                                                            },
                                                                          id: "".concat(
                                                                            n,
                                                                            "PlayDiv"
                                                                          ),
                                                                          onClick:
                                                                            function () {
                                                                              !N &&
                                                                                I &&
                                                                                o(
                                                                                  e.id,
                                                                                  e.message,
                                                                                  e.language
                                                                                );
                                                                            },
                                                                          children:
                                                                            F &&
                                                                            q ===
                                                                              e.id
                                                                              ? (0,
                                                                                k.jsxs)(
                                                                                  k.Fragment,
                                                                                  {
                                                                                    children:
                                                                                      [
                                                                                        (0,
                                                                                        k.jsx)(
                                                                                          Z.uJ,
                                                                                          {
                                                                                            style:
                                                                                              {
                                                                                                pointerEvents:
                                                                                                  "none",
                                                                                                marginLeft:
                                                                                                  "0.4rem",
                                                                                                transform:
                                                                                                  "scale(0.9)"
                                                                                              }
                                                                                          }
                                                                                        ),
                                                                                        (0,
                                                                                        k.jsx)(
                                                                                          j.Z,
                                                                                          {}
                                                                                        )
                                                                                      ]
                                                                                  }
                                                                                )
                                                                              : (0,
                                                                                k.jsx)(
                                                                                  Z.TZ,
                                                                                  {
                                                                                    style:
                                                                                      {
                                                                                        pointerEvents:
                                                                                          "none",
                                                                                        marginLeft:
                                                                                          "0.4rem",
                                                                                        transform:
                                                                                          "scale(0.9)"
                                                                                      }
                                                                                  }
                                                                                )
                                                                        }
                                                                      )
                                                                  }
                                                                ),
                                                            l
                                                              ? null
                                                              : (0, k.jsxs)(
                                                                  "div",
                                                                  {
                                                                    className:
                                                                      t !==
                                                                        (null ==
                                                                        h
                                                                          ? void 0
                                                                          : h.length) -
                                                                          1 ||
                                                                      ("en" !==
                                                                        (null ==
                                                                        e
                                                                          ? void 0
                                                                          : e.language) &&
                                                                        "cn" !==
                                                                          (null ==
                                                                          e
                                                                            ? void 0
                                                                            : e.language))
                                                                        ? "chatList_contentWrapper__1jwgW"
                                                                        : "chatList_judgeWrapper__UlfXQ",
                                                                    children: [
                                                                      t !==
                                                                        (null ==
                                                                        h
                                                                          ? void 0
                                                                          : h.length) -
                                                                          1 ||
                                                                      (null !=
                                                                        e &&
                                                                        e.noReAnswer)
                                                                        ? null
                                                                        : (0,
                                                                          k.jsx)(
                                                                            "span",
                                                                            {
                                                                              className:
                                                                                "chatList_reAnswerIcon__c78sN",
                                                                              onClick:
                                                                                A
                                                                            }
                                                                          ),
                                                                      e.message
                                                                        ? (0,
                                                                          k.jsx)(
                                                                            "span",
                                                                            {
                                                                              hidden:
                                                                                e.end,
                                                                              className:
                                                                                "chatList_copyIcon__LZInX",
                                                                              onClick:
                                                                                function () {
                                                                                  !N &&
                                                                                    I &&
                                                                                    (0,
                                                                                    v.zp)(
                                                                                      {
                                                                                        text:
                                                                                          e.message ||
                                                                                          "",
                                                                                        origin:
                                                                                          !0
                                                                                      }
                                                                                    );
                                                                                }
                                                                            }
                                                                          )
                                                                        : null,
                                                                      l
                                                                        ? null
                                                                        : (0,
                                                                          k.jsx)(
                                                                            "a",
                                                                            {
                                                                              href: "#chat_item_".concat(
                                                                                t -
                                                                                  1
                                                                              ),
                                                                              children:
                                                                                (0,
                                                                                k.jsx)(
                                                                                  "span",
                                                                                  {
                                                                                    hidden:
                                                                                      e.end,
                                                                                    className:
                                                                                      "chatList_shareIcon__TW1aa",
                                                                                    onClick:
                                                                                      function () {
                                                                                        !N &&
                                                                                          I &&
                                                                                          (S(
                                                                                            !0
                                                                                          ),
                                                                                          B(
                                                                                            t
                                                                                          ),
                                                                                          p.Z.startShare());
                                                                                      }
                                                                                  }
                                                                                )
                                                                            }
                                                                          ),
                                                                      null !=
                                                                        e &&
                                                                      e.sid
                                                                        ? (0,
                                                                          k.jsxs)(
                                                                            k.Fragment,
                                                                            {
                                                                              children:
                                                                                [
                                                                                  (0,
                                                                                  k.jsx)(
                                                                                    "div",
                                                                                    {
                                                                                      className:
                                                                                        "chatList_praise__cfb49",
                                                                                      hidden:
                                                                                        e.end,
                                                                                      onClick:
                                                                                        function () {
                                                                                          N ||
                                                                                            !I ||
                                                                                            e.status ||
                                                                                            ("praise" !==
                                                                                              e.temStatus &&
                                                                                              y(
                                                                                                e,
                                                                                                1,
                                                                                                t
                                                                                              ));
                                                                                        },
                                                                                      children:
                                                                                        (0,
                                                                                        k.jsx)(
                                                                                          a,
                                                                                          {
                                                                                            color:
                                                                                              "praise" ===
                                                                                                e.temStatus ||
                                                                                              1 ===
                                                                                                e.status
                                                                                                ? "#5778f6"
                                                                                                : "#7E84A3"
                                                                                          }
                                                                                        )
                                                                                    }
                                                                                  ),
                                                                                  (0,
                                                                                  k.jsx)(
                                                                                    "div",
                                                                                    {
                                                                                      className:
                                                                                        "chatList_tread__fM3BX",
                                                                                      hidden:
                                                                                        e.end,
                                                                                      onClick:
                                                                                        function () {
                                                                                          N ||
                                                                                            !I ||
                                                                                            e.status ||
                                                                                            ("tread" !==
                                                                                              e.temStatus &&
                                                                                              y(
                                                                                                e,
                                                                                                2,
                                                                                                t
                                                                                              ));
                                                                                        },
                                                                                      children:
                                                                                        (0,
                                                                                        k.jsx)(
                                                                                          c,
                                                                                          {
                                                                                            color:
                                                                                              "tread" ===
                                                                                                e.temStatus ||
                                                                                              2 ===
                                                                                                e.status
                                                                                                ? "#5778f6"
                                                                                                : "#7E84A3"
                                                                                          }
                                                                                        )
                                                                                    }
                                                                                  )
                                                                                ]
                                                                            }
                                                                          )
                                                                        : null
                                                                    ]
                                                                  }
                                                                )
                                                          ]
                                                        })
                                                      : null
                                                  ]
                                                }),
                                                e.needDraw
                                                  ? (0, k.jsx)("div", {
                                                      className: w,
                                                      children: (0, k.jsx)(
                                                        "p",
                                                        {
                                                          children:
                                                            "\u4ee5\u4e0a\u4e3a\u5386\u53f2\u4fe1\u606f"
                                                        }
                                                      )
                                                    })
                                                  : null,
                                                g && e.lastResp
                                                  ? (0, k.jsxs)(k.Fragment, {
                                                      children: [
                                                        (0, k.jsx)("div", {
                                                          className: w,
                                                          children: (0, k.jsx)(
                                                            "p",
                                                            {
                                                              children:
                                                                "\u4ee5\u4e0a\u4e3a\u6700\u8fd1\u4e00\u6b21\u5bf9\u8bdd\u5185\u5bb9"
                                                            }
                                                          )
                                                        }),
                                                        (0, k.jsxs)("div", {
                                                          className:
                                                            "chatList_chatHelper__F7swB",
                                                          children: [
                                                            (0, k.jsx)("p", {
                                                              children:
                                                                "\u6b22\u8fce\u7ee7\u7eed\u5411\u6211\u63d0\u95ee"
                                                            }),
                                                            (0, k.jsx)("p", {
                                                              children:
                                                                "\u61c2\u4f60\u6240\u8a00\uff0c\u7b54\u4f60\u6240\u95ee\uff0c\u521b\u4f60\u6240\u9700\uff0c\u89e3\u4f60\u6240\u96be\u3002"
                                                            })
                                                          ]
                                                        })
                                                      ]
                                                    })
                                                  : null,
                                                e.addictionTip
                                                  ? (0, k.jsx)("div", {
                                                      className: w,
                                                      children: (0, k.jsx)(
                                                        "p",
                                                        {
                                                          children:
                                                            "\u60a8\u5df2\u8fde\u7eed\u4f7f\u7528\u4e24\u5c0f\u65f6\uff0c\u8bf7\u4f11\u606f\u4e00\u4e0b"
                                                        }
                                                      )
                                                    })
                                                  : null
                                              ]
                                            })
                                          : null,
                                        "chatType" ===
                                        (null == e ? void 0 : e.origin)
                                          ? (0, k.jsx)("div", {
                                              className:
                                                "chatList_typeItem__RmQXd",
                                              children: e.message
                                            })
                                          : null
                                      ]
                                    },
                                    n
                                  ))
                                : null;
                            })
                    }),
                (0, k.jsx)(d.Vq, {
                  visible: R,
                  maskStyle: { backgroundColor: "rgba(#131D23, 0.60)" },
                  bodyClassName: "chatList_dialogBody__CVC1r",
                  getContainer: document.querySelector("#chatContainer"),
                  content: (0, k.jsxs)(k.Fragment, {
                    children: [
                      (0, k.jsx)(d.Kx, {
                        id: "editTextarea",
                        className: "chatList_textarea__WpiZ8",
                        autoFocus: !0,
                        autoSize: { minRows: 4, maxRows: 8 },
                        maxLength: 7e3,
                        placeholder: "\u8bf7\u8f93\u5165\u5185\u5bb9",
                        value: m,
                        onChange: function (e) {
                          b(e);
                        }
                      }),
                      (0, k.jsxs)("div", {
                        className: "chatList_dialogBottom__2Hyqo",
                        children: [
                          (0, k.jsx)("span", {
                            onClick: function () {
                              T(!1);
                            },
                            children: "\u53d6\u6d88"
                          }),
                          (0, k.jsx)("span", {
                            onClick: function () {
                              T(!1), L(!0);
                            },
                            children: "\u786e\u5b9a"
                          })
                        ]
                      })
                    ]
                  })
                })
              ]
            })
          );
        }),
        I = n(86298),
        S = "feedBack_modalWrapper__GBt7M",
        A = "feedBack_hidden__-L24-",
        b = "feedBack_modalContent__yCCD3",
        L = "feedBack_modalBody__qTSJC",
        y = "feedBack_title__RuH0M",
        B = "feedBack_checkboxWrapper__t+nh-",
        R = "feedBack_checkedBox__Z5OkC",
        T = "feedBack_checkbox__cjXdd",
        F = "feedBack_textarea__fF-a+",
        E = "feedBack_bottomBtn__0VcmQ",
        O = "feedBack_cancelBtn__BpuAK",
        D = "feedBack_submitBtn__XGp72",
        q = [
          {
            label: "\u56de\u7b54\u51c6\u786e\u4e14\u4e13\u4e1a",
            value: 1,
            code: 1
          },
          {
            label: "\u56de\u7b54\u6e05\u6670\u6613\u4e8e\u7406\u89e3",
            value: 2,
            code: 2
          },
          { label: "\u54cd\u5e94\u901f\u5ea6\u5feb", value: 3, code: 3 }
        ],
        P = [
          {
            label:
              "\u5b58\u5728\u4e0d\u5b89\u5168\u6216\u8fdd\u6cd5\u4fe1\u606f",
            value: 1,
            code: 1
          },
          { label: "\u5b58\u5728\u9519\u8bef\u4fe1\u606f", value: 2, code: 2 },
          {
            label: "\u56de\u590d\u5185\u5bb9\u6ca1\u4ec0\u4e48\u5e2e\u52a9",
            value: 3,
            code: 3
          }
        ],
        z = {
          chatContainer: "chat-h5_chatContainer__77umj",
          header: "chat-h5_header__gk447",
          headerLeft: "chat-h5_headerLeft__QsHsg",
          leftSwitch: "chat-h5_leftSwitch__PZ6uE",
          chatContent: "chat-h5_chatContent__GnffA",
          watermark_wrapper: "chat-h5_watermark_wrapper__IYKt5",
          botHelper: "chat-h5_botHelper__RrBCs",
          title: "chat-h5_title__j0gNi",
          gptContent: "chat-h5_gptContent__KMdKd",
          chatItem: "chat-h5_chatItem__Dhlls",
          content: "chat-h5_content__hxWYI",
          reqContent: "chat-h5_reqContent__nYqIu",
          editIcon: "chat-h5_editIcon__HLPiO",
          hiddenIcon: "chat-h5_hiddenIcon__FABx2",
          inputContent: "chat-h5_inputContent__SzLlL",
          btnGroup: "chat-h5_btnGroup__aRGax",
          checkIcon: "chat-h5_checkIcon__bcNvc",
          closeIcon: "chat-h5_closeIcon__BddhK",
          loading: "chat-h5_loading__b6CbA",
          loadingInner: "chat-h5_loadingInner__tflvJ",
          load: "chat-h5_load__oVASk",
          fixClear: "chat-h5_fixClear__m9Qjb",
          bottomWrapper: "chat-h5_bottomWrapper__bVHdG",
          userOptions: "chat-h5_userOptions__MXeV8",
          switchVoice: "chat-h5_switchVoice__WEcIa",
          audioIcon: "chat-h5_audioIcon__Ra+ZP",
          textIcon: "chat-h5_textIcon__s7+37",
          stopPlayIcon: "chat-h5_stopPlayIcon__x+qbN",
          disabled: "chat-h5_disabled__LsBw7",
          send: "chat-h5_send__n9e+3",
          reCreate: "chat-h5_reCreate__nZh+0",
          size_0: "chat-h5_size_0__4vNcy",
          size_1: "chat-h5_size_1__jc9cX",
          size_2: "chat-h5_size_2__Lb4ub",
          size_3: "chat-h5_size_3__wruON",
          size_4: "chat-h5_size_4__1oCwk"
        },
        H = n(90439),
        J = n(37955),
        W = function () {
          function e() {
            var e;
            Q.current &&
              Y.current !==
                (null == (e = Q.current) ? void 0 : e.clientHeight) &&
              ((Y.current = null == (e = Q.current) ? void 0 : e.clientHeight),
              Be());
          }
          function t(e) {
            var t,
              n = e.text;
            e = e.recorder_url;
            re.current && (console.log("000000000", e), (le.current = !!e)),
              console.log("".concat(ie.current), n),
              ie.current &&
                (de || "0" === de
                  ? ve
                    ? n
                      ? (null != (t = oe.current) && t.setFalse(),
                        "#callback" ===
                          (null == n || null == (t = n.trim())
                            ? void 0
                            : t.toLowerCase()) && "sparkTalk" === A
                          ? (Te({ text: n, recorder_url: e, isAnswer: !1 }),
                            setTimeout(function () {
                              b("text");
                            }))
                          : "#sparktalking" ===
                              (null == n || null == (t = n.trim())
                                ? void 0
                                : t.toLowerCase()) && "sparkTalk" !== A
                          ? (Te({ text: n, recorder_url: e, isAnswer: !1 }),
                            console.log(222222),
                            setTimeout(function () {
                              b("sparkTalk");
                            }))
                          : (Te({ text: n, recorder_url: e, isAnswer: !0 }),
                            console.log(33333),
                            ee.current &&
                              (F(""), (ee.current.style.height = "3.6rem"))))
                      : d.FN.show(
                          "\u8bf7\u8f93\u5165\u8be2\u95ee\u5185\u5bb9\uff01"
                        )
                    : d.FN.show(
                        "\u8bf7\u7b49\u56de\u7b54\u5b8c\u6210\u540e\u518d\u53d1\u9001\u95ee\u9898"
                      )
                  : d.FN.show(
                      "\u4f1a\u8bddID\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u521b\u5efa\u5bf9\u8bdd"
                    ));
          }
          function n(e, t) {
            var n =
                2 < arguments.length && void 0 !== arguments[2] && arguments[2],
              a = 3 < arguments.length ? arguments[3] : void 0,
              c =
                (p.Z.updateAnswerStatus(1),
                n ||
                  (y(function (n) {
                    return [].concat((0, i.Z)(n), [
                      {
                        image: "".concat(e).concat(t),
                        origin: "req",
                        uid: (0, g.Z)()
                      }
                    ]);
                  }),
                  Be()),
                new FormData());
            c.set("chatId", de),
              c.set("link", t),
              a && c.set("prevOperate", a),
              console.log("/u/chat-model/chat,", "chatId:", de, ",link", t),
              (0, m.nV)(c)
                .then(function (c) {
                  n ||
                    (y(function (e) {
                      return (
                        (e[e.length - 1].noReAnswer = !0),
                        (e[e.length - 1].modelId = c.req.modelId),
                        (e[e.length - 1].operateList = c.operateList),
                        (0, i.Z)(e)
                      );
                    }),
                    (function (e) {
                      var t = e.image,
                        n = e.operate,
                        a = ((e = e.modelId), new FormData());
                      a.set("chatId", de),
                        a.set("link", t),
                        a.set("operate", n),
                        a.set("modelId", e),
                        xe(!0),
                        we(!1),
                        Be(),
                        (0, m.lJ)(a)
                          .then(function (e) {
                            var n;
                            ge
                              ? p.Z.clipBlock(
                                  JSON.stringify({ image: t, blockData: e })
                                )
                              : ((n = new FormData()).append("text", e.md),
                                (0, m.wy)(n)
                                  .then(function (t) {
                                    y(function (n) {
                                      return [].concat((0, i.Z)(n), [
                                        {
                                          message: e.md,
                                          origin: "resp",
                                          uid: (0, g.Z)(),
                                          language: t.language
                                        }
                                      ]);
                                    });
                                  })
                                  .catch(function (e) {
                                    console.warn(e);
                                  }),
                                Be());
                          })
                          .catch(function (e) {
                            console.error(e);
                          })
                          .finally(function () {
                            xe(!1),
                              we(!0),
                              console.log("2222222222222222222222");
                          });
                    })({
                      image: "".concat(e).concat(t),
                      operate: "4",
                      modelId: c.req.modelId
                    })),
                    "4" === a && Fe("", L, !1, c.req.modelId);
                })
                .catch(function (e) {
                  20005 === e.detail.code &&
                    y(function (e) {
                      return (e[e.length - 1].image = f), (0, i.Z)(e);
                    }),
                    console.error(e),
                    null != e &&
                      e.msg &&
                      d.FN.show({ content: e.msg, icon: "fail" });
                })
                .finally(function () {
                  p.Z.updateAnswerStatus(0);
                });
          }
          var a = (0, u.useState)(!1),
            c = (a = (0, r.Z)(a, 2))[0],
            v = a[1],
            w = ((a = (0, u.useState)(!1)), (a = (0, r.Z)(a, 2))[0]),
            j = a[1],
            C = ((a = (0, u.useState)(!1)), (a = (0, r.Z)(a, 2))[0]),
            Z = a[1],
            I = ((a = (0, u.useState)("1")), (a = (0, r.Z)(a, 2))[0]),
            S = a[1],
            A = ((a = (0, u.useState)("")), (a = (0, r.Z)(a, 2))[0]),
            b = a[1],
            L = ((a = (0, u.useState)([])), (a = (0, r.Z)(a, 2))[0]),
            y = a[1],
            B = ((a = (0, u.useState)(1)), (a = (0, r.Z)(a, 2))[0]),
            R = a[1],
            T = ((a = (0, u.useState)("")), (a = (0, r.Z)(a, 2))[0]),
            F = a[1],
            E = ((a = (0, u.useState)("")), (a = (0, r.Z)(a, 2))[0]),
            O = a[1],
            D = ((a = (0, u.useState)(!1)), (a = (0, r.Z)(a, 2))[0]),
            q = a[1],
            P = ((a = (0, u.useState)({ status: 1 })), (a = (0, r.Z)(a, 2))[0]),
            W = a[1],
            G = ((a = (0, u.useState)()), (a = (0, r.Z)(a, 2))[0]),
            X = a[1],
            M = ((a = (0, u.useState)({})), (a = (0, r.Z)(a, 2))[0]),
            V = a[1],
            U = ((a = (0, u.useState)("")), (a = (0, r.Z)(a, 2))[0]),
            K = a[1],
            Q = (0, u.useRef)(null),
            Y = (0, u.useRef)(0),
            $ = (0, u.useRef)(null),
            ee = (0, u.useRef)(null),
            te = (0, u.useRef)({ text: null, sid: null }),
            ne = (0, u.useRef)(),
            ae = (0, u.useRef)(!1),
            ce = (0, u.useRef)({
              url: "",
              form: null,
              oldList: null,
              token: ""
            }),
            oe = (0, u.useRef)(),
            se = (0, u.useRef)(!1),
            ie = (0, u.useRef)(!0),
            le = (0, u.useRef)(!1),
            re = (0, u.useRef)(!0),
            ue =
              ((a = (0, u.useState)("")),
              (a = (0, r.Z)(a, 1)[0]),
              (0, u.useState)("")),
            de = (ue = (0, r.Z)(ue, 2))[0],
            he = ue[1],
            ge = ((ue = (0, u.useState)("")), (ue = (0, r.Z)(ue, 2))[0]),
            _e = ue[1],
            me = ((ue = (0, u.useState)(!1)), (ue = (0, r.Z)(ue, 2))[0]),
            fe = ue[1],
            pe = ((ue = (0, u.useState)(!1)), (ue = (0, r.Z)(ue, 2))[0]),
            xe = ue[1],
            ve = ((ue = (0, u.useState)(!0)), (ue = (0, r.Z)(ue, 2))[0]),
            we = ue[1],
            je = ((ue = (0, u.useState)("")), (ue = (0, r.Z)(ue, 2))[0]),
            ke = ue[1],
            Ce = ((ue = (0, u.useState)("")), (ue = (0, r.Z)(ue, 2))[0]),
            Ze = ue[1],
            Ne = ((ue = (0, u.useState)([])), (ue = (0, r.Z)(ue, 2))[0]),
            Ie = ue[1],
            Se = ((ue = (0, u.useState)()), (ue = (0, r.Z)(ue, 2))[0]),
            Ae = ue[1],
            be = (0, u.useRef)(!1),
            Le =
              ((ue = (0, u.useState)({ name: "", mobile: "" })),
              (ue = (0, r.Z)(ue, 2))[0]),
            ye = ue[1],
            Be = function () {
              setTimeout(function () {
                var e;
                $ &&
                  null != (e = $.current) &&
                  e.scrollIntoView({ behavior: "smooth" });
              }, 100);
            },
            Re = function (e) {
              (0, m.W3)({ chatListId: de, chatListName: e }).catch(function (
                e
              ) {
                e.code;
              });
            },
            Te =
              ((0, u.useEffect)(
                function () {
                  (te.current = { text: null, sid: null }),
                    Ie([]),
                    y([]),
                    we(!0),
                    v(!1),
                    (ie.current = !0),
                    (ae.current = !1),
                    console.log(
                      "id:",
                      de,
                      "botId:",
                      ge,
                      "isNewRef",
                      be.current
                    ),
                    de &&
                      (be.current
                        ? setTimeout(function () {
                            p.Z.idChanged(de);
                          }, 0)
                        : (function (e) {
                            y([]),
                              v(!0),
                              (0, m.$i)(e)
                                .then(function (e) {
                                  var t, n;
                                  (e = e.historyList) && 0 < e.length
                                    ? ((e = e.map(function (e) {
                                        return (
                                          e &&
                                            (null != e && e.reqId
                                              ? (e.origin = "resp")
                                              : (e.origin = "req"),
                                            e.modelId) &&
                                            e.chatModel &&
                                            1 === e.chatModel.type &&
                                            ((e.image = e.chatModel.url),
                                            (e.message = "")),
                                          e
                                        );
                                      })),
                                      (te.current = {
                                        text:
                                          null == (n = e[e.length - 2])
                                            ? void 0
                                            : n.message,
                                        sid:
                                          (null == (n = e[e.length - 1])
                                            ? void 0
                                            : n.sid) || null
                                      }),
                                      (e[e.length - 1].lastResp = !0),
                                      y(e))
                                    : ((n =
                                        Ce ||
                                        "\u63a8\u8350\u4e00\u4e9b\u95ee\u9898\uff1f"),
                                      "send" !== je || se.current
                                        ? "input" === je &&
                                          ee.current &&
                                          (ke(""), Ze(""))
                                        : (Re(n.slice(0, 15)),
                                          (e = []),
                                          "#sparktalking" ===
                                            (null == n || null == (t = n.trim())
                                              ? void 0
                                              : t.toLowerCase()) &&
                                          "sparkTalk" !== A
                                            ? (Te({ text: n, isAnswer: !1 }),
                                              setTimeout(function () {
                                                b("sparkTalk");
                                              }))
                                            : (e.push({
                                                message: n,
                                                origin: "req",
                                                uid: (0, g.Z)()
                                              }),
                                              (document.title = n.slice(0, 15)),
                                              y(e),
                                              Fe(n, e),
                                              ke(""),
                                              Ze("")))),
                                    v(!1),
                                    Be(),
                                    p.Z.historyLoaded();
                                })
                                .catch(function (e) {
                                  console.log(e),
                                    100 === e.code ||
                                      [30002, 99996, 30012].includes(
                                        null == e || null == (e = e.detail)
                                          ? void 0
                                          : e.code
                                      ) ||
                                      d.FN.show(
                                        "\u83b7\u53d6\u4f1a\u8bdd\u5386\u53f2\u5f02\u5e38"
                                      );
                                });
                          })(de),
                      se.current ||
                        (0, m.Ag)()
                          .then(function (e) {
                            Ie(e),
                              setTimeout(function () {
                                be.current ||
                                  setTimeout(function () {
                                    p.Z.idChanged(de);
                                  }, 0);
                              }, 0);
                          })
                          .catch(function (e) {
                            console.error(e);
                          }));
                },
                [de]
              ),
              (0, u.useEffect)(
                function () {
                  var e;
                  de &&
                    Ne.length &&
                    ((e = Ne.find(function (e) {
                      return e.id === Number(de);
                    })),
                    V(e));
                },
                [de, Ne]
              ),
              (0, u.useEffect)(
                function () {
                  var e;
                  R(null != (e = null == M ? void 0 : M.enable) ? e : 1),
                    console.log("activeItem", M),
                    (ie.current =
                      null != (e = null == M ? void 0 : M.enable) ? e : 1);
                },
                [M]
              ),
              (0, u.useEffect)(
                function () {
                  0 === B &&
                    (p.Z.chatIsBlocked(), console.log("chatIsBlocked"));
                },
                [B]
              ),
              function (e) {
                var t = e.text,
                  n = e.recorder_url,
                  a =
                    ((e = e.isAnswer),
                    (te.current = (0, l.Z)(
                      (0, l.Z)({}, te.current),
                      {},
                      { text: t, recorder_url: n }
                    )),
                    (0, i.Z)(L));
                0 !== a.length || se.current || Re(t.slice(0, 15)),
                  a.push({
                    message: t,
                    recorder_url: n,
                    origin: "req",
                    uid: (0, g.Z)()
                  }),
                  y(a),
                  e &&
                    setTimeout(function () {
                      Fe(t, a);
                    }),
                  Be();
              }),
            Fe = function (e, t, n, a) {
              xe(!0);
              var c,
                o = (o = String(+new Date())).substring(o.length - 6),
                s = (O(o), new FormData());
              null != s && s.append("fd", o),
                null != s && s.append("clientType", "5"),
                a
                  ? ((c = "".concat(
                      H.Z.API_BASE_URL,
                      "/iflygpt-app/u/chat_message/model"
                    )),
                    s.append("chatId", de))
                  : n
                  ? ((c = "".concat(
                      H.Z.API_BASE_URL,
                      "/iflygpt-app/u/chat_message/reAnswer"
                    )),
                    s.append("chatId", de),
                    null != (o = te.current) &&
                      o.text &&
                      s.append("text", te.current.text))
                  : ((c = "".concat(
                      H.Z.API_BASE_URL,
                      "/iflygpt-app/u/chat_message/chat"
                    )),
                    s.append("chatId", de),
                    s.append("text", e)),
                console.log("chatId: ".concat(de)),
                (n = window);
              try {
                n.initGeeGuard(
                  { appId: "ihuqg3dmuzcr2kmghumvivsk7c3l4joe" },
                  function (e) {
                    Oe(
                      c,
                      s,
                      t,
                      null == e || null == (e = e.data) ? void 0 : e.gee_token,
                      a
                    );
                  }
                );
              } catch (e) {
                console.warn(e), Oe(c, s, t, "");
              }
            };
          function Ee() {
            var e = new FormData();
            e.append("fd", E),
              e.append("chatId", de),
              xe(!1),
              we(!0),
              (0, m.I5)(e)
                .then(function () {
                  var e;
                  (te.current.sid = null),
                    y(function (e) {
                      return ((e[e.length - 1].sid = null), i.Z)(e);
                    }),
                    null != (e = ne.current) && e.abort("\u7ed3\u675f");
                })
                .catch(function (e) {
                  console.warn(e);
                })
                .finally(function () {
                  console.log("9999999999999999999999");
                });
          }
          var Oe = function (t, n, a, c, o, r) {
            s && clearTimeout(s);
            var u = {
                message: "",
                origin: "resp",
                sid: "",
                id: (0, g.Z)(),
                language: "false",
                end: !0,
                modelId: r
              },
              d = "",
              f = "",
              x = "",
              v = !1,
              w =
                ((r =
                  (K(""),
                  xe(!0),
                  we(!1),
                  n.append("GtToken", c),
                  {
                    Challenge: null == o ? void 0 : o.geetest_challenge,
                    Seccode: h.DS.encode(
                      null == o ? void 0 : o.geetest_seccode
                    ),
                    Validate: null == o ? void 0 : o.geetest_validate
                  })),
                new AbortController());
            (ne.current = w),
              Be(),
              (0, _.L)(t, {
                method: "POST",
                headers: (0, l.Z)({}, r),
                body: n,
                signal: w.signal,
                openWhenHidden: !0,
                fetch: function (e, t) {
                  return window.fetch(
                    e,
                    (0, l.Z)((0, l.Z)({}, t), {}, { credentials: "include" })
                  );
                },
                onopen: function (e) {
                  return (
                    401 === e.status && p.Z.login(),
                    window.navigator.onLine && p.Z.updateAnswerStatus(1),
                    xe(!1),
                    (e = [].concat((0, i.Z)(a), [u])),
                    y(e),
                    Promise.resolve()
                  );
                },
                onmessage: function (o) {
                  var s;
                  console.log(o.data),
                    "<end>" !== o.data || f || x
                      ? "<end>" === o.data && f
                        ? ((u.end = !1),
                          20002 === (s = JSON.parse(f.slice(7))).key &&
                            (R(0), (ie.current = !1)),
                          (u.message = s.descr),
                          console.log(u),
                          ((s = [].concat((0, i.Z)(a), [u]))[s.length - 1] = u),
                          y(s),
                          w.abort("\u7ed3\u675f"),
                          we(!0),
                          console.log("444444444444444444444"),
                          p.Z.updateAnswerStatus(0),
                          e())
                        : "<end>" === o.data && x
                        ? (console.log(x.slice(10)),
                          (s = JSON.parse(x.slice(10))),
                          K(s.descr),
                          w.abort("\u7ed3\u675f"),
                          we(!0),
                          console.log("555555555555555555555"),
                          p.Z.updateAnswerStatus(0),
                          p.Z.verify(),
                          e())
                        : "[error]" === o.data
                        ? (f += o.data)
                        : "[belongerr]" !== o.data &&
                          ("<kx>" === o.data
                            ? (R(0), (ie.current = !1))
                            : "[geeError]" === o.data
                            ? ((s = (0, i.Z)(a)),
                              y(s),
                              (ce.current = {
                                url: t,
                                form: n,
                                oldList: a,
                                token: c
                              }),
                              (x += o.data))
                            : (x || f || v
                                ? !f && v && -1 !== o.data.indexOf("<sid>")
                                  ? ((u.sid = o.data.split("<sid>")[0]),
                                    (s = new FormData()).append(
                                      "text",
                                      u.message
                                    ),
                                    (0, m.wy)(s)
                                      .then(function (e) {
                                        u.language = e.language;
                                      })
                                      .catch(function (e) {
                                        console.warn(e);
                                      })
                                      .finally(function () {
                                        console.log(u);
                                        var e = [].concat((0, i.Z)(a), [u]);
                                        y(e),
                                          console.log(
                                            "xxxxxxxxxx",
                                            le,
                                            u.id,
                                            u.message,
                                            u.language
                                          ),
                                          le.current &&
                                            (oe.current.changePlay(
                                              u.id,
                                              u.message,
                                              u.language
                                            ),
                                            (le.current = !1)),
                                          w.abort("\u7ed3\u675f");
                                      }))
                                  : !f && v && -1 === o.data.indexOf("<sid>")
                                  ? w.abort("\u7ed3\u675f")
                                  : x
                                  ? (x += o.data)
                                  : (f += o.data)
                                : ((d = ""
                                    .concat(d)
                                    .concat(h.DS.decode(o.data))),
                                  (u.message = d),
                                  (s = [].concat((0, i.Z)(a), [u])),
                                  y(s)),
                              e()))
                      : ((v = !0),
                        (u.end = !1),
                        we(!0),
                        console.log("333333333333333333333"),
                        p.Z.updateAnswerStatus(0),
                        e());
                },
                onclose: function () {
                  (0, m.C9)().then(function (e) {
                    e &&
                      y(function (e) {
                        return (e[e.length - 1].addictionTip = !0), (0, i.Z)(e);
                      });
                  });
                },
                onerror: function (e) {
                  console.warn(e, "fetchError"),
                    xe(!1),
                    we(!0),
                    console.log("6666666666666666666"),
                    window.navigator.onLine && p.Z.updateAnswerStatus(0),
                    (u.message =
                      "\u7f51\u7edc\u597d\u50cf\u51fa\u4e86\u4e2a\u5c0f\u5dee\uff0c\u53ef\u4ee5\u5237\u65b0\u9875\u9762\u8bd5\u4e00\u4e0b\u3002"),
                    (e = [].concat((0, i.Z)(a), [u])),
                    y(e),
                    w.abort("\u7ed3\u675f");
                }
              })
                .then(function (e) {
                  console.log(e),
                    we(!0),
                    console.log("7777777777777777777"),
                    w.abort("\u7ed3\u675f"),
                    (s = setTimeout(function () {
                      b("text");
                    }, 3e5));
                })
                .catch(function (e) {
                  console.warn(e, "chat\u63a5\u53e3\u5f02\u5e38\u4e2d\u65ad"),
                    we(!0),
                    console.log("8888888888888888888"),
                    w.abort("\u7ed3\u675f");
                });
          };
          return (
            (0, u.useEffect)(
              function () {
                (window.sendH5Question = function (e) {
                  ((e = JSON.parse(e)).text = h.DS.decode(e.text)), t(e);
                }),
                  (window.stopH5Answer = Ee),
                  (window.setChatId = function (e) {
                    var t =
                        1 < arguments.length && void 0 !== arguments[1]
                          ? arguments[1]
                          : "0",
                      n =
                        2 < arguments.length && void 0 !== arguments[2]
                          ? arguments[2]
                          : "1",
                      a =
                        3 < arguments.length && void 0 !== arguments[3]
                          ? arguments[3]
                          : "0";
                    console.log("setChatId=====", e, t, n),
                      he(e),
                      (be.current = "1" === t),
                      j("1" === a),
                      R(Number(n));
                  }),
                  (window.setH5BotParam = function (e) {
                    var t = (e = JSON.parse(e)).botId,
                      n = e.botName;
                    e = e.botDesc;
                    _e(t),
                      t
                        ? ((se.current = !0), (ie.current = !0))
                        : (se.current = !1),
                      (document.title = n),
                      Ae(e);
                  }),
                  (window.sendModalMessage = function (e) {
                    n((e = JSON.parse(e)).host, (e = e.link));
                  }),
                  (window.cancelCheck = function () {
                    y(function (e) {
                      return (
                        e.forEach(function (e) {
                          e.checked = !1;
                        }),
                        (0, i.Z)(e)
                      );
                    }),
                      fe(!1);
                  }),
                  (window.getCheckList = function () {
                    var e = [];
                    return (
                      L.forEach(function (t) {
                        t.checked &&
                          !t.hidden &&
                          e.push({
                            id: t.id,
                            origin: t.origin,
                            image: t.image,
                            message: t.message
                          });
                      }),
                      h.DS.encode(JSON.stringify(e))
                    );
                  }),
                  (window.resolveMath = function (e) {
                    n((e = JSON.parse(e)).host, (e = e.link), !0, "4");
                  }),
                  (window.verifySuccess = function (e) {
                    console.log("success", e),
                      (e = JSON.parse(e)),
                      K(""),
                      Oe(
                        ce.current.url,
                        ce.current.form,
                        ce.current.oldList,
                        ce.current.token,
                        e
                      );
                  }),
                  (window.verifyFail = function () {
                    console.log("fail");
                  }),
                  (window.switchAutoPlay = function (e) {
                    re.current = "1" === e;
                  }),
                  (window.restartBotChat = function () {
                    var e = L.length;
                    0 === e ||
                      (null != (e = L[e - 1]) && e.needDraw) ||
                      (y(function (e) {
                        return (e[e.length - 1].needDraw = !0), (0, i.Z)(e);
                      }),
                      Be(),
                      (e = new FormData()).set("chatId", de),
                      (0, m.mo)(e).catch(console.error));
                  }),
                  (window.changeFontSize = function (e) {
                    S(e);
                  });
              },
              [t, Ee, he, R, j, L]
            ),
            (0, u.useEffect)(function () {
              "show" ===
                new URLSearchParams(location.search).get("watermark") &&
                (Z(!0),
                (function e() {
                  var t = null != (t = sessionStorage.getItem("name")) ? t : "",
                    n = null != (n = sessionStorage.getItem("mobile")) ? n : "";
                  t && n && ye({ name: t, mobile: n }),
                    setTimeout(function () {
                      e();
                    }, 1e3);
                })(),
                (0, m.bG)().then(function (e) {
                  var t;
                  ye({
                    name: null == (t = e.userInfo.realName) ? void 0 : t[0],
                    mobile: e.userInfo.mobile
                  });
                }));
            }, []),
            (0, k.jsxs)("div", {
              className: ""
                .concat(z.chatContainer, " ")
                .concat(z["size_".concat(I)]),
              id: "chatContainer",
              children: [
                (0, k.jsxs)("div", {
                  className: z.chatContent,
                  children: [
                    C
                      ? (0, k.jsx)("div", {
                          className: z.watermark_wrapper,
                          id: "watermark-wrapper",
                          children: (0, k.jsx)(J.Z, {
                            content: [
                              "AI\u8f93\u51fa\u5185\u5bb9 \u4ec5\u4f9b\u53c2\u8003",
                              ""
                                .concat(Le.mobile, " ")
                                .concat(
                                  (null == (ue = Le.name)
                                    ? void 0
                                    : ue.slice(0, 1)) || ""
                                )
                            ],
                            zIndex: 3,
                            gap: [38, 38],
                            offset: void 0,
                            font: {
                              color:
                                null != (I = window) &&
                                null !=
                                  (C = I.matchMedia(
                                    "(prefers-color-scheme: dark)"
                                  )) &&
                                C.matches
                                  ? "rgba(100,100,100,0.5)"
                                  : "rgba(188,188,188,0.5)",
                              fontSize: 14
                            }
                          })
                        })
                      : null,
                    ge && 0 === (null == L ? void 0 : L.length) && !c
                      ? (0, k.jsxs)("div", {
                          className: z.botHelper,
                          children: [
                            (0, k.jsx)("div", {
                              className: z.title,
                              children:
                                "\u60a8\u597d\uff0c\u6211\u662f\u60a8\u7684\u661f\u706b\u5c0f\u52a9\u624b"
                            }),
                            (0, k.jsx)("p", {
                              className: z.gptContent,
                              children: Se
                            })
                          ]
                        })
                      : null,
                    (0, k.jsx)(N, {
                      ref: function (e) {
                        return (oe.current = e);
                      },
                      checkable: me,
                      chatType: A,
                      $answerRef: Q,
                      list: L,
                      tempInputContent: T,
                      enable: B,
                      avatarImg: a,
                      answerLoading: pe,
                      answerComplete: ve,
                      setCheckable: fe,
                      reAnswerEvent: function () {
                        var e, t, n;
                        pe ||
                          !ve ||
                          ae.current ||
                          ((ae.current = !0),
                          null != (e = oe.current) && e.setFalse(),
                          (t = (0, i.Z)(L)),
                          (te.current.text =
                            null == (e = t[t.length - 2]) ? void 0 : e.message),
                          console.log(t[t.length - 1]),
                          (n = t[t.length - 1].modelId),
                          "resp" === t[t.length - 1].origin && t.pop(),
                          y(t),
                          setTimeout(function () {
                            Fe("", t, !0, n), (ae.current = !1);
                          }));
                      },
                      setTempInputContent: function (e) {
                        return F(e);
                      },
                      reSubmit: function (e) {
                        return (
                          null != (t = oe.current) && t.setFalse(),
                          e &&
                            ((te.current.text = T),
                            (n = (0, i.Z)(L)).pop(),
                            n.pop(),
                            n.push({
                              message: T,
                              origin: "req",
                              uid: (0, g.Z)()
                            }),
                            y(n),
                            setTimeout(function () {
                              Fe(T, n, !0);
                            }),
                            Be()),
                          void F("")
                        );
                        var t, n;
                      },
                      judge: function (e, t, n) {
                        return (
                          W({ sid: e.sid, chatId: Number(de), status: t }),
                          X(n),
                          void q(!0)
                        );
                      },
                      toggleCheck: function (e) {
                        y(function (t) {
                          var n,
                            a = JSON.parse(JSON.stringify(t)),
                            c =
                              ((t[e].checked = !t[e].checked),
                              (t[e].height =
                                null ==
                                (n = document.getElementById(
                                  "chat_item_".concat(e)
                                ))
                                  ? void 0
                                  : n.clientHeight),
                              "req" === t[e].origin
                                ? ((t[e + 1].checked = !t[e + 1].checked),
                                  (t[e + 1].height =
                                    null ==
                                    (n = document.getElementById(
                                      "chat_item_".concat(e + 1)
                                    ))
                                      ? void 0
                                      : n.clientHeight))
                                : ((t[e - 1].checked = !t[e - 1].checked),
                                  (t[e - 1].height =
                                    null ==
                                    (n = document.getElementById(
                                      "chat_item_".concat(e - 1)
                                    ))
                                      ? void 0
                                      : n.clientHeight)),
                              0);
                          return (
                            t.forEach(function (e) {
                              e.checked && (c += e.height);
                            }),
                            console.log(
                              "\u5206\u4eab\u56fe\u7247\u603b\u9ad8\u5ea6\uff1a",
                              c
                            ),
                            4e3 < c
                              ? (d.FN.show({
                                  content: (0, k.jsx)("p", {
                                    style: { textAlign: "center" },
                                    children:
                                      "\u60a8\u9009\u62e9\u7684\u5bf9\u8bdd\u6570\u91cf\u8fc7\u591a"
                                  })
                                }),
                                (0, i.Z)(a))
                              : (0, i.Z)(t)
                          );
                        });
                      },
                      skeletonShow: c,
                      lastTipShow: w
                    }),
                    U &&
                      (0, k.jsx)("div", {
                        className: z.chatItem,
                        children: (0, k.jsx)("div", {
                          className: z.gptContent,
                          children: (0, k.jsx)(x.Z, { mdText: U })
                        })
                      }),
                    pe &&
                      (0, k.jsx)("div", {
                        className: z.chatItem,
                        children: (0, k.jsxs)("div", {
                          className: z.gptContent,
                          children: [
                            (0, k.jsx)("div", {
                              className: z.loading,
                              children: (0, k.jsx)("div", {
                                className: z.loadingInner
                              })
                            }),
                            "\u56de\u7b54\u4e2d..."
                          ]
                        })
                      }),
                    (0, k.jsx)("div", { ref: $, className: z.fixClear })
                  ]
                }),
                (0, k.jsx)(o, {
                  judgeObj: P,
                  visible: D,
                  onClose: function () {
                    return q(!1);
                  },
                  changeTemStatus: function (e) {
                    var t;
                    (t = (0, i.Z)(L)), G && ((t[G].status = e), y(t));
                  }
                })
              ]
            })
          );
        };
    },
    86298: function (e) {
      e.exports =
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAgdJREFUWEftl01IVFEUx393HEQtBlMw+5IgQ92UuMmVWiFC4EAguZEEFxaSo4GEM62kRSqK0mCLKHDjYggcGGgRIhJiCEGRIBQuxAhqUPKrzDS9ceciNWHNe+PMvM27q/cO75zf//7fPReOAHDfkUU4uS/hMhKXiiVtCdYEjPMTb6hXvBcKLtOYBrKTBt2/8IrYoVy4fXJUSq6mGB7BCUFQ1PrkatJt/9fu1O+o9Uppxe73mLYA24GEO3A4E0oLwZkG859gIfz/I55QAelO6GuB0/mgeqtrGF7PpVDATTdcKdfA0BQ8fha7wRPmwIUS8DVEbreI9R0PYXsnRQJyXPDAA64s+LEFt4fg42JseOQ6jnUTNtZAVgYsr8PoJGxtRxdWO77XBOfO6PhQEJ6/MgY3JKChGq5d1AUn3sDA0+jidZVwvUbHXs5C94hxuCEBDgd0N0NxgS7cH4AXb/Xz2ZPQc0O33NIKePzw9XuCBahyR4/AYCscyoCNTWjzw9oGDN6CY7mwuwt3n8DsvDm4IQf2Slach456/fbuA3z+AlWl+j0wASNj5uGmBKiP2+vgUlk0SInpfKRdiGfF7II/i2amw0ArHM/V0W+b0O6H8HI8aJ1jSoBKKDzx++D1BWByJn54XAJU0qk8fSCV/Qddph04KPDvfFuA7YD1g4nlo5nlw6nqSyvH818CstKtzcFqPwAAAABJRU5ErkJggg==";
    },
    7431: function (e, t, n) {
      e.exports = n.p + "static/media/placeholder.a2205bf6bc73cd78d376.png";
    }
  }
]);
