/*! For license information please see page.373e5fea.js.LICENSE.txt */
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["1621"],{84431:function(e,t,n){"use strict";n.d(t,{ReactComponent:function(){return i}});var r=n("9161"),o=n("16044"),a=n("97458");n("52983");var i=function(e){return(0,a.jsxs)("svg",(0,o._)((0,r._)({xmlns:"http://www.w3.org/2000/svg",width:64,height:64,fill:"none",viewBox:"0 0 64 64"},e),{children:[(0,a.jsx)("circle",{cx:32,cy:32,r:32,fill:"#FF2D55",opacity:.1}),(0,a.jsx)("path",{fill:"#FF453A",d:"M43.668 35.094q0 2.355-.984 4.101-.985 1.746-2.848 2.707-1.852.961-4.477.961h-2.812q-.574 0-.938-.375a1.26 1.26 0 0 1-.363-.914q0-.527.363-.902.364-.375.938-.375h2.73q1.886 0 3.188-.691 1.313-.692 1.98-1.887.68-1.195.68-2.719t-.68-2.695q-.668-1.172-1.98-1.828-1.3-.668-3.188-.668h-7.453l-3.949-.176.363-.668 2.93 2.473 3.012 2.93q.164.163.27.386.105.222.105.504 0 .54-.352.89-.34.352-.914.352-.527 0-.914-.398l-6.738-6.621a1.4 1.4 0 0 1-.305-.446 1.296 1.296 0 0 1 0-1.02q.105-.257.305-.445l6.738-6.62q.387-.41.914-.41.575 0 .914.35.352.352.352.903 0 .281-.106.504-.105.21-.27.387l-3.011 2.941-2.93 2.473-.363-.68 3.95-.187h7.382q2.66 0 4.559 1.007 1.898.996 2.894 2.766 1.008 1.77 1.008 4.09"})]}))}},50184:function(e,t,n){"use strict";n.d(t,{ReactComponent:function(){return i}});var r=n("9161"),o=n("16044"),a=n("97458");n("52983");var i=function(e){return(0,a.jsxs)("svg",(0,o._)((0,r._)({xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",viewBox:"0 0 32 32"},e),{children:[(0,a.jsxs)("g",{clipPath:"url(#back-to-master_svg__a)",children:[(0,a.jsx)("rect",{width:32,height:32,fill:"#FF3B30",rx:10}),(0,a.jsx)("path",{fill:"#fff",d:"M23.944 19.178q0 1.668-.697 2.905-.698 1.237-2.017 1.918-1.312.68-3.171.68h-1.993a.896.896 0 0 1-.921-.913q0-.373.257-.64a.88.88 0 0 1 .664-.265h1.935q1.335 0 2.257-.49.93-.489 1.403-1.336.482-.846.482-1.926 0-1.079-.482-1.909-.473-.83-1.403-1.295-.921-.473-2.258-.473h-5.279l-2.797-.124.257-.474 2.075 1.752 2.134 2.075a1 1 0 0 1 .19.274q.075.158.075.357a.86.86 0 0 1-.249.63q-.24.25-.647.25a.87.87 0 0 1-.648-.282l-4.773-4.69a1 1 0 0 1-.215-.316.9.9 0 0 1 0-.722.9.9 0 0 1 .215-.315l4.773-4.69a.86.86 0 0 1 .648-.29q.406 0 .647.248.25.25.25.64a.8.8 0 0 1-.075.356q-.075.15-.191.274l-2.134 2.084-2.075 1.751-.257-.481 2.797-.133h5.23q1.884 0 3.229.714 1.345.705 2.05 1.959.714 1.253.714 2.897"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"back-to-master_svg__a",children:(0,a.jsx)("rect",{width:32,height:32,fill:"#fff",rx:10})})})]}))}},97114:function(e,t,n){"use strict";n.d(t,{CodeInputContent:function(){return s}});var r=n("92769"),o=n("88802"),a=n("52983"),i=n("37884"),s=(0,n("54650").withSuspense)(a.lazy((0,r._)(function(){var e;return(0,o.__generator)(this,function(t){switch(t.label){case 0:return e={},[4,i.FlowAccount.FlowAccountComponents.CodeInputContent];case 1:return[2,(e.default=t.sent(),e)]}})})))},15280:function(e,t,n){"use strict";n.d(t,{MobileInput:function(){return s}});var r=n("92769"),o=n("88802"),a=n("52983"),i=n("37884"),s=(0,n("54650").withSuspense)(a.lazy((0,r._)(function(){var e;return(0,o.__generator)(this,function(t){switch(t.label){case 0:return e={},[4,i.FlowAccount.FlowAccountComponents.MobileInput];case 1:return[2,(e.default=t.sent(),e)]}})})))},96702:function(e,t,n){"use strict";n.d(t,{ClearContextSetting:function(){return h}});var r=n("92769"),o=n("88802"),a=n("97458"),i=n("87382"),s=n("54769"),c=n("75761"),u=n("11068"),l=n("96317"),d=n("43796"),g=n("53268"),f=n("59240"),_=n("72676"),h=function(e){var t,n=e.conversationId,h=e.botId,v=e.onSuccess,m=(0,_.useTranslateFn)(),p=(0,s.useClearContext)();var b=(t=(0,r._)(function(){var e,t,r;return(0,o.__generator)(this,function(o){switch(o.label){case 0:if((0,f.trackEvent)("click_setting_clear_context"),h&&!n)return g.Toast.success({content:m("context_cleared"),showClose:!1}),[2];if(!n)return i.logger.persist.error({message:"clear context failed",error:Error("non-conversationId")}),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,p(n)];case 2:return o.sent(),(0,f.trackEvent)("setting_clear_context_result",{success:1,bot_id:null!=h?h:(0,c.getBotIdByConversationId)(n)}),g.Toast.success({content:m("context_cleared"),showClose:!1}),null==v||v(),[3,4];case 3:if(e=o.sent(),(0,f.trackEvent)("setting_clear_context_result",{success:0,bot_id:null!=h?h:(0,c.getBotIdByConversationId)(n),err_code:null==e?void 0:e.code,err_tips:null==e?void 0:e.message}),i.logger.persist.error({message:"clear context failed",error:e}),(0,u.isApiErrorWithI18n)(e))return(r=null==e?void 0:null===(t=e.errorOption)||void 0===t?void 0:t.message)&&g.Toast.error(r),[2];return g.Toast.error({content:m("clear_context_failed"),showClose:!1}),[3,4];case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,a.jsx)(d.SettingItem,{icon:(0,a.jsx)(l.ClearContextIcon,{}),title:m("clear_context"),showNextIcon:!1,onClick:b,"data-testid":"clear_context_setting"})}},63691:function(e,t,n){"use strict";n.d(t,{useClearHistory:function(){return b}});var r=n("92769"),o=n("40509"),a=n("88802"),i=n("97458"),s=n("33434"),c=n("87382"),u=n("10630"),l=n("62920"),d=n("59157"),g=n("11068"),f=n("96317"),_=n("53268"),h=n("59240"),v=n("76185"),m=n("72676"),p=n("2738"),b=function(e){var t=(0,u.useConversation)(e)||{},n=(0,m.useTranslateFn)(),b=(0,o._)((0,l.useChatStore)(function(e){return[e.insertConversationToLinks,e.clearConversationMessages]},s.shallow),2),C=b[0],S=b[1];return function(){(0,h.trackEvent)("click_setting_clear_message"),_.Modal.confirm({title:n("delete_chat_double_confirmation_title"),content:n("delete_chat_double_confirmation_text"),icon:(0,i.jsx)(f.VectorIcon,{}),centered:!0,cancelText:n("delete_chat_double_confirmation_cancel"),okText:n("delete_chat_double_confirmation_delete"),okButtonProps:{type:"danger","data-testid":"clear_history_dialog_confirm_button"},cancelButtonProps:{"data-testid":"clear_history_dialog_cancel_button"},onCancel:function(){(0,h.trackEvent)("click_clear_message_cancel")},onOk:(0,r._)(function(){var r,o,i;return(0,a.__generator)(this,function(a){switch(a.label){case 0:(0,h.trackEvent)("click_clear_message_confirm",{bot_id:null==t?void 0:t.bot_id}),a.label=1;case 1:return a.trys.push([1,3,,4]),(0,d.handleLocalBreak)(t.conversation_id||""),S(t.conversation_id||""),[4,v.apiService.conversation.ConversationClear({conversation_id:t.conversation_id})];case 2:return a.sent(),(0,h.trackEvent)("setting_clear_message_result",{success:1}),e&&C({conversationId:e,index:1}),(0,p.checkAndPauseMusicOnDeleteConversation)(e),_.Toast.success({content:n("clear_chat_history_success"),showClose:!1}),[3,4];case 3:if(r=a.sent(),(0,h.trackEvent)("setting_clear_message_result",{success:0,err_code:null==r?void 0:r.code,err_tips:r.message}),c.logger.persist.error({message:"clear message failed",error:r}),(0,g.isApiErrorWithI18n)(r))return(i=null==r?void 0:null===(o=r.errorOption)||void 0===o?void 0:o.message)&&_.Toast.error(i),[2];return _.Toast.error({content:n("clear_chat_history_failed"),showClose:!1}),[3,4];case 4:return[2]}})})})}}},82754:function(e,t,n){"use strict";n("53268"),n("45431")},41509:function(e,t,n){"use strict";n.d(t,{MobileSamanthaSidebarButton:function(){return S},MobileSidebarButton:function(){return C}});var r=n("9161"),o=n("89334"),a=n("40509"),i=n("97458"),s=n("33434"),c=n("23898"),u=n("47282"),l=n("87608"),d=n.n(l),g=n("62920"),f=n("75761"),_=n("53277"),h=n("96317"),v=n("18784"),m=n("18271"),p=n("52064"),b=function(){var e=(0,g.useChatStore)(function(e){return e.lastMessageIndexMap},s.shallow);return(0,c.default)((0,u.default)(e),function(e,t){var n=(0,a._)(t,2),r=n[0],o=n[1],i=g.useChatStore.getState(),s=i.conversationMap[r],c=i.messageLinkMap[r];return e+(0,f.getUnreadCount)({message_index:(0,_.getLastMessageIndexForUnreadCount)((null==s?void 0:s.conversation_id)||"",c,o),read_message_index:o.read_message_index})},0)},C=function(e){var t=e.className,n=(0,o._)(e,["className"]),a=(0,m.useFlowSlotsContext)().changeSideBarVisible,s=b();return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(v.SidebarButton,(0,r._)({type:"open",className:d()(t,p.btn),onClick:a,icon:s>0?"chat-header-side-count":"chat-header-side"},n))})},S=function(){var e=(0,m.useFlowSlotsContext)().changeSideBarVisible,t=b();return(0,i.jsx)("div",{className:p.samantha,onClick:e,children:t>0?(0,i.jsx)(h.ChatHeaderSamanthaCountIcon,{}):(0,i.jsx)(h.ChatHeaderSamanthaIcon,{})})}},18784:function(e,t,n){"use strict";n.d(t,{SidebarButton:function(){return c}});var r=n("83316"),o=n("97458"),a=n("99136"),i=n("96317"),s=n("1284"),c=function(e){var t,n=e.icon,c=e.type,u=e.className,l=e.style,d=e.onClick,g=e.hoverable,f=e.theme,_=e.size,h=(0,a.useMobile)().setMobileSidebarVisible,v=(t={menu:(0,o.jsx)(i.MenuIcon,{})},(0,r._)(t,"arrow-right",(0,o.jsx)(i.ArrowRightIcon,{})),(0,r._)(t,"arrow-left",(0,o.jsx)(i.ArrowLeftIcon,{})),(0,r._)(t,"chat-header-side",(0,o.jsx)(i.ChatHeaderSideIcon,{})),(0,r._)(t,"chat-header-side-count",(0,o.jsx)(i.ChatHeaderSideCountIcon,{})),t);return(0,o.jsx)(s.IconButton,{theme:void 0===f?"borderless":f,size:_,style:l,className:u,icon:v[void 0===n?"menu":n],onClick:function(){d?null==d||d():h("open"===c)},setSvgFull:!1,hoverable:g})}},18271:function(e,t,n){"use strict";n.d(t,{FlowSlotsProvider:function(){return i},useFlowSlotsContext:function(){return a}});var r=n("52983"),o=(0,r.createContext)(null),a=function(){var e=(0,r.useContext)(o);if(!e)throw Error("useFlowSlotsContext must be used within a FlowSlotsContext");return e},i=o.Provider},76392:function(e,t,n){"use strict";n("97458"),n("52983"),n("87382"),n("94686"),n("72676"),n("57018")},36196:function(e,t,n){"use strict";n.d(t,{ChatSettingFeatureBlock:function(){return u}});var r=n("97458"),o=n("76628"),a=o.WebSettingComponents.SettingBlock,i=o.WebSettingComponents.AnswerSuggestSetting,s=o.WebSettingComponents.AnswerWithVideoSetting,c=o.WebSettingComponents.HighLightEntityWordSetting,u=function(){var e=(0,o.useSettingConfig)("answer_with_suggest"),t=(0,o.useSettingConfig)("named_entity_highlight"),n=(0,o.useSettingConfig)("answer_with_video");return e.enabled||t.enabled||n.enabled?(0,r.jsxs)(a,{children:[(0,r.jsx)(i,{}),(0,r.jsx)(s,{}),(0,r.jsx)(c,{})]}):null}},76628:function(e,t,n){"use strict";n.d(t,{WebSettingComponents:function(){return S},useSettingConfig:function(){return x}});var r=n("69420"),o=n("6462"),a=n("29048"),i=n("87382"),s=n("29794"),c=n("75995"),u=n("49503"),l=n("45431"),d=n("59240"),g=n("37884"),f=n("76185"),_=n("72676"),h=n("15280"),v=n("97114");function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(void 0===t?"undefined":(0,a._)(t))?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=new function e(){var t;(0,r._)(this,e),m(this,"getLanguage",function(){return u.I18n.language}),m(this,"getTranslate",function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=u.I18n).t.apply(t,[e].concat((0,o._)(r)))}),m(this,"useTranslateFn",_.useTranslateFn)},b=c.useFeatureConfigStore.getState().featureConfig,C=(0,s.initSettingKit)({i18n:p,logger:i.logger,trackEvent:d.trackEvent,ApiService:f.apiService,launchData:b,rawAxiosInstance:f.rawAxiosInstance,isEnableDebug:l.isEnableDebug,passportApi:g.FlowAccount.passportApi,flowAccount:g.FlowAccount.flowAccount,FlowAccountComponents:{MobileInput:h.MobileInput,CodeInputContent:v.CodeInputContent}}),S=C.WebSettingComponents,x=C.useSettingConfig;C.useSettingStore},11038:function(e,t,n){"use strict";n.r(t);var r=n("92769"),o=n("83316"),a=n("40509"),i=n("88802"),s=n("97458"),c=n("52983"),u=n("33434");n("86724");var l=n("87608"),d=n.n(l),g=n("87382"),f=n("18545"),_=n("40789"),h=n("89066"),v=n("99136"),m=n("54915"),p=n("65042"),b=n("78597"),C=n("32156"),S=n("71383"),x=n("75761"),k=n("62920"),w=n("61760"),y=n("85397"),M=n("96317"),I=n("68628"),j=n("32208"),A=n("62560"),E=n("90795"),L=n("53268"),F=n("45457"),P=n("45431"),W=n("96535"),T=n("94686"),B=n("62966"),N=n("59240"),R=n("37884"),O=n("72676"),U=n("50855"),q=n("58013"),H=n("58416"),D=n("27730"),z=n("76628"),V=n("36196");n("76392");var G=n("41509");n("82754"),n("63691"),n("96702");var K=n("45646"),J=(0,b.isSamanthaClient)(),Q=W.featureEnableChat?(0,g.withErrorBoundary)(function(){var e,t=(0,O.useTranslateFn)(),n=(0,E.default)().Plugins.Tea,l=(0,j.useNavigate)(),g=(0,a._)((0,A.useSearchParams)(),1)[0],b=(0,T.useUserInfo)(),W=(0,a._)((0,B.useGlobalStore)(function(e){return[e.discordLink]},u.shallow),1)[0],U=(0,a._)((0,T.useUserStore)(function(e){return[e.hitStatusHitSource,e.updateUserHitStatusHitSource]},u.shallow),2),q=U[0],Q=U[1],Y=g.get("id")||"",Z=!Y&&!1,X=_.VisitPage.SETTING;(0,c.useEffect)(function(){!Z&&(0,h.markCurPage)(X)},[Z]);var $=(0,h.useMarkCurPageOnClick)(X),ee=(0,v.useMobile)().mobileSidebarVisible;(0,P.isEnableDebug)();var et=(0,I.useCustomScrollbar)(),en=et.className,er=et.onScroll;(0,c.useMemo)(function(){return String(n.getConfig("user_unique_id"))},[b]);var eo=(0,T.useUserInfoAction)().getProfileInfo,ea=(0,T.useUserProfile)(),ei=(0,m.useFeatureConfig)("profile").enabled;(0,c.useEffect)(function(){(0,m.pullFeatureConfigFromUserConfigSingle)({reason:w.UserConfigPullReason.Polling})},[]),(0,c.useEffect)(function(){(0,N.trackEvent)("enter_page",{page:"setting",bot_id:(0,x.getBotIdByConversationId)(Y),is_tts:0})},[]),(0,c.useEffect)(function(){(null==b?void 0:b.user_id_str)&&eo(null==b?void 0:b.user_id_str)},[b]);var es=(0,F.useIsNarrowScreen)(),ec=(0,k.useChatStore)(function(e){return e.ttWidConfig},u.shallow);return(0,c.useEffect)(function(){Q()},[]),Z?(0,s.jsx)(j.Navigate,{to:H.CHAT_PAGE_ROUTE,replace:!0}):(0,s.jsxs)("div",{ref:$,className:K.container,"sidebar-visible":String(ee),children:[(0,s.jsx)(S.ChatHeaderUI,{className:d()(K.header,K["profile-header"]),innerClassName:d()((0,o._)({},K.inner,es)),left:(0,s.jsx)("div",{className:d()((0,o._)({},K["min-hide-btn"],!0)),children:es&&(0,s.jsx)(G.MobileSidebarButton,{})}),center:null}),(0,s.jsx)("div",{className:d()(K.content,K["profile-content"],(0,o._)({},K["content-webkit"],(0,p.getIsIPhoneOrIPad)()),en),onScroll:er,children:(0,s.jsxs)(C.SamanthaLayout.MaxWidthLayout,{children:[(0,s.jsx)(z.WebSettingComponents.SettingsUserProfile,{userProfile:ea,onToBotList:function(){l("".concat(H.PROFILE_PAGE_ROUTE,"/").concat(null==ea?void 0:ea.entity_id),{state:{enter_from:"click_setting"}})}}),(0,s.jsxs)("div",{className:d()(K["setting-content"]),children:[ei&&(0,s.jsxs)(z.WebSettingComponents.SettingBlock,{children:[(0,s.jsx)(z.WebSettingComponents.UserProfileSetting,{userProfile:ea,"data-testid":"setup_profile",onClick:function(){l(H.USER_PROFILE_ROUTE,{state:{previous_page:"setting"}})}}),null]}),(0,s.jsxs)(z.WebSettingComponents.SettingBlock,{children:[(0,s.jsx)(z.WebSettingComponents.FeedbackSetting,{ttWidConfig:ec,userId:null==b?void 0:b.user_id_str,"data-testid":"setup_feedback",userAvatar:null==ea?void 0:null===(e=ea.image)||void 0===e?void 0:e.tiny_url}),(0,s.jsx)(z.WebSettingComponents.ShareAppSetting,{}),(0,s.jsx)(z.WebSettingComponents.JoinDiscoverSetting,{discordLink:W})]}),(0,s.jsx)(V.ChatSettingFeatureBlock,{}),(0,s.jsx)(z.WebSettingComponents.SettingBlock,{children:(0,s.jsx)(z.WebSettingComponents.BlockAccountSetting,{onClick:function(){l(H.USER_BLOCKLIST_ROUTE,{state:{previous_page:"setting"}})}})}),(0,s.jsxs)(z.WebSettingComponents.SettingBlock,{children:[(0,s.jsx)(z.WebSettingComponents.AboutAppSetting,{"data-testid":"setup_about_app",onClick:function(){(0,N.trackEvent)("click_settings_about_app"),l(H.ABOUT_ROUTE)}}),(0,s.jsx)(z.WebSettingComponents.PoweredBySetting,{onClick:function(){(0,N.trackEvent)("click_sky_luck_entrance"),window.open(H.yunqueModalLink)}})]}),(0,s.jsxs)(z.WebSettingComponents.SettingBlock,{children:[null,(0,s.jsx)(z.WebSettingComponents.AccountSetting,{onClick:function(){(0,N.trackEvent)("click_account_setting"),l(H.ACCOUNT_SETTING_ROUTE)},"data-testid":"setup_account"}),J||q!==y.HitSource.RegisteredUser?null:(0,s.jsx)(D.SwitchToMaster,{}),(0,s.jsx)(z.WebSettingComponents.LogoutSetting,{"data-testid":"setup_logout",onClick:function(){(0,N.trackEvent)("click_setting_logout"),L.Modal.confirm({title:t("logout_double_confirmation_title"),content:t("logout_double_confirmation_text"),cancelText:t("logout_double_confirmation_cancel"),okText:t("logout_double_confirmation_logout"),icon:(0,s.jsx)(M.VectorIcon,{}),centered:!0,okButtonProps:{type:"danger","data-testid":"logout_ok"},cancelButtonProps:{"data-testid":"logout_cancel"},onOk:(0,r._)(function(){var e;return(0,i.__generator)(this,function(t){switch(t.label){case 0:(0,N.trackEvent)("click_logout_confirm"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,R.FlowAccount.passportApi.logout({navigate:l,reason:"user_logout"})];case 2:return t.sent(),(0,N.trackEvent)("logout_result",{scene:"normal",success:1}),[3,4];case 3:return e=t.sent(),(0,f.isPassportApiError)(e)?(0,N.trackEvent)("logout_result",{scene:"normal",success:0,err_code:null==e?void 0:e.code,err_tips:null==e?void 0:e.description}):(0,N.trackEvent)("logout_result",{scene:"normal",success:0}),[3,4];case 4:return[2]}})}),onCancel:function(){(0,N.trackEvent)("click_logout_cancel")}})}})]}),!1,(0,s.jsxs)("div",{className:K["setting-footer"],children:[!1,H.disclaimerPoweredBy&&(0,s.jsx)("div",{className:d()(K["setting-footer-line"],(0,o._)({},K["not-oversea"],!0)),onClick:function(){(0,N.trackEvent)("click_sky_luck_entrance"),window.open(H.yunqueModalLink)},children:t("settings_disclaimer_powered_by",{postProcess:"sprintf",sprintf:[H.disclaimerPoweredBy]})})]})]})]})})]})},{errorBoundaryName:"setting_page_error",FallbackComponent:U.ChatSecondaryErrorFallback}):q.EmptyComponent;t.default=Q},58520:function(e,t,n){"use strict";n.d(t,{ConfirmModal:function(){return p}});var r=n("92769"),o=n("40509"),a=n("88802"),i=n("97458"),s=n("52983"),c=n("85397"),u=n("85019"),l=n("53268"),d=n("59240"),g=n("76185"),f=n("72676"),_=n("66442"),h=n("58416"),v=n("84431"),m=n("12052"),p=function(e){var t,n=e.visible,p=e.onCancel,b=(0,f.useTranslateFn)(),C=(0,o._)((0,s.useState)(""),2),S=C[0],x=C[1],k=(0,_.useFeedbackBaseConfig)();var w=(t=(0,r._)(function(){var e;return(0,a.__generator)(this,function(e){switch(e.label){case 0:(0,d.trackEvent)("return_old_versoion",{input_content:S}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.all([(0,u.feedbackPostMessage)({content:S,extra_persistent_params:JSON.stringify({custom_field_info:{entrance:u.FeebackEntranceEnum.webSwitchBack}})},k),g.apiService.samantha.UpdateSamanthaWebHitStatus({status:c.SamanthaWebHitStatus.NotHit})])];case 2:return e.sent(),window.location.href=h.CHAT_PAGE_ROUTE,[3,4];case 3:return e.sent(),l.Toast.error(b("return_to_old_version_error_info")),[3,4];case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,i.jsxs)(l.Modal,{className:m.modal,visible:void 0!==n&&n,onCancel:void 0===p?function(){}:p,footer:null,centered:!0,children:[(0,i.jsx)("div",{className:"py-8",children:(0,i.jsx)(l.Icon,{svg:(0,i.jsx)(v.ReactComponent,{})})}),(0,i.jsx)("h3",{className:"m-0",children:b("return_to_old_version_form_title")}),(0,i.jsx)(l.TextArea,{value:S,className:"h-164 my-12 ".concat(m.feedback),placeholder:b("return_to_old_version_form_textarea_placeholder"),onChange:function(e){return x(e)},onBlur:function(){return x(function(e){return e.trim()})}}),(0,i.jsx)(l.Button,{className:"w-full h-42 leading-42 rounded-24",theme:"solid",type:"primary",disabled:!S.trim(),onClick:w,children:b("return_to_old_version")})]})}},27730:function(e,t,n){"use strict";n.d(t,{SwitchToMaster:function(){return d}});var r=n("40509"),o=n("97458"),a=n("52983"),i=n("43796"),s=n("59240"),c=n("72676"),u=n("50184"),l=n("58520"),d=function(){var e=(0,c.useTranslateFn)(),t=(0,r._)((0,a.useState)(!1),2),n=t[0],d=t[1];return(0,a.useEffect)(function(){(0,s.trackEvent)("show_settingpage_button",{button_name:"return_old_version"})},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.SettingItem,{icon:(0,o.jsx)(u.ReactComponent,{}),title:e("return_to_old_version"),onClick:function(){d(!0),(0,s.trackEvent)("click_settingpage_button",{button_name:"return_old_version"})},showNextIcon:!1}),(0,o.jsx)(l.ConfirmModal,{visible:n,onCancel:function(){return d(!1)}})]})}},58013:function(e,t,n){"use strict";n.d(t,{EmptyComponent:function(){return a}});var r=n("97458"),o=n("32208"),a=function(){return(0,r.jsx)(o.Navigate,{to:"/"})}},66442:function(e,t,n){"use strict";n.d(t,{useFeedbackBaseConfig:function(){return _}});var r=n("92769"),o=n("40509"),a=n("88802"),i=n("52983"),s=n("87382"),c=n("72695"),u=n("10173"),l=n("82182"),d=n("74175"),g=n("58416"),f=(0,g.getAid)(),_=function(){var e,t=(0,o._)((0,i.useState)(""),2),n=t[0],_=t[1];var h=(e=(0,r._)(function(){return(0,a.__generator)(this,function(e){switch(e.label){case 0:return[4,d.apiService.setting.GetWebAnonID()];case 1:return _(String(e.sent().web_id)),[2]}})}),function(){return e.apply(this,arguments)});return(0,i.useEffect)(function(){h()},[]),{deviceId:n,aid:f,logger:s.logger,appName:g.FEEDBACK_APP_NAME,appkey:g.FEEDBACK_APP_KEY,feedbackAxiosInstance:l.rawAxiosInstance,channel:"web",reqQueryParams:{version_code:(0,c.getShortVersionCode)(u.version_code)}}}},61798:function(e,t,n){"use strict";n.d(t,{rtlLocaleList:function(){return r}});var r=["ae","aeb","ajt","apc","apd","ar","ara","arb","arc","arq","ars","ary","arz","ave","avl","bal","bcc","bej","bft","bgn","bqi","brh","cja","ckb","cld","dcc","dgl","div","drw","dv","fa","fas","fia","fub","gbz","gjk","gju","glk","grc","gwc","gwt","haz","he","heb","hnd","hno","iw","ji","kas","kby","khw","ks","kvx","kxp","kzh","lad","lah","lki","lrc","luz","mde","mfa","mki","mvy","myz","mzn","nqo","oru","ota","otk","oui","pal","pbu","per","pes","phl","phn","pnb","pra","prd","prs","ps","pus","rhg","rmt","scl","sd","sdh","shu","skr","smp","snd","sog","swb","syr","tnf","trw","ug","uig","ur","urd","wni","xco","xld","xmn","xmr","xna","xpr","xsa","ydd","yi","yid","zdj"]},63964:function(e,t,n){"use strict";n.d(t,{getLanguageDirection:function(){return _},isRTL:function(){return f},useGetLanguageDirectionOfText:function(){return v}});var r,o=n("92769"),a=n("40509"),i=n("88802"),s=n("52983"),c=n("14794"),u=n("51635"),l=n("72676"),d=n("61798"),g=n("45431"),f=function(){return(0,c.isRtlLang)((0,l.getUnreactiveLanguage)())||!!g.localFeatureGating.get().forceRTL},_=function(){return f()?"rtl":"ltr"};var h=(r=(0,o._)(function(e){var t,r,o,a,s=arguments;return(0,i.__generator)(this,function(a){switch(a.label){case 0:t=s.length>1&&void 0!==s[1]&&s[1],a.label=1;case 1:if(a.trys.push([1,3,,4]),!(r=e.trim()))return[2,t];return[4,(0,u.retryLoad)(function(){return Promise.all([n.e("8798"),n.e("147")]).then(n.bind(n,"6276"))})];case 2:if("und"===(o=(0,a.sent().franc)(r,{minLength:20}))){var i;return[2,(i=r.charAt(0),new RegExp("^[^".concat("A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02B8\u0300-\u0590\u0800-\u1FFF\u2C00-\uFB1C\uFDFE-\uFE6F\uFEFD-\uFFFF","]*[").concat("\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC","]")).test(i))]}return[2,d.rtlLocaleList.includes(o)];case 3:return a.sent(),[2,t];case 4:return[2]}})}),function(e){return r.apply(this,arguments)}),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,a._)((0,s.useState)("ltr"),2),r=n[0],c=n[1];return(0,s.useEffect)(function(){(0,o._)(function(){return(0,i.__generator)(this,function(n){switch(n.label){case 0:return[4,h(e,t)];case 1:return c(n.sent()?"rtl":"ltr"),[2]}})})()},[e,t]),r}},99136:function(e,t,n){"use strict";n.d(t,{MobileProvider:function(){return c},useMobile:function(){return u}});var r=n("40509"),o=n("97458"),a=n("52983"),i=n("2945"),s=(0,a.createContext)(null),c=function(e){var t=e.children,n=(0,r._)((0,a.useState)(!1),2),i=n[0],c=n[1],u=(0,a.useMemo)(function(){return{mobileSidebarVisible:i,setMobileSidebarVisible:c}},[i,c]);return(0,o.jsx)(s.Provider,{value:u,children:t})},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.optionalProvider,n=(0,a.useContext)(s);if(!n){if(void 0!==t&&t)return{mobileSidebarVisible:!1,setMobileSidebarVisible:i.default};throw Error("Expect mobileContext")}return n}},99766:function(e,t,n){"use strict";n.d(t,{useAuthLoginDataRouteFromOAuth2:function(){return m},useHandleAuthCallback:function(){return v},usePlatformRouteFromOAuth2:function(){return p}});var r=n("92769"),o=n("9161"),a=n("16044"),i=n("89334"),s=n("40509"),c=n("88802"),u=n("52983"),l=n("3820"),d=n("46593"),g=n("87382"),f=n("17997"),_=n("78597"),h=n("11361"),v=function(e){var t=e.location,n=e.navigate,d=e.context,v=d.logger,m=d.flowAccount,p=(0,g.createReportEvent)({logger:v,eventName:"third_party_auth_complete"}),b=(0,s._)((0,u.useState)(!1),2),C=b[0],S=b[1];return(0,u.useLayoutEffect)(function(){(0,_.execute)((0,r._)(function(){var e,r,s,u,d,g,_,b,C,x,k,w,y,M,I,j;return(0,c.__generator)(this,function(c){switch(c.label){case 0:try{r=(0,h.parseOAuthUrl)(t)}catch(e){return v.persist.error({message:"oauth2_callback_parameter_error",error:e}),S(!0),[2]}return s=r.access_token,u=r.code,g=(d=r.state).platform,_=d.navigatePath,b=d.type,C=d.entry,x=d.method,k=(0,i._)(d,["platform","navigatePath","type","entry","method"]),[4,m.third.getThirdPlatform(g)];case 1:if(!(w=c.sent()))return v.warning({message:"not_support_platform",error:Error("Not support platform from oauth2 callback parameter state."),meta:{parsedState:d}}),S(!0),[2];if(M=(y=w.config).platformId,I=y.extraParams,j={authLoginData:{platform_app_id:M,access_token:s,code:u,extra_params:I},type:b,platform:g},"google"===g&&!M)return v.persist.error({message:"not_support_google_region",error:Error("Not support region to auth google platform from oauth2 route parameter.")}),p.error({reason:"not_support",meta:{platform:"google",from:"redirect"}}),S(!0),[2];if(p.success({meta:{platform:g,from:"redirect"}}),(0,h.isPostMessageRedirect)(x)&&(0,l.default)(null===(e=window.opener)||void 0===e?void 0:e.postMessage))window.opener.postMessage((0,a._)((0,o._)({},k),{oauth2:j}),window.location.origin),window.close();else if(!(0,h.isPostMessageRedirect)(x)){if(!(0,f.isCurrentEntry)(C))return window.location.href="".concat(window.location.origin).concat((0,f.getFullPath)(t.pathname,(0,f.getBasename)(C))).concat(t.search).concat(t.hash),[2];n(_,{state:(0,a._)((0,o._)({},k),{oauth2:j})})}return[2]}})}))},[]),{error:C}},m=function(e,t){var n,r,o,a=(0,u.useRef)(null===(n=t.state)||void 0===n?void 0:n.oauth2);if((null===(r=t.state)||void 0===r?void 0:r.oauth2)&&(a.current=null===(o=t.state)||void 0===o?void 0:o.oauth2),a.current&&window.history.replaceState((0,d.default)(t.state,"oauth2"),""),!!(0,h.isOAuth2RouteParameter)(a.current)){if(a.current.type===e)return a.current.authLoginData}},p=function(e){var t,n=null===(t=e.state)||void 0===t?void 0:t.oauth2;if((0,h.isOAuth2RouteParameter)(n))return n.platform}},54769:function(e,t,n){"use strict";n.d(t,{useActiveRegenerateMessage:function(){return y},useClearContext:function(){return j},useFeedbackStatus:function(){return b},useLastMessage:function(){return A},useLastSectionId:function(){return I},useLocalMessageMap:function(){return x},useMessage:function(){return k},useMessageAvailableIndex:function(){return C},useMessageLinks:function(){return v},useMessageLinksWithStatus:function(){return p},useMessageListByMessageLinks:function(){return w},useMessageMap:function(){return S},useSuggestMessage:function(){return M}});var r=n("9161"),o=n("16044"),a=n("6462"),i=n("83053"),s=n("66080"),c=n("96988"),u=n("45981"),l=n("10630"),d=n("46750"),g=n("87575"),f=n("68602"),_=n("10173"),h=n("53277"),v=(0,u.transformSelectorWithArgs)(function(e,t){return e.messageLinkMap[t]||[]}),m=(0,u.transformSelectorWithArgs)(function(e,t){return e.messageListStatusMap[t]||{}}),p=(0,u.transformSelectorWithArgs)(function(e,t){var n=m.raw(e,t),r=v.raw(e,t),o=m.raw(e,_.assistantConvIdWithoutCache),a=v.raw(e,_.assistantConvIdWithoutCache),i=l.useConversation.raw(e,t);return(null==i?void 0:i.conversation_type)===s.ConversationType.Coco&&0===r.length?{status:o,messageLinks:a,resolveConversationId:_.assistantConvIdWithoutCache}:{status:n,messageLinks:r,resolveConversationId:t}}),b=(0,u.transformSelectorWithArgs)(function(e,t,n){var r,o=(null===(r=e.messageFeedbackMap[t])||void 0===r?void 0:r[n])||{};return{liked:o.feedback_type===c.FeedbackType.Like,disliked:o.feedback_type===c.FeedbackType.Unlike,detail:o}},i.default),C=(0,u.transformSelectorWithArgs)(function(e,t){var n;return Number(null===(n=e.conversationMap[t])||void 0===n?void 0:n.message_cursor)||0}),S=(0,u.transformSelectorWithArgs)(function(e,t){return e.messageMap[t]||{}}),x=(0,u.transformSelectorWithArgs)(function(e,t){return e.localMessageMap[t]||{}}),k=(0,u.transformSelectorWithArgs)(function(e,t,n){if(n){var r;return null===(r=(n.isLocalMessage?e.localMessageMap:e.messageMap)[t])||void 0===r?void 0:r[n.messageId]}}),w=(0,u.transformSelectorWithArgs)(function(e,t,n){var r=(0,d.createGetMessage)((0,d.getMessageState)(e,t)),o=[],a=!0,i=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value,g=r(l);g&&o.push(g)}}catch(e){i=!0,s=e}finally{try{!a&&null!=u.return&&u.return()}finally{if(i)throw s}}return o});(0,u.transformSelectorWithArgs)(function(e,t,n){var r;return n?null===(r=e.localMessageMap[t])||void 0===r?void 0:r[n]:void 0});var y=(0,u.transformSelectorWithArgs)(function(e,t,n){var i,s,c,u=e.regenerateMessageMap[t],l=e.messageLinkMap[t],_=e.messageMap[t],v=(0,h.getMessageFromStore)(t,n,e),m=function(){if((null==v?void 0:v.reply_id)&&(0,g.isRegenerateMessage)(v))return(0,g.isImageMessage)(v)?(0,f.findAllMessageLinkByMatchEqualId)({messageLinks:l,replyId:v.reply_id,getMessage:(0,d.createGetMessage)({localMessageMap:e.localMessageMap[t],messageMap:e.messageMap[t]})}):n.regen_head?null==l?void 0:l.filter(function(e){return e.regen_head===n.regen_head||e.messageId===n.regen_head}).map(function(e){return(0,o._)((0,r._)({},e),{regen_head:e.regen_head||e.messageId})}):void 0}(),p=null===(i=[n].concat((0,a._)(null!=m?m:[])).map(function(e){return e.messageId in _?_[e.messageId]:null}).find(function(e){return null==e?void 0:e.reply_id}))||void 0===i?void 0:i.reply_id;return{activeRegenerateMessage:(null==m?void 0:m.length)?null===(s=u.messageMap)||void 0===s?void 0:s[n.messageId]:void 0,regenerateActiveIndex:null==m?void 0:m.findIndex(function(e){return e.messageId===n.messageId}),isRegenerateHead:!!(n.regen_head&&n.messageId),isRegenerateTail:!!(n.regen_head&&(null==m?void 0:null===(c=m[m.length-1])||void 0===c?void 0:c.messageId)===n.messageId),regenerateMessageLinks:m,replyFromMessage:p&&_[p]||void 0}}),M=(0,u.transformSelectorWithArgs)(function(e,t,n){var r=e.suggestMessageMap[t];return(null==r?void 0:r.replyId)===n?r:void 0}),I=(0,u.transformSelectorWithArgs)(function(e,t){return e.lastSectionIdMap[t]}),j=(0,u.transformSelectorWithArgs)(function(e){return e.clearContext}),A=(0,u.transformSelectorWithArgs)(function(e,t){return e.lastMessageMap[t]})},71383:function(e,t,n){"use strict";n.d(t,{ChatHeaderUI:function(){return d}});var r=n("83316"),o=n("40509"),a=n("97458"),i=n("52983"),s=n("87608"),c=n.n(s),u=n("78597"),l=n("55734"),d=function(e){var t=e.left,n=e.center,s=e.right,d=e.className,g=e.innerClassName,f=e.backgroundVisible,_=e.autoCenter,h=void 0===_||_,v=e.leftClassName,m=(0,o._)((0,i.useState)(!h),2),p=m[0],b=m[1];(0,i.useEffect)(function(){h&&b(!0)},[h]);var C=(0,u.useResizeObserver)(),S=C.ref,x=C.width,k=(0,u.useResizeObserver)(),w=k.ref,y=k.width,M=Math.max(void 0===x?0:x,void 0===y?0:y),I=function(e){var r=e.leftContainerRef,o=e.rightContainerRef,i=e.leftMinWidth,u=e.rightMinWidth;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:r,className:c()(l.left,v),style:{minWidth:u},children:t}),n&&(0,a.jsx)("div",{className:l.center,children:n}),(0,a.jsx)("div",{ref:o,className:l.right,style:{minWidth:i},children:s})]})};return(0,a.jsxs)("div",{className:c()(l.container,d,(0,r._)({},l["hide-background"],!(void 0===f||f))),children:[h&&(0,a.jsx)("div",{className:c()(l.inner,l.hidden),children:I({leftContainerRef:S,rightContainerRef:w})}),(0,a.jsx)("div",{className:c()(l.inner,g,(0,r._)({},l.hidden,!p)),children:I({leftMinWidth:h?M:void 0,rightMinWidth:h?M:void 0})})]})}},52064:function(e){"use strict";e.exports={btn:"btn-f6f5b5",samantha:"samantha-_49ee2"}},57018:function(e){"use strict";e.exports={"change-language":"change-language-dab14c",changeLanguage:"change-language-dab14c","change-language-container":"change-language-container-e838fc",changeLanguageContainer:"change-language-container-e838fc","change-language-dropdown":"change-language-dropdown-bee160",changeLanguageDropdown:"change-language-dropdown-bee160"}},45646:function(e){"use strict";e.exports={"chat-header":"chat-header-_870cf",chatHeader:"chat-header-_870cf",container:"container-_6f8ee",content:"content-_9c78b","conversation-header":"conversation-header-_6df8a",conversationHeader:"conversation-header-_6df8a",footer:"footer-f1c9bf","icon-terminal":"icon-terminal-_69c64",iconTerminal:"icon-terminal-_69c64",img:"img-_1d57d",inner:"inner-_8f0b2",left:"left-_4e79c",line:"line-_27783","min-hide-btn":"min-hide-btn-_63ffd",minHideBtn:"min-hide-btn-_63ffd","not-oversea":"not-oversea-_63d76",notOversea:"not-oversea-_63d76","profile-content":"profile-content-_24e9d",profileContent:"profile-content-_24e9d","profile-header":"profile-header-_2d971",profileHeader:"profile-header-_2d971","setting-block":"setting-block-cd094c",settingBlock:"setting-block-cd094c","setting-content":"setting-content-_835e0",settingContent:"setting-content-_835e0","setting-footer":"setting-footer-_2f606",settingFooter:"setting-footer-_2f606","setting-footer-line":"setting-footer-line-_54e7f",settingFooterLine:"setting-footer-line-_54e7f","setting-footer-line__clickable":"setting-footer-line__clickable-_3add0",settingFooterLineClickable:"setting-footer-line__clickable-_3add0","show-scrollbar-thumb":"show-scrollbar-thumb-_0e2fd",showScrollbarThumb:"show-scrollbar-thumb-_0e2fd",subTitle:"subTitle-_0336d",title:"title-_9d8f3",userProfile:"userProfile-_722b2",webkit:"webkit-_93362"}},12052:function(e){"use strict";e.exports={feedback:"feedback-_9beb4",modal:"modal-_2fdd2"}},55734:function(e){"use strict";e.exports={center:"center-_18dc0",container:"container-aa7d3a",hidden:"hidden-f8a6fd","hide-background":"hide-background-_0e21e",hideBackground:"hide-background-_0e21e",inner:"inner-b033aa",left:"left-ffede3",right:"right-_1888b"}}}]);