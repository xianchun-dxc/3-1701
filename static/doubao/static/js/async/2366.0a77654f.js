/*! For license information please see 2366.0a77654f.js.LICENSE.txt */
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["2366"],{2050:function(e,t,n){"use strict";n("97458"),n("52983"),t.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8zODExXzQxMjYwKSI+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjUwIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMzgxMV80MTI2MCkiLz4KPHBhdGggZD0iTTM2LjI1IDQxLjY2NzFDMzYuMjUgMzkuODI2MSAzNy43NDI0IDM4LjMzMzcgMzkuNTgzMyAzOC4zMzM3QzQxLjQyNDMgMzguMzMzNyA0Mi45MTY3IDM5LjgyNjEgNDIuOTE2NyA0MS42NjcxVjQ1LjAwMDRDNDIuOTE2NyA0Ni44NDE0IDQxLjQyNDMgNDguMzMzNyAzOS41ODMzIDQ4LjMzMzdDMzcuNzQyNCA0OC4zMzM3IDM2LjI1IDQ2Ljg0MTQgMzYuMjUgNDUuMDAwNFY0MS42NjcxWiIgZmlsbD0iIzk5QUVDQyIvPgo8cGF0aCBkPSJNNTcuMDgzNSA0MS42NjcxQzU3LjA4MzUgMzkuODI2MSA1OC41NzU5IDM4LjMzMzcgNjAuNDE2OCAzOC4zMzM3QzYyLjI1NzggMzguMzMzNyA2My43NTAyIDM5LjgyNjEgNjMuNzUwMiA0MS42NjcxVjQ1LjAwMDRDNjMuNzUwMiA0Ni44NDE0IDYyLjI1NzggNDguMzMzNyA2MC40MTY4IDQ4LjMzMzdDNTguNTc1OSA0OC4zMzM3IDU3LjA4MzUgNDYuODQxNCA1Ny4wODM1IDQ1LjAwMDRWNDEuNjY3MVoiIGZpbGw9IiM5OUFFQ0MiLz4KPHBhdGggZD0iTTQ5Ljk5OTggNjQuNTgzNEM0NC45NTk1IDY0LjU4MzQgNDAuNzQyNSA2Mi4yMzExIDM5LjUyMjQgNTguNzYxNUMzOS4xNjI4IDU3LjczODYgNDAuMTg1MyA1Ni45MTQ1IDQxLjI0NTcgNTcuMTQxMUM0My41NTEgNTcuNjMzOCA0Ny4zMDAyIDU4LjMzMzQgNDkuOTk5OCA1OC4zMzM0QzUyLjY5OTUgNTguMzMzNCA1Ni40NDg2IDU3LjYzMzggNTguNzU0IDU3LjE0MTFDNTkuODE0MyA1Ni45MTQ1IDYwLjgzNjkgNTcuNzM4NiA2MC40NzcyIDU4Ljc2MTVDNTkuMjU3MiA2Mi4yMzExIDU1LjA0MDIgNjQuNTgzNCA0OS45OTk4IDY0LjU4MzRaIiBmaWxsPSIjOTlBRUNDIi8+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRTFGMEZGIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzYuMjUgMzcuODMzM0MzNi4yNSAzNS45OTI0IDM3Ljc0MjQgMzQuNSAzOS41ODMzIDM0LjVDNDEuNDI0MyAzNC41IDQyLjkxNjcgMzUuOTkyNCA0Mi45MTY3IDM3LjgzMzNWNDEuMTY2N0M0Mi45MTY3IDQzLjAwNzYgNDEuNDI0MyA0NC41IDM5LjU4MzMgNDQuNUMzNy43NDI0IDQ0LjUgMzYuMjUgNDMuMDA3NiAzNi4yNSA0MS4xNjY3VjM3LjgzMzNaTTU3LjA4MzMgMzcuODMzM0M1Ny4wODMzIDM1Ljk5MjQgNTguNTc1NyAzNC41IDYwLjQxNjcgMzQuNUM2Mi4yNTc2IDM0LjUgNjMuNzUgMzUuOTkyNCA2My43NSAzNy44MzMzVjQxLjE2NjdDNjMuNzUgNDMuMDA3NiA2Mi4yNTc2IDQ0LjUgNjAuNDE2NyA0NC41QzU4LjU3NTcgNDQuNSA1Ny4wODMzIDQzLjAwNzYgNTcuMDgzMyA0MS4xNjY3VjM3LjgzMzNaTTUwIDY1LjYxMDFDNTUuNDE2NyA2NS42MTAxIDYwLjgzMzMgNjEuMDk2MiA2MC44MzMzIDU1LjY3OTZDNjAuODMzMyA1MS45NjQ1IDU3LjA1ODMgNTEuOTc3MSA1MS4zMDMzIDUxLjk5NjNDNTAuODc5NCA1MS45OTc3IDUwLjQ0NDcgNTEuOTk5MiA1MCA1MS45OTkyQzQ5LjU1NTMgNTEuOTk5MiA0OS4xMjA2IDUxLjk5NzcgNDguNjk2NyA1MS45OTYzQzQyLjk0MTcgNTEuOTc3MSAzOS4xNjY3IDUxLjk2NDUgMzkuMTY2NyA1NS42Nzk2QzM5LjE2NjcgNjEuMDk2MiA0NC41ODMzIDY1LjYxMDEgNTAgNjUuNjEwMVoiIGZpbGw9IiNBMkI4RDQiLz4KPC9nPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzM4MTFfNDEyNjAiIHgxPSI1MCIgeTE9IjAiIHgyPSI1MCIgeTI9IjEwMCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjRThGMEZCIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0Q1RTRGQSIvPgo8L2xpbmVhckdyYWRpZW50Pgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzM4MTFfNDEyNjAiPgo8cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"},59509:function(e,t,n){"use strict";var o=n("9161"),r=n("16044"),i=n("89334"),a=n("40509"),l=n("97458"),s=n("28377"),c=n("52983"),u=n("33434"),d=n("59574"),f=n("87608"),_=n.n(f),g=n("54915"),v=n("17072"),h=n("11372"),m=n("75761"),N=n("10886"),b=n("30697"),p=n("32208"),M=n("53268"),T=n("26039"),x=n("38438"),I=n("94686"),C=n("80937"),j=n("99956"),S=n("59240"),D=n("72676"),L=n("54451"),w=n("40976"),y=n("85401"),k=n("93563"),z=n("82169"),E=n("58416"),A=n("2050"),O=n("15987"),R=n("7303"),B=M.Typography.Title,U=M.Typography.Text,P=function(){var e=(0,p.useNavigate)();return function(t,n){e("".concat(E.CHAT_PAGE_ROUTE).concat(t),{state:n})}};t.default=function(e){var t,n,f,p,F,G=e.fromPage,H=void 0===G?z.BotItemFromPage.Discover:G,V=e.botInfo,Q=e.searchBotInfo,W=e.index,Y=e.noLogin,Z=(0,i._)(e,["fromPage","botInfo","searchBotInfo","index","noLogin"]),K=(0,D.useTranslateFn)(),J=(0,I.useUserInfo)(),X=(0,a._)((0,c.useState)(""),2),q=X[0],$=X[1],ee=(0,c.useRef)(null!==(p=null==Q?void 0:Q.bot_info)&&void 0!==p?p:{}),et=(0,a._)((0,s.useInView)({triggerOnce:!0,initialInView:!1,threshold:1}),2),en=et[0],eo=et[1],er=(0,g.useFeatureConfig)("bio").enabled,ei=(0,g.useFeatureConfig)("bot_heat"),ea=(0,L.useLoginModal)().openLoginModal,el=Y,es=el?C.useGuestBotStore:j.useBotStore,ec=H===z.BotItemFromPage.Discover?z.ChatType.Bot:z.ChatType.ProfileBot,eu=(0,a._)(es(function(e){return[e.updateBot]},u.shallow),1)[0],ed=V||ee.current,ef=ed.bot_id,e_=ed.conversation_id,eg=ed.has_conversation,ev=ed.onboarding,eh=ed.creator_info,em=ed.bio,eN=(0,h.getConversationTypeById)(e_),eb=(null==eh?void 0:eh.creator_id)===(null==J?void 0:J.user_id_str),ep={},eM=null==eh?void 0:eh.creator_handle,eT=(0,c.useMemo)(function(){return(0,T.getOnboardingSummary)(ev)},[ev]),ex=er&&em?em:eT||K("im_list_message_placeholder"),eI=(0,g.useFeatureConfig)("profile").enabled,eC=(0,y.useBotDiscoverCtx)().inSearch,ej=(0,w.useUnLoginCtx)(),eS=(0,N.useScrollView)().ref.current,eD=P();return(0,c.useEffect)(function(){if(eo){var e=ec===z.ChatType.Bot,t=!(0,d.default)(Q);el&&(ep.current_page=(null==Q?void 0:Q.search_hight_light_infos)?"bot_list_discover_search_unlog":"bot_list_discover_unlog",ep.previous_page="landing"),(0,S.trackEvent)("show_bot_chat",(0,r._)((0,o._)({bot_id:ef,chat_type:(0,m.getChatTypeForTea)(e_,t?Q.bot_info:V),enter_from:ec===z.ChatType.Bot?"bot_discover":"profile_bot_list"},ep),{user_id:e?(0,I.getUserId)():void 0,req_id:e?(0,j.getRequestIdByBotId)(ef):void 0,recommend_from:t?"bot_list_discover_search":e?"bot_list_discover":void 0,conversation_type:eN}))}},[eo]),(0,l.jsx)("div",(0,r._)((0,o._)({className:_()(R.newBotItem,"flex-row-between"),onClick:function(){if(el){ea({landing:{type:x.GuestLandingType.CHAT,botId:ef},trackInfo:{source:eC?L.LoginOpenSource.DISCOVER_SEARCH:ej?L.LoginOpenSource.DISCOVER_BOT:L.LoginOpenSource.DISCOVER,botId:ef}});return}V&&eu(V);var e=(null==ev?void 0:ev.message_list)&&(null==ev?void 0:ev.message_list.length)>=2,t=(null==Q?void 0:Q.search_hight_light_infos)?"bot_search":ec===z.ChatType.Bot?"bot_discover":"profile_bot_list";eg?eD("".concat(e_),{enter_from:t,bot_position:W?W+1:0,backToRoute:E.BOT_DISCOVER_ROUTE}):eD("".concat(ef,"?type=").concat(ec),{enter_from:t,bot_position:W?W+1:0,showSkeleton:e,backToRoute:E.BOT_DISCOVER_ROUTE}),"bot_discover"===t&&v.SyncStorage.setItem("discover_list_scroll_top","".concat((null==eS?void 0:eS.scrollTop)||0))},ref:en},Z),{children:(0,l.jsxs)("div",{className:"flex-row-center w-full",children:[(0,l.jsx)(M.Avatar,{className:"w-72 h-72 bg-[#f3f5fb] rounded-12 flex-shrink-0 my-5 mr-12",alt:(null==V?void 0:V.name)||"",src:q||(null==V?void 0:null===(t=V.icon_image)||void 0===t?void 0:t.tiny_url)||(null==V?void 0:V.icon_url)||(null==Q?void 0:null===(n=Q.bot_info)||void 0===n?void 0:n.icon_url)||A.default,onError:function(e){$(A.default)}}),(0,l.jsxs)("div",{className:"text-0 flex-column-start !items-start gap-4 flex-1 w-1",children:[(0,l.jsx)(B,{className:"text-[#1c1f23] max-w-350 !leading-26 md:max-w-[50vw] sm:max-w-[50vw] !line-clamp-1 break-all",heading:6,ellipsis:{rows:2,showTooltip:!0},children:(null==Q?void 0:Q.search_hight_light_infos)?(0,l.jsx)(k.HighLight,{text:null!==(F=null==Q?void 0:null===(f=Q.bot_info)||void 0===f?void 0:f.name)&&void 0!==F?F:"",highlightInfo:Q.search_hight_light_infos}):null==V?void 0:V.name}),ex&&(0,l.jsx)(U,{type:"tertiary",className:"!text-[#1c1f23] text-14 font-normal leading-17 !line-clamp-1 break-all",ellipsis:{rows:2,showTooltip:{opts:{content:(0,l.jsx)("span",{className:"break-all",children:ex})}}},children:ex}),(0,l.jsxs)("div",{className:"flex-row-start mt-4 w-full",children:[((null==ei?void 0:ei.enabled)||el)&&(0,l.jsx)(O.default,{botInfo:null!=V?V:ee.current,isSelf:eb,fromPage:H}),(eI||el)&&H===z.BotItemFromPage.Discover&&(0,l.jsx)(U,{type:"tertiary",className:"!text-[#999] text-12 font-normal max-w-350 leading-14 cursor-pointer",ellipsis:{rows:1,showTooltip:{opts:{content:(0,l.jsx)("span",{style:{wordBreak:"break-all"},children:eM})}}},children:(0,l.jsxs)("span",{dir:"ltr",className:"inline",children:["@",(0,l.jsx)(b.SpanI18n,{children:eM})]})})]})]})]})}))}},33480:function(e,t,n){"use strict";n.d(t,{ScrollTags:function(){return v}});var o=n("83316"),r=n("9161"),i=n("16044"),a=n("89334"),l=n("40509"),s=n("97458"),c=n("52983"),u=n("87608"),d=n.n(u),f=n("96317"),_=n("53268"),g=n("73730"),v=function(e){var t=e.parentStyle,n=e.childStyle,u=e.headerNodeStyle,v=e.selectedTag,h=e.tagList,m=e.headerNode,N=e.skeleton,b=e.enableScroll,p=void 0===b||b,M=e.disableChecked,T=void 0!==M&&M,x=e.isBasBgColor,I=e.onValueChange,C=e.handleClick,j=e.handleClickTagReal,S=(0,a._)(e,["parentStyle","childStyle","headerNodeStyle","selectedTag","tagList","headerNode","skeleton","enableScroll","disableChecked","isBasBgColor","onValueChange","handleClick","handleClickTagReal"]),D=(0,c.useRef)(null),L=(0,c.useRef)(null),w=(0,c.useRef)(null),y=(0,c.useRef)(null),k=(0,l._)((0,c.useState)(!1),2),z=k[0],E=k[1],A=(0,l._)((0,c.useState)(!1),2),O=A[0],R=A[1],B=(0,c.useRef)(!1),U=(0,c.useRef)(void 0),P=function(e){if(null==C||C(e),!((null!==(i=null==L?void 0:null===(t=L.current)||void 0===t?void 0:t.clientWidth)&&void 0!==i?i:0)>(null!==(a=null==D?void 0:null===(n=D.current)||void 0===n?void 0:n.scrollWidth)&&void 0!==a?a:0))&&p){var t,n,o,r,i,a,l,s,c,u,d,f=null==y?void 0:null===(o=y.current)||void 0===o?void 0:o.childNodes[e],_=(null==f?void 0:f.offsetLeft)+(null==f?void 0:f.clientWidth)/2,g=(null!==(l=null==L?void 0:null===(r=L.current)||void 0===r?void 0:r.offsetWidth)&&void 0!==l?l:0)/2;_>g?null==D||null===(c=D.current)||void 0===c||null===(s=c.scrollTo)||void 0===s||s.call(c,{left:_-g,behavior:"smooth"}):null==D||null===(d=D.current)||void 0===d||null===(u=d.scrollTo)||void 0===u||u.call(d,{left:0,behavior:"smooth"})}},F=function(e,t){if(!B.current&&!T){if(B.current=!0,clearTimeout(U.current),U.current=setTimeout(function(){B.current=!1},300),null==j||j(e,t),!((null!==(a=null==L?void 0:null===(n=L.current)||void 0===n?void 0:n.clientWidth)&&void 0!==a?a:0)>(null!==(l=null==D?void 0:null===(o=D.current)||void 0===o?void 0:o.scrollWidth)&&void 0!==l?l:0))&&p){var n,o,r,i,a,l,s,c,u,d=null==y?void 0:null===(r=y.current)||void 0===r?void 0:r.childNodes[t],f=(null==d?void 0:d.offsetLeft)+(null==d?void 0:d.clientWidth)/2,_=(null!==(s=null==L?void 0:null===(i=L.current)||void 0===i?void 0:i.offsetWidth)&&void 0!==s?s:0)/2;f>_?null==D||null===(c=D.current)||void 0===c||c.scrollTo({left:f-_,behavior:"smooth"}):null==D||null===(u=D.current)||void 0===u||u.scrollTo({left:0,behavior:"smooth"})}}};return(0,c.useEffect)(function(){if(h.length>0){var e=h.findIndex(function(e){return e.tag_id===v});-1!==e&&v&&p&&P(e),p&&R(!0)}},[h,p]),(0,c.useEffect)(function(){if(v&&h.length>0){var e,t=h.findIndex(function(e){return e.tag_id===v});t&&P(t)}var n=function(){var e,t,n,o,r,i,a=Math.ceil(null!==(o=null==D?void 0:null===(e=D.current)||void 0===e?void 0:e.scrollLeft)&&void 0!==o?o:0),l=(null!==(r=null==D?void 0:null===(t=D.current)||void 0===t?void 0:t.scrollWidth)&&void 0!==r?r:0)-(null!==(i=null==D?void 0:null===(n=D.current)||void 0===n?void 0:n.clientWidth)&&void 0!==i?i:0)-a;0===a&&E(!1),a>0&&E(!0),0===l&&R(!1),l>0&&R(!0)};return null==D||null===(e=D.current)||void 0===e||e.addEventListener("scroll",n),function(){var e;return null==D?void 0:null===(e=D.current)||void 0===e?void 0:e.removeEventListener("scroll",n)}},[]),(0,s.jsxs)("div",(0,i._)((0,r._)({ref:w,className:d()(g.tagsContent,t)},S),{children:[(0,s.jsx)("div",{style:u,children:m}),(0,s.jsxs)("div",{ref:L,className:d()(g.wrapper,n,p&&" truncate"),children:[(0,s.jsx)("div",{className:d()(p&&z?g.shadowLeft:g.displayNone,x?g.bgLayerBase:g.bgBaseColor)}),(0,s.jsx)("div",{onClick:function(){var e,t,n,o;(null==D?void 0:null===(e=D.current)||void 0===e?void 0:e.scrollLeft)!==void 0&&(null==L?void 0:null===(t=L.current)||void 0===t?void 0:t.clientWidth)&&(null===(n=(o=D.current).scrollTo)||void 0===n||n.call(o,{left:Math.max(D.current.scrollLeft-.5*L.current.clientWidth,0),behavior:"smooth"}))},className:p&&z?g.arrowLeft:g.displayNone,children:(0,s.jsx)(f.ArrowLeftWidth14Icon,{})}),(0,s.jsx)("div",{ref:D,className:g["select-group"],children:(0,s.jsx)(_.RadioGroup,{type:"pureCard",defaultValue:1,direction:"horizontal",value:null!=v?v:"",onChange:function(e){I(e.target.value)},children:(0,s.jsx)("div",{ref:y,className:d()(g.tagList,!p&&"flex-wrap"),children:h.length>0?h.map(function(e,t){var n;return(0,s.jsx)(_.Radio,{className:d()(g["select-item"],(n={},(0,o._)(n,g.disableChecked,T),(0,o._)(n,g.noPadding,!!j),n)),value:e.tag_id,onChange:function(){return P(t)},children:j?(0,s.jsx)("span",{className:g.textBox,onClick:function(){return F(e.tag_id,t)},children:e.tag_name}):(0,s.jsx)(s.Fragment,{children:e.tag_name})},t)}):N})})}),(0,s.jsx)("div",{onClick:function(){var e=null!==(o=null==L?void 0:null===(t=L.current)||void 0===t?void 0:t.clientWidth)&&void 0!==o?o:0;if((null==D?void 0:null===(n=D.current)||void 0===n?void 0:n.scrollLeft)!==void 0&&e){var t,n,o,r,i,a,l,s,c,u=(null!==(s=null==D?void 0:null===(r=D.current)||void 0===r?void 0:r.scrollWidth)&&void 0!==s?s:0)-(null!==(c=null==D?void 0:null===(i=D.current)||void 0===i?void 0:i.clientWidth)&&void 0!==c?c:0);null===(a=(l=D.current).scrollTo)||void 0===a||a.call(l,{left:Math.min(D.current.scrollLeft+.5*e,u),behavior:"smooth"})}},className:p&&O?g.arrowRight:g.displayNone,children:(0,s.jsx)(f.ArrowRightWidth14Icon,{})}),(0,s.jsx)("div",{className:d()(p&&O?g.shadowRight:g.displayNone,x?g.bgLayerBase:g.bgBaseColor)})]})]}))}},86037:function(e,t,n){"use strict";n.d(t,{CreateBotButton:function(){return T}});var o=n("83316"),r=n("97458");n("52983");var i=n("87608"),a=n.n(i),l=n("78597"),s=n("71383"),c=n("32208"),u=n("53268"),d=n("14894"),f=n("45457"),_=n("59240"),g=n("72676"),v=n("79451"),h=n("9333"),m=n("33440"),N=n("58416"),b=n("41509"),p=n("35211"),M=function(){var e=(0,g.useTranslateFn)(),t=(0,f.useIsNarrowScreen)();return(0,r.jsx)("div",{className:"flex-row-start",style:{height:"36px"},children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.MobileSidebarButton,{}),(0,r.jsx)(m.ChatHeaderTitleInChat,{title:e("chat_list_discover")})]}):(0,r.jsx)("div",{className:p.title,children:e("chat_list_discover")})})},T=function(e){var t=e.useNewUIShow,n=void 0!==t&&t,o=(0,g.useTranslateFn)(),i=(0,c.useNavigate)();return(0,r.jsx)(u.Button,{icon:(0,r.jsx)(d.default,{}),theme:n?"solid":"borderless",className:a()(p.createBotBtn,n&&"!bg-[#0066FF]"),onClick:function(){var e={enter_method:"click_button",current_page:"bot_list_discover",enter_from:"bot_list_discover"};(0,_.trackEvent)("click_create_new_bot",e),i(N.CREATE_BOT_ROUTE,{state:e})},children:o("create_bot_title")})};t.default=function(e){var t=e.useNewUIShow,n=void 0!==t&&t,i=(0,l.useMedia)({maxWidth:600});return(0,r.jsx)("div",{className:a()(p.botDiscoverHeaderWrapper,(0,o._)({},p.isFormSeo,v.isFromSeo)),children:(0,r.jsx)(s.ChatHeaderUI,{className:a()(p.container,n&&"!max-w-[1440px]"),innerClassName:p.inner,left:v.isFromSeo&&!i?(0,r.jsx)(h.default,{className:"flex-row-start !items-start"}):(0,r.jsx)(M,{}),right:(0,r.jsx)(T,{useNewUIShow:n})})})}},8951:function(e,t,n){"use strict";n.d(t,{BotDiscoverSearch:function(){return h}});var o=n("83316"),r=n("9161"),i=n("40509"),a=n("97458"),l=n("52983"),s=n("6139"),c=n("87608"),u=n.n(c),d=n("59240"),f=n("96317"),_=n("72676"),g=n("29546"),v=n("51719"),h=function(e){var t=e.useNewUIShow,n=void 0!==t&&t,c=e.onValueChange,h=(0,i._)((0,l.useState)(""),2),m=h[0],N=h[1],b=(0,_.useTranslateFn)(),p=function(e,t){(0,d.trackEvent)(e,(0,r._)({enter_from:"bot_discover_page"},t))},M=(0,l.useCallback)((0,s.default)(function(e){c(e),e&&p("click_search_button",{enter_method:"auto"})},500),[]);return(0,l.useEffect)(function(){p("search_bar_show")},[]),(0,a.jsx)("div",{className:g.botSearchWrapper,"data-testid":"bot_discover_search",children:(0,a.jsx)(v.InputI18n,{className:u()(g.botSearch,n&&"!bg-[#F5F5F5] !max-w-full",(0,o._)({},g.placeholder,n)),value:m,prefix:(0,a.jsx)(f.SearchActionIcon,{className:u()(g.searchIcon,"rounded-12",(0,o._)({},g.iconColor,n))}),placeholder:b("inapp_search_bot_placeholder"),onChange:function(e){N(e),M(e)},onFocus:function(){return p("search_bar_click")},showClear:!0,"data-testid":"bot_discover_search_input"})})}},77049:function(e,t,n){"use strict";var o=n("97458");n("52983");var r=n("53268");t.default=function(e){var t=e.bgColor,n=(0,o.jsx)(r.Radio,{style:{padding:"5px 12px",height:"36px",width:"64px",borderRadius:"12px",backgroundColor:null!=t?t:"#FFFFFF"}});return(0,o.jsx)(r.Skeleton,{placeholder:n,active:!1})}},15399:function(e,t,n){"use strict";n.r(t),n.d(t,{BotDiscover:function(){return X},NavigateChat:function(){return q}});var o=n("92769"),r=n("9161"),i=n("16044"),a=n("89334"),l=n("40509"),s=n("88802"),c=n("97458"),u=n("52983"),d=n("87382"),f=n("33434"),_=n("47948"),g=n("37903"),v=n("87608"),h=n.n(v),m=n("90072"),N=n("26689"),b=n("32208"),p=n("53268"),M=n("78597"),T=n("32156"),x=n("54915"),I=n("40789"),C=n("89066"),j=n("83140"),S=n("88600"),D=n("45457"),L=n("80937"),w=n("59240"),y=n("76185"),k=n("72676"),z=n("82169"),E=n("58416"),A=n("33480"),O=n("59509"),R=n("21681"),B=n("85401"),U=n("77049"),P=n("8951"),F=n("86037"),G=n("2738"),H=n("54172"),V=n("17072"),Q=n("50855"),W=n("3287"),Y=n("99956"),Z=function(e){var t=e.bgColor,n=e.enableWrap;return(0,c.jsx)("div",{className:h()(W.tagSkeleton,n&&"flex-wrap"),children:(0,_.default)(0,9).map(function(e,n){return(0,c.jsx)(U.default,{bgColor:t},n)})})},K=function(e){var t=e.botID,n=e.searchBotInfo,o=e.index,i=e.noLogin,l=(0,a._)(e,["botID","searchBotInfo","index","noLogin"]),s=(0,Y.useBotInfo)(t);return(0,c.jsx)(O.default,(0,r._)({botInfo:s,searchBotInfo:n,fromPage:z.BotItemFromPage.Discover,index:o,noLogin:i},l))},J=function(e){var t=e.isError,n=e.reload,o=(0,k.useTranslateFn)();return(0,c.jsx)("div",{className:W.searchBotNotFound,children:void 0!==t&&t?(0,c.jsx)("div",{style:{cursor:"pointer",color:"#0066FF"},onClick:n,children:o("inapp_search_no_internet")}):o("inapp_search_no_result")})},X=(0,u.forwardRef)(function(e,t){var n,a,_=e.noLogin,v=void 0!==_&&_,k=e.style,z=e.styleContainer,O=e.safeMargin,U=void 0===O?"15":O,Q=e.extraNode,X=e.headerHeight,q=e.enableTagsScroll,$=v?L.useGuestBotStore:Y.useBotStore,ee=(0,l._)((0,u.useState)(""),2),et=ee[0],en=ee[1],eo=(0,l._)((0,u.useState)(!1),2),er=eo[0],ei=eo[1],ea=(0,l._)((0,u.useState)(!1),2),el=ea[0],es=ea[1],ec=(0,u.useRef)(""),eu=(0,u.useRef)(0),ed=(0,u.useRef)(Date.now()),ef=(0,D.useIsNarrowScreen)(),e_=(0,u.useRef)(null),eg=((0,b.useLocation)().state||{}).enter_from,ev=String(V.SyncStorage.getItem("discover_list_scroll_top")),eh="chat_page"===eg&&"null"!==ev,em=(0,g.default)(Q),eN=(0,x.useFeatureConfig)("bot_recommend_search").enabled,eb=(0,d.useErrorBoundary)().showBoundary,ep=(0,u.useMemo)(function(){return Q?I.VisitPage.SEARCH_LANDING:v?et?I.VisitPage.BOT_LIST_DISCOVER_SEARCH_UNLOGIN:I.VisitPage.BOT_LIST_DISCOVER_UNLOGIN:et?I.VisitPage.BOT_LIST_DISCOVER_SEARCH:I.VisitPage.BOT_LIST_DISCOVER},[v,!!et,Q]);(0,C.useMarkCurPageOnMount)(ep);var eM=(0,C.useMarkCurPageOnClick)(ep),eT=(0,x.useFeatureConfig)("discover_category").enabled,ex=(0,l._)((0,u.useState)(!1),2),eI=ex[0],eC=ex[1];(0,u.useEffect)(function(){!v&&(0,w.trackEvent)("enter_page",{page:"bot_discover",is_tts:0,is_from_ug:"0"})},[v]),(0,u.useEffect)(function(){!v&&er&&(0,w.trackEvent)("enter_page",{current_page:"bot_list_discover_search",page:"bot_list_discover_search",previous_page:"bot_list_discover",is_tts:0,is_from_ug:"0"})},[er]);var ej=!!et;(0,u.useEffect)(function(){if(v){var e=(0,j.getLoginSourceQuery)(),t=ej?"bot_list_discover_search_unlog":"bot_list_discover_unlog";(0,w.trackEvent)("enter_page",(0,r._)({page:t,current_page:t,is_tts:0,is_from_ug:"0"},e?{previous_page:e}:{}))}},[v,ej]);var eS=(0,l._)($(function(e){return[e.discoveryBotListStatus,e.loadRecommendBotList,e.discoveryBotLinks,e.initRecommendBotList,e.overrideBots]},f.shallow),5),eD=eS[0],eL=eS[1],ew=eS[2],ey=eS[3],ek=eS[4],ez=(0,u.useRef)(0);(0,u.useEffect)(function(){if(!!v)ez.current++,2===ez.current&&((0,S.markHomeLoadPhase)(S.HomeLoadPhase.DISCOVER_LIST_LOADED),(0,S.sendHomeLoadTime)())},[ew]);var eE=eD.hasMore,eA=eD.loading,eO=eD.count,eR=eD.tagList,eB=eD.selectedTagId,eU=eD.failed,eP=eD.error;eU&&eb(eP||{});var eF=function(e){var t=e.pageSize,n=e.offset,o=e.searchValue;return new Promise(function(e,r){o?y.apiService.search.Search({keyword:o,index_type:m.SearchIndexType.Bot,offset:n,size:t}).then(function(t){var n,o,r,i=null===(n=t.data)||void 0===n?void 0:n.bot_infos,a=null===(o=t.data)||void 0===o?void 0:o.total;es(!1),eC(!0),ek((null==i?void 0:i.map(function(e){return e.bot_info}))||[]),e({total:null!==(r=Number(a))&&void 0!==r?r:0,list:null!=i?i:[]})}).catch(function(e){es(!0),eC(!0),(0,w.trackEvent)("report_search_error",{err:e}),r(e)}):e({total:0,list:[]})})},eG=(0,M.useLoadMore)(function(e){return eF((0,i._)((0,r._)({},e),{searchValue:et}))},{initPageSize:30,incrementSize:30,resetDeps:[et]}),eH=eG.data,eV=eG.loading,eQ=eG.loadingMore,eW=eG.loadMore,eY=eG.noMore,eZ=eG.reload,eK=(0,u.useCallback)(function(){if(!eA)eE&&eL({size:E.botDiscoverPageLoadCount,index:Math.floor(eO/E.botDiscoverPageLoadCount)+1,recommendType:N.BotRecommendType.Discovery,tagId:eB})},[eA,eE,eB]);var eJ=(n=(0,o._)(function(e){var t;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return[4,eL({size:E.botDiscoverPageLoadCount,index:1,recommendType:N.BotRecommendType.Discovery,tagId:e})];case 1:return n.sent(),null===(t=e_.current)||void 0===t||t.scrollToTop(),[2]}})}),function(e){return n.apply(this,arguments)});var eX=(a=(0,o._)(function(e){var t;return(0,s.__generator)(this,function(n){switch(n.label){case 0:if(eB!==e)return[2];return[4,eL({size:E.botDiscoverPageLoadCount,index:1,recommendType:N.BotRecommendType.Discovery,tagId:e})];case 1:return n.sent(),null===(t=e_.current)||void 0===t||t.scrollToTop(),[2]}})}),function(e){return a.apply(this,arguments)});(0,u.useEffect)(function(){e_.current&&H.eventEmitter.on("goTop",function(){var e;null===(e=e_.current)||void 0===e||e.scrollToTop()})},[e_.current]),(0,u.useEffect)(function(){if(!eh){var e=(0,G.getTagIdFromURL)()||(-1===eB?void 0:eB);ey({size:E.botDiscoverPageLoadCount,recommendType:N.BotRecommendType.Discovery,tagId:e})}},[]),(0,u.useLayoutEffect)(function(){if(eh&&e_.current){var e,t;null===(t=e_.current)||void 0===t||null===(e=t.scrollTo)||void 0===e||e.call(t,Number(ev)),V.SyncStorage.setItem("discover_list_scroll_top","null")}},[ew]),(0,u.useEffect)(function(){ec.current&&(0,w.trackEvent)("leave_discover_tab",{tab_name:ec.current,tag_duration:String(Date.now()-ed.current),bot_cnt:String(eu.current)});var e,t=eR.find(function(e){return e.tag_id===eB});return ed.current=Date.now(),ec.current=null!==(e=null==t?void 0:t.tag_name)&&void 0!==e?e:"",eu.current=0,function(){(0,w.trackEvent)("leave_discover_tab",{tab_name:ec.current,tag_duration:String(Date.now()-ed.current),bot_cnt:String(eu.current)})}},[eB]),(0,u.useImperativeHandle)(t,function(){return{isInSearch:function(){return ej},scrollDomRef:function(){return e_.current}}});var eq=(0,u.useMemo)(function(){return{inSearch:ej}},[ej]);return(0,c.jsx)(B.BotDiscoverContext.Provider,{value:eq,children:(0,c.jsxs)("div",{ref:eM,className:h()("flex w-full items-center flex-col !bg-white"),style:k,children:[(0,c.jsx)(T.SamanthaLayout.MaxWidthLayout,{children:!v&&em&&(0,c.jsx)(F.default,{useNewUIShow:!0})}),Q,(0,c.jsxs)("div",{className:h()(W.container,"!bg-white"),style:z,children:[eN&&em&&(0,c.jsx)(T.SamanthaLayout.MaxWidthLayout,{children:(0,c.jsx)(P.BotDiscoverSearch,{useNewUIShow:!0,onValueChange:function(e){!et&&eC(!1),en(e),e&&!er&&ei(!0)}})}),et?(0,c.jsx)(R.default,{showSkeleton:!1,hasMore:!eY,loading:eQ,onReachBottom:eW,safeMargin:U,useNewBotListPage:eH&&eH.list.length>0,headerHeight:X,children:void 0===eV||eV?(0,c.jsx)(p.Spin,{size:"middle",style:{width:"24px",height:"24px"}}):(0,c.jsx)(c.Fragment,{children:eH&&eH.list.length>0?(0,c.jsx)(c.Fragment,{children:eH.list.map(function(e,t){var n;return(0,c.jsx)(K,{searchBotInfo:e,botID:null==e?void 0:null===(n=e.bot_info)||void 0===n?void 0:n.bot_id,index:t,noLogin:v},"".concat(t,"_").concat(e.bot_info.bot_id))})}):eI&&(0,c.jsx)(J,{isError:el,reload:eZ})})}):(0,c.jsxs)(c.Fragment,{children:[(eT||v)&&em&&(0,c.jsx)(T.SamanthaLayout.MaxWidthLayout,{children:(0,c.jsx)("div",{className:eN?"-mt-8 w-full":"w-full",children:(0,c.jsx)(A.ScrollTags,{tagList:eR,selectedTag:eB,onValueChange:eJ,handleClickTagReal:eX,skeleton:(0,c.jsx)(Z,{bgColor:"#F5F5F5",enableWrap:!0}),enableScroll:void 0===q||q,disableChecked:!1,handleClick:function(e){var t;(0,w.trackEvent)("click_discover_page_tab",{tab_name:null===(t=eR[e])||void 0===t?void 0:t.tag_name,enter_method:"click"}),eR.length>0&&(0,G.setTagIdToURL)(String(eR[e].tag_id))},childStyle:ef?"max-w-full":"",isBasBgColor:!0,"data-testid":"bot_discover_tags"})})}),(0,c.jsx)(R.default,{ref:e_,showSkeleton:!eO,hasMore:eE,loading:eA,onReachBottom:eK,onScroll:function(){(0,w.trackEvent)("slide_discover_page")},safeMargin:U,useNewBotListPage:!0,headerHeight:X,"data-testid":"bot_discover_recommend_list",children:ew.map(function(e,t){var n=e.botID;return(0,c.jsx)(K,{botID:n,index:t,noLogin:v,"data-testid":!t&&"bot_discover_bot_item_0"},n)})})]})]})]})})}),q=function(){return(0,c.jsx)(b.Navigate,{to:E.CHAT_PAGE_ROUTE})};t.default=(0,d.withErrorBoundary)(X,{errorBoundaryName:"bot_discover_page_error",FallbackComponent:Q.ReloadErrorPage})},85401:function(e,t,n){"use strict";n.d(t,{BotDiscoverContext:function(){return r},useBotDiscoverCtx:function(){return i}});var o=n("52983"),r=(0,o.createContext)({inSearch:!1}),i=function(){return(0,o.useContext)(r)}},33440:function(e,t,n){"use strict";n.d(t,{ChatHeaderTitle:function(){return g},ChatHeaderTitleInChat:function(){return _}});var o=n("83316"),r=n("8831"),i=n("52935"),a=n("9161"),l=n("16044"),s=n("97458"),c=n("87608"),u=n.n(c),d=n("65042"),f=n("43582"),_=function(e){var t=(0,r._)({},(0,i._)(e));return(0,s.jsx)(g,(0,l._)((0,a._)({},t),{innerClassName:u()(f.center,(0,o._)({},f.mobile,(0,d.isMobile)())),className:f.leftTitle,titleClassName:f.titleText}))},g=function(e){var t=e.subTitle,n=e.title,o=e.onClick,r=e.onInnerClick,i=e.className,a=e.innerClassName,l=e.titleClassName;return(0,s.jsx)("div",{className:u()(f.container,i),onClick:o,style:{cursor:o?"pointer":"auto"},children:(0,s.jsxs)("div",{className:u()(f.inner,a),onClick:r,children:[n&&(0,s.jsx)("span",{className:u()(f.title,l,f["auto-ellipsis"]),children:n}),t&&(0,s.jsx)("span",{className:u()(f["sub-title"],f["auto-ellipsis"]),children:t})]})})}},41509:function(e,t,n){"use strict";n.d(t,{MobileSamanthaSidebarButton:function(){return M},MobileSidebarButton:function(){return p}});var o=n("9161"),r=n("89334"),i=n("40509"),a=n("97458"),l=n("33434"),s=n("23898"),c=n("47282"),u=n("87608"),d=n.n(u),f=n("62920"),_=n("75761"),g=n("53277"),v=n("96317"),h=n("18784"),m=n("18271"),N=n("52064"),b=function(){var e=(0,f.useChatStore)(function(e){return e.lastMessageIndexMap},l.shallow);return(0,s.default)((0,c.default)(e),function(e,t){var n=(0,i._)(t,2),o=n[0],r=n[1],a=f.useChatStore.getState(),l=a.conversationMap[o],s=a.messageLinkMap[o];return e+(0,_.getUnreadCount)({message_index:(0,g.getLastMessageIndexForUnreadCount)((null==l?void 0:l.conversation_id)||"",s,r),read_message_index:r.read_message_index})},0)},p=function(e){var t=e.className,n=(0,r._)(e,["className"]),i=(0,m.useFlowSlotsContext)().changeSideBarVisible,l=b();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h.SidebarButton,(0,o._)({type:"open",className:d()(t,N.btn),onClick:i,icon:l>0?"chat-header-side-count":"chat-header-side"},n))})},M=function(){var e=(0,m.useFlowSlotsContext)().changeSideBarVisible,t=b();return(0,a.jsx)("div",{className:N.samantha,onClick:e,children:t>0?(0,a.jsx)(v.ChatHeaderSamanthaCountIcon,{}):(0,a.jsx)(v.ChatHeaderSamanthaIcon,{})})}},18784:function(e,t,n){"use strict";n.d(t,{SidebarButton:function(){return s}});var o=n("83316"),r=n("97458"),i=n("99136"),a=n("96317"),l=n("1284"),s=function(e){var t,n=e.icon,s=e.type,c=e.className,u=e.style,d=e.onClick,f=e.hoverable,_=e.theme,g=e.size,v=(0,i.useMobile)().setMobileSidebarVisible,h=(t={menu:(0,r.jsx)(a.MenuIcon,{})},(0,o._)(t,"arrow-right",(0,r.jsx)(a.ArrowRightIcon,{})),(0,o._)(t,"arrow-left",(0,r.jsx)(a.ArrowLeftIcon,{})),(0,o._)(t,"chat-header-side",(0,r.jsx)(a.ChatHeaderSideIcon,{})),(0,o._)(t,"chat-header-side-count",(0,r.jsx)(a.ChatHeaderSideCountIcon,{})),t);return(0,r.jsx)(l.IconButton,{theme:void 0===_?"borderless":_,size:g,style:u,className:c,icon:h[void 0===n?"menu":n],onClick:function(){d?null==d||d():v("open"===s)},setSvgFull:!1,hoverable:f})}},18271:function(e,t,n){"use strict";n.d(t,{FlowSlotsProvider:function(){return a},useFlowSlotsContext:function(){return i}});var o=n("52983"),r=(0,o.createContext)(null),i=function(){var e=(0,o.useContext)(r);if(!e)throw Error("useFlowSlotsContext must be used within a FlowSlotsContext");return e},a=r.Provider},9333:function(e,t,n){"use strict";n.d(t,{default:function(){return c}});var o=n("97458");n("52983");var r=n("87608"),i=n.n(r),a=n("53268"),l=n("72676"),s=n("90421");function c(e){var t=(0,l.useTranslateFn)(),n=e.className;return(0,o.jsx)("div",{className:i()("h-40 pt-0 flex justify-end",n),children:(0,o.jsxs)(a.Tabs,{activeKey:"discover",className:s.tab,onChange:function(e){"ask"===e&&window.location.replace("".concat(window.location.protocol,"//").concat(window.location.host,"/traffic/ask"))},children:[(0,o.jsx)(a.TabPane,{tab:(0,o.jsx)("span",{className:"text-base leading-22 font-semibold",children:t("discover_bot_tab_title")}),itemKey:"discover"}),(0,o.jsx)(a.TabPane,{tab:(0,o.jsx)("span",{className:"text-base leading-22 font-semibold",children:t("discover_feed_tab_title")}),itemKey:"ask"})]})})}},40976:function(e,t,n){"use strict";n.d(t,{UnLoginContext:function(){return r},useUnLoginCtx:function(){return i}});var o=n("52983"),r=(0,o.createContext)({isNewLogin:!1}),i=function(){return(0,o.useContext)(r)}},54451:function(e,t,n){"use strict";n.d(t,{ClickArea:function(){return j.ClickArea},LoginOpenSource:function(){return j.LoginOpenSource},useAbTest:function(){return S},useLoginModal:function(){return z}});var o=n("9161"),r=n("16044"),i=n("89334"),a=n("40509"),l=n("97458"),s=n("52983"),c=n("33434"),u=n("87382"),d=n("89066"),f=n("72124"),_=n("51635"),g=n("49022"),v=n("62920"),h=n("32208"),m=n("99670"),N=n("53268"),b=n("1924"),p=n("38438"),M=n("20945"),T=n("72676"),x=n("57042"),I=n("82169"),C=n("58416"),j=n("77434"),S=function(){var e=(0,d.useWatchTeaAbConfig)(),t=(0,d.useTeaVar)("support_unlogin_chat",!1,[e]).value,n=(0,d.useTeaVar)("has_landing_search",!1,[e]).value,o=(0,d.useTeaVar)("discover_in_landing",!1,[e]).value,r=(0,d.useTeaVar)("preset_bot_use_recommend",!1,[e]).value,i=(0,d.useTeaVar)("login_landing_to_search",!1,[e]).value,l=(0,d.useTeaVar)("bot_support_search",!1,[e]).value,u=(0,d.useTeaVar)("unlogin_search_suggest",!1,[e]).value,f=(0,s.useMemo)(function(){return{support_unlogin_chat:t,discover_in_landing:o,has_landing_search:n,preset_bot_use_recommend:r,login_landing_to_search:i,bot_support_search:l,unlogin_search_suggest:u}},[r,i,l,u,t,o,n]),_=(0,a._)((0,M.useGuestConfigStore)(function(e){return[e.setDiscoverActive,e.initAbTestParams]},c.shallow),2),g=_[0],v=_[1];return(0,s.useEffect)(function(){v(f),g(!f.has_landing_search)},[f]),f},D=(0,s.lazy)(function(){return(0,_.retryLoad)(function(){return Promise.all([n.e("3799"),n.e("9068"),n.e("21"),n.e("4559"),n.e("578"),n.e("6203"),n.e("4853"),n.e("3509")]).then(n.bind(n,"45704"))})}),L={current:j.ClickArea.OTHER},w=function(e){var t=e.loginModalStatus;if(t.landing)switch(t.landing.type){case p.GuestLandingType.ADD_BOT:return C.CREATE_BOT_ROUTE;case p.GuestLandingType.DISCOVER:return C.BOT_DISCOVER_ROUTE;case p.GuestLandingType.CHAT:return t.landing.botId?"".concat(C.CHAT_PAGE_ROUTE).concat(t.landing.botId):C.CHAT_PAGE_ROUTE;default:return C.CHAT_PAGE_ROUTE}return(0,b.getLoginSuccessBackUrl)()||C.CHAT_PAGE_ROUTE},y=function(e){var t=e.loginModalStatus,n=(0,b.getLoginSourceQuery)(),i=L.current,a=(0,b.getSemChannel)(),l=i===j.ClickArea.OTHER?n?{login_source:n}:{}:{login_source:i};if(t.landing){var s=t.landing.type===p.GuestLandingType.CHAT?{type:t.landing.botId?String(I.ChatType.Bot):String(I.ChatType.Conversation)}:{};return(0,o._)({},l,t.landing.type===p.GuestLandingType.CHAT_CAN_USE?{}:{guest_landing:"1"},s,a?{channel:a}:{})}return(0,o._)((0,r._)((0,o._)({},l),{from_login:"1"}),a?{channel:a}:{})},k=!1,z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.navigate,n=null!=t?t:(0,h.useNavigate)(),a={"--semi-border-radius-large":"24px"},c=(0,T.useTranslateInstance)(),d=function(e){var t=e.onCancel,d=e.onSuccess,_=(0,i._)(e,["onCancel","onSuccess"]);if(k)return u.logger.persist.warning({eventName:"login_modal_open_forbidden",meta:{href:window.location.href,type:"open_raw",source:_.trackInfo.source}}),function(){};k=!0;var h=function(){u.logger.persist.info({eventName:"login_modal_cancel",meta:{href:window.location.href,source:_.trackInfo.source}}),b(),k=!1,null==t||t()};u.logger.persist.info({eventName:"login_modal_open",meta:{href:window.location.href,source:_.trackInfo.source}});var b=N.Modal.confirm({className:x["login-modal"],style:a,header:null,icon:null,title:null,footer:null,centered:!0,keepDOM:!0,lazyRender:!0,onCancel:h,content:(0,l.jsx)(s.Suspense,{fallback:(0,l.jsx)(l.Fragment,{}),children:(0,l.jsx)(m.I18nextProvider,{i18n:c,children:(0,l.jsx)(D,(0,r._)((0,o._)({},_),{onSuccess:function(){k=!1,localStorage.setItem("isFromLogin","1"),(0,g.dropAdaptors)(),(0,v.resetChatStore)(),(0,M.resetGuestChatInited)(),b(),f.useGuestStore.getState().setGuest(!1),u.logger.persist.info({eventName:"login_modal_success",meta:{href:window.location.href,source:_.trackInfo.source}}),null==d||d()},onCancel:h,navigate:n}))})})}).destroy;return b};return{openRawLoginModal:d,openLoginModal:function(e){var t=e.landing,n=e.trackInfo,a=e.onCancel,l=(0,i._)(e,["landing","trackInfo","onCancel"]);if(k)return u.logger.persist.warning({eventName:"login_modal_open_forbidden",meta:{landing:t,href:window.location.href,source:n.source}}),function(){};var s={landing:t,trackInfo:(0,r._)((0,o._)({},n),{fromPage:L.current}),onCancel:a},c=w({loginModalStatus:s}),f=y({loginModalStatus:s});return t&&(0,p.setGuestLanding)(t),d((0,o._)({trackInfo:s.trackInfo,onCancel:a,loginNavigateQuery:f,loginNavigateRoute:c},l))},setClickArea:function(e){L.current=e}}}},77434:function(e,t,n){"use strict";n.d(t,{ClickArea:function(){return a},LoginOpenSource:function(){return i}});var o,r,i=((o={}).DISCOVER="click_bot_list_discover_cell",o.DISCOVER_SEARCH="click_bot_list_discover_search_cell",o.CHAT_LIST="click_chat_list_cell",o.LOGIN_BTN="click_login_button",o.INPUT_SEND_MSG="send_message",o.INPUT_PLUS_BTN="click_keyboard_plus",o.ADD_BOT="click_create_bot",o.DISCOVER_BTN="click_bot_list_discover_btn",o.NEW_CHAT="click_new_chat",o.UG="ug",o.SEARCH_LANDING="click_search_landing_button",o.AFTER_CHAT_OPEN="after_chat_open",o.CLIENT_RIGHT_ENTRANCE="right_entrance",o.CLIENT_SEARCH_LOGIN="search_login",o.CLIENT_SETTING_CLICK_LOGIN="setting_click_login",o.OTHER="other",o.UPLOAD="unlog_click_upload",o.SKILL="unlog_click_skills",o.NEW_THREAD="unlog_click_new_chat",o.DISCOVER_BOT="unlog_click_discover_bot",o.CREATE_BOT="unlog_click_create_bot",o);var a=((r={}).CHAT_LIST="chat_list_unlog",r.DISCOVER="bot_list_discover_unlog",r.DISCOVER_SEARCH="bot_list_discover_search_unlog",r.OTHER="other",r)},80937:function(e,t,n){"use strict";n.d(t,{useGuestBotStore:function(){return o.useGuestBotStore}});var o=n("99956")},88600:function(e,t,n){"use strict";n.d(t,{HomeLoadPhase:function(){return a},clearHomeLoadTimeData:function(){return i},markHomeLoadPhase:function(){return s},sendHomeLoadTime:function(){return c}});var o,r=n("87382"),i=function(){delete window.docLoadTs,delete window.homeLoadTimeReporter};var a=((o={}).PAGE_COMPONENT_LOADED="PAGE_COMPONENT_LOADED",o.AB_TEST_FETCHED="AB_TEST_FETCHED",o.LOGIN_PAGE_LOADED="LOGIN_PAGE_LOADED",o.DISCOVER_LIST_LOADED="DISCOVER_LIST_LOADED",o),l=function(){return window.docLoadTs||window.homeLoadTimeReporter},s=function(e,t){if(l()){!window.homeLoadTimeReporter&&(window.homeLoadTimeReporter=(0,r.createReportEvent)({eventName:"home_load_time",once:!0}));var n=window.homeLoadTimeReporter;window.docLoadTs&&(n.setStartTime(window.docLoadTs),delete window.docLoadTs);var o=t?"".concat(e,":").concat(t):e;n.addDurationPoint(o,!1)}},c=function(){var e;l()&&(null===(e=window.homeLoadTimeReporter)||void 0===e||e.success(),i())}},54172:function(e,t,n){"use strict";n.d(t,{eventEmitter:function(){return a}});var o=n("69420"),r=n("29048");function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(void 0===t?"undefined":(0,r._)(t))?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=new(function(){function e(t){(0,o._)(this,e),i(this,"context",void 0),i(this,"_eventMap",new Map),this.context=t}var t=e.prototype;return t.on=function(e,t){var n=this;return!this._eventMap.has(e)&&this._eventMap.set(e,[]),this._eventMap.get(e).push(t),function(){n.off(e,t)}},t.once=function(e,t){var n=this,o=this.context,r=function(i){t.call(o,i),n.off(e,r)};return this.on(e,r)},t.off=function(e,t){this._eventMap.has(e)&&this._eventMap.set(e,this._eventMap.get(e).filter(function(e){return e!==t}))},t.emit=function(e,t){if(this._eventMap.has(e)){var n=this.context;this._eventMap.get(e).forEach(function(e){try{e.call(n,t)}catch(e){}})}},e}())},61798:function(e,t,n){"use strict";n.d(t,{rtlLocaleList:function(){return o}});var o=["ae","aeb","ajt","apc","apd","ar","ara","arb","arc","arq","ars","ary","arz","ave","avl","bal","bcc","bej","bft","bgn","bqi","brh","cja","ckb","cld","dcc","dgl","div","drw","dv","fa","fas","fia","fub","gbz","gjk","gju","glk","grc","gwc","gwt","haz","he","heb","hnd","hno","iw","ji","kas","kby","khw","ks","kvx","kxp","kzh","lad","lah","lki","lrc","luz","mde","mfa","mki","mvy","myz","mzn","nqo","oru","ota","otk","oui","pal","pbu","per","pes","phl","phn","pnb","pra","prd","prs","ps","pus","rhg","rmt","scl","sd","sdh","shu","skr","smp","snd","sog","swb","syr","tnf","trw","ug","uig","ur","urd","wni","xco","xld","xmn","xmr","xna","xpr","xsa","ydd","yi","yid","zdj"]},63964:function(e,t,n){"use strict";n.d(t,{getLanguageDirection:function(){return g},isRTL:function(){return _},useGetLanguageDirectionOfText:function(){return h}});var o,r=n("92769"),i=n("40509"),a=n("88802"),l=n("52983"),s=n("14794"),c=n("51635"),u=n("72676"),d=n("61798"),f=n("45431"),_=function(){return(0,s.isRtlLang)((0,u.getUnreactiveLanguage)())||!!f.localFeatureGating.get().forceRTL},g=function(){return _()?"rtl":"ltr"};var v=(o=(0,r._)(function(e){var t,o,r,i,l=arguments;return(0,a.__generator)(this,function(i){switch(i.label){case 0:t=l.length>1&&void 0!==l[1]&&l[1],i.label=1;case 1:if(i.trys.push([1,3,,4]),!(o=e.trim()))return[2,t];return[4,(0,c.retryLoad)(function(){return Promise.all([n.e("8798"),n.e("147")]).then(n.bind(n,"6276"))})];case 2:if("und"===(r=(0,i.sent().franc)(o,{minLength:20}))){var a;return[2,(a=o.charAt(0),new RegExp("^[^".concat("A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02B8\u0300-\u0590\u0800-\u1FFF\u2C00-\uFB1C\uFDFE-\uFE6F\uFEFD-\uFFFF","]*[").concat("\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC","]")).test(a))]}return[2,d.rtlLocaleList.includes(r)];case 3:return i.sent(),[2,t];case 4:return[2]}})}),function(e){return o.apply(this,arguments)}),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,i._)((0,l.useState)("ltr"),2),o=n[0],s=n[1];return(0,l.useEffect)(function(){(0,r._)(function(){return(0,a.__generator)(this,function(n){switch(n.label){case 0:return[4,v(e,t)];case 1:return s(n.sent()?"rtl":"ltr"),[2]}})})()},[e,t]),o}},26039:function(e,t,n){"use strict";n.d(t,{getOnboardingSummary:function(){return o}});var o=function(e){if((null==e?void 0:e.version)===2){var t,n,o;return null===(o=e.message_list)||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:null===(t=n.ext)||void 0===t?void 0:t.brief}return null==e?void 0:e.prologue}},90072:function(e,t,n){"use strict";n.d(t,{SearchIndexType:function(){return r}});var o,r=((o={})[o.Conversation=0]="Conversation",o[o.Message=1]="Message",o[o.Bot=2]="Bot",o[o.All=101]="All",o)},99136:function(e,t,n){"use strict";n.d(t,{MobileProvider:function(){return s},useMobile:function(){return c}});var o=n("40509"),r=n("97458"),i=n("52983"),a=n("2945"),l=(0,i.createContext)(null),s=function(e){var t=e.children,n=(0,o._)((0,i.useState)(!1),2),a=n[0],s=n[1],c=(0,i.useMemo)(function(){return{mobileSidebarVisible:a,setMobileSidebarVisible:s}},[a,s]);return(0,r.jsx)(l.Provider,{value:c,children:t})},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.optionalProvider,n=(0,i.useContext)(l);if(!n){if(void 0!==t&&t)return{mobileSidebarVisible:!1,setMobileSidebarVisible:a.default};throw Error("Expect mobileContext")}return n}},72124:function(e,t,n){"use strict";n.d(t,{useGuestStore:function(){return o}});var o=(0,n("85205").create)(function(e,t){return{isGuest:!1,setGuest:function(t){e({isGuest:t})}}})},83140:function(e,t,n){"use strict";n.d(t,{getChatIdFromURL:function(){return a},getChatTypeFromURL:function(){return l},getLoginSourceQuery:function(){return i}});var o=n("78597"),r=n("9029"),i=function(e){var t;return(0,o.parseHashOrQuery)(null===(t=e||location)||void 0===t?void 0:t.search).login_source},a=function(){var e,t=(0,r.matchPath)("/chat/:id",window.location.pathname),n=((null==t?void 0:t.params)||{}).id;return(e=n)&&/^\d+$/.test(e)?n:void 0},l=function(){return Number(new URLSearchParams(window.location.search).get("type"))}},71383:function(e,t,n){"use strict";n.d(t,{ChatHeaderUI:function(){return d}});var o=n("83316"),r=n("40509"),i=n("97458"),a=n("52983"),l=n("87608"),s=n.n(l),c=n("78597"),u=n("55734"),d=function(e){var t=e.left,n=e.center,l=e.right,d=e.className,f=e.innerClassName,_=e.backgroundVisible,g=e.autoCenter,v=void 0===g||g,h=e.leftClassName,m=(0,r._)((0,a.useState)(!v),2),N=m[0],b=m[1];(0,a.useEffect)(function(){v&&b(!0)},[v]);var p=(0,c.useResizeObserver)(),M=p.ref,T=p.width,x=(0,c.useResizeObserver)(),I=x.ref,C=x.width,j=Math.max(void 0===T?0:T,void 0===C?0:C),S=function(e){var o=e.leftContainerRef,r=e.rightContainerRef,a=e.leftMinWidth,c=e.rightMinWidth;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:o,className:s()(u.left,h),style:{minWidth:c},children:t}),n&&(0,i.jsx)("div",{className:u.center,children:n}),(0,i.jsx)("div",{ref:r,className:u.right,style:{minWidth:a},children:l})]})};return(0,i.jsxs)("div",{className:s()(u.container,d,(0,o._)({},u["hide-background"],!(void 0===_||_))),children:[v&&(0,i.jsx)("div",{className:s()(u.inner,u.hidden),children:S({leftContainerRef:M,rightContainerRef:I})}),(0,i.jsx)("div",{className:s()(u.inner,f,(0,o._)({},u.hidden,!N)),children:S({leftMinWidth:v?j:void 0,rightMinWidth:v?j:void 0})})]})}},7303:function(e){"use strict";e.exports={newBotItem:"newBotItem-_71e14"}},73730:function(e){"use strict";e.exports={arrowLeft:"arrowLeft-_94343",arrowRight:"arrowRight-_46cd8",bgBaseColor:"bgBaseColor-_27bf6",bgLayerBase:"bgLayerBase-ac67cc",disableChecked:"disableChecked-_8612e",displayNone:"displayNone-_8135c",empty:"empty-_3b974",noPadding:"noPadding-_914a4","select-group":"select-group-_4d325",selectGroup:"select-group-_4d325","select-item":"select-item-_4a6af",selectItem:"select-item-_4a6af",shadowLeft:"shadowLeft-ab79cd",shadowRight:"shadowRight-_41835",tagList:"tagList-_52608",tagSkeleton:"tagSkeleton-de0048",tagsContent:"tagsContent-_15f02",textBox:"textBox-_243d8",wrapper:"wrapper-_41981"}},35211:function(e){"use strict";e.exports={backIcon:"backIcon-_07fcf",botDiscoverHeader:"botDiscoverHeader-_82caf",botDiscoverHeaderNew:"botDiscoverHeaderNew-_9e180",botDiscoverHeaderWrapper:"botDiscoverHeaderWrapper-a29a56",container:"container-_80236",createBotBtn:"createBotBtn-_62aed",isFormSeo:"isFormSeo-_0be9e",title:"title-_0c31f"}},29546:function(e){"use strict";e.exports={botSearch:"botSearch-aec7be",botSearchWrapper:"botSearchWrapper-_74566",iconColor:"iconColor-_38f9a",placeholder:"placeholder-fcea11",searchIcon:"searchIcon-_9ae23"}},3287:function(e){"use strict";e.exports={container:"container-_8dacd",scrollTag:"scrollTag-_4d31f",searchBotNotFound:"searchBotNotFound-_13579",tagSkeleton:"tagSkeleton-b3cc9b"}},43582:function(e){"use strict";e.exports={"auto-ellipsis":"auto-ellipsis-_210c1",autoEllipsis:"auto-ellipsis-_210c1",center:"center-_5216a",container:"container-_736b0",hoverable:"hoverable-_3cf02",inner:"inner-_5528d",left:"left-_16dab",leftTitle:"leftTitle-_7d1fa",mobile:"mobile-_72791","sub-title":"sub-title-_85fe5",subTitle:"sub-title-_85fe5",title:"title-f1a5e2",titleText:"titleText-_9e5a3"}},52064:function(e){"use strict";e.exports={btn:"btn-f6f5b5",samantha:"samantha-_49ee2"}},90421:function(e){"use strict";e.exports={chatInput:"chatInput-_48c59",content:"content-_63aa3",discover:"discover-d37752",header:"header-e2720c",input:"input-f2bffd",tab:"tab-_2936c"}},57042:function(e){"use strict";e.exports={"login-modal":"login-modal-ec577f",loginModal:"login-modal-ec577f"}},55734:function(e){"use strict";e.exports={center:"center-_18dc0",container:"container-aa7d3a",hidden:"hidden-f8a6fd","hide-background":"hide-background-_0e21e",hideBackground:"hide-background-_0e21e",inner:"inner-b033aa",left:"left-ffede3",right:"right-_1888b"}}}]);