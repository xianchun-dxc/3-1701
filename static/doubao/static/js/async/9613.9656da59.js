/*! For license information please see 9613.9656da59.js.LICENSE.txt */
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["9613"],{85324:function(e,n,r){var s={"./af/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("156")])},"./ar/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("1695")])},"./bg/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("1592")])},"./bn/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("7588")])},"./ca/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("6298")])},"./ceb/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("6198")])},"./cs/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("1344")])},"./da/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("4707")])},"./de/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("2537")])},"./el/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("6677")])},"./en-GB/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("2509")])},"./en/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("6988")])},"./es/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("9137")])},"./et/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("3741")])},"./fi/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("919")])},"./fil/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("1864")])},"./fr-CA/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("3641")])},"./fr/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("2687")])},"./ga/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("7653")])},"./gu/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("4390")])},"./he/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("8793")])},"./hi/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("6578")])},"./hr/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("172")])},"./hu/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("7824")])},"./id/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("8946")])},"./is/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("9653")])},"./it/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("6122")])},"./ja/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("6312")])},"./jv/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("9201")])},"./kk/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("7354")])},"./km/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("7660")])},"./kn/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("597")])},"./ko/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("8050")])},"./lt/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("6927")])},"./lv/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("7319")])},"./ml/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("1766")])},"./mr/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("2000")])},"./ms/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("5942")])},"./my/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("8257")])},"./nb/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("7167")])},"./nl/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("9346")])},"./or/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("9326")])},"./pa/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("8511")])},"./pl/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("2849")])},"./pt-BR/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("663")])},"./pt-PT/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("7857")])},"./pt/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("7299")])},"./ro/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("6346")])},"./ru/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("3166")])},"./sk/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("546")])},"./sl/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("7281")])},"./sq/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("3594")])},"./sv/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("3578")])},"./sw/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("1174")])},"./ta/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("6061")])},"./te/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("8797")])},"./th/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("6175")])},"./tr/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("2906")])},"./uk/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("3835")])},"./ur/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("672")])},"./uz/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("2927")])},"./vi/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("9122")])},"./zh-Hans/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("3079")])},"./zh-Hant/index.cjs.js":function(){return Promise.all([r.e("2126"),r.e("3046")])}},t={"./af/index.cjs.js":"69248","./ar/index.cjs.js":"75503","./bg/index.cjs.js":"32158","./bn/index.cjs.js":"61602","./ca/index.cjs.js":"95781","./ceb/index.cjs.js":"60992","./cs/index.cjs.js":"43146","./da/index.cjs.js":"17073","./de/index.cjs.js":"79406","./el/index.cjs.js":"94260","./en-GB/index.cjs.js":"53315","./en/index.cjs.js":"13761","./es/index.cjs.js":"67303","./et/index.cjs.js":"69272","./fi/index.cjs.js":"73747","./fil/index.cjs.js":"16987","./fr-CA/index.cjs.js":"83387","./fr/index.cjs.js":"24683","./ga/index.cjs.js":"15650","./gu/index.cjs.js":"45867","./he/index.cjs.js":"12569","./hi/index.cjs.js":"51832","./hr/index.cjs.js":"35806","./hu/index.cjs.js":"29809","./id/index.cjs.js":"50005","./is/index.cjs.js":"21034","./it/index.cjs.js":"12405","./ja/index.cjs.js":"75425","./jv/index.cjs.js":"74773","./kk/index.cjs.js":"40297","./km/index.cjs.js":"35053","./kn/index.cjs.js":"31322","./ko/index.cjs.js":"41277","./lt/index.cjs.js":"64740","./lv/index.cjs.js":"36539","./ml/index.cjs.js":"20611","./mr/index.cjs.js":"75011","./ms/index.cjs.js":"70417","./my/index.cjs.js":"90487","./nb/index.cjs.js":"32821","./nl/index.cjs.js":"45824","./or/index.cjs.js":"88032","./pa/index.cjs.js":"51995","./pl/index.cjs.js":"68367","./pt-BR/index.cjs.js":"62836","./pt-PT/index.cjs.js":"12548","./pt/index.cjs.js":"67648","./ro/index.cjs.js":"75476","./ru/index.cjs.js":"37999","./sk/index.cjs.js":"82326","./sl/index.cjs.js":"3424","./sq/index.cjs.js":"97865","./sv/index.cjs.js":"86958","./sw/index.cjs.js":"75215","./ta/index.cjs.js":"42724","./te/index.cjs.js":"73973","./th/index.cjs.js":"39896","./tr/index.cjs.js":"75301","./uk/index.cjs.js":"10745","./ur/index.cjs.js":"60639","./uz/index.cjs.js":"98055","./vi/index.cjs.js":"331","./zh-Hans/index.cjs.js":"10426","./zh-Hant/index.cjs.js":"24301"};function i(e){if(!r.o(t,e))return Promise.resolve().then(function(){var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n});var n=s[e],i=t[e];return n().then(function(){return r(i)})}i.keys=function(){return Object.keys(t)},i.id="85324",e.exports=i},31746:function(e,n,r){"use strict";r.d(n,{EditConversationDialog:function(){return E}});var s=r("92769"),t=r("83316"),i=r("40509"),o=r("88802"),a=r("97458"),c=r("52983"),l=r("33434"),u=r("87608"),d=r.n(u),j=r("87382"),f=r("65042"),m=r("11907"),h=r("10630"),v=r("62920"),x=r("87575"),_=r("26498"),p=r("11068"),g=r("51719"),b=r("53268"),w=r("59240"),N=r("76185"),P=r("72676"),S=r("2738"),C=r("34243"),E=function(e){var n,r=e.conversationId,t=e.onHide,u=e.exts,d=(0,i._)((0,c.useState)(),2),f=d[0],g=d[1],E=(0,h.useConversation)(r),I=(0,P.useTranslateFn)(),T=(0,v.useChatStore)(function(e){return e.fetchUpdateConversationInfo},l.shallow);(0,c.useEffect)(function(){g(null==E?void 0:E.name)},[null==E?void 0:E.name]);var k=(n=(0,s._)(function(){var e,n,s;return(0,o.__generator)(this,function(i){switch(i.label){case 0:if((0,w.trackEvent)("edit_chat_name",{bot_id:null==E?void 0:E.bot_id,click_from:u.click_from,conversation_id:null==E?void 0:E.conversation_id}),!r)return[2];e=(0,j.createReportEvent)({eventName:"update_conversation",meta:{from:"sidebar"}}),i.label=1;case 1:if(i.trys.push([1,6,,7]),!(0,x.isCocoSubConversation)(E))return[3,3];return[4,N.apiService.samantha.ThreadUpdate({conversation_id:r,name:f})];case 2:return i.sent(),[3,5];case 3:return[4,N.apiService.conversation.ConversationUpdate({conversation_id:r,name:f})];case 4:i.sent(),i.label=5;case 5:return T(r),e.addDurationPoint("update_conversation_finished"),e.success(),t(),[3,7];case 6:if(Number(null==(n=i.sent())?void 0:null===(s=n.errorOption)||void 0===s?void 0:s.code)===_.ErrorCodes.CONVERSATION_UNDER_REVIEW)return m.Toast.warning({content:I("no_modify_notification"),showClose:!1,theme:"light"}),[2];if(e.error({error:n,reason:"update_conversation_failed"}),(0,p.isApiError)(n)&&(0,S.handleContentUnavailableError)(n))return[2];return b.Toast.error({content:I("edit_chat_name_failed"),showClose:!1}),[3,7];case 7:return[2]}})}),function(){return n.apply(this,arguments)});return(0,a.jsx)(b.Modal,{"data-testid":"edit_conversation_dialog",centered:!0,className:C["conversation-modal"],visible:u.visible,title:I("chat_list_long_press_edit_chat_name"),okButtonProps:{disabled:!f},okText:I("edit_chat_name_done"),cancelText:I("edit_chat_name_cancel"),onOk:k,onCancel:function(){(0,w.trackEvent)("cancel_edit_chat_name",{bot_id:null==E?void 0:E.bot_id,click_from:u.click_from,conversation_id:null==E?void 0:E.conversation_id}),t()},zIndex:1099,children:(0,a.jsx)(y,{onEnterPress:k,value:f,onChange:function(e){return g(e)}})})},y=function(e){var n=e.value,r=e.onChange,s=e.onEnterPress,i=(0,c.useRef)(null),o=(0,P.useTranslateFn)();return(0,c.useEffect)(function(){if(!(0,f.getIsMobileOrIPad)()){var e;null===(e=i.current)||void 0===e||e.focus()}},[]),(0,a.jsx)(g.InputI18n,{"data-testid":"edit_conversation_dialog_name_input",className:d()(C.editName,(0,t._)({},C.mobileOrIPad,(0,f.getIsMobileOrIPad)())),ref:i,autoFocus:!0,value:n,onEnterPress:s,onChange:r,maxLength:20,placeholder:o("edit_bot_name_placeholder")})}},43138:function(e,n,r){"use strict";r.d(n,{ErrorMsgPanel:function(){return c}});var s=r("97458"),t=r("2945"),i=r("87608"),o=r.n(i),a=r("52382"),c=function(e){var n=e.msg,r=e.onClick,i=void 0===r?t.default:r;return(0,s.jsxs)("div",{className:"h-240 error-msg rounded-10 border-1 border-solid border-s-color-border-primary bg-s-color-bg-trans flex items-center justify-center flex-col text-s-color-text-tertiary",children:[(0,s.jsx)(a.ReactComponent,{className:"text-38"}),(0,s.jsx)("div",{className:o()("mt-12 s-font-base",{"cursor-pointer":i!==t.default}),onClick:i,children:n})]})}},38516:function(e,n,r){"use strict";r.d(n,{useLoadMessageList:function(){return m}});var s=r("92769"),t=r("9161"),i=r("16044"),o=r("40509"),a=r("88802"),c=r("52983"),l=r("87382"),u=r("78597"),d=r("11907"),j=r("76185"),f=r("72676"),m=function(e,n){var r,m=(0,f.useTranslateFn)();var h=(0,c.useCallback)((r=(0,s._)(function(r){var s,o,c,d;return(0,a.__generator)(this,function(a){return(s=r.pageSize,o=r.offset,e)?(c=(0,l.createReportEvent)({eventName:"share_thread_preview_message_list"}),d=o+1,[2,j.apiService.message.MessageListV2({conversation_id:e,start_index:Number(d),batch_size:Number(Math.min(s,n-d+1)),is_reverse:!1,end_index:Number(n)}).then(function(e){var r,s,o,a;return c.success({meta:{startIndex:d,hasMore:null===(r=e.data)||void 0===r?void 0:r.has_more}}),{list:null!==(a=null===(o=e.data)||void 0===o?void 0:null===(s=o.message_list)||void 0===s?void 0:s.map(function(e){return(0,i._)((0,t._)({},e),{contentObj:(0,u.parseJSON)(e.content)})}))&&void 0!==a?a:[],total:n}},function(e){throw c.error({reason:"[MessageListV2] error",error:e,meta:{startIndex:d}}),e})]):[2,{list:[],total:0}]})}),function(e){return r.apply(this,arguments)}),[e,n]);return(0,u.useLoadMore)(h,{initPageSize:25,incrementSize:25,refreshDeps:[h],auto:!0,onError:function(e,n){0===(0,o._)(n,1)[0].offset&&d.Toast.error({content:m("notification_system_error_toast"),showClose:!1,theme:"light"})}})}},59583:function(e,n,r){"use strict";r.d(n,{useSave:function(){return u}});var s=r("92769"),t=r("88802"),i=r("87382"),o=r("11907"),a=r("26498"),c=r("76185"),l=r("72676"),u=function(){var e,n=(0,l.useTranslateFn)();return e=(0,s._)(function(e,r,s){var l,u,d,j,f;return(0,t.__generator)(this,function(t){switch(t.label){case 0:l=(0,i.createReportEvent)({eventName:"SAVE_THREAD_SHARE_INFO"}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,c.apiService.samantha.SaveThreadShareInfo({thread_id:e,message_index_end:Number(r),is_allow_seo:s})];case 2:return u=t.sent().data,l.success(),[2,u];case 3:if(Number(null==(d=t.sent())?void 0:null===(j=d.errorOption)||void 0===j?void 0:j.code)===a.ErrorCodes.CONVERSATION_MESSAGE_OVER_LIMIT)return o.Toast.error({content:n("share_preview_error_exceedlimit"),showClose:!1,theme:"light"}),[2];if(Number(null==d?void 0:null===(f=d.errorOption)||void 0===f?void 0:f.code)===a.ErrorCodes.CONVERSATION_UNDER_REVIEW)return o.Toast.error({content:n("share_preview_error_underreview"),showClose:!1,theme:"light"}),[2];return o.Toast.error({content:n("notification_system_error_toast"),showClose:!1,theme:"light"}),l.error({reason:"DeleteShareThreadInfo failed",error:d}),[2,null];case 4:return[2]}})}),function(n,r,s){return e.apply(this,arguments)}}},59403:function(e,n,r){"use strict";r.d(n,{useShareInfo:function(){return x}});var s=r("92769"),t=r("9161"),i=r("16044"),o=r("40509"),a=r("88802"),c=r("52983"),l=r("87382"),u=r("78597"),d=r("11907"),j=r("26498"),f=r("8067"),m=r("98402"),h=r("76185"),v=r("72676"),x=function(e){var n,r=e.threadId,x=e.onSucc,_=(0,v.useTranslateFn)(),p=(0,o._)((0,c.useState)(!1),2),g=p[0],b=p[1],w=(0,u.useLatest)(r);var N=(n=(0,s._)(function(){var e,n,r,s,c,u,v,p,g,N,P,S,C,E,y;return(0,a.__generator)(this,function(a){switch(a.label){case 0:if(!w.current)return[2];e=(0,l.createReportEvent)({eventName:"get_thread_share_info"}),a.label=1;case 1:return a.trys.push([1,3,,4]),n=(0,m.loadLocalConfig)(navigator.language),[4,Promise.all([h.apiService.samantha.GetThreadShareInfo({thread_id:w.current}),n])];case 2:return s=(r=o._.apply(void 0,[a.sent(),2]))[0].data,c=r[1].localeConfig,e.success(),b(!0),c&&f.default.setLocaleConfig(c),x((0,i._)((0,t._)({},null!==(u=null==s?void 0:s.share_info)&&void 0!==u?u:{}),{allowShare:!0})),[3,4];case 3:if(Number(null==(v=a.sent())?void 0:null===(p=v.errorOption)||void 0===p?void 0:p.code)===j.ErrorCodes.CONVERSATION_MESSAGE_OVER_LIMIT)return b(!0),x((0,i._)((0,t._)({},null!==(S=null===(P=v.errorOption.response)||void 0===P?void 0:null===(N=P.data)||void 0===N?void 0:N.share_info)&&void 0!==S?S:{}),{allowShare:!1,messageNumberExceed:!0})),[2];if(Number(null==v?void 0:null===(g=v.errorOption)||void 0===g?void 0:g.code)===j.ErrorCodes.CONVERSATION_UNDER_REVIEW)return b(!0),x((0,i._)((0,t._)({},null!==(y=null===(E=v.errorOption.response)||void 0===E?void 0:null===(C=E.data)||void 0===C?void 0:C.share_info)&&void 0!==y?y:{}),{allowShare:!1,titleAuditing:!0})),[2];return d.Toast.error({content:_("notification_system_error_toast"),showClose:!1,theme:"light"}),e.error({reason:"GetThreadShareInfo failed",error:v}),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)});return{visible:g,setVisible:function(e){if(!e){b(e);return}return N()}}}},34175:function(e,n,r){"use strict";r.d(n,{useStopSharing:function(){return l}});var s=r("92769"),t=r("88802"),i=r("87382"),o=r("11907"),a=r("76185"),c=r("72676"),l=function(){var e,n=(0,c.useTranslateFn)();return e=(0,s._)(function(e){var r,s;return(0,t.__generator)(this,function(t){switch(t.label){case 0:r=(0,i.createReportEvent)({eventName:"share_thread_stop_sharing"}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.apiService.samantha.DeleteShareThreadInfo({share_id:e})];case 2:return t.sent(),r.success(),o.Toast.success({content:n("share_page_error_deleted"),theme:"light",showClose:!1}),[2,!0];case 3:return s=t.sent(),o.Toast.error({content:n("notification_system_error_toast"),showClose:!1,theme:"light"}),r.error({reason:"DeleteShareThreadInfo failed",error:s}),[3,4];case 4:return[2,!1]}})}),function(n){return e.apply(this,arguments)}}},49226:function(e,n,r){"use strict";r.d(n,{useShareThreadModal:function(){return P}});var s=r("92769"),t=r("9161"),i=r("16044"),o=r("40509"),a=r("88802"),c=r("97458"),l=r("52983"),u=r("98199"),d=r("86724"),j=r.n(d),f=r("78597"),m=r("11907"),h=r("11372"),v=r("54769"),x=r("94686"),_=r("72676"),p=r("16629"),g=r("49079"),b=r("34175"),w=r("59403"),N=r("59583"),P=function(e){var n,r,d,P,S,C=e.conversationId,E=e.conversationName,y=(0,h.getThreadIdByConversationId)(C),I=(0,_.useTranslateFn)(),T=(0,v.useMessageLinks)(C),k=(0,u.default)(T.filter(function(e){return!e.isLocalMessage})),O=(0,v.useMessage)(C,k),M=(0,o._)((0,l.useState)(!1),2),R=M[0],L=M[1],D=(0,o._)((0,l.useState)(!1),2),A=D[0],z=D[1],V=(0,o._)((0,l.useState)(!1),2),U=V[0],F=V[1],B=(0,o._)((0,l.useState)(""),2),H=B[0],G=B[1],W=(0,o._)((0,l.useState)(0),2),q=W[0],K=W[1],J=(0,w.useShareInfo)({threadId:y,onSucc:function(e){if(e){var n=e.share_id,r=e.message_index_end,s=e.allowShare,t=e.messageNumberExceed,i=e.titleAuditing;G(null!=n?n:""),K(Number(null!=r?r:0)),L(s),z(!!t),F(!!i)}}}),X=J.visible,Y=J.setVisible,$=(0,b.useStopSharing)(),Q=(0,N.useSave)(),Z=(0,x.useUserProfile)(),ee=(0,f.useDebounceFn)((0,s._)(function(){return(0,a.__generator)(this,function(e){switch(e.label){case 0:if(!H)return[2];return[4,$(H)];case 1:return e.sent()&&Y(!1),[2]}})}),{leading:!0,trailing:!1}).run,en=!!H&&Number(null==O?void 0:O.index)>q,er=function(e){j()("".concat(location.origin,"/thread/").concat(e)),m.Toast.success({content:I("share_text_link_copied"),showClose:!1,theme:"light"})};var es=(0,f.useDebounceFn)((n=(0,s._)(function(e){var n,r;return(0,a.__generator)(this,function(s){switch(s.label){case 0:if(!y)return[2];if(H&&!en)return er(H),Y(!1),[2];return[4,Q(y,Number(null!==(n=null==O?void 0:O.index)&&void 0!==n?n:0),e)];case 1:return(null==(r=s.sent())?void 0:r.share_id)&&(er(r.share_id),Y(!1)),[2]}})}),function(e){return n.apply(this,arguments)}),{leading:!0,trailing:!1}).run,et=(0,i._)((0,t._)({},e),{conversationId:C,conversationName:E,avatarUrl:null!==(d=null==Z?void 0:null===(r=Z.image)||void 0===r?void 0:r.tiny_url)&&void 0!==d?d:p,ownerName:null!==(P=null==Z?void 0:Z.nickname)&&void 0!==P?P:"",endIndex:null!==(S=Number(null==O?void 0:O.index))&&void 0!==S?S:0,title:I("share_preview_title"),visible:X,hasNewMessage:en,alreadyExist:!!H,allowShare:R,notAllowShareReason:A?I("share_preview_error_exceedlimit"):U?I("share_preview_error_underreview"):"",onCancel:function(){return Y(!1)},onStopSharing:ee,onCopy:es});return{shareModal:y?(0,c.jsx)(g.ShareThreadModal,(0,t._)({},et)):null,setVisible:Y}}},42531:function(e,n,r){"use strict";r.d(n,{MessageListPreview:function(){return v}});var s=r("97458"),t=r("28377"),i=r("52983"),o=r("87608"),a=r.n(o),c=r("78597"),l=r("53268"),u=r("98402"),d=r("72676"),j=r("88824"),f=r("38516"),m=r("43138"),h=r("7247"),v=function(e){var n=e.conversationId,r=e.endIndex,o=e.title,v=e.avatarUrl,x=e.ownerName,_=(0,d.useTranslateFn)(),p=(0,f.useLoadMessageList)(n,r),g=p.data,b=p.loadingMore,w=p.loading,N=p.loadMore,P=p.noMore,S=p.error,C=p.params,E=p.refresh,y=(0,c.useDebounceFn)(E,{leading:!0,trailing:!1}).run,I=(0,t.useInView)(),T=I.ref,k=I.inView,O=Date.now();return((0,i.useEffect)(function(){k&&!b&&!w&&!P&&N()},[k,b,w]),S&&0===C[0].offset)?(0,s.jsx)(m.ErrorMsgPanel,{msg:_("share_preview_error_failedpreview"),onClick:y}):(0,s.jsx)("div",{className:"relative h-294 rounded-10 border-1 border-solid border-s-color-border-primary",children:(0,s.jsx)("div",{className:a()("preview-container overflow-x-hidden overflow-y-auto h-[167%] w-[167%] origin-top-left absolute bg-s-color-bg-trans rounded-10",h["preview-container"]),children:(0,s.jsxs)("div",{className:"message-list-preview p-16",children:[(0,s.jsxs)("div",{className:"message-list-header",children:[(0,s.jsx)("div",{className:"s-font-h1 mt-12 ml-10",children:o}),(0,s.jsxs)("div",{className:"mt-10 ml-10 flex items-center",children:[(0,s.jsx)(l.Avatar,{src:v,className:"w-24 h-24"}),(0,s.jsxs)("div",{className:"ml-8 s-font-small text-s-color-text-tertiary",children:[x," ",(0,u.formatDate)(O)]})]})]}),(0,s.jsx)(j.MessageShareDataList,{message_list:null==g?void 0:g.list,noMore:P}),(0,s.jsxs)("div",{className:"flex justify-center my-10",ref:T,children:[S?(0,s.jsx)("div",{className:"flex h-104 w-full items-center justify-center cursor-pointer s-font-base text-s-color-text-tertiary",onClick:y,children:_("share_preview_error_failedpreview")}):null,!P&&(0,s.jsx)(l.Spin,{size:"middle"})]})]})})})}},49079:function(e,n,r){"use strict";r.d(n,{ShareThreadModal:function(){return g}});var s=r("9161"),t=r("16044"),i=r("89334"),o=r("40509"),a=r("97458"),c=r("52983"),l=r("87608"),u=r.n(l),d=r("78597"),j=r("52382"),f=r("41837"),m=r("19266"),h=r("53268"),v=r("72676"),x=r("42531"),_=r("43138"),p=r("10339"),g=function(e){var n=(0,v.useTranslateFn)(),r=e.conversationId,l=e.conversationName,g=e.avatarUrl,b=e.ownerName,w=e.endIndex,N=e.visible,P=e.hasNewMessage,S=e.alreadyExist,C=e.allowShare,E=e.notAllowShareReason,y=e.onStopSharing,I=e.onCopy,T=(0,i._)(e,["conversationId","conversationName","avatarUrl","ownerName","endIndex","visible","hasNewMessage","alreadyExist","allowShare","notAllowShareReason","onStopSharing","onCopy"]),k=(0,o._)((0,c.useState)(!0),2),O=k[0],M=k[1];return(0,c.useEffect)(function(){M(!0)},[r,N]),(0,a.jsxs)(h.Modal,(0,t._)((0,s._)({visible:N},T),{hasCancel:!1,className:p["share-thread-modal"],closeIcon:(0,a.jsx)(m.ReactComponent,{className:"text-24"}),footer:null,children:[P?(0,a.jsxs)("div",{className:u()("share-warning-msg",p["share-warning-msg"],"rounded-10 flex gap-8 mt-12 items-center p-10"),children:[(0,a.jsx)(j.ReactComponent,{className:"text-24 shrink-0"}),(0,a.jsx)("div",{className:"grow",children:n("share_preview_text_newmessage")})]}):null,(0,a.jsx)("div",{className:"share-content mt-12",children:C?(0,a.jsx)(x.MessageListPreview,{conversationId:r,endIndex:w,title:l,avatarUrl:g,ownerName:b}):(0,a.jsx)(_.ErrorMsgPanel,{msg:null!=E?E:""})}),(0,a.jsxs)("div",{className:"share-tips flex items-center mt-12 text-s-color-text-quaternary",children:[(0,a.jsx)(j.ReactComponent,{className:"text-24 mr-8 shrink-0"}),(0,a.jsx)("div",{className:"s-font-small-strong",children:n("share_preview_text_privacymessage")})]}),(0,a.jsxs)("div",{className:"share-tips flex items-center mt-4 text-s-color-text-secondary cursor-pointer select-none",children:[(0,a.jsx)(h.Checkbox,{checked:O,onChange:function(e){return M(e.target.checked)},className:"m-4"}),(0,a.jsx)("div",{className:"ml-8 s-font-small-strong",onClick:function(){return M(function(e){return!e})},children:n("share_preview_text_SEO")})]}),(0,a.jsxs)("div",{className:u()("share-footer mt-12 mb-24 flex items-center select-none",S?"justify-between pr-12":"justify-center"),children:[S?(0,a.jsx)("div",{className:"h-48 !leading-48 px-12 rounded-10 hover:bg-s-color-bg-trans active:bg-s-color-bg-trans-secondary text-s-color-alert s-font-base-em cursor-pointer min-0 overflow-hidden text-ellipsis",onClick:y,children:n("share_preview_stopsharing")}):null,(0,a.jsx)(h.Button,{disabled:!C,icon:(0,a.jsx)(f.ReactComponent,{className:"text-24",style:{transform:(0,d.isRTL)()?"scaleX(-1)":void 0}}),className:u()("h-48 rounded-10 bg-s-color-brand-primary-default !text-s-color-text-invert-primary s-font-base-em py-12 pr-18 pl-10",{"hover:!bg-s-color-brand-primary-hover active:!bg-s-color-brand-primary-pressed":C,"w-300":!S}),onClick:function(){return I(O)},children:n("share_preview_copylink")})]})]}))}},98402:function(e,n,r){"use strict";r.d(n,{formatDate:function(){return u},loadLocalConfig:function(){return l}});var s,t=r("92769"),i=r("40509"),o=r("88802"),a=r("8067"),c=function(e){if(e){var n,r,s,t,o=e.split(",")[0];if("undefined"!=typeof process&&[null===(r=process)||void 0===r?void 0:null===(n=r.env)||void 0===n?void 0:n.DEPLOY_CDN_REGION,null===(t=process)||void 0===t?void 0:null===(s=t.env)||void 0===s?void 0:s.REGION].every(function(e){return"cn"!==e})){var a=o.toLowerCase(),c=(0,i._)(a.split("-"),1)[0];if("zh"===c)return["zh","zh-cn","zh-sg","zh-hans","zh-hans-cn","zh-hans-sg"].includes(a)?"zh-Hans":"zh-Hant";return c}return"zh-Hans"}};var l=(s=(0,t._)(function(e){var n;return(0,o.__generator)(this,function(s){return"en"===(n=c(e))?[2,Promise.resolve({})]:[2,r("85324")("@byted/date-fmt/dist/config/".concat(n,"/index.cjs.js").replace("@byted/date-fmt/dist/config/","./")).catch(function(){return{}})]})}),function(e){return s.apply(this,arguments)}),u=function(e){var n=a.default.format(new Date(e),"ll");return["zh-hans","zh-hant","ja","ko"].includes(a.default.currentLocale.toLowerCase())?n.replace(/(年|月|日)/g," $1 "):n}},11907:function(e,n,r){"use strict";r.d(n,{Toast:function(){return a}});var s=r("53268"),t=r("78597");r("10493");var i="samantha-toast-container";if(t.inBrowser&&!document.getElementById(i)){var o=document.createElement("div");o.id=i,document.body.appendChild(o)}var a=s.ToastFactory.create({getPopupContainer:function(){return t.inBrowser?document.getElementById(i):null}})},34243:function(e){"use strict";e.exports={"conversation-modal":"conversation-modal-_35cdf",conversationModal:"conversation-modal-_35cdf",editName:"editName-a69e6c",mobileOrIPad:"mobileOrIPad-_155f9"}},7247:function(e){"use strict";e.exports={"preview-container":"preview-container-d46ca2",previewContainer:"preview-container-d46ca2"}},10339:function(e){"use strict";e.exports={"share-thread-modal":"share-thread-modal-b8ad39",shareThreadModal:"share-thread-modal-b8ad39","share-warning-msg":"share-warning-msg-_8a24d",shareWarningMsg:"share-warning-msg-_8a24d"}},10493:function(e){}}]);