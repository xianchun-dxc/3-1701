var __defProp=Object.defineProperty,__defNormalProp=(e,t,i)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,__publicField=(e,t,i)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,i),i),__accessCheck=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},__privateGet=(e,t,i)=>(__accessCheck(e,t,"read from private field"),i?i.call(e):t.get(e)),__privateAdd=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},__privateSet=(e,t,i,r)=>(__accessCheck(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i),__privateWrapper=(e,t,i,r)=>({set _(r){__privateSet(e,t,r,i)},get _(){return __privateGet(e,t,r)}}),__privateMethod=(e,t,i)=>(__accessCheck(e,t,"access private method"),i);import{u as useAgentStore,C as apiUrl,j as alTracker,g as showMessage,c as apiOcpcReportData,J as loginHttpClient,_ as _sfc_main$g,E as ElTooltip,K as ElInput,a as _export_sfc,L as ElAvatar,D as CardType,N as useThrottleFn,M as MessageStatus,P as get,Q as AgentType,F as CardTarget,U as renderLink,W as SearchResult,bf as getUrlParams,k as _sfc_main$k,t as twMerge,bg as require$$5,y as getDefaultExportFromCjs,z as commonjsGlobal,i as ElButton,d as useEventListener,X as useClipboard,Y as RecordType,bh as apiGetCurrentAgentServerUrl,bi as apiGenerateShareLink,bj as apiGetAgentStatus}from"../index-CR06pHgF.js";import{A as AgentFileUpload,e as errorCodeConfig,_ as _sfc_main$h,a as __unplugin_components_4$1,E as ElMessage,L as Loading,b as _sfc_main$i,T as Tag,c as _sfc_main$j,u as useContextMenu}from"./ChoosePublishArea.vue_vue_type_script_setup_true_lang-C1Yv6iIU.js";import"./el-tooltip-l0sNRNKZ.js";import{k as defineComponent,r as ref,f as computed,w as watch,J as onUnmounted,ab as resolveDirective,l as openBlock,m as createElementBlock,u as unref,p as createBaseVNode,P as createVNode,Y as createCommentVNode,a0 as withDirectives,S as withCtx,T as createBlock,X as toDisplayString,C as isRef,aq as withKeys,M as normalizeClass,$ as withModifiers,ac as pushScopeId,ad as popScopeId,n as nextTick,W as createTextVNode,af as useRouter,G as renderSlot,Q as Fragment,ah as renderList,aa as storeToRefs,K as reactive,e as onMounted,ax as onErrorCaptured,b as readonly,ag as useRoute,a as watchEffect,V as normalizeStyle}from"./vue-CmQldkW7.js";import{E as ElScrollbar}from"./el-scrollbar-DRV_l6Mg.js";import{E as ElImage,r as require$$1,u as useWriteStore,T as TEMPLATE_AGENT_TYPE_WRITING,a as TEMPLATE_AGENT_TYPE_IMAGE}from"./fetch-I3PI3dyF.js";import{c as cloneDeep}from"./cloneDeep-a86zWJ9A.js";import{f as flow,N,O as OprBar,u as useEmitter,a as useCheckbox}from"./useEmitter-Ce9DhNQt.js";import{o as openDialog}from"./TgSelect-BJEbABWH.js";import{_ as _sfc_main$l,a as _sfc_main$m}from"./ImageViewer.vue_vue_type_style_index_0_lang-C86FRFNF.js";import{E as Editor}from"./Editor-ICoCGuQW.js";import{T as TemplateList}from"./TemplateList-ChY6XC-F.js";import{u as useAgentStore$1}from"./useAgentStore-Bcw5Y3Lf.js";import"./_flatRest-Ds6aPXmo.js";import"./clipboard-DPkvDTpg.js";import"./index-ngmwIvrM.js";const _withScopeId$3=e=>(pushScopeId("data-v-f2a28982"),e=e(),popScopeId(),e),_hoisted_1$e={class:"mx-auto my-0 max-w-[670px]"},_hoisted_2$d={key:0,class:"mb-[9px] flex items-center justify-center"},_hoisted_3$a={class:"cancelBtn flex items-center justify-center gap-[4px] rounded-[12px] bg-[#fff] px-[12px] py-[8px] shadow-[0px_2px_8px_0px_rgba(0,8,24,0.04)]"},_hoisted_4$6=_withScopeId$3((()=>createBaseVNode("span",{class:"textHover text-[14px] font-normal leading-[170%] text-[#485568]"}," 智能体思考中 ",-1))),_hoisted_5$6={key:1,class:"mb-[9px] flex items-center justify-center"},_hoisted_6$5=_withScopeId$3((()=>createBaseVNode("span",{class:"textHover text-[14px] font-normal leading-[170%] text-[#485568]"}," 停止生成 ",-1))),_hoisted_7$5={class:"inputContent flex items-end gap-[8px]"},_hoisted_8$5={class:"flex max-h-[124px] min-h-[48px] max-w-[614px] flex-1 cursor-pointer items-center justify-center gap-[6px] rounded-[8px] border-[1px] border-solid border-[#2785FF] bg-[#fff]"},_hoisted_9$5={class:"text-[14px] font-normal leading-[22px] text-[#2785FF]"},_hoisted_10$4={key:1,class:"flex flex-col rounded-[8px] bg-[#fff]"},_hoisted_11$4={class:"inputDiv flex !w-[614px] items-end gap-[24px] py-[12px] pl-[9px] pr-[20px]"},_hoisted_12$4={class:"flex items-center justify-center gap-[12px]"},_hoisted_13$1=_withScopeId$3((()=>createBaseVNode("div",{class:"mx-[auto] py-[16px] text-center text-[12px] font-normal leading-[20px] text-[#B1B7C0]"}," 内容由 AI 生成，不能保证真实 ",-1))),_sfc_main$f=defineComponent({__name:"AgentInput",props:{hasDelete:{type:Boolean,default:!1},hasOffed:{type:Boolean,default:!1}},setup(e){const t=e,i=ref(),r=ref(!1),a=computed((()=>useAgentStore().currentAgentConfig)),n=computed((()=>{var e;return null==(e=useAgentStore().currentAgentInfo)?void 0:e.status})),s=computed((()=>1===n.value)),o=computed((()=>{var e;return 99===(null==(e=useAgentStore().latestChatRecord)?void 0:e.recordType)})),l=computed((()=>{var e;return"010"===useAgentStore().currentAgentId&&13===(null==(e=useAgentStore().latestChatRecord)?void 0:e.recordType)&&99===useAgentStore().agents[useAgentStore().currentAgentId].detailList[1].recordType})),c=computed((()=>{var e,t;return null==(t=null==(e=a.value)?void 0:e.configs)?void 0:t.enable_input_document})),d=computed((()=>{var e;return c.value&&!(null==(e=a.value)?void 0:e.upload_function_types)})),h=computed((()=>{var e,t,i,r;return c&&(null==(t=null==(e=a.value)?void 0:e.upload_function_types)?void 0:t.includes("select_photo"))?1:c&&!(null==(r=null==(i=a.value)?void 0:i.upload_function_types)?void 0:r.includes("select_photo"))?2:0})),u=computed((()=>1===h.value?apiUrl.agentImgUpload:2===h.value?apiUrl.agentFileUpload:"#")),p=computed((()=>!1)),_=ref({}),f=computed((()=>{var e,t,i,r;return c&&(null==(t=null==(e=a.value)?void 0:e.upload_function_types)?void 0:t.includes("select_photo"))?".jpg,.jpeg,.png":c&&(null==(i=a.value)?void 0:i.upload_file_types)?null==(r=a.value)?void 0:r.upload_file_types.map((e=>"."+e)).join(","):".pdf,.txt,.doc,.docx"})),g=computed((()=>f.value.replace(/,/g,"/"))),m=ref(1),v=ref([]);watch((()=>v.value.length),(()=>{W.value&&(clearInterval(W.value),m.value=1)}));const b=useAgentStore(),y=()=>{var e;const t=b.latestChatRecord.askId;b.cancelMessage({ask_id:t}),alTracker().reportImmediate({event:"agent_chat_page_stop_button_click",event_info:{origin:"agent_chat_page",entity:"stop_button",event:"click",ask_id:t,agent_id:b.currentAgentId,conversation_id:null==(e=b.agents[b.currentAgentId].session)?void 0:e.conversation_id}})},A=async()=>{var e,t;1!==n.value&&0!==n.value?o.value||l.value||(r.value=!0,await b.sendClearContextMessage(),showMessage("已".concat((null==(e=a.value)?void 0:e.clean_context_text)||"清除上下文"),{icon:"success"}),setTimeout((()=>{r.value=!1}),1e3),alTracker().reportImmediate({event:"agent_chat_page_clear_click",event_info:{origin:"agent_chat_page",entity:"clear",event:"click",agent_id:b.currentAgentId,conversation_id:null==(t=b.agents[b.currentAgentId].session)?void 0:t.conversation_id}})):showMessage("正在回答，请稍后再试",{icon:"info"})},w=()=>{var e;alTracker().reportImmediate({event:"agent_chat_page_chat_box_click",event_info:{origin:"agent_chat_page",entity:"chat_box",event:"click",agent_id:b.currentAgentId,conversation_id:null==(e=b.agents[b.currentAgentId].session)?void 0:e.conversation_id}})},S=ref(0),k=()=>{let e=(new Date).valueOf();(0===S.value||e-S.value>2e3)&&(S.value=e,E())},x=ref(""),C=()=>{const e=window.event||arguments[0];if("Enter"==e.key&&"Enter"==e.code&&13==e.keyCode){if(!(/macintosh|mac os x/i.test(navigator.userAgent)?e.metaKey:e.ctrlKey))return e.returnValue=!1,k(),!1;{let t=e.srcElement.selectionStart;x.value=x.value.slice(0,t)+"\n"+x.value.slice(t),nextTick((()=>{e.srcElement.selectionStart=t+1,e.srcElement.selectionEnd=t+1}))}}},E=async()=>{var e,t;2===h.value&&(T.value=!1);const i=x.value;if(i.trim())if(1!==n.value&&0!==n.value)if(m.value){if(0===h.value||0===(null==(e=v.value)?void 0:e.length))await b.sendTextMessage({content:i});else{const e=v.value.map((e=>({docId:e.docId,sign:e.sign})));await b.sendFileMessage({file:e,content:i})}x.value="",v.value=[],alTracker().reportImmediate({event:"agent_chat_page_send_button_click",event_info:{origin:"agent_chat_page",entity:"send_button",event:"click",agent_id:b.currentAgentId,conversation_id:null==(t=b.agents[b.currentAgentId].session)?void 0:t.conversation_id}}),apiOcpcReportData("ask_question",{content:"agent",agent_id:b.currentAgentId})}else showMessage("正在解析中，请稍后再试",{icon:"info"});else showMessage("正在回答，请稍后再试",{icon:"info"});else showMessage("发送内容不能为空",{icon:"info"})},P=e=>e<1024?e+"B":e<1048576?(e/1024).toFixed(2)+"KB":e<1073741824?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB",M=e=>{const t=e.split(".");return t[t.length-1]},T=ref(!1),I=ref(null),D=ref(null),R=async e=>{var t,r,a,n;const s=M(e.name);if(null==(t=I.value)||t.closePopover(),null==(r=D.value)||r.closePopover(),1===h.value){if(e.size/1024/1024>10)return showMessage("图片最大支持10MB",{icon:"info"}),i.value.resetFiles(),!1;if(-1===f.value.indexOf(s))return showMessage("只支持".concat(f.value,"格式"),{icon:"info"}),i.value.resetFiles(),!1;if(e.name){const t=await(o=e,new Promise(((e,t)=>{try{const i=new Image;o instanceof File?i.src=URL.createObjectURL(o):(i.crossOrigin="anonymous",i.setAttribute("referrerpolicy","no-referrer"),i.src=o),i.onload=()=>{e({width:i.naturalWidth,height:i.naturalHeight,src:i.src})},i.onerror=()=>{showMessage("上传或解析失败",{icon:"error"}),t("load error")}}catch(i){showMessage("上传或解析失败",{icon:"error"}),t(i)}})));_.value.src=t.src,_.value.imageType=3}return v.value.unshift({uid:e.uid,uploadType:h.value,status:0,imgUrl:_.value.src||"",docId:"",name:e.name,size:P(e.size),realSize:e.size,type:M(e.name),sign:"",percent:10}),m.value=0,null==(a=I.value)||a.closePopover(),!0}var o;if(2===h.value){const t=(()=>{let e=0;for(const t of v.value)e+=t.realSize;return e})();return e.size>104857600||t>104857600?(T.value||showMessage("上传文件最多支持100MB",{icon:"info"}),T.value=!0,!1):-1===f.value.indexOf(s)?(showMessage("只支持".concat(f.value,"格式"),{icon:"info"}),i.value.resetFiles(),!1):-1!==v.value.findIndex((e=>"html"===e.type))?(showMessage("已上传链接不能再上传文件",{icon:"info"}),!1):(v.value.unshift({uid:e.uid,uploadType:h.value,status:0,imgUrl:"",docId:"",name:e.name,size:P(e.size),realSize:e.size,type:M(e.name),sign:"",percent:10}),m.value=0,null==(n=D.value)||n.closePopover(),!0)}},L=(e,t,i)=>{const r=v.value.findIndex((e=>e.uid===t.uid));-1!==r&&(v.value[r].percent=Math.round(e.percent)),m.value=0},F={".pdf,.txt,.doc,.docx":1,".xls,.xlsx,.csv":2,".jpg,.jpeg,.png":3},N=async(e,t,r)=>{var a,n,s,o,l,c,d;if(0===e.code){const i=v.value.findIndex((e=>e.uid===t.uid));-1!==i&&(v.value[i].status=0,v.value[i].docId=e.data.id,2===h.value?W.value=setInterval((async()=>{var t,r,a,n,s,o;try{const n=await loginHttpClient.get(apiUrl.agentFileInfo+e.data.id);6===n.data.fileStatus?(m.value=1,v.value[i].status=1,v.value[i].sign=n.data.sha1,clearInterval(W.value)):n.data.fileStatus>6&&(m.value=1,v.value[i].status=3,showMessage("文件解析失败",{icon:"error"}),clearInterval(W.value),alTracker().reportImmediate({event:"agent_chat_page_upload_fail_click",event_info:{origin:"agent_chat_page",entity:"upload_fail",event:"click",documentname:null==(t=v.value[i])?void 0:t.name,type:3===(null==(r=v.value[i])?void 0:r.uploadType)?"link":"file",file_type:F[f.value],agent_id:b.currentAgentId,conversation_id:null==(a=b.agents[b.currentAgentId].session)?void 0:a.conversation_id}}),v.value=v.value.filter((e=>1===e.status)))}catch(l){m.value=1,v.value[i].status=3,showMessage("文件解析失败",{icon:"error"}),clearInterval(W.value),alTracker().reportImmediate({event:"agent_chat_page_upload_fail_click",event_info:{origin:"agent_chat_page",entity:"upload_fail",event:"click",documentname:null==(n=v.value[i])?void 0:n.name,type:3===(null==(s=v.value[i])?void 0:s.uploadType)?"link":"file",file_type:F[f.value],agent_id:b.currentAgentId,conversation_id:null==(o=b.agents[b.currentAgentId].session)?void 0:o.conversation_id}}),v.value=v.value.filter((e=>1===e.status))}}),500):(m.value=1,v.value[i].status=0===e.code?1:3,v.value=v.value.filter((e=>1===e.status)))),alTracker().reportImmediate({event:"agent_chat_page_upload_success_click",event_info:{origin:"agent_chat_page",entity:"upload_success",event:"click",documentid:null==(a=v.value[i])?void 0:a.docId,documentname:null==(n=v.value[i])?void 0:n.name,type:3===(null==(s=v.value[i])?void 0:s.uploadType)?"link":"file",file_type:F[f.value],agent_id:b.currentAgentId,conversation_id:null==(o=b.agents[b.currentAgentId].session)?void 0:o.conversation_id}})}else{const r=v.value.findIndex((e=>e.uid===t.uid));showMessage(errorCodeConfig[e.code]||"上传或解析失败",{icon:"error"}),alTracker().reportImmediate({event:"agent_chat_page_upload_fail_click",event_info:{origin:"agent_chat_page",entity:"upload_fail",event:"click",documentname:null==(l=v.value[r])?void 0:l.name,type:3===(null==(c=v.value[r])?void 0:c.uploadType)?"link":"file",file_type:F[f.value],agent_id:b.currentAgentId,conversation_id:null==(d=b.agents[b.currentAgentId].session)?void 0:d.conversation_id}}),v.value=v.value.filter((e=>e.uid!==t.uid)),i.value.resetFiles(),m.value=1}},O=()=>{var e,t;null==(e=I.value)||e.closePopover(),null==(t=D.value)||t.closePopover(),v.value=[],i.value.resetFiles(),m.value=1,showMessage("上传或解析失败",{icon:"error"})},B=()=>{1===h.value&&showMessage("上传数量不能超过1个",{icon:"info"}),2===h.value&&showMessage("上传数量不能超过1个",{icon:"info"})},G=ref(),W=ref(),j=e=>{var t,i;e.trim()&&(-1!==v.value.findIndex((e=>"html"===e.type))?showMessage("链接最多上传一个",{icon:"info"}):-1!==v.value.findIndex((e=>2===e.uploadType))?showMessage("已上传文件不能再上传链接",{icon:"info"}):(m.value=0,v.value=[{uid:(new Date).getTime(),uploadType:3,
// 1图片2文件3链接
status:0,imgUrl:"",docId:"",name:e,size:"",realSize:0,type:"html",sign:"",percent:10}],G.value=setInterval((()=>{v.value[0].percent<100&&(v.value[0].percent+=5)}),10),null==(t=I.value)||t.closePopover(),null==(i=D.value)||i.closePopover(),loginHttpClient.post(apiUrl.agentLinkUpload,{htmlUrl:e}).then((async t=>{v.value=[{uid:(new Date).getTime(),uploadType:3,
// 1图片2文件3链接
status:0,imgUrl:"",docId:t.data.id,name:e,size:"",realSize:0,type:"html",sign:"",percent:100}],W.value=setInterval((async()=>{try{const e=await loginHttpClient.get(apiUrl.agentFileInfo+t.data.id);6===e.data.fileStatus?(m.value=1,v.value[0].status=1,clearInterval(W.value)):e.data.fileStatus>6&&(m.value=1,v.value=[],showMessage("当前链接解析失败",{icon:"error"}),clearInterval(W.value))}catch(e){m.value=1,v.value=[],showMessage("当前链接解析失败",{icon:"error"}),clearInterval(W.value)}}),500),clearInterval(G.value)})).catch((()=>{showMessage("当前链接无效，请重新输入",{icon:"error"}),m.value=1,v.value=[],clearInterval(G.value)}))))},V=e=>{var t;const r=v.value.find((t=>t.uid===e));v.value=v.value.filter((t=>t.uid!==e)),i.value.resetFiles(),alTracker().reportImmediate({event:"agent_chat_page_filebox_delete_click",event_info:{origin:"agent_chat_page",entity:"filebox_delete",event:"click",documentid:null==r?void 0:r.docId,documentname:null==r?void 0:r.name,type:3===(null==r?void 0:r.uploadType)?"link":"file",agent_id:b.currentAgentId,conversation_id:null==(t=b.agents[b.currentAgentId].session)?void 0:t.conversation_id}})},U=e=>{var t,i;1===e?alTracker().reportImmediate({event:"agent_chat_page_filebox_file_click",event_info:{origin:"agent_chat_page",entity:"filebox_file",event:"click",agent_id:b.currentAgentId,conversation_id:null==(t=b.agents[b.currentAgentId].session)?void 0:t.conversation_id}}):alTracker().reportImmediate({event:"agent_chat_page_filebox_link_click",event_info:{origin:"agent_chat_page",entity:"filebox_link",event:"click",agent_id:b.currentAgentId,conversation_id:null==(i=b.agents[b.currentAgentId].session)?void 0:i.conversation_id}})},z=computed((()=>{var e;return t.hasDelete?"当前智能体已被作者删除，暂不支持对话":t.hasOffed?"当前智能体已下架，暂不支持对话":(null==(e=a.value)?void 0:e.pc_input_text)||"请输入你的问题"}));return onUnmounted((()=>{G.value&&(clearInterval(G.value),m.value=1)})),(e,t)=>{var o;const l=_sfc_main$g,b=_sfc_main$g,S=ElTooltip,E=_sfc_main$h,P=__unplugin_components_4$1,M=ElInput,T=resolveDirective("preventReClick"),F=resolveDirective("login");return openBlock(),createElementBlock("div",_hoisted_1$e,[0===unref(n)&&"004"!==unref(useAgentStore)().currentAgentId?(openBlock(),createElementBlock("div",_hoisted_2$d,[createBaseVNode("button",_hoisted_3$a,[createVNode(l,{class:"relative top-[-1px] animate-spin",name:"ic_send_loading"}),_hoisted_4$6])])):createCommentVNode("",!0),(unref(s)||0===unref(n)&&"004"===unref(useAgentStore)().currentAgentId)&&!unref(r)?(openBlock(),createElementBlock("div",_hoisted_5$6,[withDirectives((openBlock(),createElementBlock("button",{class:"cancelBtn flex items-center justify-center gap-[4px] rounded-[12px] bg-[#fff] px-[12px] py-[8px] shadow-[0px_2px_8px_0px_rgba(0,8,24,0.04)]",onClick:y},[createVNode(b,{class:"imgShow h-[24px] w-[24px]",name:"ic_stop_fill"}),createVNode(b,{class:"imgHover h-[24px] w-[24px]",name:"ic_stop_hover"}),_hoisted_6$5])),[[T],[F]])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_7$5,[createVNode(S,{content:(null==(o=unref(a))?void 0:o.clean_context_text)||"清除上下文",effect:"dark",placement:"top"},{default:withCtx((()=>[withDirectives(createBaseVNode("div",{class:"clear",onClick:A},null,512),[[F]])])),_:1},8,["content"]),unref(p)&&!unref(x)?(openBlock(),createBlock(E,{key:"1",ref_key:"popover",ref:I},{reference:withCtx((()=>[withDirectives((openBlock(),createElementBlock("div",_hoisted_8$5,[createVNode(b,{class:"h-[20px] w-[20px]",name:"ic_file_arrow_up_hover"}),createBaseVNode("span",_hoisted_9$5," 添加"+toDisplayString(1===unref(h)?"图片":"文档")+toDisplayString(unref(d)?"或链接":""),1)])),[[F]])])),default:withCtx((()=>[createVNode(AgentFileUpload,{ref_key:"uploadRef",ref:i,uploadResult:unref(v),uploadType:unref(h),hasLink:unref(d),hasUpload:unref(c),action:unref(u),uploadObj:unref(_),accept:unref(f),uploadTip:unref(g),"on-success":N,"on-progress":L,"before-upload":R,"on-error":O,"on-exceed":B,onLinkUpload:j},null,8,["uploadResult","uploadType","hasLink","hasUpload","action","uploadObj","accept","uploadTip"])])),_:1},512)):(openBlock(),createElementBlock("div",_hoisted_10$4,[createVNode(P,{uploadType:unref(h),list:unref(v),onRemove:V},null,8,["uploadType","list"]),createBaseVNode("div",_hoisted_11$4,[withDirectives(createVNode(M,{class:"mainInput",modelValue:unref(x),"onUpdate:modelValue":t[0]||(t[0]=e=>isRef(x)?x.value=e:null),disabled:e.hasDelete||e.hasOffed,type:"textarea",autosize:{minRows:1,maxRows:4},placeholder:unref(z),onFocus:w,onKeydown:t[1]||(t[1]=withKeys((e=>C()),["enter"]))},null,8,["modelValue","disabled","placeholder"]),[[F]]),createBaseVNode("div",_hoisted_12$4,[unref(c)?(openBlock(),createBlock(E,{class:normalizeClass(["translate-y-[-12px]",unref(d)?"translate-x-[calc(-50%+105px)]":"translate-x-[calc(-50%+68px)]"]),key:"2",ref_key:"filePopover",ref:D},{reference:withCtx((()=>[createBaseVNode("div",null,[createVNode(S,{effect:"dark",content:1===unref(h)?"上传图片":"上传文件",placement:"top"},{default:withCtx((()=>[withDirectives(createBaseVNode("div",{class:"uploadFile h-[24px] w-[24px] cursor-pointer",onClick:t[2]||(t[2]=e=>U(1))},null,512),[[F]])])),_:1},8,["content"])])])),default:withCtx((()=>[createVNode(AgentFileUpload,{ref_key:"uploadRef",ref:i,uploadResult:unref(v),uploadType:unref(h),hasLink:unref(d),hasUpload:unref(c),action:unref(u),uploadObj:unref(_),accept:unref(f),uploadTip:unref(g),"on-success":N,"on-progress":L,"before-upload":R,"on-error":O,"on-exceed":B,onLinkUpload:j},null,8,["uploadResult","uploadType","hasLink","hasUpload","action","uploadObj","accept","uploadTip"])])),_:1},8,["class"])):createCommentVNode("",!0),unref(d)?(openBlock(),createBlock(E,{class:"translate-x-[calc(-50%+70px)] translate-y-[-12px]",key:"3",ref_key:"popover",ref:I},{reference:withCtx((()=>[createBaseVNode("div",null,[createVNode(S,{effect:"dark",content:"上传链接",placement:"top"},{default:withCtx((()=>[withDirectives(createBaseVNode("div",{class:"uploadLink h-[24px] w-[24px] cursor-pointer",onClick:t[3]||(t[3]=e=>U(2))},null,512),[[F]])])),_:1})])])),default:withCtx((()=>[createVNode(AgentFileUpload,{ref_key:"uploadRef",ref:i,uploadResult:unref(v),uploadType:unref(h),hasLink:unref(d),hasUpload:unref(c),action:unref(u),uploadObj:unref(_),accept:unref(f),uploadTip:unref(g),"on-success":N,"on-progress":L,"before-upload":R,"on-error":O,"on-exceed":B,onLinkUpload:j},null,8,["uploadResult","uploadType","hasLink","hasUpload","action","uploadObj","accept","uploadTip"])])),_:1},512)):createCommentVNode("",!0),e.hasDelete||e.hasOffed?createCommentVNode("",!0):withDirectives((openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["sendBtn h-[24px] w-[24px] cursor-pointer rounded-[50%] bg-[#2785FF] opacity-40",unref(x)&&unref(m)&&"!opacity-100"]),onClick:withModifiers(k,["stop"])},null,2)),[[F]])])])]))]),_hoisted_13$1])}}}),__unplugin_components_4=_export_sfc(_sfc_main$f,[["__scopeId","data-v-f2a28982"]]),iconHeat="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAxCAYAAACcXioiAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAwaSURBVHgB7Vl7bN1VHf+c3+933/e262ttb9euHetgZDKBIQzQDXkMeUxmHAMhyiOOKEFBDYKMrAgCMiVxTRYgGRAl/jGS4RQcmiiSKTEEFMbcxsYeDLoH69Z3e2/vvb/j5/s7v1/bla5rtzbRhJOc/h7n3HM+n+/7/Ap81j5r/5tNz559QeaiK0/H/2vTM2ferkudbl1We6fWWmGSmoXJajn3AKrDUTS0NKO+Zq1uaKjEJLTJI3DOeXvQXsjgtLRC6cFb0df+d71s+WmY4DZ5BGbWtSHj9qLgALXTgPKumdjw7D/yDXOuxwS2SSNwdO7cXmRUBt05IFwGTK8D6q1K+/CW3+ra2h/RLyZk70kj0FlT04+MlUVPP59sIFYqWgEaIzY6PlqFqmlr9FtvhXCKbdIIFO/YEYHtRunMQIFBSNGUIiXAtOnAGVHAbVmOay9bp1evLsIptEkjULL+ZRq+LkUxpZ/SZieHf6IpYGoNUBdSyLdfh1WPNuumJgcn2SbPiXduuxzhXBwVMeDsboIuEDw1keKWJXGggn7BAIWug9/EmmcewUm2cREYa0LSjY2fR8vHP0AVl49HzTbzSKIyZ3YM2YZECcemcn7mk+/r2vobcRJtzAT0unU2liy76XjjuUsuX6BLK36l03XPuLv3vIZCpha1jrF9i7xd9ll9QII+YfM+yvcpkihSUOF8FD1tD+pLLx13shtzitdz516suwv3Wbu2XDPieHnF72G1XYvGNAFrA7QqDCRp83MYiUL+bl38s5XvmSLQfxT4gH035x/hWFXd99S+fc0YRxuTBvSNy8t1NP+YSjiREcevuqUKHW1XIEXQjZTqmdW80ocTU42di8TpAsgRaJRkyqgJl/c2+xQYcjLe03srxtlOSEA//XQIm//yG1WPi7nR3hEnbX/jG7DyEcwivyTRRMRkaOcJXsu1uZeutelp+kPBNaCDICr37e2z9XPPRTGOdmINPPjT23CadSXa6YB27LXhw3rDhhTaDyz3JFnGiFMggTyXjRBofcZI2oUPXoDyjyLaCppQHubdAAn6wrvvlmAcbVQC+sknY6jI34UIbbY180HnVYteHT6n8MBDlyHTNQu1fHASBCtLEnFtrwHqAeezLpguqF1ep3Qak8oPIeC1aAQTRQD79lViSrwGe7o0eqc8XNzUdHT4FLtz/2JKUaGcklcJE21qaedRNxAD3/tdY7CHidxiz+tjQ0nGzmHCCHT1O+goWDigv6u2bf718GG99PZS5PsWgJbjCU6TRBFBTckNSh6+1OUqGpGrmJWAj2cZiXxCSi4qj6ryHkwUgZ5IohuF1ErV8tFTI07YufUM9HZM9+w/TBa0NNRkDXgxI8s1kSbkmi73EmKliaasguGWNwRUItmGlXd3YqIIJNesOoiHVjbrq5fM0ed/8czh44X2I42IcA3RgMMoU0pAEdcHz3uHPUxthOTKdxH/KpWPto3kZXrWv9rqiFIqsD3oFffO1gsX1uNkCXitpSWFTZs2oPPQhcOHbCczA+JyInlLCPQPgheg0ZzxhThFnOB93K+HpKhTYnKMmHIsCGSuddcxGzz1wlx383/uHq2EGT0KNTVZeOIXTSiOzYAlRjuspeJTPAeUnpSDixAQyfM+1m8Ae6D5WohKaJWrgFcScpOUgm00IM11a45Zvzgyzwr33YL5C87AyRDAq6+fh7bW23E6N2zvKP3UeEdXEQKFF3X4YbJgpB0rGMBhZQgk5J5O7tB+bD9iaZYZEValRSHvzIOenrSunnG/Xnrz6foL8xch33EbzbPYbTu6YNwERG3u9i3fQSybRJqbhXLnewXd0NZGB5YmpYCYi5bwyeQVy/m2rs1YMd9FtQFuR430FUsOixqIl/NsUM/yg0RKOH5w96N48YXt2P7mqygplOBQD6yjrd8aNwF8Zcl0K9e9GCxrUEUAVaHFWLFi0QDB+fNLYefO9VbwnFgiDG0hzjIhxPm2X3Wm+o3d52OmMlWUgWWZ0kKytsOeoIDStJ6z+NHi/AbgXBalDdT6Vmq1V0MfPXyOfvzx4pFgHv8k9NHOy6H6SpCSWa38TJKOYuOOl3RD9SrW8weZ8pchlS2CLJskwBCXilomtlshAzRO8JG8iTgSNt0gqRVMONWSyCRD50x3Od+lRyv6cqFgUoi0QiGM9a9cwLs/jZ3A/v1LBiJMdxslSSaLGsPY/vEDaKFkqglAqvdyAivmWJQT45axcSdqnDVR8LdQJjdYPnDH948kCbQL0Iwpr23msDAFIKmsx9+7z8eza8+XRyIwogl5FWEhf85Aim+jOXTt48YtLJOp7gtYvMyjVGdQ0hW04eJyc/JKcMdwROIr72V1mo3F91bEaEVMynGNVqSsrqUgIgTvdBupxwheNCpRia+DAOHByPfMHQnryBrY9mE5urvLkITJkl50lmxKTVjc1LZMVHHCximlfozZfoy3zWlLugqZ3UX6YutB+Sngs0RY0W20csgrU40vHWDf6ZPoHyLUXKFs7AT+9sc47dXx9pPSitpFqS8VqW9EihKP5BrmxjWclKCUo7Yh5ZGLmqNkUMSF/QAm6UTykldW+5Vp2F97IB8YPtBDMPV2xcdOoHI6Eb1pBBaoUwQoZe9+fwPZNMLBejp4GQHFywzIkOVHJZE+Jym/vI6zK4lGQsR3aD3ERgJz7fLv9bGQ1IAkxkLgmqVH8eff9cDNJTzwGV8iAmwWjGrlvpoASiTjOibjytcG0ULYMfbvxfyQkXKyz3zgssWRRa35QZR68BbtMJ4Z9GAsxgX6OsdGQN1xfYeuKN+Gw63zcNCXdtaXjEQXscak38VZvazrm0JcQiq1bdMb7ZRJWG7WhMciHid6skYTlh6UfCB9wSdRR5QU8gkEBUw4vGsgIp2IgNcqq9Z6BESlW2EO39VDfiVgj6lxJAQScIwDIU52KgikiLVaBZXPMbfNmJOE0CydN5sblK5fwHrSd/x7AVsYgidd8xI6Wj8F8/iZeNasjYjFWrx7kcYRf8HAuZQvqYBMKG+iUIzgw1XsU6GdavY6uE4tzzqsOmLMtjEJucUmSoX9tUO+IEQgEv87BvfxLCsSPYzLlmwcCeZxCaj16z9EMtmMwDopQPgfmgf6UFuVcCjSD5cQbBWTbxnBT/c0oO00SfAdiSBUaTQVipnf+T7t7SL+tZBdUpZfl3oHtdrZK1VzU+e4CHjtzjubdTT6+oDUP8GgzQabBxJM0hkSBByqI1BK365ktKTNKUpbMQarSpKoNpoIEV2UjhTHoBYdf00hIR8IMr51VVY9/9DNX336eBBHJaCamnrVTTfdgqTd5ql47zDw0sWRaRVINRjwVpobl7IH4DlBSfwlCT3VjDskQDKIxw35AHzgzLtNaaRKSjdZlVPva2pqck+KgEdi7doPcdG8W3mKynsJ7dAQEkGYs2k6NBdY0/hY5UlcqTJ2njeZC5SKssc9QpohTFtk7BSb8sIasp4y6+t9smby/d4l192gNm/+ZDR8o5/I7rtnpr7iSw145Z8vu7Pqfuk5HaXjEQl+LWHOlbJhCk1G0rVIu9ir+ZWXyCL+1e9B+JL8oP0wE0heQvU7fMyG9qmLGr+WePbZ/ThBG5XAgQsv2Y/3tvwMZ09/2GqsfpsJq9sb2IWBLwlm4xylalG6Ea+bcGJsQw14e2DoyvxY0SfzmUEHlrD5Nns3n+bNWYF197+PMbRRCaQXL+7FHUduRmuuDi+/tw4FOULBZOYd/iQB0J+D6t9mTmT+svI/PDmLaxNH4AV3T+L9fEMV5rhA3s9SIvnNMHlAfnJwxz366yv+oH9+bwqnQsDD18TPHEtv+DaipT9Bn9M/kPJ7fRLBd7SedxhJ/wUpZrTOeHWO+bYlV56qfPAS6JXeQyHsNcQE9L/9q/CxnT5kohvVskeuUz9+ouuE+DCOpj935lI9de+TKt07zcvKTLZevJ4NU17wfOsmfsjPo+dy5bTnBwOOomkjupUVxJuweh+jyTBbibNuhykQW3hM6yl+A0Vn34XVf93M70N6LJjG9S8m9d7WF9VZV89FIb0aHVafJ1BJL6IJiRVZAsyuoYQllLRR+lSYmzddtMJ0rvrWGvBS80tAkOogX7QJ5bOvxfN3L1TNr707VvDS/gsdb0g3vQHl5AAAAABJRU5ErkJggg==",_hoisted_1$d={class:"sub-info"},_hoisted_2$c=["src"],_hoisted_3$9={key:0},_sfc_main$e=defineComponent({__name:"AvatarInfo",props:{agentProfile:{},position:{default:"title"}},emits:["avatar-click"],setup(e,{emit:t}){const i=e,r=t,a=computed((()=>"main"===i.position?120:"right"===i.position?80:20));return(e,t)=>{var n,s,o,l,c;const d=ElAvatar,h=resolveDirective("login");return openBlock(),createElementBlock("div",{class:normalizeClass(["content","pos-".concat(i.position)])},[withDirectives(createVNode(d,{class:"avatar cursor-pointer",size:a.value,src:null==(n=e.agentProfile)?void 0:n.img_url,onClick:t[0]||(t[0]=e=>r("avatar-click"))},null,8,["size","src"]),[[h]]),withDirectives((openBlock(),createElementBlock("div",{class:"name cursor-pointer",onClick:t[1]||(t[1]=e=>r("avatar-click"))},[createTextVNode(toDisplayString(null==(s=e.agentProfile)?void 0:s.name),1)])),[[h]]),createBaseVNode("div",_hoisted_1$d,[createBaseVNode("img",{class:"heat-icon",src:unref(iconHeat),alt:"热度"},null,8,_hoisted_2$c),createBaseVNode("span",null,toDisplayString(null==(l=null==(o=e.agentProfile)?void 0:o.conversationData)?void 0:l.view),1),"title"!==i.position?(openBlock(),createElementBlock("span",_hoisted_3$9," · 创建人  "+toDisplayString(null==(c=e.agentProfile)?void 0:c.aulthor),1)):createCommentVNode("",!0)])],2)}}}),AvatarInfo=_export_sfc(_sfc_main$e,[["__scopeId","data-v-3fee5f88"]]),_hoisted_1$c={class:"header"},_hoisted_2$b={class:"content"},_hoisted_3$8={class:"extra"},_sfc_main$d=defineComponent({__name:"Header",props:{agentId:{}},setup(e){const t=useRouter(),i=e;function r(){var e,r;const a=(null==(r=null==(e=window.history)?void 0:e.state)?void 0:r.back)||"";alTracker().reportImmediate({event:"agent_chat_page_back_click",event_info:{origin:"agent_chat_page",entity:"back",event:"click",agent_id:i.agentId}}),"/"===a||0===(null==a?void 0:a.indexOf("/agent"))?t.replace(a):t.replace("/")}return(e,t)=>{const i=_sfc_main$g;return openBlock(),createElementBlock("div",_hoisted_1$c,[createVNode(i,{class:"mr-3 cursor-pointer text-xl",name:"back",onClick:r}),createBaseVNode("div",_hoisted_2$b,[renderSlot(e.$slots,"content",{},void 0,!0)]),createBaseVNode("div",_hoisted_3$8,[renderSlot(e.$slots,"extra",{},void 0,!0)])])}}}),Header=_export_sfc(_sfc_main$d,[["__scopeId","data-v-5017c527"]]),_hoisted_1$b={key:0,class:"chatLiContent flex"},_hoisted_2$a={class:"chatLiContentDiv flex"},_hoisted_3$7={class:"contentDiv"},_hoisted_4$5={class:"questionContent"},_hoisted_5$5=["onClick"],_hoisted_6$4={class:"chatLiContentDiv flex"},_hoisted_7$4={class:"contentDiv"},_hoisted_8$4={class:"rightContent"},_hoisted_9$4={class:"title tw-overflow-ellipsis"},_hoisted_10$3={class:"fileSize"},_hoisted_11$3={key:2,class:"chatLiContent"},_hoisted_12$3=["data-ask"],_sfc_main$c=defineComponent({__name:"QuestionCard",props:{msgData:{},askId:{}},emits:["preview-file"],setup(e,{emit:t}){const i=e,r=t,a=ref(["pdf","doc","docx","txt","xls","xlsx","csv"]),n=ref(["pdf","doc","docx","txt","url"]),s=computed((()=>{var e,t,r,a,n,s,o,l;let c;try{"string"==typeof i.msgData.content?c=null==(r=null==(t=null==(e=JSON.parse(i.msgData.content))?void 0:e[0])?void 0:t.messages)?void 0:r[0]:"object"==typeof i.msgData.content&&(c=(null==(s=null==(n=null==(a=i.msgData.content)?void 0:a[0])?void 0:n.messages)?void 0:s[0])||{}),null==(l=null==(o=c.fileInfos)?void 0:o.forEach)||l.call(o,(e=>{if(e.name){const t=e.name.split(".");e.contentType!==t[t.length-1]&&(e.name+="."+e.contentType)}}))}catch(d){}return c||{}}));return(e,t)=>{var o,l;const c=_sfc_main$g,d=ElImage;return openBlock(),createElementBlock("div",null,["user"===e.msgData.type&&e.msgData.content?(openBlock(),createElementBlock("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$a,[createBaseVNode("div",_hoisted_3$7,[createBaseVNode("div",_hoisted_4$5,toDisplayString(e.msgData.content),1)])])])):e.msgData.type===unref(CardType).read_file?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(null==(o=unref(s))?void 0:o.fileInfos,(e=>{return openBlock(),createElementBlock("div",{key:e.id,class:"chatLiContent fileType flex",onClick:t=>function(e){n.value.includes(e.contentType)&&r("preview-file",e)}(e)},[createBaseVNode("div",_hoisted_6$4,[createBaseVNode("div",_hoisted_7$4,[createBaseVNode("div",{class:normalizeClass(["questionContent fileTypeContent gap-2",{canPreview:unref(n).includes(e.contentType)}])},[createVNode(c,{class:"text-3xl",name:(i=e.contentType,a.value.includes(i)?"ic_".concat(i):"ic_documet")},null,8,["name"]),createBaseVNode("div",_hoisted_8$4,[createBaseVNode("p",_hoisted_9$4,toDisplayString(e.name),1),createBaseVNode("p",_hoisted_10$3,toDisplayString((t=e.size,t<1024?t+"B":t<1048576?(t/1024).toFixed(2)+"KB":t<1073741824?(t/1048576).toFixed(2)+"MB":(t/1073741824).toFixed(2)+"GB")),1)])],2)])])],8,_hoisted_5$5);var t,i})),128)):e.msgData.type===unref(CardType).image_gen_text?(openBlock(),createElementBlock("div",_hoisted_11$3,[createBaseVNode("div",{class:"pictureTypeQuestionContent","data-ask":i.askId},[(openBlock(!0),createElementBlock(Fragment,null,renderList(null==(l=unref(s))?void 0:l.images,(e=>(openBlock(),createBlock(d,{class:"image tg-image download cursor-pointer",src:e.url,key:e.id},null,8,["src"])))),128))],8,_hoisted_12$3)])):createCommentVNode("",!0)])}}}),QuestionCard=_export_sfc(_sfc_main$c,[["__scopeId","data-v-117e9337"]]),_withScopeId$2=e=>(pushScopeId("data-v-2d650306"),e=e(),popScopeId(),e),_hoisted_1$a={class:"chatLiContent greetingChatLiContent"},_hoisted_2$9={class:"chatLiContentDiv flex"},_hoisted_3$6={class:"contentDiv assistant_tips flex flex-col"},_hoisted_4$4={class:"main_title"},_hoisted_5$4=["onClick"],_hoisted_6$3=["src"],_hoisted_7$3={class:"title"},_hoisted_8$3={key:2,class:"chatLiContentDiv flex"},_hoisted_9$3={class:"contentDiv assistant_tips flex flex-col"},_hoisted_10$2={class:"main_title"},_hoisted_11$2=["onClick"],_hoisted_12$2={key:4,class:"image-greeting select-none"},_hoisted_13=["data-ask"],_hoisted_14=["onClick"],_hoisted_15=_withScopeId$2((()=>createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[
createBaseVNode("path",{d:"M11.5907 6.26552L7.84072 10.0155C7.80588 10.0504 7.76451 10.078 7.71899 10.0969C7.67347 10.1157 7.62468 10.1254 7.5754 10.1254C7.52613 10.1254 7.47734 10.1157 7.43182 10.0969C7.3863 10.078 7.34493 10.0504 7.31009 10.0155C7.27525 9.98068 7.24761 9.93932 7.22876 9.8938C7.2099 9.84827 7.2002 9.79948 7.2002 9.75021C7.2002 9.70094 7.2099 9.65214 7.22876 9.60662C7.24761 9.5611 7.27525 9.51974 7.31009 9.4849L10.7952 6.00021L7.31009 2.51552C7.23973 2.44516 7.2002 2.34972 7.2002 2.25021C7.2002 2.1507 7.23973 2.05526 7.31009 1.9849C7.38046 1.91453 7.47589 1.875 7.5754 1.875C7.67492 1.875 7.77035 1.91453 7.84072 1.9849L11.5907 5.7349C11.6256 5.76972 11.6532 5.81108 11.6721 5.85661C11.691 5.90213 11.7007 5.95093 11.7007 6.00021C11.7007 6.04949 11.691 6.09829 11.6721 6.14381C11.6532 6.18934 11.6256 6.23069 11.5907 6.26552Z",fill:"#979FAB"})],-1))),_hoisted_16=["onClick"],_hoisted_17={key:6,class:"clearContext"},_sfc_main$b=defineComponent({__name:"GreetingCard",props:{content:{},askId:{},agentId:{},agentType:{},agentStatus:{},agentProfile:{},scrollBottom:{type:Function},isOnlyGreeting:{type:Boolean},isFirstGroup:{type:Boolean},hasDelete:{type:Boolean},hasOffed:{type:Boolean}},emits:["avatar-click"],setup(e,{emit:t}){const i=e,r=t,a=useAgentStore(),{sendGreetingPromptMessage:n}=a,s=computed((()=>{var e,t,r,a;let n;try{n="string"==typeof i.content?null==(t=null==(e=JSON.parse(i.content))?void 0:e[0])?void 0:t.messages[0]:(null==(a=null==(r=i.content)?void 0:r[0])?void 0:a.messages[0])||{}}catch(s){}return n||{}})),o=computed((()=>s.value.prompts)),l=computed((()=>s.value.images)),c=computed((()=>s.value.topics));const d=useThrottleFn((function(e,t){var r,a;alTracker().reportImmediate({event:"chat_page_greet_card_query_click",event_info:{origin:"chat_page",entity:"greet_card_query",event:"click"}}),i.hasDelete?showMessage("当前智能体已被作者删除",{icon:"error"}):i.hasOffed?showMessage("当前智能体已下架",{icon:"error"}):[MessageStatus.send,MessageStatus.start,MessageStatus.loading].includes(i.agentStatus)?ElMessage({message:"正在回答，请稍后再试",type:"info"}):(n(e),setTimeout((()=>{var e;null==(e=i.scrollBottom)||e.call(i,"2")}),500),"text_gen_image"!==i.agentType?"ai_hot_terrier"!==i.agentType?alTracker().reportImmediate({event:"agent_chat_page_guide_card_template_query_click",event_info:{origin:"agent_chat_page",entity:"guide_card_template_query",event:"click",card_type:"greetings",agent_id:i.agentId,ask_id:i.askId,query:(null==e?void 0:e.content)||(null==e?void 0:e.title),rank:+t+1}}):alTracker().reportImmediate({event:"agent_chat_page_guide_card_list_click",event_info:{origin:"agent_chat_page",entity:"guide_card_list",event:"click",card_type:"greetings",agent_id:i.agentId,ask_id:i.askId,query:(null==e?void 0:e.content)||(null==e?void 0:e.title),rank:+t+1}}):alTracker().reportImmediate({event:"agent_chat_page_guide_card_pic_click",event_info:{origin:"agent_chat_page",entity:"guide_card_pic",event:"click",agent_id:i.agentId,ask_id:i.askId,card_type:"greetings",url:(null==(a=null==(r=l.value)?void 0:r[0])?void 0:a.url)||""}}))}),2e3);return(e,t)=>{const a=_sfc_main$g,n=ElImage,h=resolveDirective("login");return openBlock(),createElementBlock("div",_hoisted_1$a,[e.isOnlyGreeting?(openBlock(),createBlock(AvatarInfo,{key:0,class:"pt-5",position:"main",agentProfile:e.agentProfile,onAvatarClick:t[0]||(t[0]=e=>r("avatar-click"))},null,8,["agentProfile"])):createCommentVNode("",!0),"ai_hot_terrier"===e.agentType?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["buzz-words",e.isFirstGroup?"mt-5":""])},[createBaseVNode("div",_hoisted_2$9,[createBaseVNode("div",_hoisted_3$6,[createBaseVNode("div",_hoisted_4$4,toDisplayString(unref(s).text),1)])]),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(c),((e,t)=>(openBlock(),createElementBlock("div",{class:"chatLiContentDiv prompt flex select-none items-center justify-between",key:e.title},[withDirectives((openBlock(),createElementBlock("div",{class:"contentDiv flex-1",onClick:i=>unref(d)(e.prompt,t)},[createVNode(a,{class:"h-6 w-6",name:"num-".concat(t+1)},null,8,["name"]),e.image.url?(openBlock(),createElementBlock("img",{key:0,class:"iconImage",src:e.image.url},null,8,_hoisted_6$3)):createCommentVNode("",!0),createBaseVNode("span",_hoisted_7$3,toDisplayString(e.title),1)],8,_hoisted_5$4)),[[h]]),createBaseVNode("div",{class:normalizeClass(["heat","heat-".concat(t)])},toDisplayString(e.score),3)])))),128))],2)):(openBlock(),createElementBlock("div",_hoisted_8$3,[createBaseVNode("div",_hoisted_9$3,[createBaseVNode("div",_hoisted_10$2,toDisplayString(unref(s).text),1)])])),"image_gen_text"===e.agentType?(openBlock(!0),createElementBlock(Fragment,{key:3},renderList(unref(c),((e,t)=>(openBlock(),createElementBlock("div",{class:"chatLiContentDiv prompt",key:e.title},[withDirectives((openBlock(),createElementBlock("div",{class:"contentDiv",onClick:i=>unref(d)(e.prompt,t)},[e.image.url?(openBlock(),createBlock(n,{key:0,class:"iconImage",src:e.image.url},null,8,["src"])):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString(e.title),1)],8,_hoisted_11$2)),[[h]])])))),128)):unref(l)&&unref(l).length>0?withDirectives((openBlock(),createElementBlock("div",_hoisted_12$2,[createBaseVNode("div",{class:"greet-image","data-ask":i.askId},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(l),(e=>(openBlock(),createBlock(n,{class:"tg-image download cursor-pointer",key:e.url,src:e.url},null,8,["src"])))),128))],8,_hoisted_13),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o),((e,t)=>(openBlock(),createElementBlock("div",{class:"chatLiContentDiv prompt",key:e.content},[createBaseVNode("div",{class:"contentDiv",onClick:i=>unref(d)(e,t)},[createTextVNode(toDisplayString(e.content)+" ",1),_hoisted_15],8,_hoisted_14)])))),128))])),[[h]]):(openBlock(!0),createElementBlock(Fragment,{key:5},renderList(unref(o),((e,t)=>(openBlock(),createElementBlock("div",{class:"chatLiContentDiv prompt select-none",key:e.content},[withDirectives((openBlock(),createElementBlock("div",{class:"contentDiv",onClick:i=>unref(d)(e,t)},[createTextVNode(toDisplayString(e.content),1)],8,_hoisted_16)),[[h]])])))),128)),e.hasDelete||e.hasOffed?(openBlock(),createElementBlock("div",_hoisted_17,[createBaseVNode("span",null,toDisplayString(e.hasDelete?"当前智能体已被作者删除，暂不支持对话":"当前智能体已下架，暂不支持对话"),1)])):createCommentVNode("",!0)])}}}),GreetingCard=_export_sfc(_sfc_main$b,[["__scopeId","data-v-2d650306"]]),_withScopeId$1=e=>(pushScopeId("data-v-f4a04aa6"),e=e(),popScopeId(),e),_hoisted_1$9={key:0,class:"thinkingChatLiContent pb-4"},_hoisted_2$8={class:"chatLiContentDiv"},_hoisted_3$5={key:0,class:"content flex items-center justify-between"},_hoisted_4$3=_withScopeId$1((()=>createBaseVNode("span",{class:"cancelTips"}," 已停止回答 ",-1))),_hoisted_5$3={key:1,class:"content flex items-center"},_sfc_main$a=defineComponent({__name:"ThinkingCard",props:{isLastGroup:{type:Boolean},isLastInGroup:{type:Boolean},content:{},ask:{},askId:{},status:{},agentId:{}},setup(e){const t=e,i=useAgentStore(),{currentAgentInfo:r,currentAgentType:a}=storeToRefs(i),{repeatMessage:n}=i,s=computed((()=>{var e;const i=r.value.detailList.find((e=>e.askId===t.askId));let a=null==(e=null==i?void 0:i.data)?void 0:e.find((e=>e.type===CardType.image_gen_text||e.type===CardType.read_file));if(!a)return;const n=cloneDeep(a);"string"==typeof n.content&&(n.content=JSON.parse(n.content));const{id:s,sha1:o}=get(n,"content[0].messages[0].fileInfos[0]",{id:"",sha1:""}),l=get(n,"content[0].messages[0].images[0].id","");return s||l?[{docId:s||l||"",sign:o||""}]:[]})),o=()=>{n({ask_id:t.askId,content:t.ask,file:s.value||[],forceEmpty:"text_gen_image"===a.value}),alTracker().reportImmediate({event:"agent_chat_page_rewrite_button_click",event_info:{origin:"agent_chat_page",entity:"rewrite_button",event:"click",agent_id:t.agentId,ask_id:t.askId}})};return(e,t)=>{const i=_sfc_main$g,r=resolveDirective("login");return e.isLastInGroup&&e.content?(openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$8,[e.status===unref(MessageStatus).stop?(openBlock(),createElementBlock("div",_hoisted_3$5,[_hoisted_4$3,e.isLastGroup?withDirectives((openBlock(),createElementBlock("div",{key:0,class:"retry cursor-pointer",onClick:o},[createVNode(i,{name:"i-refresh"}),createTextVNode(" 重新回答 ")])),[[r]]):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_5$3,[createVNode(Loading,{class:"mr-[6px]",loading:!0},{default:withCtx((()=>["text_gen_image"===unref(a)?(openBlock(),createBlock(i,{key:0,class:"h-4 w-4",name:"i-image"})):(openBlock(),createBlock(i,{key:1,class:"h-4 w-4",name:"i-search"}))])),_:1}),createTextVNode(" "+toDisplayString(e.content),1)]))])])):createCommentVNode("",!0)}}}),ThinkingCard=_export_sfc(_sfc_main$a,[["__scopeId","data-v-f4a04aa6"]]),_hoisted_1$8=["data-ask"],_sfc_main$9=defineComponent({__name:"TextGenPicture",props:{images:{},askId:{},isShare:{type:Boolean}},setup(e){const t=e,{currentAgentId:i}=storeToRefs(useAgentStore());function r(){t.isShare||alTracker().reportImmediate({event:"agent_chat_page_answer_card_pic_click",event_info:{origin:"agent_chat_page",entity:"answer_card_pic",event:"click",agent_id:i.value,ask_id:t.askId,card_type:"text_gen_image"}})}return(e,i)=>{var a,n;const s=ElImage;return(null==(a=e.images)?void 0:a.length)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["pictureAnswer","count-".concat(null==(n=e.images)?void 0:n.length)]),onClick:r,"data-ask":t.askId},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.images,(e=>(openBlock(),createBlock(s,{class:"image tg-image download cursor-pointer",src:e.url,key:e.id},null,8,["src"])))),128))],10,_hoisted_1$8)):createCommentVNode("",!0)}}}),TextGenPicture=_export_sfc(_sfc_main$9,[["__scopeId","data-v-a94dba29"]]),_hoisted_1$7={key:1,class:"content"},_hoisted_2$7={key:0,class:"mt-2 flex flex-row flex-wrap gap-1"},_sfc_main$8=defineComponent({__name:"SearchSchedule",props:{schedules:{},msgData:{},status:{}},setup(e){const t=e,i=useAgentStore(),{currentAgentInfo:r,currentAgentType:a}=storeToRefs(i),n=ref(!0),s=ref(!1),o=computed((()=>{var e,t,i;return(null==(e=r.value)?void 0:e.status)===MessageStatus.send||(null==(t=r.value)?void 0:t.status)===MessageStatus.start||(null==(i=r.value)?void 0:i.status)===MessageStatus.loading})),l=computed((()=>o.value&&!(s.value||t.status===MessageStatus.stop)));return watch((()=>t.msgData),(e=>{(null==e?void 0:e.title)&&(n.value=!1),(null==e?void 0:e.target)===CardTarget.update?s.value=!1:(null==e?void 0:e.target)===CardTarget.finish&&(s.value=!0)}),{deep:!0,immediate:!0}),(e,t)=>{var i,r;const s=_sfc_main$g;return unref(a)===unref(AgentType).universal||unref(l)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["schedule select-none",{expanded:unref(n)}])},[(null==(i=e.msgData)?void 0:i.title)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["flex cursor-pointer items-center justify-between text-base font-medium text-icon-text-2",{"pb-4":unref(n)}]),onClick:t[0]||(t[0]=e=>n.value=!unref(n))},[createTextVNode(toDisplayString(null==(r=e.msgData)?void 0:r.title)+" ",1),createVNode(s,{class:"icon-arrow text-xl",name:"i-up"})],2)):createCommentVNode("",!0),unref(n)?(openBlock(),createElementBlock("div",_hoisted_1$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.schedules,((e,t)=>{var i;return openBlock(),createElementBlock("div",{class:"pb-4 last:pb-0",key:t},[createVNode(_sfc_main$i,{icon:(null==e?void 0:e.icon)||"i_search2",text:e.text,loading:unref(l)},null,8,["icon","text","loading"]),(null==(i=null==e?void 0:e.searchKeys)?void 0:i.length)?(openBlock(),createElementBlock("div",_hoisted_2$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(null==e?void 0:e.searchKeys,(e=>(openBlock(),createBlock(Tag,{text:e.text,key:e.text},null,8,["text"])))),128))])):createCommentVNode("",!0)])})),128))])):createCommentVNode("",!0)],2)):createCommentVNode("",!0)}}}),SearchSchedule=_export_sfc(_sfc_main$8,[["__scopeId","data-v-8f2192c5"]]),_withScopeId=e=>(pushScopeId("data-v-654d90fc"),e=e(),popScopeId(),e),_hoisted_1$6={class:"answerChatLiContent pb-4"},_hoisted_2$6={key:2},_hoisted_3$4={key:0,class:"failTips"},_hoisted_4$2=_withScopeId((()=>createBaseVNode("span",{class:"word"},"生成失败，请重试",-1))),_hoisted_5$2=[_hoisted_4$2],_hoisted_6$2={key:0,class:"create-agent-btn"},_hoisted_7$2={key:3,class:"cancelTips"},_hoisted_8$2=_withScopeId((()=>createBaseVNode("span",{class:"word"},"已停止回答",-1))),_hoisted_9$2=[_hoisted_8$2],_sfc_main$7=defineComponent({__name:"AnswerCard",props:{status:{},uniqueId:{},isLastGroup:{type:Boolean},groupData:{},showOprBar:{type:Boolean},canRefresh:{type:Boolean},like:{type:[Boolean,null]},conversationId:{},askId:{},docId:{},source:{},ask:{},type:{},level:{},isShare:{type:Boolean}},emits:["mouse-right","update:share-visible","askAgain","createAgentBtnFun"],setup(e,{emit:t}){const i=ref(),r=useAgentStore(),a=t,n=e,s=computed((()=>n.groupData.find((e=>e.type===CardType.markdown))||n.groupData.find((e=>e.type===CardType.text_gen_picture))||n.groupData.find((e=>e.type===CardType.agent_confirm)))),o=computed((()=>{var e,t,i;let r=[];try{r="string"==typeof(null==(e=s.value)?void 0:e.content)?JSON.parse((null==(t=s.value)?void 0:t.content)||"[]"):(null==(i=s.value)?void 0:i.content)||[]}catch(a){}return r})),l=computed((()=>{var e,t,i;if(o.value.length)return null==(i=null==(t=null==(e=o.value)?void 0:e[0])?void 0:t.messages)?void 0:i[0]})),c=flow(renderLink,(e=>{let t=1;return e.replace(/(!\[.*?\]\((https:\/\/picture-search\.tiangong.cn[^\s\\[\]]+)\))+/g,((e,i,r)=>{if(r){const e=r.indexOf("?"),i=null==r?void 0:r.substring(0,e),a=getUrlParams(r);if(a){const e=a.extra,r=JSON.parse(decodeURIComponent(e)).snippet;return r?'<div class="tg-gallary" data-ask="'.concat(n.askId,'"><img class="tg-image" data-slot="').concat(++t,'" src="').concat(i,'" /><div class="tg-snippet ellipsis">').concat(r,"</div> </div>"):'<div class="tg-gallary" data-ask="'.concat(n.askId,'"><img class="tg-image" data-slot="').concat(++t,'" src="').concat(i,'" /></div>')}return'<div class="tg-gallary" data-ask="'.concat(n.askId,'"><img class="tg-image" data-slot="').concat(++t,'" src="').concat(r,'" /></div>')}return""}))})),d=computed((()=>{var e,t,i,r,a;if(!o.value.length)return"";let n=(null==(i=null==(t=null==(e=l.value)?void 0:e.text)?void 0:t.trim)?void 0:i.call(t))||"";return c(n,(null==(a=null==(r=v.value)?void 0:r[0])?void 0:a.sourceAttributions)||[])||""})),h=computed((()=>{var e,t,i,r;return null==(r=null==(i=null==(t=null==(e=o.value)?void 0:e[0])?void 0:t.messages)?void 0:i.filter((e=>e.type===CardType.text_gen_picture)))?void 0:r.map((e=>{var t;return null==(t=null==e?void 0:e.images)?void 0:t[0]}))})),u=computed((()=>{var e,t;return((null==(e=s.value)?void 0:e.type)==CardType.markdown||(null==(t=s.value)?void 0:t.type)==CardType.agent_confirm)&&!!d})),p=computed((()=>{var e,t,i,r,a,n;if(!o.value.length||(null==(e=s.value)?void 0:e.type)!=CardType.agent_confirm)return!1;let l=!1;try{const e=(null==(a=null==(r=null==(i=null==(t=o.value)?void 0:t[0])?void 0:i.messages)?void 0:r[0])?void 0:a.prompts)||[];for(let t in e)"create_agent"==(null==(n=e[t])?void 0:n.action)&&(l=!0)}catch(c){}return l})),_=computed((()=>{var e;return(null==(e=s.value)?void 0:e.type)==CardType.text_gen_picture})),f=computed((()=>{var e;return n.status===MessageStatus.end&&(null==(e=s.value)?void 0:e.type)==CardType.markdown&&!d})),g=computed((()=>{var e;const t=n.groupData.find((e=>e.type===CardType.search_schedule));let i=[];if(!t)return[];try{i="string"==typeof(null==t?void 0:t.content)?JSON.parse(null==t?void 0:t.content):(null==t?void 0:t.content)||[]}catch(r){}return(null==(e=null==i?void 0:i[0])?void 0:e.messages)||[]})),m=computed((()=>n.groupData.find((e=>e.type===CardType.search_schedule)))),v=computed((()=>{var e;const t=n.groupData.find((e=>e.type===CardType.search_result||e.type===CardType.agent_confirm));let i=[];if(!t)return[];try{i="string"==typeof(null==t?void 0:t.content)?JSON.parse(null==t?void 0:t.content):(null==t?void 0:t.content)||[]}catch(r){}return(null==(e=null==i?void 0:i[0])?void 0:e.messages)||[]}));let b;const y=()=>{b=openDialog({title:"选择发布范围",body:createVNode(_sfc_main$j,{onConfirm:A},null),customClass:"w-[420px]"})},A=async(e,t)=>{var i,a,n,s,l;let c={template_id:"",action:""};const d=(null==(s=null==(n=null==(a=null==(i=o.value)?void 0:i[0])?void 0:a.messages)?void 0:n[0])?void 0:s.prompts)||[];for(let r in d)"create_agent"==(null==(l=d[r])?void 0:l.action)&&(c=d[r]);const h={action:c.action,template_id:c.template_id,publish_agent:{publish_scope:e,
// 0:仅自己可对话 1:获得链接的人可对话 2:公开到智能体广场
category_id:t}};r.sendMessage(h),b()};return(e,t)=>{var r,n,o,l,c,b,A,w,S;const k=_sfc_main$k,x=resolveDirective("login");return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",{class:normalizeClass(["chatLiContentDiv",(null==(r=unref(s))?void 0:r.type)===unref(CardType).text_gen_picture?"inlineContentDiv":"contentDiv"]),ref_key:"contentRef",ref:i},[(null==(n=unref(g))?void 0:n.length)&&!unref(f)?(openBlock(),createBlock(SearchSchedule,{key:0,class:"py-2",schedules:unref(g),msgData:unref(m),status:e.status},null,8,["schedules","msgData","status"])):createCommentVNode("",!0),(null==(c=null==(l=null==(o=unref(v))?void 0:o[0])?void 0:l.sourceAttributions)?void 0:c.length)?(openBlock(),createBlock(SearchResult,{key:1,class:"py-2",sourceAttributions:null==(A=null==(b=unref(v))?void 0:b[0])?void 0:A.sourceAttributions},null,8,["sourceAttributions"])):createCommentVNode("",!0),unref(s)?withDirectives((openBlock(),createElementBlock("div",_hoisted_2$6,[createBaseVNode("div",{class:normalizeClass(["content",{markdown:(null==(w=unref(s))?void 0:w.type)==unref(CardType).markdown||(null==(S=unref(s))?void 0:S.type)==unref(CardType).agent_confirm}])},[unref(f)?(openBlock(),createElementBlock("div",_hoisted_3$4,_hoisted_5$2)):unref(u)?(openBlock(),createElementBlock("div",{key:1,onContextmenu:t[0]||(t[0]=withModifiers((e=>a("mouse-right",e)),["prevent","right"]))},[createVNode(unref(N),{class:"md-preview","no-img-zoom-in":!0,"model-value":unref(d),"no-mermaid":!0},null,8,["model-value"]),unref(p)?(openBlock(),createElementBlock("div",_hoisted_6$2,[createVNode(k,{class:"create-btn w-[115px]",onClick:y},{default:withCtx((()=>[createVNode(_sfc_main$g,{class:"btn-icon align-sub",name:"ic_copilot3_fill"}),createTextVNode(" 开始创建")])),_:1})])):createCommentVNode("",!0)],32)):unref(_)?(openBlock(),createBlock(TextGenPicture,{key:2,images:unref(h),askId:e.askId,isShare:e.isShare},null,8,["images","askId","isShare"])):createCommentVNode("",!0)],2)])),[[x]]):createCommentVNode("",!0),e.status==unref(MessageStatus).stop&&e.isLastGroup?(openBlock(),createElementBlock("div",_hoisted_7$2,_hoisted_9$2)):createCommentVNode("",!0),e.showOprBar?(openBlock(),createBlock(OprBar,{key:4,class:"opr-bar",canRefresh:e.canRefresh,canShare:unref(u)||unref(_),like:e.like,conversationId:e.conversationId,askId:e.askId,docId:e.docId,source:e.source,ask:e.ask,type:e.type,level:e.level,"onUpdate:shareVisible":t[1]||(t[1]=e=>a("update:share-visible")),onAskAgain:t[2]||(t[2]=e=>a("askAgain",e)),origin:"agent_chat_page"},null,8,["canRefresh","canShare","like","conversationId","askId","docId","source","ask","type","level"])):createCommentVNode("",!0)],2)])}}}),AnswerCard=_export_sfc(_sfc_main$7,[["__scopeId","data-v-654d90fc"]]),_hoisted_1$5={key:0,class:"chatLiContent suggestionChatLiContent"},_hoisted_2$5=["onClick"],_sfc_main$6=defineComponent({__name:"SuggestionCard",props:{content:{},agentId:{},agentStatus:{},isLastGroup:{type:Boolean},askId:{},conversationId:{},ask:{}},setup(e){const t=e,i=useAgentStore(),{sendTextMessage:r}=i,a=computed((()=>{var e,i,r,a,n,s;let o;try{"string"==typeof t.content?o=null==(i=null==(e=JSON.parse(t.content))?void 0:e[0])?void 0:i.messages[0]:(o=(null==(a=null==(r=t.content)?void 0:r[0])?void 0:a.messages[0])||{},alTracker().reportImmediate({event:"agent_chat_page_suggestion_show",event_info:{origin:"agent_chat_page",entity:"suggestion",event:"show",agent_id:t.agentId,conversation_id:t.conversationId,ask_id:t.askId,query:t.ask,query_related:null==(s=null==(n=o.suggestedResponses)?void 0:n.map)?void 0:s.call(n,(e=>(null==e?void 0:e.text)||""))}}))}catch(l){}return o||{}})),n=computed((()=>{var e;return(null==(e=a.value)?void 0:e.suggestedResponses)||[]}));const s=useThrottleFn((function(e){[MessageStatus.send,MessageStatus.start,MessageStatus.loading].includes(t.agentStatus)?ElMessage({message:"正在回答，请稍后再试",type:"info"}):(r({content:e}),alTracker().reportImmediate({event:"agent_chat_page_suggestion_click",event_info:{origin:"agent_chat_page",entity:"suggestion",event:"click",agent_id:t.agentId,conversation_id:t.conversationId,ask_id:t.askId,query:t.ask,query_related:e}}),apiOcpcReportData("ask_question",{content:"agent",agent_id:t.agentId}))}),2e3);return(e,t)=>{const i=_sfc_main$g,r=resolveDirective("login");return e.isLastGroup?(openBlock(),createElementBlock("div",_hoisted_1$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(n),(e=>withDirectives((openBlock(),createElementBlock("div",{class:"contentDiv select-none",key:e.text,onClick:t=>unref(s)(e.text)},[createVNode(i,{class:"mr-[6px] h-5 w-5",name:"suggestion"}),createTextVNode(" "+toDisplayString(e.text),1)],8,_hoisted_2$5)),[[r]]))),128))])):createCommentVNode("",!0)}}}),SuggestionCard=_export_sfc(_sfc_main$6,[["__scopeId","data-v-57697be3"]]),_sfc_main$5=defineComponent({__name:"FileNavigatorIcon",props:{callback:{type:Function,default:()=>{}},disabled:{type:Boolean,default:!1},name:{type:String,required:!0},classNames:{type:String,default:""}},setup:e=>(t,i)=>{const r=_sfc_main$g;return openBlock(),createElementBlock("div",{class:normalizeClass(unref(twMerge)("h-[22px] w-[22px] cursor-pointer rounded  text-center leading-[20px]",e.classNames,"".concat(e.disabled?"grey cursor-default":"black hover:bg-neutral-100")))},[createVNode(r,{class:"h-[14px] w-[14px]",name:e.name,onClick:i[0]||(i[0]=()=>e.callback())},null,8,["name"])],2)}}),__unplugin_components_1=_export_sfc(_sfc_main$5,[["__scopeId","data-v-7d76ebbf"]]);function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};(function(module,exports){var root,factory;root=globalThis,factory=()=>
/******/(()=>{var __webpack_modules__=[
/* 1 */
/***/,(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=function(e,t){e||o(t)},t.bytesToString=d,t.createValidAbsoluteUrl=function(e,t=null,i=null){if(!e)return null;try{if(i&&"string"==typeof e){if(i.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null==t?void 0:t.length)>=2&&(e="http://".concat(e))}if(i.tryConvertEncoding)try{e=_(e)}catch(r){}}const a=t?new URL(e,t):new URL(e);if(function(e){switch(null==e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(a))return a}catch(r){}return null},t.getModificationDate=function(e=new Date){return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")},t.getUuid=function(){if("undefined"!=typeof crypto&&"function"==typeof(null==crypto?void 0:crypto.randomUUID))return crypto.randomUUID();const e=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof(null==crypto?void 0:crypto.getRandomValues))crypto.getRandomValues(e);else for(let t=0;t<32;t++)e[t]=Math.floor(255*Math.random());return d(e)},t.getVerbosityLevel=function(){return n},t.info=function(e){a.INFOS},t.isArrayBuffer=function(e){return"object"==typeof e&&void 0!==(null==e?void 0:e.byteLength)},t.isArrayEqual=function(e,t){if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(e[i]!==t[i])return!1;return!0},t.isNodeJS=void 0,t.normalizeUnicode=function(e){return f||(f=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,g=new Map([["ﬅ","ſt"]])),e.replaceAll(f,((e,t,i)=>t?t.normalize("NFKC"):g.get(i)))},t.objectFromMap=function(e){const t=Object.create(null);for(const[i,r]of e)t[i]=r;return t},t.objectSize=function(e){return Object.keys(e).length},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(n=e)},t.shadow=l,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=h,t.stringToPDFString=function(e){if(e[0]>="ï"){let t;if("þ"===e[0]&&"ÿ"===e[1]?t="utf-16be":"ÿ"===e[0]&&"þ"===e[1]?t="utf-16le":"ï"===e[0]&&"»"===e[1]&&"¿"===e[2]&&(t="utf-8"),t)try{const i=new TextDecoder(t,{fatal:!0}),r=h(e);return i.decode(r)}catch(i){s('stringToPDFString: "'.concat(i,'".'))}}const t=[];for(let r=0,a=e.length;r<a;r++){const i=p[e.charCodeAt(r)];t.push(i?String.fromCharCode(i):e.charAt(r))}return t.join("")},t.stringToUTF8String=_,t.unreachable=o,t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=s;const r=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=r,t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.MAX_IMAGE_SIZE_TO_CACHE=1e7,t.LINE_FACTOR=1.35,t.LINE_DESCENT_FACTOR=.35,t.BASELINE_FACTOR=.25925925925925924,t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},t.AnnotationEditorPrefix="pdfjs_internal_editor_",t.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15},t.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23},t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.PageActionEventType={O:"PageOpen",C:"PageClose"};const a={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=a,t.CMapCompressionType={NONE:0,BINARY:1},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let n=a.WARNINGS;function s(e){a.WARNINGS}function o(e){throw new Error(e)}function l(e,t,i,r=!1){return Object.defineProperty(e,t,{value:i,enumerable:!r,configurable:!0,writable:!1}),i}const c=function(){function e(t,i){this.constructor===e&&o("Cannot initialize BaseException."),this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();function d(e){"object"==typeof e&&void 0!==(null==e?void 0:e.length)||o("Invalid argument for bytesToString");const t=e.length,i=8192;if(t<i)return String.fromCharCode.apply(null,e);const r=[];for(let a=0;a<t;a+=i){const n=Math.min(a+i,t),s=e.subarray(a,n);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function h(e){"string"!=typeof e&&o("Invalid argument for stringToBytes");const t=e.length,i=new Uint8Array(t);for(let r=0;r<t;++r)i[r]=255&e.charCodeAt(r);return i}t.BaseException=c,t.PasswordException=class extends c{constructor(e,t){super(e,"PasswordException"),this.code=t}},t.UnknownErrorException=class extends c{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},t.InvalidPDFException=class extends c{constructor(e){super(e,"InvalidPDFException")}},t.MissingPDFException=class extends c{constructor(e){super(e,"MissingPDFException")}},t.UnexpectedResponseException=class extends c{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},t.FormatError=class extends c{constructor(e){super(e,"FormatError")}},t.AbortException=class extends c{constructor(e){super(e,"AbortException")}},t.FeatureTest=class{static get isLittleEndian(){return l(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return l(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return l(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"==typeof navigator?l(this,"platform",{isWin:!1,isMac:!1}):l(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var e,t;return l(this,"isCSSRoundSupported",null==(t=null==(e=globalThis.CSS)?void 0:e.supports)?void 0:t.call(e,"width: round(1.5px, 1px)"))}};const u=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));t.Util=class{static makeHexColor(e,t,i){return"#".concat(u[e]).concat(u[t]).concat(u[i])}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[1],t[1]=i),t[0]*=e[0],t[1]*=e[0],e[3]<0&&(i=t[2],t[2]=t[3],t[3]=i),t[2]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[2],t[2]=i,i=t[1],t[1]=t[3],t[3]=i,e[1]<0&&(i=t[2],t[2]=t[3],t[3]=i),t[2]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[1],t[1]=i),t[0]*=e[2],t[1]*=e[2]),t[0]+=e[4],t[1]+=e[4],t[2]+=e[5],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),a=this.applyTransform([e[0],e[3]],t),n=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],a[0],n[0]),Math.min(i[1],r[1],a[1],n[1]),Math.max(i[0],r[0],a[0],n[0]),Math.max(i[1],r[1],a[1],n[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],n=e[2]*t[1]+e[3]*t[3],s=(i+n)/2,o=Math.sqrt((i+n)**2-4*(i*n-a*r))/2,l=s+o||1,c=s-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),n=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>n?null:[i,a,r,n]}static bezierBoundingBox(e,t,i,r,a,n,s,o){const l=[],c=[[],[]];let d,h,u,p,_,f,g,m;for(let A=0;A<2;++A)if(0===A?(h=6*e-12*i+6*a,d=-3*e+9*i-9*a+3*s,u=3*i-3*e):(h=6*t-12*r+6*n,d=-3*t+9*r-9*n+3*o,u=3*r-3*t),Math.abs(d)<1e-12){if(Math.abs(h)<1e-12)continue;p=-u/h,0<p&&p<1&&l.push(p)}else g=h*h-4*u*d,m=Math.sqrt(g),g<0||(_=(-h+m)/(2*d),0<_&&_<1&&l.push(_),f=(-h-m)/(2*d),0<f&&f<1&&l.push(f));let v,b=l.length;const y=b;for(;b--;)p=l[b],v=1-p,c[0][b]=v*v*v*e+3*v*v*p*i+3*v*p*p*a+p*p*p*s,c[1][b]=v*v*v*t+3*v*v*p*r+3*v*p*p*n+p*p*p*o;return c[0][y]=e,c[1][y]=t,c[0][y+1]=s,c[1][y+1]=o,c[0].length=c[1].length=y+2,[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}};const p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function _(e){return decodeURIComponent(escape(e))}i=new WeakMap,t.PromiseCapability=class{constructor(){__privateAdd(this,i,!1),this.promise=new Promise(((e,t)=>{this.resolve=t=>{__privateSet(this,i,!0),e(t)},this.reject=e=>{__privateSet(this,i,!0),t(e)}}))}get settled(){return __privateGet(this,i)}};let f=null,g=null;t.AnnotationPrefix="pdfjs_internal_id_"},
/* 2 */
/***/
(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var _docId,_delayedCleanupTimeout,_pendingCleanup,_tryCleanup,tryCleanup_fn,_abortDelayedCleanup,abortDelayedCleanup_fn,_listeners,_deferred,_a,_workerPorts,_methodPromises,_pageCache,_pagePromises,_passwordCapability,_cacheSimpleMethod,cacheSimpleMethod_fn,_objs,_ensureObj,ensureObj_fn,_internalRenderTask,_canvasInUse;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;function getDocument(e){var t,i;if("string"==typeof e||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),"object"!=typeof e)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const r=new PDFDocumentLoadingTask,{docId:a}=r,n=e.url?getUrlProp(e.url):null,s=e.data?getDataProp(e.data):null,o=e.httpHeaders||null,l=!0===e.withCredentials,c=null!=(t=e.password)?t:null,d=e.range instanceof PDFDataRangeTransport?e.range:null,h=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let u=e.worker instanceof PDFWorker?e.worker:null;const p=e.verbosity,_="string"!=typeof e.docBaseUrl||(0,_display_utils.isDataScheme)(e.docBaseUrl)?null:e.docBaseUrl,f="string"==typeof e.cMapUrl?e.cMapUrl:null,g=!1!==e.cMapPacked,m=e.CMapReaderFactory||DefaultCMapReaderFactory,v="string"==typeof e.standardFontDataUrl?e.standardFontDataUrl:null,b=e.StandardFontDataFactory||DefaultStandardFontDataFactory,y=!0!==e.stopAtErrors,A=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,w=!1!==e.isEvalSupported,S="boolean"==typeof e.isOffscreenCanvasSupported?e.isOffscreenCanvasSupported:!_util.isNodeJS,k=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,x="boolean"==typeof e.disableFontFace?e.disableFontFace:_util.isNodeJS,C=!0===e.fontExtraProperties,E=!0===e.enableXfa,P=e.ownerDocument||globalThis.document,M=!0===e.disableRange,T=!0===e.disableStream,I=!0===e.disableAutoFetch,D=!0===e.pdfBug,R=d?d.length:null!=(i=e.length)?i:NaN,L="boolean"==typeof e.useSystemFonts?e.useSystemFonts:!_util.isNodeJS&&!x,F="boolean"==typeof e.useWorkerFetch?e.useWorkerFetch:m===_display_utils.DOMCMapReaderFactory&&b===_display_utils.DOMStandardFontDataFactory&&f&&v&&(0,_display_utils.isValidFetchUrl)(f,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(v,document.baseURI),N=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:P}),O=e.filterFactory||new DefaultFilterFactory({docId:a,ownerDocument:P});(0,_util.setVerbosityLevel)(p);const B={canvasFactory:N,filterFactory:O};if(F||(B.cMapReaderFactory=new m({baseUrl:f,isCompressed:g}),B.standardFontDataFactory=new b({baseUrl:v})),!u){const e={verbosity:p,port:_worker_options.GlobalWorkerOptions.workerPort};u=e.port?PDFWorker.fromPort(e):new PDFWorker(e),r._worker=u}const G={docId:a,apiVersion:"3.11.174",data:s,password:c,disableAutoFetch:I,rangeChunkSize:h,length:R,docBaseUrl:_,enableXfa:E,evaluatorOptions:{maxImageSize:A,disableFontFace:x,ignoreErrors:y,isEvalSupported:w,isOffscreenCanvasSupported:S,canvasMaxAreaInBytes:k,fontExtraProperties:C,useSystemFonts:L,cMapUrl:F?f:null,standardFontDataUrl:F?v:null}},W={ignoreErrors:y,isEvalSupported:w,disableFontFace:x,fontExtraProperties:C,enableXfa:E,ownerDocument:P,disableAutoFetch:I,pdfBug:D,styleElement:null};return u.promise.then((function(){if(r.destroyed)throw new Error("Loading aborted");const e=_fetchDocument(u,G),t=new Promise((function(e){let t;var i;d?t=new _transport_stream.PDFDataTransportStream({length:R,initialData:d.initialData,progressiveDone:d.progressiveDone,contentDispositionFilename:d.contentDispositionFilename,disableRange:M,disableStream:T},d):s||(i={url:n,length:R,httpHeaders:o,withCredentials:l,rangeChunkSize:h,disableRange:M,disableStream:T},t=_util.isNodeJS?new _displayNode_stream.PDFNodeStream(i):(0,_display_utils.isValidFetchUrl)(i.url)?new _displayFetch_stream.PDFFetchStream(i):new _displayNetwork.PDFNetworkStream(i)),e(t)}));return Promise.all([e,t]).then((function([e,t]){if(r.destroyed)throw new Error("Loading aborted");const i=new _message_handler.MessageHandler(a,e,u.port),n=new WorkerTransport(i,r,t,W,B);r._transport=n,i.send("Ready",null)}))})).catch(r._capability.reject),r}async function _fetchDocument(e,t){if(e.destroyed)throw new Error("Worker was destroyed");const i=await e.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(e.destroyed)throw new Error("Worker was destroyed");return i}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch(t){if(_util.isNodeJS&&"string"==typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_util.isNodeJS&&"undefined"!=typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"==typeof e)return(0,_util.stringToBytes)(e);if("object"==typeof e&&!isNaN(null==e?void 0:e.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;const _PDFDocumentLoadingTask=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d".concat(__privateWrapper(e,_docId)._++),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(null==(e=this._worker)?void 0:e.port)&&(this._worker._pendingDestroy=!0),await(null==(t=this._transport)?void 0:t.destroy())}catch(r){throw(null==(i=this._worker)?void 0:i.port)&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};_docId=new WeakMap,__privateAdd(_PDFDocumentLoadingTask,_docId,0);let PDFDocumentLoadingTask=_PDFDocumentLoadingTask;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(e,t)}))}onDataProgressiveRead(e){this._readyCapability.promise.then((()=>{for(const t of this._progressiveReadListeners)t(e)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const e of this._progressiveDoneListeners)e()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then((e=>{if(!e)return e;const t=[];for(const i in e)t.push(...e[i]);return t})))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,t,i,r=!1){__privateAdd(this,_tryCleanup),__privateAdd(this,_abortDelayedCleanup),__privateAdd(this,_delayedCleanupTimeout,null),__privateAdd(this,_pendingCleanup,!1),this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new _display_utils.StatTimer:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:a})}getAnnotations({intent:e="display"}={}){const t=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null==(e=this._transport._htmlForXfa)?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=_util.AnnotationMode.ENABLE,transform:a=null,background:n=null,optionalContentConfigPromise:s=null,annotationCanvasMap:o=null,pageColors:l=null,printAnnotationStorage:c=null}){var d,h;null==(d=this._stats)||d.time("Overall");const u=this._transport.getRenderingIntent(i,r,c);__privateSet(this,_pendingCleanup,!1),__privateMethod(this,_abortDelayedCleanup,abortDelayedCleanup_fn).call(this),s||(s=this._transport.getOptionalContentConfig());let p=this._intentStates.get(u.cacheKey);p||(p=Object.create(null),this._intentStates.set(u.cacheKey,p)),p.streamReaderCancelTimeout&&(clearTimeout(p.streamReaderCancelTimeout),p.streamReaderCancelTimeout=null);const _=!!(u.renderingIntent&_util.RenderingIntentFlag.PRINT);p.displayReadyCapability||(p.displayReadyCapability=new _util.PromiseCapability,p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(h=this._stats)||h.time("Page Request"),this._pumpOperatorList(u));const f=e=>{var t,i;p.renderTasks.delete(g),(this._maybeCleanupAfterRender||_)&&__privateSet(this,_pendingCleanup,!0),__privateMethod(this,_tryCleanup,tryCleanup_fn).call(this,!_),e?(g.capability.reject(e),this._abortOperatorList({intentState:p,reason:e instanceof Error?e:new Error(e)})):g.capability.resolve(),null==(t=this._stats)||t.timeEnd("Rendering"),null==(i=this._stats)||i.timeEnd("Overall")},g=new InternalRenderTask({callback:f,params:{canvasContext:e,viewport:t,transform:a,background:n},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:o,operatorList:p.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:l});(p.renderTasks||(p.renderTasks=new Set)).add(g);const m=g.task;return Promise.all([p.displayReadyCapability.promise,s]).then((([e,t])=>{var i;this.destroyed?f():(null==(i=this._stats)||i.time("Rendering"),g.initializeGraphics({transparency:e,optionalContentConfig:t}),g.operatorListChanged())})).catch(f),m}getOperatorList({intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:i=null}={}){var r;const a=this._transport.getRenderingIntent(e,t,i,!0);let n,s=this._intentStates.get(a.cacheKey);return s||(s=Object.create(null),this._intentStates.set(a.cacheKey,s)),s.opListReadCapability||(n=Object.create(null),n.operatorListChanged=function(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(n))},s.opListReadCapability=new _util.PromiseCapability,(s.renderTasks||(s.renderTasks=new Set)).add(n),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(r=this._stats)||r.time("Page Request"),this._pumpOperatorList(a)),s.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then((e=>_xfa_text.XfaText.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,i){const r=t.getReader(),a={items:[],styles:Object.create(null)};!function t(){r.read().then((function({value:i,done:r}){r?e(a):(Object.assign(a.styles,i.styles),a.items.push(...i.items),t())}),i)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),__privateSet(this,_pendingCleanup,!1),__privateMethod(this,_abortDelayedCleanup,abortDelayedCleanup_fn).call(this),Promise.all(e)}cleanup(e=!1){__privateSet(this,_pendingCleanup,!0);const t=__privateMethod(this,_tryCleanup,tryCleanup_fn).call(this,!1);return e&&t&&this._stats&&(this._stats=new _display_utils.StatTimer),t}_startRenderPage(e,t){var i,r;const a=this._intentStates.get(t);a&&(null==(i=this._stats)||i.timeEnd("Page Request"),null==(r=a.displayReadyCapability)||r.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&__privateMethod(this,_tryCleanup,tryCleanup_fn).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i}){const{map:r,transfers:a}=i,n=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r},a).getReader(),s=this._intentStates.get(t);s.streamReader=n;const o=()=>{n.read().then((({value:e,done:t})=>{t?s.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,s),o())}),(e=>{if(s.streamReader=null,!this._transport.destroyed){if(s.operatorList){s.operatorList.lastChunk=!0;for(const e of s.renderTasks)e.operatorListChanged();__privateMethod(this,_tryCleanup,tryCleanup_fn).call(this,!0)}if(s.displayReadyCapability)s.displayReadyCapability.reject(e);else{if(!s.opListReadCapability)throw e;s.opListReadCapability.reject(e)}}}))};o()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof _display_utils.RenderingCancelledException){let i=RENDERING_CANCELLED_TIMEOUT;return t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),void(e.streamReaderCancelTimeout=setTimeout((()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})}),i))}}if(e.streamReader.cancel(new _util.AbortException(t.message)).catch((()=>{})),e.streamReader=null,!this._transport.destroyed){for(const[t,i]of this._intentStates)if(i===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}_delayedCleanupTimeout=new WeakMap,_pendingCleanup=new WeakMap,_tryCleanup=new WeakSet,tryCleanup_fn=function(e=!1){if(__privateMethod(this,_abortDelayedCleanup,abortDelayedCleanup_fn).call(this),!__privateGet(this,_pendingCleanup)||this.destroyed)return!1;if(e)return __privateSet(this,_delayedCleanupTimeout,setTimeout((()=>{__privateSet(this,_delayedCleanupTimeout,null),__privateMethod(this,_tryCleanup,tryCleanup_fn).call(this,!1)}),DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),__privateSet(this,_pendingCleanup,!1),!0},_abortDelayedCleanup=new WeakSet,abortDelayedCleanup_fn=function(){__privateGet(this,_delayedCleanupTimeout)&&(clearTimeout(__privateGet(this,_delayedCleanupTimeout)),__privateSet(this,_delayedCleanupTimeout,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){__privateAdd(this,_listeners,new Set),__privateAdd(this,_deferred,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};__privateGet(this,_deferred).then((()=>{for(const e of __privateGet(this,_listeners))e.call(this,i)}))}addEventListener(e,t){__privateGet(this,_listeners).add(t)}removeEventListener(e,t){__privateGet(this,_listeners).delete(t)}terminate(){__privateGet(this,_listeners).clear()}}_listeners=new WeakMap,_deferred=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_util.isNodeJS&&"function"==typeof commonjsRequire)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const e=null==(_a=null==document?void 0:document.currentScript)?void 0:_a.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let i;try{if(i=new URL(e),!i.origin||"null"===i.origin)return!1}catch(a){return!1}const r=new URL(t,i);return i.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(e){const t='importScripts("'.concat(e,'");');return URL.createObjectURL(new Blob([t]))};const _PDFWorker=class _PDFWorker{constructor({name:e=null,port:t=null,verbosity:i=(0,_util.getVerbosityLevel)()}={}){var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,t){if(null==(r=__privateGet(_PDFWorker,_workerPorts))?void 0:r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(__privateGet(_PDFWorker,_workerPorts)||__privateSet(_PDFWorker,_workerPorts,new WeakMap)).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:t}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),i=new _message_handler.MessageHandler("main","worker",e),r=()=>{e.removeEventListener("error",a),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||r()};e.addEventListener("error",a),i.on("test",(t=>{e.removeEventListener("error",a),this.destroyed?r():t?(this._messageHandler=i,this._port=e,this._webWorker=e,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),e.terminate())})),i.on("ready",(t=>{if(e.removeEventListener("error",a),this.destroyed)r();else try{n()}catch(i){this._setupFakeWorker()}}));const n=()=>{const e=new Uint8Array;i.send("test",e,[e.buffer])};return void n()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then((e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new LoopbackPort;this._port=t;const i="fake".concat(PDFWorkerUtil.fakeWorkerId++),r=new _message_handler.MessageHandler(i+"_worker",i,t);e.setup(r,t);const a=new _message_handler.MessageHandler(i,i+"_worker",t);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})})).catch((e=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))}))}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null==(e=__privateGet(_PDFWorker,_workerPorts))||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var t;if(!(null==e?void 0:e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const i=null==(t=__privateGet(this,_workerPorts))?void 0:t.get(e.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new _PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var e;try{return(null==(e=globalThis.pdfjsWorker)?void 0:e.WorkerMessageHandler)||null}catch(t){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&"function"==typeof commonjsRequire){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};_workerPorts=new WeakMap,__privateAdd(_PDFWorker,_workerPorts,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(e,t,i,r,a){__privateAdd(this,_cacheSimpleMethod),__privateAdd(this,_methodPromises,new Map),__privateAdd(this,_pageCache,new Map),__privateAdd(this,_pagePromises,new Map),__privateAdd(this,_passwordCapability,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,t=_util.AnnotationMode.ENABLE,i=null,r=!1){let a=_util.RenderingIntentFlag.DISPLAY,n=_annotation_storage.SerializableEmpty;switch(e){case"any":a=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":a=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(e))}switch(t){case _util.AnnotationMode.DISABLE:a+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:a+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:a+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,n=(a&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(t))}return r&&(a+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:a,cacheKey:"".concat(a,"_").concat(n.hash),annotationStorageSerializable:n}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,null==(e=__privateGet(this,_passwordCapability))||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of __privateGet(this,_pageCache).values())t.push(r._destroy());__privateGet(this,_pageCache).clear(),__privateGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then((()=>{var e;this.commonObjs.clear(),this.fontLoader.clear(),__privateGet(this,_methodPromises).clear(),this.filterFactory.destroy(),null==(e=this._networkStream)||e.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function({value:e,done:i}){i?t.close():((0,_util.assert)(e instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(e=>{const i=new _util.PromiseCapability,r=this._fullReader;return r.headersReady.then((()=>{var e;r.isStreamingSupported&&r.isRangeSupported||(this._lastProgress&&(null==(e=t.onProgress)||e.call(t,this._lastProgress)),r.onProgress=e=>{var i;null==(i=t.onProgress)||i.call(t,{loaded:e.loaded,total:e.total})}),i.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})}),i.reject),i.promise})),e.on("GetRangeReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(e.begin,e.end);i?(t.onPull=()=>{i.read().then((function({value:e,done:i}){i?t.close():((0,_util.assert)(e instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{i.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(({pdfInfo:e})=>{this._numPages=e.numPages,this._htmlForXfa=e.htmlForXfa,delete e.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(e,this))})),e.on("DocException",(function(e){let i;switch(e.name){case"PasswordException":i=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":i=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(i)})),e.on("PasswordRequest",(e=>{if(__privateSet(this,_passwordCapability,new _util.PromiseCapability),t.onPassword){const r=e=>{e instanceof Error?__privateGet(this,_passwordCapability).reject(e):__privateGet(this,_passwordCapability).resolve({password:e})};try{t.onPassword(r,e.code)}catch(i){__privateGet(this,_passwordCapability).reject(i)}}else __privateGet(this,_passwordCapability).reject(new _util.PasswordException(e.message,e.code));return __privateGet(this,_passwordCapability).promise})),e.on("DataLoaded",(e=>{var i;null==(i=t.onProgress)||i.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{this.destroyed||__privateGet(this,_pageCache).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(([t,i,r])=>{var a;if(!this.destroyed&&!this.commonObjs.has(t))switch(i){case"Font":const n=this._params;if("error"in r){const e=r.error;(0,_util.warn)("Error during font loading: ".concat(e)),this.commonObjs.resolve(t,e);break}const s=n.pdfBug&&(null==(a=globalThis.FontInspector)?void 0:a.enabled)?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,o=new _font_loader.FontFaceObject(r,{isEvalSupported:n.isEvalSupported,disableFontFace:n.disableFontFace,ignoreErrors:n.ignoreErrors,inspectFont:s});this.fontLoader.bind(o).catch((i=>e.sendWithPromise("FontFallback",{id:t}))).finally((()=>{!n.fontExtraProperties&&o.data&&(o.data=null),this.commonObjs.resolve(t,o)}));break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(t,r);break;default:throw new Error("Got unknown common object type ".concat(i))}})),e.on("obj",(([e,t,i,r])=>{var a;if(this.destroyed)return;const n=__privateGet(this,_pageCache).get(t);if(!n.objs.has(e))switch(i){case"Image":if(n.objs.resolve(e,r),r){let e;if(r.bitmap){const{width:t,height:i}=r;e=t*i*4}else e=(null==(a=r.data)?void 0:a.length)||0;e>_util.MAX_IMAGE_SIZE_TO_CACHE&&(n._maybeCleanupAfterRender=!0)}break;case"Pattern":n.objs.resolve(e,r);break;default:throw new Error("Got unknown object type ".concat(i))}})),e.on("DocProgress",(e=>{var i;this.destroyed||null==(i=t.onProgress)||i.call(t,{loaded:e.loaded,total:e.total})})),e.on("FetchBuiltInCMap",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),e.on("FetchStandardFontData",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:i,transfers:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:i,filename:null!=(t=null==(e=this._fullReader)?void 0:e.filename)?t:null},r).finally((()=>{this.annotationStorage.resetModified()}))}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=__privateGet(this,_pagePromises).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((e=>{if(this.destroyed)throw new Error("Transport destroyed");const i=new PDFPageProxy(t,e,this,this._params.pdfBug);return __privateGet(this,_pageCache).set(t,i),i}));return __privateGet(this,_pagePromises).set(t,r),r}getPageIndex(e){return"object"!=typeof e||null===e||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return __privateMethod(this,_cacheSimpleMethod,cacheSimpleMethod_fn).call(this,"GetFieldObjects")}hasJSActions(){return __privateMethod(this,_cacheSimpleMethod,cacheSimpleMethod_fn).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return __privateMethod(this,_cacheSimpleMethod,cacheSimpleMethod_fn).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((e=>new _optional_content_config.OptionalContentConfig(e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=__privateGet(this,_methodPromises).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then((e=>{var t,i,r,a;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:null!=(i=null==(t=this._fullReader)?void 0:t.filename)?i:null,contentLength:null!=(a=null==(r=this._fullReader)?void 0:r.contentLength)?a:null}}));return __privateGet(this,_methodPromises).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of __privateGet(this,_pageCache).values())if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."));this.commonObjs.clear(),e||this.fontLoader.clear(),__privateGet(this,_methodPromises).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:t}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:t})}}_methodPromises=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_passwordCapability=new WeakMap,_cacheSimpleMethod=new WeakSet,cacheSimpleMethod_fn=function(e,t=null){const i=__privateGet(this,_methodPromises).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return __privateGet(this,_methodPromises).set(e,r),r};class PDFObjects{constructor(){__privateAdd(this,_ensureObj),__privateAdd(this,_objs,Object.create(null))}get(e,t=null){if(t){const i=__privateMethod(this,_ensureObj,ensureObj_fn).call(this,e);return i.capability.promise.then((()=>t(i.data))),null}const i=__privateGet(this,_objs)[e];if(!(null==i?void 0:i.capability.settled))throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return i.data}has(e){const t=__privateGet(this,_objs)[e];return(null==t?void 0:t.capability.settled)||!1}resolve(e,t=null){const i=__privateMethod(this,_ensureObj,ensureObj_fn).call(this,e);i.data=t,i.capability.resolve()}clear(){var e;for(const t in __privateGet(this,_objs)){const{data:i}=__privateGet(this,_objs)[t];null==(e=null==i?void 0:i.bitmap)||e.close()}__privateSet(this,_objs,Object.create(null))}}_objs=new WeakMap,_ensureObj=new WeakSet,ensureObj_fn=function(e){var t;return(t=__privateGet(this,_objs))[e]||(t[e]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(e){__privateAdd(this,_internalRenderTask,null),__privateSet(this,_internalRenderTask,e),this.onContinue=null}get promise(){return __privateGet(this,_internalRenderTask).capability.promise}cancel(e=0){__privateGet(this,_internalRenderTask).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=__privateGet(this,_internalRenderTask).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=__privateGet(this,_internalRenderTask);return e.form||e.canvas&&(null==t?void 0:t.size)>0}}_internalRenderTask=new WeakMap,exports.RenderTask=RenderTask;const _InternalRenderTask=class e{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:a,operatorList:n,pageIndex:s,canvasFactory:o,filterFactory:l,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:h=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=n,this._pageIndex=s,this.canvasFactory=o,this.filterFactory=l,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===c&&"undefined"!=typeof window,this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){var r,a;if(this.cancelled)return;if(this._canvas){if(__privateGet(e,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");__privateGet(e,_canvasInUse).add(this._canvas)}this._pdfBug&&(null==(r=globalThis.StepperManager)?void 0:r.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:o,background:l}=this.params;this.gfx=new _canvas.CanvasGraphics(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:s,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null==(a=this.graphicsReadyCallback)||a.call(this)}cancel(t=null,i=0){var r;this.running=!1,this.cancelled=!0,null==(r=this.gfx)||r.endDrawing(),__privateGet(e,_canvasInUse).delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),i))}operatorListChanged(){var e;this.graphicsReady?(null==(e=this.stepper)||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),__privateGet(e,_canvasInUse).delete(this._canvas),this.callback())))}};_canvasInUse=new WeakMap,__privateAdd(_InternalRenderTask,_canvasInUse,new WeakSet);let InternalRenderTask=_InternalRenderTask;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},
/* 3 */
/***/
(e,t,i)=>{var r,a,n,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var l=i(1),c=i(4),d=i(8);const h=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=h;class u{constructor(){__privateAdd(this,n),__privateAdd(this,r,!1),__privateAdd(this,a,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=__privateGet(this,a).get(e);return void 0===i?t:Object.assign(t,i)}getRawValue(e){return __privateGet(this,a).get(e)}remove(e){if(__privateGet(this,a).delete(e),0===__privateGet(this,a).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const e of __privateGet(this,a).values())if(e instanceof c.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=__privateGet(this,a).get(e);let r=!1;if(void 0!==i)for(const[a,n]of Object.entries(t))i[a]!==n&&(r=!0,i[a]=n);else r=!0,__privateGet(this,a).set(e,t);r&&__privateMethod(this,n,s).call(this),t instanceof c.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return __privateGet(this,a).has(e)}getAll(){return __privateGet(this,a).size>0?(0,l.objectFromMap)(__privateGet(this,a)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return __privateGet(this,a).size}resetModified(){__privateGet(this,r)&&(__privateSet(this,r,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new p(this)}get serializable(){if(0===__privateGet(this,a).size)return h;const e=new Map,t=new d.MurmurHash3_64,i=[],r=Object.create(null);let n=!1;for(const[s,o]of __privateGet(this,a)){const i=o instanceof c.AnnotationEditor?o.serialize(!1,r):o;i&&(e.set(s,i),t.update("".concat(s,":").concat(JSON.stringify(i))),n||(n=!!i.bitmap))}if(n)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfers:i}:h}}r=new WeakMap,a=new WeakMap,n=new WeakSet,s=function(){__privateGet(this,r)||(__privateSet(this,r,!0),"function"==typeof this.onSetModified&&this.onSetModified())},t.AnnotationStorage=u;class p extends u{constructor(e){super(),__privateAdd(this,o,void 0);const{map:t,hash:i,transfers:r}=e.serializable,a=structuredClone(t,r?{transfer:r}:null);__privateSet(this,o,{map:a,hash:i,transfers:r})}get print(){(0,l.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return __privateGet(this,o)}}o=new WeakMap,t.PrintAnnotationStorage=p},
/* 4 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S,k,x,C,E,P,M,T,I,D,R,L;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var F=i(5),N=i(1),O=i(6);const B=class e{constructor(t){__privateAdd(this,m),__privateAdd(this,b),__privateAdd(this,S),__privateAdd(this,x),__privateAdd(this,E),__privateAdd(this,M),__privateAdd(this,I),__privateAdd(this,R),__privateAdd(this,r,""),__privateAdd(this,a,!1),__privateAdd(this,n,null),__privateAdd(this,s,null),__privateAdd(this,o,null),__privateAdd(this,l,!1),__privateAdd(this,c,null),__privateAdd(this,d,this.focusin.bind(this)),__privateAdd(this,h,this.focusout.bind(this)),__privateAdd(this,u,!1),__privateAdd(this,p,!1),__privateAdd(this,_,!1),__publicField(this,"_initialOptions",Object.create(null)),__publicField(this,"_uiManager",null),__publicField(this,"_focusEventsAllowed",!0),__publicField(this,"_l10nPromise",null),__privateAdd(this,f,!1),__privateAdd(this,g,e._zIndex++),this.constructor===e&&(0,N.unreachable)("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:i,rawDims:{pageWidth:v,pageHeight:y,pageX:A,pageY:w}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[v,y],this.pageTranslation=[A,w];const[k,C]=this.parentDimensions;this.x=t.x/k,this.y=t.y/C,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,N.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new W({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(t,i=null){if(e._l10nPromise||(e._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map((e=>[e,t.get(e)])))),null==i?void 0:i.strings)for(const a of i.strings)e._l10nPromise.set(a,t.get(a));if(-1!==e._borderLineWidth)return;const r=getComputedStyle(document.documentElement);e._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){(0,N.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return __privateGet(this,f)}set _isDraggable(e){var t;__privateSet(this,f,e),null==(t=this.div)||t.classList.toggle("draggable",e)}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=__privateGet(this,g)}setParent(e){null!==e&&(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions),this.parent=e}focusin(e){this._focusEventsAllowed&&(__privateGet(this,u)?__privateSet(this,u,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const i=e.relatedTarget;(null==i?void 0:i.closest("#".concat(this.id)))||(e.preventDefault(),(null==(t=this.parent)?void 0:t.isMultipleSelection)||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[a,n]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/a,this.y=(t+r)/n,this.fixAndSetPosition()}translate(e,t){__privateMethod(this,m,v).call(this,this.parentDimensions,e,t)}translateInPage(e,t){__privateMethod(this,m,v).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:n}=this;const[s,o]=__privateMethod(this,b,y).call(this);a+=s,n+=o,this.div.style.left="".concat((100*a).toFixed(2),"%"),this.div.style.top="".concat((100*n).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[e,t]=this.pageDimensions;let{x:i,y:r,width:a,height:n}=this;switch(a*=e,n*=t,i*=e,r*=t,this.rotation){case 0:i=Math.max(0,Math.min(e-a,i)),r=Math.max(0,Math.min(t-n,r));break;case 90:i=Math.max(0,Math.min(e-n,i)),r=Math.min(t,Math.max(a,r));break;case 180:i=Math.min(e,Math.max(a,i)),r=Math.min(t,Math.max(n,r));break;case 270:i=Math.min(e,Math.max(n,i)),r=Math.max(0,Math.min(t-a,r))}this.x=i/=e,this.y=r/=t;const[s,o]=__privateMethod(this,b,y).call(this);i+=s,r+=o;const{style:l}=this.div;l.left="".concat((100*i).toFixed(2),"%"),l.top="".concat((100*r).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(t,i){var r;return __privateMethod(r=e,A,w).call(r,t,i,this.parentRotation)}pageTranslationToScreen(t,i){var r;return __privateMethod(r=e,A,w).call(r,t,i,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this,r=t*e,a=i*e;return N.FeatureTest.isCSSRoundSupported?[Math.round(r),Math.round(a)]:[r,a]}setDims(t,i){var r;const[a,s]=this.parentDimensions;this.div.style.width="".concat((100*t/a).toFixed(2),"%"),__privateGet(this,l)||(this.div.style.height="".concat((100*i/s).toFixed(2),"%")),null==(r=__privateGet(this,n))||r.classList.toggle("small",t<e.SMALL_EDITOR_SIZE||i<e.SMALL_EDITOR_SIZE)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),a=!__privateGet(this,l)&&t.endsWith("%");if(r&&a)return;const[n,s]=this.parentDimensions;r||(e.width="".concat((100*parseFloat(i)/n).toFixed(2),"%")),__privateGet(this,l)||a||(e.height="".concat((100*parseFloat(t)/s).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(__privateGet(this,n))return;const t=__privateSet(this,n,document.createElement("button"));t.className="altText";const i=await e._l10nPromise.get("editor_alt_text_button_label");if(t.textContent=i,t.setAttribute("aria-label",i),t.tabIndex="0",t.addEventListener("contextmenu",O.noContextMenu),t.addEventListener("pointerdown",(e=>e.stopPropagation())),t.addEventListener("click",(e=>{e.preventDefault(),this._uiManager.editAltText(this)}),{capture:!0}),t.addEventListener("keydown",(e=>{e.target===t&&"Enter"===e.key&&(e.preventDefault(),this._uiManager.editAltText(this))})),__privateMethod(this,I,D).call(this),this.div.append(t),!e.SMALL_EDITOR_SIZE){const i=40;e.SMALL_EDITOR_SIZE=Math.min(128,Math.round(t.getBoundingClientRect().width*(1+i/100)))}}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:__privateGet(this,r),decorative:__privateGet(this,a)}}set altTextData({altText:e,decorative:t}){__privateGet(this,r)===e&&__privateGet(this,a)===t||(__privateSet(this,r,e),__privateSet(this,a,t),__privateMethod(this,I,D).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",__privateGet(this,d)),this.div.addEventListener("focusout",__privateGet(this,h));const[e,t]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth="".concat((100*t/e).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*e/t).toFixed(2),"%"));const[i,r]=this.getInitialTranslation();return this.translate(i,r),(0,F.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=N.FeatureTest.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(__privateSet(this,u,!0),__privateMethod(this,R,L).call(this,e))}moveInDOM(){var e;null==(e=this.parent)||e.moveEditorInDOM(this)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t){const i=this.parentScale,[r,a]=this.pageDimensions,[n,s]=this.pageTranslation,o=e/i,l=t/i,c=this.x*r,d=this.y*a,h=this.width*r,u=this.height*a;switch(this.rotation){case 0:return[c+o+n,a-d-l-u+s,c+o+h+n,a-d-l+s];case 90:return[c+l+n,a-d+o+s,c+l+u+n,a-d+o+h+s];case 180:return[c-o-h+n,a-d+l+s,c-o+n,a-d+l+u+s];case 270:return[c-l-u+n,a-d-o-h+s,c-l+n,a-d-o+s];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,a,n]=e,s=a-i,o=n-r;switch(this.rotation){case 0:return[i,t-n,s,o];case 90:return[i,t-r,o,s];case 180:return[a,t-r,s,o];case 270:return[a,t-n,o,s];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){__privateSet(this,_,!0)}disableEditMode(){__privateSet(this,_,!1)}isInEditMode(){return __privateGet(this,_)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;null==(e=this.div)||e.addEventListener("focusin",__privateGet(this,d)),null==(t=this.div)||t.addEventListener("focusout",__privateGet(this,h))}serialize(e=!1,t=null){(0,N.unreachable)("An editor must be serializable")}static deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation;const[a,n]=r.pageDimensions,[s,o,l,c]=r.getRectInCurrentCoords(e.rect,n);return r.x=s/a,r.y=o/n,r.width=l/a,r.height=c/n,r}remove(){var e;this.div.removeEventListener("focusin",__privateGet(this,d)),this.div.removeEventListener("focusout",__privateGet(this,h)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),null==(e=__privateGet(this,n))||e.remove(),__privateSet(this,n,null),__privateSet(this,s,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(__privateMethod(this,x,C).call(this),__privateGet(this,c).classList.remove("hidden"))}select(){var e;this.makeResizable(),null==(e=this.div)||e.classList.add("selectedEditor")}unselect(){var e,t,i;null==(e=__privateGet(this,c))||e.classList.add("hidden"),null==(t=this.div)||t.classList.remove("selectedEditor"),(null==(i=this.div)?void 0:i.contains(document.activeElement))&&this._uiManager.currentLayer.div.focus()}updateParams(e,t){}disableEditing(){__privateGet(this,n)&&(__privateGet(this,n).hidden=!0)}enableEditing(){__privateGet(this,n)&&(__privateGet(this,n).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return __privateGet(this,p)}set isEditing(e){__privateSet(this,p,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){__privateSet(this,l,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}};r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakMap,_=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakSet,v=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()},b=new WeakSet,y=function(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=B,r=i/e,a=i/t;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}},A=new WeakSet,w=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},S=new WeakSet,k=function(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}},x=new WeakSet,C=function(){if(__privateGet(this,c))return;__privateSet(this,c,document.createElement("div")),__privateGet(this,c).classList.add("resizers");const e=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||e.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const t of e){const e=document.createElement("div");__privateGet(this,c).append(e),e.classList.add("resizer",t),e.addEventListener("pointerdown",__privateMethod(this,E,P).bind(this,t)),e.addEventListener("contextmenu",O.noContextMenu)}this.div.prepend(__privateGet(this,c))},E=new WeakSet,P=function(e,t){t.preventDefault();const{isMac:i}=N.FeatureTest.platform;if(0!==t.button||t.ctrlKey&&i)return;const r=__privateMethod(this,M,T).bind(this,e),a=this._isDraggable;this._isDraggable=!1;const n={passive:!0,capture:!0};window.addEventListener("pointermove",r,n);const s=this.x,o=this.y,l=this.width,c=this.height,d=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{this._isDraggable=a,window.removeEventListener("pointerup",u),window.removeEventListener("blur",u),window.removeEventListener("pointermove",r,n),this.parent.div.style.cursor=d,this.div.style.cursor=h;const e=this.x,t=this.y,i=this.width,p=this.height;e===s&&t===o&&i===l&&p===c||this.addCommands({cmd:()=>{this.width=i,this.height=p,this.x=e,this.y=t;const[r,a]=this.parentDimensions;this.setDims(r*i,a*p),this.fixAndSetPosition()},undo:()=>{this.width=l,this.height=c,this.x=s,this.y=o;const[e,t]=this.parentDimensions;this.setDims(e*l,t*c),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",u),window.addEventListener("blur",u)},M=new WeakSet,T=function(e,t){const[i,r]=this.parentDimensions,a=this.x,n=this.y,s=this.width,o=this.height,l=B.MIN_SIZE/i,c=B.MIN_SIZE/r,d=e=>Math.round(1e4*e)/1e4,h=__privateMethod(this,S,k).call(this,this.rotation),u=(e,t)=>[h[0]*e+h[2]*t,h[1]*e+h[3]*t],p=__privateMethod(this,S,k).call(this,360-this.rotation);let _,f,g=!1,m=!1;switch(e){case"topLeft":g=!0,_=(e,t)=>[0,0],f=(e,t)=>[e,t];break;case"topMiddle":_=(e,t)=>[e/2,0],f=(e,t)=>[e/2,t];break;case"topRight":g=!0,_=(e,t)=>[e,0],f=(e,t)=>[0,t];break;case"middleRight":m=!0,_=(e,t)=>[e,t/2],f=(e,t)=>[0,t/2];break;case"bottomRight":g=!0,_=(e,t)=>[e,t],f=(e,t)=>[0,0];break;case"bottomMiddle":_=(e,t)=>[e/2,t],f=(e,t)=>[e/2,0];break;case"bottomLeft":g=!0,_=(e,t)=>[0,t],f=(e,t)=>[e,0];break;case"middleLeft":m=!0,_=(e,t)=>[0,t/2],f=(e,t)=>[e,t/2]}const v=_(s,o),b=f(s,o);let y=u(...b);const A=d(a+y[0]),w=d(n+y[1]);let x=1,C=1,[E,P]=this.screenToPageTranslation(t.movementX,t.movementY);var M,T;if([E,P]=(M=E/i,T=P/r,[p[0]*M+p[2]*T,p[1]*M+p[3]*T]),g){const e=Math.hypot(s,o);x=C=Math.max(Math.min(Math.hypot(b[0]-v[0]-E,b[1]-v[1]-P)/e,1/s,1/o),l/s,c/o)}else m?x=Math.max(l,Math.min(1,Math.abs(b[0]-v[0]-E)))/s:C=Math.max(c,Math.min(1,Math.abs(b[1]-v[1]-P)))/o;const I=d(s*x),D=d(o*C);y=u(...f(I,D));const R=A-y[0],L=w-y[1];this.width=I,this.height=D,this.x=R,this.y=L,this.setDims(i*I,r*D),this.fixAndSetPosition()},I=new WeakSet,D=async function(){var e;const t=__privateGet(this,n);if(!t)return;if(!__privateGet(this,r)&&!__privateGet(this,a))return t.classList.remove("done"),void(null==(e=__privateGet(this,s))||e.remove());B._l10nPromise.get("editor_alt_text_edit_button_label").then((e=>{t.setAttribute("aria-label",e)}));let i=__privateGet(this,s);if(!i){__privateSet(this,s,i=document.createElement("span")),i.className="tooltip",i.setAttribute("role","tooltip");const e=i.id="alt-text-tooltip-".concat(this.id);t.setAttribute("aria-describedby",e);const r=100;t.addEventListener("mouseenter",(()=>{__privateSet(this,o,setTimeout((()=>{__privateSet(this,o,null),__privateGet(this,s).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})}),r))})),t.addEventListener("mouseleave",(()=>{var e;clearTimeout(__privateGet(this,o)),__privateSet(this,o,null),null==(e=__privateGet(this,s))||e.classList.remove("show")}))}t.classList.add("done"),i.innerText=__privateGet(this,a)?await B._l10nPromise.get("editor_alt_text_decorative_tooltip"):__privateGet(this,r),i.parentNode||t.append(i)},R=new WeakSet,L=function(e){if(!this._isDraggable)return;const t=this._uiManager.isSelected(this);let i,r;this._uiManager.setUpDragSession(),t&&(i={passive:!0,capture:!0},r=e=>{const[t,i]=this.screenToPageTranslation(e.movementX,e.movementY);this._uiManager.dragSelectedEditors(t,i)},window.addEventListener("pointermove",r,i));const a=()=>{if(window.removeEventListener("pointerup",a),window.removeEventListener("blur",a),t&&window.removeEventListener("pointermove",r,i),__privateSet(this,u,!1),!this._uiManager.endDragSession()){const{isMac:t}=N.FeatureTest.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",a),window.addEventListener("blur",a)},__privateAdd(B,A),__publicField(B,"_borderLineWidth",-1),__publicField(B,"_colorManager",new F.ColorManager),__publicField(B,"_zIndex",1),__publicField(B,"SMALL_EDITOR_SIZE",0);let G=B;t.AnnotationEditor=G;class W extends G{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},
/* 5 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S,k,x,C,E,P,M,T,I,D,R,L,F,N,O,B,G,W,j,V,U,z,H,q,X,K,$,Y,Z,J,Q,ee,te,ie,re,ae,ne,se,oe,le,ce,de,he,ue,pe,_e,fe,ge,me,ve,be,ye;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=function(e,t,i){for(const r of i)t.addEventListener(r,e[r].bind(e))},t.opacityToHex=function(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")};var Ae=i(1),we=i(6);class Se{constructor(){__privateAdd(this,r,0)}getId(){return"".concat(Ae.AnnotationEditorPrefix).concat(__privateWrapper(this,r)._++)}}r=new WeakMap;const ke=class{constructor(){__privateAdd(this,o),__privateAdd(this,a,(0,Ae.getUuid)()),__privateAdd(this,n,0),__privateAdd(this,s,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d"),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';const i=t.decode().then((()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])));return(0,Ae.shadow)(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:a}=e;return __privateMethod(this,o,l).call(this,"".concat(t,"_").concat(i,"_").concat(r,"_").concat(a),e)}async getFromUrl(e){return __privateMethod(this,o,l).call(this,e,e)}async getFromId(e){__privateGet(this,s)||__privateSet(this,s,new Map);const t=__privateGet(this,s).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=__privateGet(this,s).get(e);return(null==t?void 0:t.isSvg)?t.svgUrl:null}deleteId(e){__privateGet(this,s)||__privateSet(this,s,new Map);const t=__privateGet(this,s).get(e);t&&(t.refCounter-=1,0===t.refCounter&&(t.bitmap=null))}isValidId(e){return e.startsWith("image_".concat(__privateGet(this,a),"_"))}};a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakSet,l=async function(e,t){__privateGet(this,s)||__privateSet(this,s,new Map);let i=__privateGet(this,s).get(e);if(null===i)return null;if(null==i?void 0:i.bitmap)return i.refCounter+=1,i;try{let e;if(i||(i={bitmap:null,id:"image_".concat(__privateGet(this,a),"_").concat(__privateWrapper(this,n)._++),refCounter:0,isSvg:!1}),"string"==typeof t){i.url=t;const r=await fetch(t);if(!r.ok)throw new Error(r.statusText);e=await r.blob()}else e=i.file=t;if("image/svg+xml"===e.type){const t=ke._isSVGFittingCanvas,r=new FileReader,a=new Image,n=new Promise(((e,n)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,e()},r.onload=async()=>{const e=i.svgUrl=r.result;a.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},a.onerror=r.onerror=n}));r.readAsDataURL(e),await n}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(r){i=null}return __privateGet(this,s).set(e,i),i&&__privateGet(this,s).set(i.id,i),i};let xe=ke;class Ce{constructor(e=128){__privateAdd(this,c,[]),__privateAdd(this,d,!1),__privateAdd(this,h,void 0),__privateAdd(this,u,-1),__privateSet(this,h,e)}add({cmd:e,undo:t,mustExec:i,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:n=!1}){if(i&&e(),__privateGet(this,d))return;const s={cmd:e,undo:t,type:r};if(-1===__privateGet(this,u))return __privateGet(this,c).length>0&&(__privateGet(this,c).length=0),__privateSet(this,u,0),void __privateGet(this,c).push(s);if(a&&__privateGet(this,c)[__privateGet(this,u)].type===r)return n&&(s.undo=__privateGet(this,c)[__privateGet(this,u)].undo),void(__privateGet(this,c)[__privateGet(this,u)]=s);const o=__privateGet(this,u)+1;o===__privateGet(this,h)?__privateGet(this,c).splice(0,1):(__privateSet(this,u,o),o<__privateGet(this,c).length&&__privateGet(this,c).splice(o)),__privateGet(this,c).push(s)}undo(){-1!==__privateGet(this,u)&&(__privateSet(this,d,!0),__privateGet(this,c)[__privateGet(this,u)].undo(),__privateSet(this,d,!1),__privateSet(this,u,__privateGet(this,u)-1))}redo(){__privateGet(this,u)<__privateGet(this,c).length-1&&(__privateSet(this,u,__privateGet(this,u)+1),__privateSet(this,d,!0),__privateGet(this,c)[__privateGet(this,u)].cmd(),__privateSet(this,d,!1))}hasSomethingToUndo(){return-1!==__privateGet(this,u)}hasSomethingToRedo(){return __privateGet(this,u)<__privateGet(this,c).length-1}destroy(){__privateSet(this,c,null)}}c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,t.CommandManager=Ce;class Ee{constructor(e){__privateAdd(this,p),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ae.FeatureTest.platform;for(const[i,r,a={}]of e)for(const e of i){const i=e.startsWith("mac+");t&&i?(this.callbacks.set(e.slice(4),{callback:r,options:a}),this.allKeys.add(e.split("+").at(-1))):t||i||(this.callbacks.set(e,{callback:r,options:a}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(__privateMethod(this,p,_).call(this,t));if(!i)return;const{callback:r,options:{bubbles:a=!1,args:n=[],checker:s=null}}=i;s&&!s(e,t)||(r.bind(e,...n)(),a||(t.stopPropagation(),t.preventDefault()))}}p=new WeakSet,_=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t},t.KeyboardManager=Ee;const Pe=class e{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,we.getColorValues)(e),(0,Ae.shadow)(this,"_colors",e)}convert(t){const i=(0,we.getRGB)(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[r,a]of this._colors)if(a.every(((e,t)=>e===i[t])))return e._colorsMapping.get(r);return i}getHexCode(e){const t=this._colors.get(e);return t?Ae.Util.makeHexColor(...t):e}};__publicField(Pe,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Me=Pe;t.ColorManager=Me;const Te=class e{constructor(e,t,i,r,a,n){__privateAdd(this,$),__privateAdd(this,Z),__privateAdd(this,Q),__privateAdd(this,te),__privateAdd(this,re),__privateAdd(this,ne),__privateAdd(this,oe),__privateAdd(this,ce),__privateAdd(this,he),__privateAdd(this,pe),__privateAdd(this,fe),__privateAdd(this,me),__privateAdd(this,be),__privateAdd(this,f,null),__privateAdd(this,g,new Map),__privateAdd(this,m,new Map),__privateAdd(this,v,null),__privateAdd(this,b,null),__privateAdd(this,y,new Ce),__privateAdd(this,A,0),__privateAdd(this,w,new Set),__privateAdd(this,S,null),__privateAdd(this,k,null),__privateAdd(this,x,new Set),__privateAdd(this,C,null),__privateAdd(this,E,new Se),__privateAdd(this,P,!1),__privateAdd(this,M,!1),__privateAdd(this,T,null),__privateAdd(this,I,Ae.AnnotationEditorType.NONE),__privateAdd(this,D,new Set),__privateAdd(this,R,null),__privateAdd(this,L,this.blur.bind(this)),__privateAdd(this,F,this.focus.bind(this)),__privateAdd(this,N,this.copy.bind(this)),__privateAdd(this,O,this.cut.bind(this)),__privateAdd(this,B,this.paste.bind(this)),__privateAdd(this,G,this.keydown.bind(this)),__privateAdd(this,W,this.onEditingAction.bind(this)),__privateAdd(this,j,this.onPageChanging.bind(this)),__privateAdd(this,V,this.onScaleChanging.bind(this)),__privateAdd(this,U,this.onRotationChanging.bind(this)),__privateAdd(this,z,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}),__privateAdd(this,H,[0,0]),__privateAdd(this,q,null),__privateAdd(this,X,null),__privateAdd(this,K,null),__privateSet(this,X,e),__privateSet(this,K,t),__privateSet(this,v,i),this._eventBus=r,this._eventBus._on("editingaction",__privateGet(this,W)),this._eventBus._on("pagechanging",__privateGet(this,j)),this._eventBus._on("scalechanging",__privateGet(this,V)),this._eventBus._on("rotationchanging",__privateGet(this,U)),__privateSet(this,b,a.annotationStorage),__privateSet(this,C,a.filterFactory),__privateSet(this,R,n),this.viewParameters={realScale:we.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const t=e.prototype,i=e=>{const{activeElement:t}=document;return t&&__privateGet(e,X).contains(t)&&e.hasSomethingToControl()},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return(0,Ae.shadow)(this,"_keyboardManager",new Ee([[["ctrl+a","mac+meta+a"],t.selectAll],[["ctrl+z","mac+meta+z"],t.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:i}]]))}destroy(){__privateMethod(this,te,ie).call(this),__privateMethod(this,Z,J).call(this),this._eventBus._off("editingaction",__privateGet(this,W)),this._eventBus._off("pagechanging",__privateGet(this,j)),this._eventBus._off("scalechanging",__privateGet(this,V)),this._eventBus._off("rotationchanging",__privateGet(this,U));for(const e of __privateGet(this,m).values())e.destroy();__privateGet(this,m).clear(),__privateGet(this,g).clear(),__privateGet(this,x).clear(),__privateSet(this,f,null),__privateGet(this,D).clear(),__privateGet(this,y).destroy(),__privateGet(this,v).destroy()}get hcmFilter(){return(0,Ae.shadow)(this,"hcmFilter",__privateGet(this,R)?__privateGet(this,C).addHCMFilter(__privateGet(this,R).foreground,__privateGet(this,R).background):"none")}get direction(){return(0,Ae.shadow)(this,"direction",getComputedStyle(__privateGet(this,X)).direction)}editAltText(e){var t;null==(t=__privateGet(this,v))||t.editAltText(this,e)}onPageChanging({pageNumber:e}){__privateSet(this,A,e-1)}focusMainContainer(){__privateGet(this,X).focus()}findParent(e,t){for(const i of __privateGet(this,m).values()){const{x:r,y:a,width:n,height:s}=i.div.getBoundingClientRect();if(e>=r&&e<=r+n&&t>=a&&t<=a+s)return i}return null}disableUserSelect(e=!1){__privateGet(this,K).classList.toggle("noUserSelect",e)}addShouldRescale(e){__privateGet(this,x).add(e)}removeShouldRescale(e){__privateGet(this,x).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*we.PixelsPerInch.PDF_TO_CSS_UNITS;for(const t of __privateGet(this,x))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){e.isEmpty()||!__privateGet(this,b)||__privateGet(this,b).has(e.id)||__privateGet(this,b).setValue(e.id,e)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const t of __privateGet(this,D))if(t.div.contains(e)){__privateSet(this,T,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!__privateGet(this,T))return;const[e,t]=__privateGet(this,T);__privateSet(this,T,null),t.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0}),t.focus()}addEditListeners(){__privateMethod(this,Q,ee).call(this),__privateMethod(this,re,ae).call(this)}removeEditListeners(){__privateMethod(this,te,ie).call(this),__privateMethod(this,ne,se).call(this)}copy(e){var t;if(e.preventDefault(),null==(t=__privateGet(this,f))||t.commitOrRemove(),!this.hasSelection)return;const i=[];for(const r of __privateGet(this,D)){const e=r.serialize(!0);e&&i.push(e)}0!==i.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const n of t.items)for(const e of __privateGet(this,k))if(e.isHandlingMimeForPasting(n.type))return void e.paste(n,this.currentLayer);let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){return void(0,Ae.warn)('paste: "'.concat(a.message,'".'))}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const e=[];for(const n of i){const t=r.deserialize(n);if(!t)return;e.push(t)}const t=()=>{for(const t of e)__privateMethod(this,fe,ge).call(this,t);__privateMethod(this,be,ye).call(this,e)},a=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:a,mustExec:!0})}catch(a){(0,Ae.warn)('paste: "'.concat(a.message,'".'))}}keydown(t){var i;(null==(i=this.getActive())?void 0:i.shouldGetKeyboardEvents())||e._keyboardManager.exec(this,t)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){e?(__privateMethod(this,$,Y).call(this),__privateMethod(this,Q,ee).call(this),__privateMethod(this,re,ae).call(this),__privateMethod(this,oe,le).call(this,{isEditing:__privateGet(this,I)!==Ae.AnnotationEditorType.NONE,isEmpty:__privateMethod(this,me,ve).call(this),hasSomethingToUndo:__privateGet(this,y).hasSomethingToUndo(),hasSomethingToRedo:__privateGet(this,y).hasSomethingToRedo(),hasSelectedEditor:!1})):(__privateMethod(this,Z,J).call(this),__privateMethod(this,te,ie).call(this),__privateMethod(this,ne,se).call(this),__privateMethod(this,oe,le).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!__privateGet(this,k)){__privateSet(this,k,e);for(const e of __privateGet(this,k))__privateMethod(this,ce,de).call(this,e.defaultPropertiesToUpdate)}}getId(){return __privateGet(this,E).getId()}get currentLayer(){return __privateGet(this,m).get(__privateGet(this,A))}getLayer(e){return __privateGet(this,m).get(e)}get currentPageIndex(){return __privateGet(this,A)}addLayer(e){__privateGet(this,m).set(e.pageIndex,e),__privateGet(this,P)?e.enable():e.disable()}removeLayer(e){__privateGet(this,m).delete(e.pageIndex)}updateMode(e,t=null){if(__privateGet(this,I)!==e){if(__privateSet(this,I,e),e===Ae.AnnotationEditorType.NONE)return this.setEditingState(!1),void __privateMethod(this,pe,_e).call(this);this.setEditingState(!0),__privateMethod(this,he,ue).call(this),this.unselectAll();for(const t of __privateGet(this,m).values())t.updateMode(e);if(t)for(const e of __privateGet(this,g).values())if(e.annotationElementId===t){this.setSelected(e),e.enterInEditMode();break}}}updateToolbar(e){e!==__privateGet(this,I)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(__privateGet(this,k))if(e!==Ae.AnnotationEditorParamsType.CREATE){for(const i of __privateGet(this,D))i.updateParams(e,t);for(const i of __privateGet(this,k))i.updateDefaultParams(e,t)}else this.currentLayer.addNewEditor(e)}enableWaiting(e=!1){if(__privateGet(this,M)!==e){__privateSet(this,M,e);for(const t of __privateGet(this,m).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of __privateGet(this,g).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return __privateGet(this,g).get(e)}addEditor(e){__privateGet(this,g).set(e.id,e)}removeEditor(e){var t;__privateGet(this,g).delete(e.id),this.unselect(e),e.annotationElementId&&__privateGet(this,w).has(e.annotationElementId)||null==(t=__privateGet(this,b))||t.remove(e.id)}addDeletedAnnotationElement(e){__privateGet(this,w).add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return __privateGet(this,w).has(e)}removeDeletedAnnotationElement(e){__privateGet(this,w).delete(e.annotationElementId),e.deleted=!1}setActiveEditor(e){__privateGet(this,f)!==e&&(__privateSet(this,f,e),e&&__privateMethod(this,ce,de).call(this,e.propertiesToUpdate))}toggleSelected(e){if(__privateGet(this,D).has(e))return __privateGet(this,D).delete(e),e.unselect(),void __privateMethod(this,oe,le).call(this,{hasSelectedEditor:this.hasSelection});__privateGet(this,D).add(e),e.select(),__privateMethod(this,ce,de).call(this,e.propertiesToUpdate),__privateMethod(this,oe,le).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of __privateGet(this,D))t!==e&&t.unselect();__privateGet(this,D).clear(),__privateGet(this,D).add(e),e.select(),__privateMethod(this,ce,de).call(this,e.propertiesToUpdate),__privateMethod(this,oe,le).call(this,{hasSelectedEditor:!0})}isSelected(e){return __privateGet(this,D).has(e)}unselect(e){e.unselect(),__privateGet(this,D).delete(e),__privateMethod(this,oe,le).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==__privateGet(this,D).size}undo(){__privateGet(this,y).undo(),__privateMethod(this,oe,le).call(this,{hasSomethingToUndo:__privateGet(this,y).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:__privateMethod(this,me,ve).call(this)})}redo(){__privateGet(this,y).redo(),__privateMethod(this,oe,le).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:__privateGet(this,y).hasSomethingToRedo(),isEmpty:__privateMethod(this,me,ve).call(this)})}addCommands(e){__privateGet(this,y).add(e),__privateMethod(this,oe,le).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:__privateMethod(this,me,ve).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...__privateGet(this,D)];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)__privateMethod(this,fe,ge).call(this,t)},mustExec:!0})}commitOrRemove(){var e;null==(e=__privateGet(this,f))||e.commitOrRemove()}hasSomethingToControl(){return __privateGet(this,f)||this.hasSelection}selectAll(){for(const e of __privateGet(this,D))e.commit();__privateMethod(this,be,ye).call(this,__privateGet(this,g).values())}unselectAll(){if(__privateGet(this,f))__privateGet(this,f).commitOrRemove();else if(this.hasSelection){for(const e of __privateGet(this,D))e.unselect();__privateGet(this,D).clear(),__privateMethod(this,oe,le).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;__privateGet(this,H)[0]+=e,__privateGet(this,H)[1]+=t;const[r,a]=__privateGet(this,H),n=[...__privateGet(this,D)];__privateGet(this,q)&&clearTimeout(__privateGet(this,q)),__privateSet(this,q,setTimeout((()=>{__privateSet(this,q,null),__privateGet(this,H)[0]=__privateGet(this,H)[1]=0,this.addCommands({cmd:()=>{for(const e of n)__privateGet(this,g).has(e.id)&&e.translateInPage(r,a)},undo:()=>{for(const e of n)__privateGet(this,g).has(e.id)&&e.translateInPage(-r,-a)},mustExec:!1})}),1e3));for(const s of n)s.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),__privateSet(this,S,new Map);for(const e of __privateGet(this,D))__privateGet(this,S).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!__privateGet(this,S))return!1;this.disableUserSelect(!1);const e=__privateGet(this,S);__privateSet(this,S,null);let t=!1;for(const[{x:r,y:a,pageIndex:n},s]of e)s.newX=r,s.newY=a,s.newPageIndex=n,t||(t=r!==s.savedX||a!==s.savedY||n!==s.savedPageIndex);if(!t)return!1;const i=(e,t,i,r)=>{if(__privateGet(this,g).has(e.id)){const a=__privateGet(this,m).get(r);a?e._setParentAndPosition(a,t,i):(e.pageIndex=r,e.x=t,e.y=i)}};return this.addCommands({cmd:()=>{for(const[t,{newX:r,newY:a,newPageIndex:n}]of e)i(t,r,a,n)},undo:()=>{for(const[t,{savedX:r,savedY:a,savedPageIndex:n}]of e)i(t,r,a,n)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(__privateGet(this,S))for(const i of __privateGet(this,S).keys())i.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return __privateGet(this,f)===e}getActive(){return __privateGet(this,f)}getMode(){return __privateGet(this,I)}get imageManager(){return(0,Ae.shadow)(this,"imageManager",new xe)}};f=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,b=new WeakMap,y=new WeakMap,A=new WeakMap,w=new WeakMap,S=new WeakMap,k=new WeakMap,x=new WeakMap,C=new WeakMap,E=new WeakMap,P=new WeakMap,M=new WeakMap,T=new WeakMap,I=new WeakMap,D=new WeakMap,R=new WeakMap,L=new WeakMap,F=new WeakMap,N=new WeakMap,O=new WeakMap,B=new WeakMap,G=new WeakMap,W=new WeakMap,j=new WeakMap,V=new WeakMap,U=new WeakMap,z=new WeakMap,H=new WeakMap,q=new WeakMap,X=new WeakMap,K=new WeakMap,$=new WeakSet,Y=function(){window.addEventListener("focus",__privateGet(this,F)),window.addEventListener("blur",__privateGet(this,L))},Z=new WeakSet,J=function(){window.removeEventListener("focus",__privateGet(this,F)),window.removeEventListener("blur",__privateGet(this,L))},Q=new WeakSet,ee=function(){window.addEventListener("keydown",__privateGet(this,G),{capture:!0})},te=new WeakSet,ie=function(){window.removeEventListener("keydown",__privateGet(this,G),{capture:!0})},re=new WeakSet,ae=function(){document.addEventListener("copy",__privateGet(this,N)),document.addEventListener("cut",__privateGet(this,O)),document.addEventListener("paste",__privateGet(this,B))},ne=new WeakSet,se=function(){document.removeEventListener("copy",__privateGet(this,N)),document.removeEventListener("cut",__privateGet(this,O)),document.removeEventListener("paste",__privateGet(this,B))},oe=new WeakSet,le=function(e){Object.entries(e).some((([e,t])=>__privateGet(this,z)[e]!==t))&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(__privateGet(this,z),e)})},ce=new WeakSet,de=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},he=new WeakSet,ue=function(){if(!__privateGet(this,P)){__privateSet(this,P,!0);for(const e of __privateGet(this,m).values())e.enable()}},pe=new WeakSet,_e=function(){if(this.unselectAll(),__privateGet(this,P)){__privateSet(this,P,!1);for(const e of __privateGet(this,m).values())e.disable()}},fe=new WeakSet,ge=function(e){const t=__privateGet(this,m).get(e.pageIndex);t?t.addOrRebuild(e):this.addEditor(e)},me=new WeakSet,ve=function(){if(0===__privateGet(this,g).size)return!0;if(1===__privateGet(this,g).size)for(const e of __privateGet(this,g).values())return e.isEmpty();return!1},be=new WeakSet,ye=function(e){__privateGet(this,D).clear();for(const t of e)t.isEmpty()||(__privateGet(this,D).add(t),t.select());__privateMethod(this,oe,le).call(this,{hasSelectedEditor:!0})},__publicField(Te,"TRANSLATE_SMALL",1),__publicField(Te,"TRANSLATE_BIG",10);let Ie=Te;t.AnnotationEditorUIManager=Ie},
/* 6 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S,k,x,C,E;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=function(e){},t.getColorValues=function(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const i of e.keys()){t.style.color=i;const r=window.getComputedStyle(t).color;e.set(i,z(r))}t.remove()},t.getCurrentTransform=function(e){const{a:t,b:i,c:r,d:a,e:n,f:s}=e.getTransform();return[t,i,r,a,n,s]},t.getCurrentTransformInverse=function(e){const{a:t,b:i,c:r,d:a,e:n,f:s}=e.getTransform().invertSelf();return[t,i,r,a,n,s]},t.getFilenameFromUrl=function(e,t=!1){return t||([e]=e.split(/[#?]/,1)),e.substring(e.lastIndexOf("/")+1)},t.getPdfFilenameFromUrl=function(e,t="document.pdf"){if("string"!=typeof e)return t;if(V(e))return(0,M.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let a=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(a&&(a=a[0],a.includes("%")))try{a=i.exec(decodeURIComponent(a))[0]}catch(n){}return a||t},t.getRGB=z,t.getXfaPageViewport=function(e,{scale:t=1,rotation:i=0}){const{width:r,height:a}=e.attributes.style,n=[0,0,parseInt(r),parseInt(a)];return new W({viewBox:n,scale:t,rotation:i})},t.isDataScheme=V,t.isPdfFile=function(e){return"string"==typeof e&&/\.pdf$/i.test(e)},t.isValidFetchUrl=U,t.loadScript=function(e,t=!1){return new Promise(((i,r)=>{const a=document.createElement("script");a.src=e,a.onload=function(e){t&&a.remove(),i(e)},a.onerror=function(){r(new Error("Cannot load script at: ".concat(a.src)))},(document.head||document.documentElement).append(a)}))},t.noContextMenu=function(e){e.preventDefault()},t.setLayerDimensions=function(e,t,i=!1,r=!0){if(t instanceof W){const{pageWidth:r,pageHeight:a}=t.rawDims,{style:n}=e,s=M.FeatureTest.isCSSRoundSupported,o="var(--scale-factor) * ".concat(r,"px"),l="var(--scale-factor) * ".concat(a,"px"),c=s?"round(".concat(o,", 1px)"):"calc(".concat(o,")"),d=s?"round(".concat(l,", 1px)"):"calc(".concat(l,")");i&&t.rotation%180!=0?(n.width=d,n.height=c):(n.width=c,n.height=d)}r&&e.setAttribute("data-main-rotation",t.rotation)};var P=i(7),M=i(1);const T="http://www.w3.org/2000/svg",I=class{};__publicField(I,"CSS",96),__publicField(I,"PDF",72),__publicField(I,"PDF_TO_CSS_UNITS",I.CSS/I.PDF);let D,R=I;t.PixelsPerInch=R;class L extends P.BaseFilterFactory{constructor({docId:e,ownerDocument:t=globalThis.document}={}){super(),__privateAdd(this,_),__privateAdd(this,g),__privateAdd(this,v),__privateAdd(this,y),__privateAdd(this,w),__privateAdd(this,k),__privateAdd(this,C),__privateAdd(this,r,void 0),__privateAdd(this,a,void 0),__privateAdd(this,n,void 0),__privateAdd(this,s,void 0),__privateAdd(this,o,void 0),__privateAdd(this,l,void 0),__privateAdd(this,c,void 0),__privateAdd(this,d,void 0),__privateAdd(this,h,void 0),__privateAdd(this,u,void 0),__privateAdd(this,p,0),__privateSet(this,n,e),__privateSet(this,s,t)}addFilter(e){if(!e)return"none";let t,i,r,a,s=__privateGet(this,_,f).get(e);if(s)return s;if(1===e.length){const n=e[0],s=new Array(256);for(let e=0;e<256;e++)s[e]=n[e]/255;a=t=i=r=s.join(",")}else{const[n,s,o]=e,l=new Array(256),c=new Array(256),d=new Array(256);for(let e=0;e<256;e++)l[e]=n[e]/255,c[e]=s[e]/255,d[e]=o[e]/255;t=l.join(","),i=c.join(","),r=d.join(","),a="".concat(t).concat(i).concat(r)}if(s=__privateGet(this,_,f).get(a),s)return __privateGet(this,_,f).set(e,s),s;const o="g_".concat(__privateGet(this,n),"_transfer_map_").concat(__privateWrapper(this,p)._++),l="url(#".concat(o,")");__privateGet(this,_,f).set(e,l),__privateGet(this,_,f).set(a,l);const c=__privateMethod(this,y,A).call(this,o);return __privateMethod(this,k,x).call(this,t,i,r,c),l}addHCMFilter(e,t){var i;const r="".concat(e,"-").concat(t);if(__privateGet(this,l)===r)return __privateGet(this,c);if(__privateSet(this,l,r),__privateSet(this,c,"none"),null==(i=__privateGet(this,o))||i.remove(),!e||!t)return __privateGet(this,c);const a=__privateMethod(this,C,E).call(this,e);e=M.Util.makeHexColor(...a);const s=__privateMethod(this,C,E).call(this,t);if(t=M.Util.makeHexColor(...s),__privateGet(this,g,m).style.color="","#000000"===e&&"#ffffff"===t||e===t)return __privateGet(this,c);const h=new Array(256);for(let n=0;n<=255;n++){const e=n/255;h[n]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const u=h.join(","),p="g_".concat(__privateGet(this,n),"_hcm_filter"),_=__privateSet(this,d,__privateMethod(this,y,A).call(this,p));__privateMethod(this,k,x).call(this,u,u,u,_),__privateMethod(this,v,b).call(this,_);const f=(e,t)=>{const i=a[e]/255,r=s[e]/255,n=new Array(t+1);for(let a=0;a<=t;a++)n[a]=i+a/t*(r-i);return n.join(",")};return __privateMethod(this,k,x).call(this,f(0,5),f(1,5),f(2,5),_),__privateSet(this,c,"url(#".concat(p,")")),__privateGet(this,c)}addHighlightHCMFilter(e,t,i,r){var a;const s="".concat(e,"-").concat(t,"-").concat(i,"-").concat(r);if(__privateGet(this,h)===s)return __privateGet(this,u);if(__privateSet(this,h,s),__privateSet(this,u,"none"),null==(a=__privateGet(this,d))||a.remove(),!e||!t)return __privateGet(this,u);const[o,l]=[e,t].map(__privateMethod(this,C,E).bind(this));let c=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),p=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),[_,f]=[i,r].map(__privateMethod(this,C,E).bind(this));p<c&&([c,p,_,f]=[p,c,f,_]),__privateGet(this,g,m).style.color="";const w=(e,t,i)=>{const r=new Array(256),a=(p-c)/i,n=e/255,s=(t-e)/(255*i);let o=0;for(let l=0;l<=i;l++){const e=Math.round(c+l*a),t=n+l*s;for(let i=o;i<=e;i++)r[i]=t;o=e+1}for(let l=o;l<256;l++)r[l]=r[o-1];return r.join(",")},S="g_".concat(__privateGet(this,n),"_hcm_highlight_filter"),P=__privateSet(this,d,__privateMethod(this,y,A).call(this,S));return __privateMethod(this,v,b).call(this,P),__privateMethod(this,k,x).call(this,w(_[0],f[0],5),w(_[1],f[1],5),w(_[2],f[2],5),P),__privateSet(this,u,"url(#".concat(S,")")),__privateGet(this,u)}destroy(e=!1){e&&(__privateGet(this,c)||__privateGet(this,u))||(__privateGet(this,a)&&(__privateGet(this,a).parentNode.parentNode.remove(),__privateSet(this,a,null)),__privateGet(this,r)&&(__privateGet(this,r).clear(),__privateSet(this,r,null)),__privateSet(this,p,0))}}r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakMap,_=new WeakSet,f=function(){return __privateGet(this,r)||__privateSet(this,r,new Map)},g=new WeakSet,m=function(){if(!__privateGet(this,a)){const e=__privateGet(this,s).createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const i=__privateGet(this,s).createElementNS(T,"svg");i.setAttribute("width",0),i.setAttribute("height",0),__privateSet(this,a,__privateGet(this,s).createElementNS(T,"defs")),e.append(i),i.append(__privateGet(this,a)),__privateGet(this,s).body.append(e)}return __privateGet(this,a)},v=new WeakSet,b=function(e){const t=__privateGet(this,s).createElementNS(T,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)},y=new WeakSet,A=function(e){const t=__privateGet(this,s).createElementNS(T,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),__privateGet(this,g,m).append(t),t},w=new WeakSet,S=function(e,t,i){const r=__privateGet(this,s).createElementNS(T,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},k=new WeakSet,x=function(e,t,i,r){const a=__privateGet(this,s).createElementNS(T,"feComponentTransfer");r.append(a),__privateMethod(this,w,S).call(this,a,"feFuncR",e),__privateMethod(this,w,S).call(this,a,"feFuncG",t),__privateMethod(this,w,S).call(this,a,"feFuncB",i)},C=new WeakSet,E=function(e){return __privateGet(this,g,m).style.color=e,z(getComputedStyle(__privateGet(this,g,m)).getPropertyValue("color"))},t.DOMFilterFactory=L;class F extends P.BaseCanvasFactory{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}async function N(e,t=!1){if(U(e,document.baseURI)){const i=await fetch(e);if(!i.ok)throw new Error(i.statusText);return t?new Uint8Array(await i.arrayBuffer()):(0,M.stringToBytes)(await i.text())}return new Promise(((i,r)=>{const a=new XMLHttpRequest;a.open("GET",e,!0),t&&(a.responseType="arraybuffer"),a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(200===a.status||0===a.status){let e;if(t&&a.response?e=new Uint8Array(a.response):!t&&a.responseText&&(e=(0,M.stringToBytes)(a.responseText)),e)return void i(e)}r(new Error(a.statusText))}},a.send(null)}))}t.DOMCanvasFactory=F;class O extends P.BaseCMapReaderFactory{_fetchData(e,t){return N(e,this.isCompressed).then((e=>({cMapData:e,compressionType:t})))}}t.DOMCMapReaderFactory=O;class B extends P.BaseStandardFontDataFactory{_fetchData(e){return N(e,!0)}}t.DOMStandardFontDataFactory=B;class G extends P.BaseSVGFactory{_createSVG(e){return document.createElementNS(T,e)}}t.DOMSVGFactory=G;class W{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:a=0,dontFlip:n=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=a;const s=(e[2]+e[0])/2,o=(e[3]+e[1])/2;let l,c,d,h,u,p,_,f;switch((i%=360)<0&&(i+=360),i){case 180:l=-1,c=0,d=0,h=1;break;case 90:l=0,c=1,d=1,h=0;break;case 270:l=0,c=-1,d=-1,h=0;break;case 0:l=1,c=0,d=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}n&&(d=-d,h=-h),0===l?(u=Math.abs(o-e[1])*t+r,p=Math.abs(s-e[0])*t+a,_=(e[3]-e[1])*t,f=(e[2]-e[0])*t):(u=Math.abs(s-e[0])*t+r,p=Math.abs(o-e[1])*t+a,_=(e[2]-e[0])*t,f=(e[3]-e[1])*t),this.transform=[l*t,c*t,d*t,h*t,u-l*t*s-d*t*o,p-c*t*s-h*t*o],this.width=_,this.height=f}get rawDims(){const{viewBox:e}=this;return(0,M.shadow)(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new W({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:a})}convertToViewportPoint(e,t){return M.Util.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=M.Util.applyTransform([e[0],e[1]],this.transform),i=M.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return M.Util.applyInverseTransform([e,t],this.transform)}}t.PageViewport=W;class j extends M.BaseException{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function V(e){const t=e.length;let i=0;for(;i<t&&""===e[i].trim();)i++;return"data:"===e.substring(i,i+5).toLowerCase()}function U(e,t){try{const{protocol:i}=t?new URL(e,t):new URL(e);return"http:"===i||"https:"===i}catch(i){return!1}}function z(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map((e=>parseInt(e))):e.startsWith("rgba(")?e.slice(5,-1).split(",").map((e=>parseInt(e))).slice(0,3):((0,M.warn)('Not a valid color format: "'.concat(e,'"')),[0,0,0])}t.RenderingCancelledException=j,t.StatTimer=class{constructor(){__publicField(this,"started",Object.create(null)),__publicField(this,"times",[])}time(e){e in this.started&&(0,M.warn)("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||(0,M.warn)("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:a}of this.times)e.push("".concat(i.padEnd(t)," ").concat(a-r,"ms\n"));return e.join("")}},t.PDFDateString=class{static toDateObject(e){if(!e||"string"!=typeof e)return null;D||(D=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=D.exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let n=parseInt(t[4],10);n=n>=0&&n<=23?n:0;let s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(n+=c,s+=d):"+"===l&&(n-=c,s-=d),new Date(Date.UTC(i,r,a,n,s,o))}}},
/* 7 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var r=i(1);class a{constructor(){this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addHighlightHCMFilter(e,t,i,r){return"none"}destroy(e=!1){}}t.BaseFilterFactory=a;class n{constructor(){this.constructor===n&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d")}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=n;class s{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),i=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(t,i).catch((e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(t))}))}_fetchData(e,t){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=s;class o{constructor({baseUrl:e=null}){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t="".concat(this.baseUrl).concat(e);return this._fetchData(t).catch((e=>{throw new Error("Unable to load font data at: ".concat(t))}))}_fetchData(e){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=o;class l{constructor(){this.constructor===l&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width","".concat(e,"px")),r.setAttribute("height","".concat(t,"px"))),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),r}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,r.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=l},
/* 8 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var r=i(1);const a=3285377520,n=4294901760,s=65535;t.MurmurHash3_64=class{constructor(e){this.h1=e?4294967295&e:a,this.h2=e?4294967295&e:a}update(e){let t,i;if("string"==typeof e){t=new Uint8Array(2*e.length),i=0;for(let r=0,a=e.length;r<a;r++){const a=e.charCodeAt(r);a<=255?t[i++]=a:(t[i++]=a>>>8,t[i++]=255&a)}}else{if(!(0,r.isArrayBuffer)(e))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");t=e.slice(),i=t.byteLength}const a=i>>2,o=i-4*a,l=new Uint32Array(t.buffer,0,a);let c=0,d=0,h=this.h1,u=this.h2;const p=3432918353,_=461845907,f=11601,g=13715;for(let r=0;r<a;r++)1&r?(c=l[r],c=c*p&n|c*f&s,c=c<<15|c>>>17,c=c*_&n|c*g&s,h^=c,h=h<<13|h>>>19,h=5*h+3864292196):(d=l[r],d=d*p&n|d*f&s,d=d<<15|d>>>17,d=d*_&n|d*g&s,u^=d,u=u<<13|u>>>19,u=5*u+3864292196);switch(c=0,o){case 3:c^=t[4*a+2]<<16;case 2:c^=t[4*a+1]<<8;case 1:c^=t[4*a],c=c*p&n|c*f&s,c=c<<15|c>>>17,c=c*_&n|c*g&s,1&a?h^=c:u^=c}this.h1=h,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&n|36045*e&s,t=4283543511*t&n|(2950163797*(t<<16|e>>>16)&n)>>>16,e^=t>>>1,e=444984403*e&n|60499*e&s,t=3301882366*t&n|(3120437893*(t<<16|e>>>16)&n)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}},
/* 9 */
/***/
(e,t,i)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var a=i(1);r=new WeakMap,t.FontLoader=class{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){__privateAdd(this,r,new Set),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),__privateGet(this,r).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){if(e&&!__privateGet(this,r).has(e.loadedName))if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:n,style:s}=e,o=new FontFace(i,n,s);this.addNativeFontFace(o);try{await o.load(),__privateGet(this,r).add(i)}catch(t){(0,a.warn)("Cannot load system font: ".concat(e.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(o)}}else(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void(await this.loadSystemFont(e.systemFontInfo));if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(i){throw(0,a.warn)("Failed to load font '".concat(t.family,"': '").concat(i,"'.")),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((t=>{const i=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,i)}))}}get isFontLoadingAPISupported(){var e;const t=!!(null==(e=this._document)?void 0:e.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let e=!1;return(a.isNodeJS||"undefined"!=typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:t}=this,i={done:!1,complete:function(){for((0,a.assert)(!i.done,"completeRequest() cannot be called twice."),i.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function r(e,t,i,r){return e.substring(0,t)+r+e.substring(t+i)}let n,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;const d="lt".concat(Date.now()).concat(this.loadTestFontId++);let h=this._loadTestFont;h=r(h,976,d.length,d);const u=1482184792;let p=i(h,16);for(n=0,s=d.length-3;n<s;n+=4)p=p-u+i(d,n)|0;n<d.length&&(p=p-u+i(d+"XXX",n)|0),h=r(h,16,4,(0,a.string32)(p));const _="url(data:font/opentype;base64,".concat(btoa(h),");"),f='@font-face {font-family:"'.concat(d,'";src:').concat(_,"}");this.insertRule(f);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const a of[e.loadedName,d]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=a,g.append(e)}this._document.body.append(g),function e(t,i){if(++c>30)return(0,a.warn)("Load test font never loaded."),void i();l.font="30px "+t,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?i():setTimeout(e.bind(null,t,i))}(d,(()=>{g.remove(),t.complete()}))}},t.FontFaceObject=class{constructor(e,{isEvalSupported:t=!0,disableFontFace:i=!1,ignoreErrors:r=!1,inspectFont:a=null}){this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this.isEvalSupported=!1!==t,this.disableFontFace=!0===i,this.ignoreErrors=!0===r,this._inspectFont=a}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null==(e=this._inspectFont)||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t=(0,a.bytesToString)(this.data),i="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");");let r;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),r='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(i,"}")}else r='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(i,"}");return null==(e=this._inspectFont)||e.call(this,this,i),r}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(r){if(!this.ignoreErrors)throw r;return(0,a.warn)('getPathGenerator - ignoring character: "'.concat(r,'".')),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const e=[];for(const t of i){const i=void 0!==t.args?t.args.join(","):"";e.push("c.",t.cmd,"(",i,");\n")}return this.compiledGlyphs[t]=new Function("c","size",e.join(""))}return this.compiledGlyphs[t]=function(e,t){for(const r of i)"scale"===r.cmd&&(r.args=[t,-t]),e[r.cmd].apply(e,r.args)}}}},
/* 10 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var r=i(7);i(1);const a=function(e){return new Promise(((t,i)=>{require$$5.readFile(e,((e,r)=>{!e&&r?t(new Uint8Array(r)):i(new Error(e))}))}))};class n extends r.BaseFilterFactory{}t.NodeFilterFactory=n;class s extends r.BaseCanvasFactory{_createCanvas(e,t){return require$$5.createCanvas(e,t)}}t.NodeCanvasFactory=s;class o extends r.BaseCMapReaderFactory{_fetchData(e,t){return a(e).then((e=>({cMapData:e,compressionType:t})))}}t.NodeCMapReaderFactory=o;class l extends r.BaseStandardFontDataFactory{_fetchData(e){return a(e)}}t.NodeStandardFontDataFactory=l},
/* 11 */
/***/
(e,t,i)=>{var r,a,n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var o=i(1),l=i(6),c=i(12),d=i(13);const h=4096,u=16;class p{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function _(e,t,i,r,a,n,s,o,c,d){const[h,u,p,_,f,g]=(0,l.getCurrentTransform)(e);if(0===u&&0===p){const l=s*h+f,m=Math.round(l),v=o*_+g,b=Math.round(v),y=(s+c)*h+f,A=Math.abs(Math.round(y)-m)||1,w=(o+d)*_+g,S=Math.abs(Math.round(w)-b)||1;return e.setTransform(Math.sign(h),0,0,Math.sign(_),m,b),e.drawImage(t,i,r,a,n,0,0,A,S),e.setTransform(h,u,p,_,f,g),[A,S]}if(0===h&&0===_){const l=o*p+f,m=Math.round(l),v=s*u+g,b=Math.round(v),y=(o+d)*p+f,A=Math.abs(Math.round(y)-m)||1,w=(s+c)*u+g,S=Math.abs(Math.round(w)-b)||1;return e.setTransform(0,Math.sign(u),Math.sign(p),0,m,b),e.drawImage(t,i,r,a,n,0,0,S,A),e.setTransform(h,u,p,_,f,g),[S,A]}return e.drawImage(t,i,r,a,n,s,o,c,d),[Math.hypot(h,u)*c,Math.hypot(p,_)*d]}class f{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=o.Util.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=o.Util.applyTransform(t,e),r=o.Util.applyTransform(t.slice(2),e);this.minX=Math.min(this.minX,i[0],r[0]),this.minY=Math.min(this.minY,i[1],r[1]),this.maxX=Math.max(this.maxX,i[0],r[0]),this.maxY=Math.max(this.maxY,i[1],r[1])}updateScalingPathMinMax(e,t){o.Util.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.maxX=Math.max(this.maxX,t[1]),this.minY=Math.min(this.minY,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,a,n,s,l,c,d){const h=o.Util.bezierBoundingBox(t,i,r,a,n,s,l,c);if(d)return d[0]=Math.min(d[0],h[0],h[2]),d[1]=Math.max(d[1],h[0],h[2]),d[2]=Math.min(d[2],h[1],h[3]),void(d[3]=Math.max(d[3],h[1],h[3]));this.updateRectMinMax(e,h)}getPathBoundingBox(e=c.PathType.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===c.PathType.STROKE){t||(0,o.unreachable)("Stroke bounding box must include transform.");const e=o.Util.singularValueDecompose2dScale(t),r=e[0]*this.lineWidth/2,a=e[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){const e=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=c.PathType.FILL,t=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function g(e,t){if("undefined"!=typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const i=t.height,r=t.width,a=i%u,n=(i-a)/u,s=0===a?n:n+1,l=e.createImageData(r,u);let c,d=0;const h=t.data,p=l.data;let _,f,g,m;if(t.kind===o.ImageKind.GRAYSCALE_1BPP){const t=h.byteLength,i=new Uint32Array(p.buffer,0,p.byteLength>>2),m=i.length,v=r+7>>3,b=4294967295,y=o.FeatureTest.isLittleEndian?4278190080:255;for(_=0;_<s;_++){for(g=_<n?u:a,c=0,f=0;f<g;f++){const e=t-d;let a=0;const n=e>v?r:8*e-7,s=-8&n;let o=0,l=0;for(;a<s;a+=8)l=h[d++],i[c++]=128&l?b:y,i[c++]=64&l?b:y,i[c++]=32&l?b:y,i[c++]=16&l?b:y,i[c++]=8&l?b:y,i[c++]=4&l?b:y,i[c++]=2&l?b:y,i[c++]=1&l?b:y;for(;a<n;a++)0===o&&(l=h[d++],o=128),i[c++]=l&o?b:y,o>>=1}for(;c<m;)i[c++]=0;e.putImageData(l,0,_*u)}}else if(t.kind===o.ImageKind.RGBA_32BPP){for(f=0,m=r*u*4,_=0;_<n;_++)p.set(h.subarray(d,d+m)),d+=m,e.putImageData(l,0,f),f+=u;_<s&&(m=r*a*4,p.set(h.subarray(d,d+m)),e.putImageData(l,0,f))}else{if(t.kind!==o.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(g=u,m=r*g,_=0;_<s;_++){for(_>=n&&(g=a,m=r*g),c=0,f=m;f--;)p[c++]=h[d++],p[c++]=h[d++],p[c++]=h[d++],p[c++]=255;e.putImageData(l,0,_*u)}}}function m(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const i=t.height,r=t.width,a=i%u,n=(i-a)/u,s=0===a?n:n+1,o=e.createImageData(r,u);let l=0;const c=t.data,h=o.data;for(let p=0;p<s;p++){const t=p<n?u:a;({srcPos:l}=(0,d.convertBlackAndWhiteToRGBA)({src:c,srcPos:l,dest:h,width:r,height:t,nonBlackColor:0})),e.putImageData(o,0,p*u)}}function v(e,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of i)void 0!==e[r]&&(t[r]=e[r]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function b(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!o.isNodeJS){const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function y(e,t,i,r){const a=e.length;for(let n=3;n<a;n+=4){const a=e[n];if(0===a)e[n-3]=t,e[n-2]=i,e[n-1]=r;else if(a<255){const s=255-a;e[n-3]=e[n-3]*a+t*s>>8,e[n-2]=e[n-2]*a+i*s>>8,e[n-1]=e[n-1]*a+r*s>>8}}}function A(e,t,i){const r=e.length;for(let a=3;a<r;a+=4){const r=i?i[e[a]]:e[a];t[a]=t[a]*r*.00392156862745098|0}}function w(e,t,i){const r=e.length;for(let a=3;a<r;a+=4){const r=77*e[a-3]+152*e[a-2]+28*e[a-1];t[a]=i?t[a]*i[r>>8]>>8:t[a]*r>>16}}function S(e,t,i,r){const a=r[0],n=r[1],s=r[2]-a,o=r[3]-n;0!==s&&0!==o&&(function(e,t,i,r,a,n,s,o,l,c,d){const h=!!n,u=h?n[0]:0,p=h?n[1]:0,_=h?n[2]:0,f="Luminosity"===a?w:A,g=Math.min(r,Math.ceil(1048576/i));for(let m=0;m<r;m+=g){const a=Math.min(g,r-m),n=e.getImageData(o-c,m+(l-d),i,a),v=t.getImageData(o,m+l,i,a);h&&y(n.data,u,p,_),f(n.data,v.data,s),t.putImageData(v,o,m+l)}}(t.context,i,s,o,t.subtype,t.backdrop,t.transferMap,a,n,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}function k(e,t){const i=o.Util.singularValueDecompose2dScale(e);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*l.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==t?t:i[0]<=r||i[1]<=r}const x=["butt","round","square"],C=["miter","round","bevel"],E={},P={};r=new WeakSet,a=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},n=new WeakSet,s=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let M=class e{constructor(e,t,i,a,s,{optionalContentConfig:o,markedContentStack:l=null},c,d){__privateAdd(this,r),__privateAdd(this,n),this.ctx=e,this.current=new f(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=a,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new p(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const a=this.ctx.canvas.width,n=this.ctx.canvas.height,s=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,n),this.ctx.fillStyle=s,i){const e=this.cachedCanvases.getCanvas("transparent",a,n);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...(0,l.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),b(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=(0,l.getCurrentTransform)(this.ctx)}executeOperatorList(e,t,i,r){const a=e.argsArray,n=e.fnArray;let s=t||0;const l=a.length;if(l===s)return s;const c=l-s>10&&"function"==typeof i,d=c?Date.now()+15:0;let h=0;const u=this.commonObjs,p=this.objs;let _;for(;;){if(void 0!==r&&s===r.nextBreakPoint)return r.breakIt(s,i),s;if(_=n[s],_!==o.OPS.dependency)this[_].apply(this,a[s]);else for(const e of a[s]){const t=e.startsWith("g_")?u:p;if(!t.has(e))return t.get(e,i),s}if(s++,s===l)return s;if(c&&++h>10){if(Date.now()>d)return i(),s;h=0}}}endDrawing(){__privateMethod(this,r,a).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),__privateMethod(this,n,s).call(this)}_scaleImage(e,t){const i=e.width,r=e.height;let a,n,s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=i,c=r,d="prescale1";for(;s>2&&l>1||o>2&&c>1;){let t=l,i=c;s>2&&l>1&&(t=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/t),o>2&&c>1&&(i=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/i),a=this.cachedCanvases.getCanvas(d,t,i),n=a.context,n.clearRect(0,0,t,i),n.drawImage(e,0,0,l,c,0,0,t,i),e=a.canvas,l=t,c=i,d="prescale1"===d?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,a=this.current.fillColor,n=this.current.patternFill,s=(0,l.getCurrentTransform)(t);let d,h,u,p;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;h=JSON.stringify(n?s:[s.slice(0,4),a]),d=this._cachedBitmapsMap.get(t),d||(d=new Map,this._cachedBitmapsMap.set(t,d));const i=d.get(h);if(i&&!n)return{canvas:i,offsetX:Math.round(Math.min(s[0],s[2])+s[4]),offsetY:Math.round(Math.min(s[1],s[3])+s[5])};u=i}u||(p=this.cachedCanvases.getCanvas("maskCanvas",i,r),m(p.context,e));let f=o.Util.transform(s,[1/i,0,0,-1/r,0,0]);f=o.Util.transform(f,[1,0,0,1,0,-r]);const g=o.Util.applyTransform([0,0],f),v=o.Util.applyTransform([i,r],f),b=o.Util.normalizeRect([g[0],g[1],v[0],v[1]]),y=Math.round(b[2]-b[0])||1,A=Math.round(b[3]-b[1])||1,w=this.cachedCanvases.getCanvas("fillCanvas",y,A),S=w.context,x=Math.min(g[0],v[0]),C=Math.min(g[1],v[1]);S.translate(-x,-C),S.transform(...f),u||(u=this._scaleImage(p.canvas,(0,l.getCurrentTransformInverse)(S)),u=u.img,d&&n&&d.set(h,u)),S.imageSmoothingEnabled=k((0,l.getCurrentTransform)(S),e.interpolate),_(S,u,0,0,u.width,u.height,0,0,i,r),S.globalCompositeOperation="source-in";const E=o.Util.transform((0,l.getCurrentTransformInverse)(S),[1,0,0,1,-x,-C]);return S.fillStyle=n?a.getPattern(t,this,E,c.PathType.FILL):a,S.fillRect(0,0,i,r),d&&!n&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,w.canvas)),{canvas:w.canvas,offsetX:Math.round(x),offsetY:Math.round(C)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=x[e]}setLineJoin(e){this.ctx.lineJoin=C[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const a=this.ctx;a.setTransform(...(0,l.getCurrentTransform)(this.suspendedCtx)),v(this.suspendedCtx,a),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},e.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},e.transform=function(e,i,r,a,n,s){t.transform(e,i,r,a,n,s),this.__originalTransform(e,i,r,a,n,s)},e.setTransform=function(e,i,r,a,n,s){t.setTransform(e,i,r,a,n,s),this.__originalSetTransform(e,i,r,a,n,s)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},e.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},e.bezierCurveTo=function(e,i,r,a,n,s){t.bezierCurveTo(e,i,r,a,n,s),this.__originalBezierCurveTo(e,i,r,a,n,s)},e.rect=function(e,i,r,a){t.rect(e,i,r,a),this.__originalRect(e,i,r,a)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),v(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask;S(this.suspendedCtx,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(v(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),v(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,a,n){this.ctx.transform(e,t,i,r,a,n),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,a=this.current;let n,s,c=a.x,d=a.y;const h=(0,l.getCurrentTransform)(r),u=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],p=u?i.slice(0):null;for(let l=0,_=0,f=e.length;l<f;l++)switch(0|e[l]){case o.OPS.rectangle:c=t[_++],d=t[_++];const e=t[_++],i=t[_++],l=c+e,f=d+i;r.moveTo(c,d),0===e||0===i?r.lineTo(l,f):(r.lineTo(l,d),r.lineTo(l,f),r.lineTo(c,f)),u||a.updateRectMinMax(h,[c,d,l,f]),r.closePath();break;case o.OPS.moveTo:c=t[_++],d=t[_++],r.moveTo(c,d),u||a.updatePathMinMax(h,c,d);break;case o.OPS.lineTo:c=t[_++],d=t[_++],r.lineTo(c,d),u||a.updatePathMinMax(h,c,d);break;case o.OPS.curveTo:n=c,s=d,c=t[_+4],d=t[_+5],r.bezierCurveTo(t[_],t[_+1],t[_+2],t[_+3],c,d),a.updateCurvePathMinMax(h,n,s,t[_],t[_+1],t[_+2],t[_+3],c,d,p),_+=6;break;case o.OPS.curveTo2:n=c,s=d,r.bezierCurveTo(c,d,t[_],t[_+1],t[_+2],t[_+3]),a.updateCurvePathMinMax(h,n,s,c,d,t[_],t[_+1],t[_+2],t[_+3],p),c=t[_+2],d=t[_+3],_+=4;break;case o.OPS.curveTo3:n=c,s=d,c=t[_+2],d=t[_+3],r.bezierCurveTo(t[_],t[_+1],c,d,c,d),a.updateCurvePathMinMax(h,n,s,t[_],t[_+1],c,d,c,d,p),_+=4;break;case o.OPS.closePath:r.closePath()}u&&a.updateScalingPathMinMax(h,p),a.setCurrentPoint(c,d)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&(null==i?void 0:i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,(0,l.getCurrentTransformInverse)(t),c.PathType.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor;let r=!1;this.current.patternFill&&(t.save(),t.fillStyle=i.getPattern(t,this,(0,l.getCurrentTransformInverse)(t),c.PathType.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=E}eoClip(){this.pendingClip=P}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var i;const r=this.commonObjs.get(e),a=this.current;if(!r)throw new Error("Can't find font for ".concat(e));if(a.fontMatrix=r.fontMatrix||o.FONT_IDENTITY_MATRIX,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||(0,o.warn)("Invalid font matrix for font "+e),t<0?(t=-t,a.fontDirection=-1):a.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const n=r.loadedName||"sans-serif",s=(null==(i=r.systemFontInfo)?void 0:i.css)||'"'.concat(n,'", ').concat(r.fallbackName);let l="normal";r.black?l="900":r.bold&&(l="bold");const c=r.italic?"italic":"normal";let d=t;t<16?d=16:t>100&&(d=100),this.current.fontSizeScale=t/d,this.ctx.font="".concat(c," ").concat(l," ").concat(d,"px ").concat(s)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,a,n){this.current.textMatrix=[e,t,i,r,a,n],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const a=this.ctx,n=this.current,s=n.font,c=n.textRenderingMode,d=n.fontSize/n.fontSizeScale,h=c&o.TextRenderingMode.FILL_STROKE_MASK,u=!!(c&o.TextRenderingMode.ADD_TO_PATH_FLAG),p=n.patternFill&&!s.missingFile;let _;(s.disableFontFace||u||p)&&(_=s.getPathGenerator(this.commonObjs,e)),s.disableFontFace||p?(a.save(),a.translate(t,i),a.beginPath(),_(a,d),r&&a.setTransform(...r),h!==o.TextRenderingMode.FILL&&h!==o.TextRenderingMode.FILL_STROKE||a.fill(),h!==o.TextRenderingMode.STROKE&&h!==o.TextRenderingMode.FILL_STROKE||a.stroke(),a.restore()):(h!==o.TextRenderingMode.FILL&&h!==o.TextRenderingMode.FILL_STROKE||a.fillText(e,t,i),h!==o.TextRenderingMode.STROKE&&h!==o.TextRenderingMode.FILL_STROKE||a.strokeText(e,t,i)),u&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,l.getCurrentTransform)(a),x:t,y:i,fontSize:d,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(0===r)return;const a=this.ctx,n=t.fontSizeScale,s=t.charSpacing,d=t.wordSpacing,h=t.fontDirection,u=t.textHScale*h,p=e.length,_=i.vertical,f=_?1:-1,g=i.defaultVMetrics,m=r*t.fontMatrix[0],v=t.textRenderingMode===o.TextRenderingMode.FILL&&!i.disableFontFace&&!t.patternFill;let b;if(a.save(),a.transform(...t.textMatrix),a.translate(t.x,t.y+t.textRise),h>0?a.scale(u,-1):a.scale(u,1),t.patternFill){a.save();const e=t.fillColor.getPattern(a,this,(0,l.getCurrentTransformInverse)(a),c.PathType.FILL);b=(0,l.getCurrentTransform)(a),a.restore(),a.fillStyle=e}let y=t.lineWidth;const A=t.textMatrixScale;if(0===A||0===y){const e=t.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;e!==o.TextRenderingMode.STROKE&&e!==o.TextRenderingMode.FILL_STROKE||(y=this.getSinglePixelWidth())}else y/=A;if(1!==n&&(a.scale(n,n),y/=n),a.lineWidth=y,i.isInvalidPDFjsFont){const i=[];let r=0;for(const t of e)i.push(t.unicode),r+=t.width;return a.fillText(i.join(""),0,0),t.x+=r*m*u,a.restore(),void this.compose()}let w,S=0;for(w=0;w<p;++w){const t=e[w];if("number"==typeof t){S+=f*t*r/1e3;continue}let o=!1;const l=(t.isSpace?d:0)+s,c=t.fontChar,u=t.accent;let p,y,A=t.width;if(_){const e=t.vmetric||g,i=-(t.vmetric?e[1]:.5*A)*m,r=e[2]*m;A=e?-e[0]:A,p=i/n,y=(S+r)/n}else p=S/n,y=0;if(i.remeasure&&A>0){const e=1e3*a.measureText(c).width/r*n;if(A<e&&this.isFontSubpixelAAEnabled){const t=A/e;o=!0,a.save(),a.scale(t,1),p/=t}else A!==e&&(p+=(A-e)/2e3*r/n)}if(this.contentVisible&&(t.isInFont||i.missingFile))if(v&&!u)a.fillText(c,p,y);else if(this.paintChar(c,p,y,b),u){const e=p+r*u.offset.x/n,t=y-r*u.offset.y/n;this.paintChar(u.fontChar,e,t,b)}S+=_?A*m-l*h:A*m+l*h,o&&a.restore()}_?t.y-=S:t.x+=S*u,a.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,a=i.fontSize,n=i.fontDirection,s=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,d=i.textHScale*n,h=i.fontMatrix||o.FONT_IDENTITY_MATRIX,u=e.length;let p,_,f,g;if(i.textRenderingMode!==o.TextRenderingMode.INVISIBLE&&0!==a){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(d,n),p=0;p<u;++p){if(_=e[p],"number"==typeof _){g=s*_*a/1e3,this.ctx.translate(g,0),i.x+=g*d;continue}const n=(_.isSpace?c:0)+l,u=r.charProcOperatorList[_.operatorListId];u?(this.contentVisible&&(this.processingType3=_,this.save(),t.scale(a,a),t.transform(...h),this.executeOperatorList(u),this.restore()),f=o.Util.applyTransform([_.width,0],h)[0]*a+n,t.translate(f,0),i.x+=f*d):(0,o.warn)('Type3 character "'.concat(_.operatorListId,'" is not available.'))}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,a,n){this.ctx.rect(i,r,a-i,n-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let i;if("TilingPattern"===t[0]){const r=t[1],a=this.baseTransform||(0,l.getCurrentTransform)(this.ctx),n={createCanvasGraphics:t=>new e(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new c.TilingPattern(t,r,this.ctx,n,a)}else i=this._getPattern(t[1],t[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){const r=o.Util.makeHexColor(e,t,i);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(e,t,i){const r=o.Util.makeHexColor(e,t,i);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=(0,c.getShadingPattern)(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,(0,l.getCurrentTransformInverse)(t),c.PathType.SHADING);const r=(0,l.getCurrentTransformInverse)(t);if(r){const{width:e,height:i}=t.canvas,[a,n,s,l]=o.Util.getAxialAlignedBoundingBox([0,0,e,i],r);this.ctx.fillRect(a,n,s-a,l-n)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform(...e),this.baseTransform=(0,l.getCurrentTransform)(this.ctx),t)){const e=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],e,i),this.current.updateRectMinMax((0,l.getCurrentTransform)(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||(0,o.info)("TODO: Support non-isolated groups."),e.knockout&&(0,o.warn)("Knockout groups not supported.");const i=(0,l.getCurrentTransform)(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=o.Util.getAxialAlignedBoundingBox(e.bbox,(0,l.getCurrentTransform)(t));const a=[0,0,t.canvas.width,t.canvas.height];r=o.Util.intersect(r,a)||[0,0,0,0];const n=Math.floor(r[0]),s=Math.floor(r[1]);let c=Math.max(Math.ceil(r[2])-n,1),d=Math.max(Math.ceil(r[3])-s,1),u=1,p=1;c>h&&(u=c/h,c=h),d>h&&(p=d/h,d=h),this.current.startNewPathAndClipBox([0,0,c,d]);let _="groupAt"+this.groupLevel;e.smask&&(_+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(_,c,d),g=f.context;g.scale(1/u,1/p),g.translate(-n,-s),g.transform(...i),e.smask?this.smaskStack.push({canvas:f.canvas,context:g,offsetX:n,offsetY:s,scaleX:u,scaleY:p,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(n,s),t.scale(u,p),t.save()),v(t,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=(0,l.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const i=o.Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,i,n,s){if(__privateMethod(this,r,a).call(this),b(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(t)&&4===t.length){const r=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=t[0],i[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=r,t[3]=a;const[n,s]=o.Util.singularValueDecompose2dScale((0,l.getCurrentTransform)(this.ctx)),{viewportScale:c}=this,d=Math.ceil(r*this.outputScaleX*c),h=Math.ceil(a*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:u,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,u),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(n,0,0,-s,0,a*s),b(this.ctx)}else b(this.ctx),this.ctx.rect(t[0],t[1],r,a),this.ctx.clip(),this.endPath()}this.current=new f(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),__privateMethod(this,n,s).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const i=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function(e){const{width:t,height:i}=e;if(t>1e3||i>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1;let n,s,o,l=new Uint8Array(a*(i+1));const c=t+7&-8;let d=new Uint8Array(c*i),h=0;for(const f of e.data){let e=128;for(;e>0;)d[h++]=f&e?0:255,e>>=1}let u=0;for(h=0,0!==d[h]&&(l[0]=1,++u),s=1;s<t;s++)d[h]!==d[h+1]&&(l[s]=d[h]?2:1,++u),h++;for(0!==d[h]&&(l[s]=2,++u),n=1;n<i;n++){h=n*c,o=n*a,d[h-c]!==d[h]&&(l[o]=d[h]?1:8,++u);let e=(d[h]?4:0)+(d[h-c]?8:0);for(s=1;s<t;s++)e=(e>>2)+(d[h+1]?4:0)+(d[h-c+1]?8:0),r[e]&&(l[o+s]=r[e],++u),h++;if(d[h-c]!==d[h]&&(l[o+s]=d[h]?2:4,++u),u>1e3)return null}for(h=c*(i-1),o=n*a,0!==d[h]&&(l[o]=8,++u),s=1;s<t;s++)d[h]!==d[h+1]&&(l[o+s]=d[h]?4:8,++u),h++;if(0!==d[h]&&(l[o+s]=4,++u),u>1e3)return null;const p=new Int32Array([0,a,-1,0,-a,0,0,0,1]),_=new Path2D;for(n=0;u&&n<=i;n++){let e=n*a;const i=e+t;for(;e<i&&!l[e];)e++;if(e===i)continue;_.moveTo(e%a,n);const r=e;let s=l[e];do{const t=p[s];do{e+=t}while(!l[e]);const i=l[e];5!==i&&10!==i?(s=i,l[e]=0):(s=i&51*s>>4,l[e]&=s>>2|s<<2),_.lineTo(e%a,e/a|0),l[e]||--u}while(r!==e);--n}return d=null,l=null,function(e){e.save(),e.scale(1/t,-1/i),e.translate(0,-i),e.fill(_),e.beginPath(),e.restore()}}(e)),r.compiled))return void r.compiled(i);const a=this._createMaskCanvas(e),n=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(n,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,a,n){if(!this.contentVisible)return;e=this.getObject(e.data,e);const s=this.ctx;s.save();const c=(0,l.getCurrentTransform)(s);s.transform(t,i,r,a,0,0);const d=this._createMaskCanvas(e);s.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let l=0,h=n.length;l<h;l+=2){const e=o.Util.transform(c,[t,i,r,a,n[l],n[l+1]]),[h,u]=o.Util.applyTransform([0,0],e);s.drawImage(d.canvas,h,u)}s.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const a of e){const{data:e,width:n,height:s,transform:o}=a,d=this.cachedCanvases.getCanvas("maskCanvas",n,s),h=d.context;h.save(),m(h,this.getObject(e,a)),h.globalCompositeOperation="source-in",h.fillStyle=r?i.getPattern(h,this,(0,l.getCurrentTransformInverse)(t),c.PathType.FILL):i,h.fillRect(0,0,n,s),h.restore(),t.save(),t.transform(...o),t.scale(1,-1),_(t,d.canvas,0,0,n,s,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,o.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const a=this.getObject(e);if(!a)return void(0,o.warn)("Dependent image isn't ready yet");const n=a.width,s=a.height,l=[];for(let o=0,c=r.length;o<c;o+=2)l.push({transform:[t,0,0,i,r[o],r[o+1]],x:0,y:0,w:n,h:s});this.paintInlineImageXObjectGroup(a,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:i,height:r}=e,a=this.cachedCanvases.getCanvas("inlineImage",i,r),n=a.context;return n.filter=this.current.transferMaps,n.drawImage(t,0,0),n.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!o.isNodeJS){const{filter:e}=r;"none"!==e&&""!==e&&(r.filter="none")}let a;if(r.scale(1/t,-1/i),e.bitmap)a=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)a=e;else{const r=this.cachedCanvases.getCanvas("inlineImage",t,i).context;g(r,e),a=this.applyTransferMapsToCanvas(r)}const n=this._scaleImage(a,(0,l.getCurrentTransformInverse)(r));r.imageSmoothingEnabled=k((0,l.getCurrentTransform)(r),e.interpolate),_(r,n.img,0,0,n.paintWidth,n.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const t=e.width,i=e.height,a=this.cachedCanvases.getCanvas("inlineImage",t,i).context;g(a,e),r=this.applyTransferMapsToCanvas(a)}for(const a of t)i.save(),i.transform(...a.transform),i.scale(1,-1),_(i,r,a.x,a.y,a.w,a.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===P?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=(0,l.getCurrentTransform)(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:a}=this.ctx.getTransform();let n,s;if(0===i&&0===r){const i=Math.abs(t),r=Math.abs(a);if(i===r)if(0===e)n=s=1/i;else{const t=i*e;n=s=t<1?1/t:1}else if(0===e)n=1/i,s=1/r;else{const t=i*e,a=r*e;n=t<1?1/t:1,s=a<1?1/a:1}}else{const o=Math.abs(t*a-i*r),l=Math.hypot(t,i),c=Math.hypot(r,a);if(0===e)n=c/o,s=l/o;else{const t=e*o;n=c>t?c/t:1,s=l>t?l/t:1}}this._cachedScaleForStroking[0]=n,this._cachedScaleForStroking[1]=s}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,a]=this.getScaleForStroking();if(t.lineWidth=i||1,1===r&&1===a)return void t.stroke();const n=t.getLineDash();if(e&&t.save(),t.scale(r,a),n.length>0){const e=Math.max(r,a);t.setLineDash(n.map((t=>t/e))),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};t.CanvasGraphics=M;for(const T in o.OPS)void 0!==M.prototype[T]&&(M.prototype[o.OPS[T]]=M.prototype[T])},
/* 12 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=function(e){switch(e[0]){case"RadialAxial":return new l(e);case"Mesh":return new h(e);case"Dummy":return new u}throw new Error("Unknown IR type: ".concat(e[0]))};var r=i(1),a=i(6);const n={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function s(e,t){if(!t)return;const i=t[2]-t[0],r=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],i,r),e.clip(a)}t.PathType=n;class o{constructor(){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class l extends o{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,o){let l;if(o===n.STROKE||o===n.FILL){const n=t.current.getClippedPathBoundingBox(o,(0,a.getCurrentTransform)(e))||[0,0,0,0],c=Math.ceil(n[2]-n[0])||1,d=Math.ceil(n[3]-n[1])||1,h=t.cachedCanvases.getCanvas("pattern",c,d,!0),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-n[0],-n[1]),i=r.Util.transform(i,[1,0,0,1,n[0],n[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),s(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),l=e.createPattern(h.canvas,"no-repeat");const p=new DOMMatrix(i);l.setTransform(p)}else s(e,this._bbox),l=this._createGradient(e);return l}}function c(e,t,i,r,a,n,s,o){const l=t.coords,c=t.colors,d=e.data,h=4*e.width;let u;l[i+1]>l[r+1]&&(u=i,i=r,r=u,u=n,n=s,s=u),l[r+1]>l[a+1]&&(u=r,r=a,a=u,u=s,s=o,o=u),l[i+1]>l[r+1]&&(u=i,i=r,r=u,u=n,n=s,s=u);const p=(l[i]+t.offsetX)*t.scaleX,_=(l[i+1]+t.offsetY)*t.scaleY,f=(l[r]+t.offsetX)*t.scaleX,g=(l[r+1]+t.offsetY)*t.scaleY,m=(l[a]+t.offsetX)*t.scaleX,v=(l[a+1]+t.offsetY)*t.scaleY;if(_>=v)return;const b=c[n],y=c[n+1],A=c[n+2],w=c[s],S=c[s+1],k=c[s+2],x=c[o],C=c[o+1],E=c[o+2],P=Math.round(_),M=Math.round(v);let T,I,D,R,L,F,N,O;for(let B=P;B<=M;B++){if(B<g){const e=B<_?0:(_-B)/(_-g);T=p-(p-f)*e,I=b-(b-w)*e,D=y-(y-S)*e,R=A-(A-k)*e}else{let e;e=B>v?1:g===v?0:(g-B)/(g-v),T=f-(f-m)*e,I=w-(w-x)*e,D=S-(S-C)*e,R=k-(k-E)*e}let e;e=B<_?0:B>v?1:(_-B)/(_-v),L=p-(p-m)*e,F=b-(b-x)*e,N=y-(y-C)*e,O=A-(A-E)*e;const t=Math.round(Math.min(T,L)),i=Math.round(Math.max(T,L));let r=h*B+4*t;for(let a=t;a<=i;a++)e=(T-a)/(T-L),e<0?e=0:e>1&&(e=1),d[r++]=I-(I-F)*e|0,d[r++]=D-(D-N)*e|0,d[r++]=R-(R-O)*e|0,d[r++]=255}}function d(e,t,i){const r=t.coords,a=t.colors;let n,s;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(r.length/o)-1,d=o-1;for(n=0;n<l;n++){let t=n*o;for(let n=0;n<d;n++,t++)c(e,i,r[t],r[t+1],r[t+o],a[t],a[t+1],a[t+o]),c(e,i,r[t+o+1],r[t+1],r[t+o],a[t+o+1],a[t+1],a[t+o])}break;case"triangles":for(n=0,s=r.length;n<s;n+=3)c(e,i,r[n],r[n+1],r[n+2],a[n],a[n+1],a[n+2]);break;default:throw new Error("illegal figure")}}class h extends o{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const r=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),n=Math.ceil(this._bounds[2])-r,s=Math.ceil(this._bounds[3])-a,o=Math.min(Math.ceil(Math.abs(n*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(s*e[1]*1.1)),3e3),c=n/o,h=s/l,u={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-a,scaleX:1/c,scaleY:1/h},p=o+4,_=l+4,f=i.getCanvas("mesh",p,_,!1),g=f.context,m=g.createImageData(o,l);if(t){const e=m.data;for(let i=0,r=e.length;i<r;i+=4)e[i]=t[0],e[i+1]=t[1],e[i+2]=t[2],e[i+3]=255}for(const v of this._figures)d(m,v,u);return g.putImageData(m,2,2),{canvas:f.canvas,offsetX:r-2*c,offsetY:a-2*h,scaleX:c,scaleY:h}}getPattern(e,t,i,o){let l;if(s(e,this._bbox),o===n.SHADING)l=r.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(e));else if(l=r.Util.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=r.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*e[0],l[1]*e[1]]}const c=this._createMeshCanvas(l,o===n.SHADING?null:this._background,t.cachedCanvases);return o!==n.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class u extends o{getPattern(){return"hotpink"}}const p=1,_=2,f=class e{constructor(e,t,i,r,a){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=a}createPatternCanvas(e){const t=this.operatorList,i=this.bbox,n=this.xstep,s=this.ystep,o=this.paintType,l=this.tilingType,c=this.color,d=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+l);const h=i[0],u=i[1],p=i[2],_=i[3],f=r.Util.singularValueDecompose2dScale(this.matrix),g=r.Util.singularValueDecompose2dScale(this.baseTransform),m=[f[0]*g[0],f[1]*g[1]],v=this.getSizeAndScale(n,this.ctx.canvas.width,m[0]),b=this.getSizeAndScale(s,this.ctx.canvas.height,m[1]),y=e.cachedCanvases.getCanvas("pattern",v.size,b.size,!0),A=y.context,w=d.createCanvasGraphics(A);w.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(w,o,c);let S=h,k=u,x=p,C=_;return h<0&&(S=0,x+=Math.abs(h)),u<0&&(k=0,C+=Math.abs(u)),A.translate(-v.scale*S,-b.scale*k),w.transform(v.scale,0,0,b.scale,0,0),A.save(),this.clipBbox(w,S,k,x,C),w.baseTransform=(0,a.getCurrentTransform)(w.ctx),w.executeOperatorList(t),w.endDrawing(),{canvas:y.canvas,scaleX:v.scale,scaleY:b.scale,offsetX:S,offsetY:k}}getSizeAndScale(t,i,r){t=Math.abs(t);const a=Math.max(e.MAX_PATTERN_SIZE,i);let n=Math.ceil(t*r);return n>=a?n=a:r=n/t,{scale:r,size:n}}clipBbox(e,t,i,r,n){const s=r-t,o=n-i;e.ctx.rect(t,i,s,o),e.current.updateRectMinMax((0,a.getCurrentTransform)(e.ctx),[t,i,r,n]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const a=e.ctx,n=e.current;switch(t){case p:const e=this.ctx;a.fillStyle=e.fillStyle,a.strokeStyle=e.strokeStyle,n.fillColor=e.fillStyle,n.strokeColor=e.strokeStyle;break;case _:const s=r.Util.makeHexColor(i[0],i[1],i[2]);a.fillStyle=s,a.strokeStyle=s,n.fillColor=s,n.strokeColor=s;break;default:throw new r.FormatError("Unsupported paint type: ".concat(t))}}getPattern(e,t,i,a){let s=i;a!==n.SHADING&&(s=r.Util.transform(s,t.baseTransform),this.matrix&&(s=r.Util.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let l=new DOMMatrix(s);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};__publicField(f,"MAX_PATTERN_SIZE",3e3);let g=f;t.TilingPattern=g},
/* 13 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=a,t.convertToRGBA=function(e){switch(e.kind){case r.ImageKind.GRAYSCALE_1BPP:return a(e);case r.ImageKind.RGB_24BPP:return function({src:e,srcPos:t=0,dest:i,destPos:a=0,width:n,height:s}){let o=0;const l=e.length>>2,c=new Uint32Array(e.buffer,t,l);if(r.FeatureTest.isLittleEndian){for(;o<l-2;o+=3,a+=4){const e=c[o],t=c[o+1],r=c[o+2];i[a]=4278190080|e,i[a+1]=e>>>24|t<<8|4278190080,i[a+2]=t>>>16|r<<16|4278190080,i[a+3]=r>>>8|4278190080}for(let t=4*o,r=e.length;t<r;t+=3)i[a++]=e[t]|e[t+1]<<8|e[t+2]<<16|4278190080}else{for(;o<l-2;o+=3,a+=4){const e=c[o],t=c[o+1],r=c[o+2];i[a]=255|e,i[a+1]=e<<24|t>>>8|255,i[a+2]=t<<16|r>>>16|255,i[a+3]=r<<8|255}for(let t=4*o,r=e.length;t<r;t+=3)i[a++]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|255}return{srcPos:t,destPos:a}}(e)}return null},t.grayToRGBA=function(e,t){if(r.FeatureTest.isLittleEndian)for(let i=0,r=e.length;i<r;i++)t[i]=65793*e[i]|4278190080;else for(let i=0,r=e.length;i<r;i++)t[i]=16843008*e[i]|255};var r=i(1);function a({src:e,srcPos:t=0,dest:i,width:a,height:n,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const l=r.FeatureTest.isLittleEndian?4278190080:255,[c,d]=o?[s,l]:[l,s],h=a>>3,u=7&a,p=e.length;i=new Uint32Array(i.buffer);let _=0;for(let r=0;r<n;r++){for(const a=t+h;t<a;t++){const r=t<p?e[t]:255;i[_++]=128&r?d:c,i[_++]=64&r?d:c,i[_++]=32&r?d:c,i[_++]=16&r?d:c,i[_++]=8&r?d:c,i[_++]=4&r?d:c,i[_++]=2&r?d:c,i[_++]=1&r?d:c}if(0===u)continue;const r=t<p?e[t++]:255;for(let e=0;e<u;e++)i[_++]=r&1<<7-e?d:c}return{srcPos:t,destPos:_}}},
/* 14 */
/***/
(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const i=Object.create(null);t.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""},
/* 15 */
/***/
(e,t,i)=>{var r,a,n,s,o,l;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var c=i(1);const d=1,h=2,u=1,p=2,_=3,f=4,g=5,m=6,v=7,b=8;function y(e){switch(e instanceof Error||"object"==typeof e&&null!==e||(0,c.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new c.AbortException(e.message);case"MissingPDFException":return new c.MissingPDFException(e.message);case"PasswordException":return new c.PasswordException(e.message,e.code);case"UnexpectedResponseException":return new c.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new c.UnknownErrorException(e.message,e.details);default:return new c.UnknownErrorException(e.message,e.toString())}}r=new WeakSet,a=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,n=this,s=this.actionHandler[e.action],o={enqueue(e,n=1,s){if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=n,o>0&&this.desiredSize<=0&&(this.sinkCapability=new c.PromiseCapability,this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:f,streamId:t,chunk:e},s)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:_,streamId:t}),delete n.streamSinks[t])},error(e){(0,c.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:g,streamId:t,reason:y(e)}))},sinkCapability:new c.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,new Promise((function(t){t(s(e.data,o))})).then((function(){a.postMessage({sourceName:i,targetName:r,stream:b,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:i,targetName:r,stream:b,streamId:t,reason:y(e)})}))},n=new WeakSet,s=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,n=this.streamControllers[t],s=this.streamSinks[t];switch(e.stream){case b:e.success?n.startCall.resolve():n.startCall.reject(y(e.reason));break;case v:e.success?n.pullCall.resolve():n.pullCall.reject(y(e.reason));break;case m:if(!s){a.postMessage({sourceName:i,targetName:r,stream:v,streamId:t,success:!0});break}s.desiredSize<=0&&e.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=e.desiredSize,new Promise((function(e){var t;e(null==(t=s.onPull)?void 0:t.call(s))})).then((function(){a.postMessage({sourceName:i,targetName:r,stream:v,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:i,targetName:r,stream:v,streamId:t,reason:y(e)})}));break;case f:if((0,c.assert)(n,"enqueue should have stream controller"),n.isClosed)break;n.controller.enqueue(e.chunk);break;case _:if((0,c.assert)(n,"close should have stream controller"),n.isClosed)break;n.isClosed=!0,n.controller.close(),__privateMethod(this,o,l).call(this,n,t);break;case g:(0,c.assert)(n,"error should have stream controller"),n.controller.error(y(e.reason)),__privateMethod(this,o,l).call(this,n,t);break;case p:e.success?n.cancelCall.resolve():n.cancelCall.reject(y(e.reason)),__privateMethod(this,o,l).call(this,n,t);break;case u:if(!s)break;new Promise((function(t){var i;t(null==(i=s.onCancel)?void 0:i.call(s,y(e.reason)))})).then((function(){a.postMessage({sourceName:i,targetName:r,stream:p,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:i,targetName:r,stream:p,streamId:t,reason:y(e)})})),s.sinkCapability.reject(y(e.reason)),s.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},o=new WeakSet,l=async function(e,t){var i,r,a;await Promise.allSettled([null==(i=e.startCall)?void 0:i.promise,null==(r=e.pullCall)?void 0:r.promise,null==(a=e.cancelCall)?void 0:a.promise]),delete this.streamControllers[t]},t.MessageHandler=class{constructor(e,t,i){__privateAdd(this,r),__privateAdd(this,n),__privateAdd(this,o),this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void __privateMethod(this,n,s).call(this,t);if(t.callback){const e=t.callbackId,i=this.callbackCapabilities[e];if(!i)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===d)i.resolve(t.data);else{if(t.callback!==h)throw new Error("Unexpected callback case");i.reject(y(t.reason))}return}const o=this.actionHandler[t.action];if(!o)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,r=t.sourceName;new Promise((function(e){e(o(t.data))})).then((function(a){i.postMessage({sourceName:e,targetName:r,callback:d,callbackId:t.callbackId,data:a})}),(function(a){i.postMessage({sourceName:e,targetName:r,callback:h,callbackId:t.callbackId,reason:y(a)})}))}else t.streamId?__privateMethod(this,r,a).call(this,t):o(t.data)},i.addEventListener("message",this._onComObjOnMessage)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error('There is already an actionName called "'.concat(e,'"'));i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,a=new c.PromiseCapability;this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(n){a.reject(n)}return a.promise}sendWithStream(e,t,i,r){const a=this.streamId++,n=this.sourceName,s=this.targetName,o=this.comObj;return new ReadableStream({start:i=>{const l=new c.PromiseCapability;return this.streamControllers[a]={controller:i,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:n,targetName:s,action:e,streamId:a,data:t,desiredSize:i.desiredSize},r),l.promise},pull:e=>{const t=new c.PromiseCapability;return this.streamControllers[a].pullCall=t,o.postMessage({sourceName:n,targetName:s,stream:m,streamId:a,desiredSize:e.desiredSize}),t.promise},cancel:e=>{(0,c.assert)(e instanceof Error,"cancel must have a valid reason");const t=new c.PromiseCapability;return this.streamControllers[a].cancelCall=t,this.streamControllers[a].isClosed=!0,o.postMessage({sourceName:n,targetName:s,stream:u,streamId:a,reason:y(e)}),t.promise}},i)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},
/* 16 */
/***/
(e,t,i)=>{var r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=i(1);r=new WeakMap,a=new WeakMap,t.Metadata=class{constructor({parsedData:e,rawData:t}){__privateAdd(this,r,void 0),__privateAdd(this,a,void 0),__privateSet(this,r,e),__privateSet(this,a,t)}getRaw(){return __privateGet(this,a)}get(e){var t;return null!=(t=__privateGet(this,r).get(e))?t:null}getAll(){return(0,n.objectFromMap)(__privateGet(this,r))}has(e){return __privateGet(this,r).has(e)}}},
/* 17 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var d=i(1),h=i(8);const u=Symbol("INTERNAL");class p{constructor(e,t){__privateAdd(this,r,!0),this.name=e,this.intent=t}get visible(){return __privateGet(this,r)}_setVisible(e,t){e!==u&&(0,d.unreachable)("Internal method `_setVisible` called."),__privateSet(this,r,t)}}r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakSet,c=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const t=e[r];let a;if(Array.isArray(t))a=__privateMethod(this,l,c).call(this,t);else{if(!__privateGet(this,n).has(t))return(0,d.warn)("Optional content group not found: ".concat(t)),!0;a=__privateGet(this,n).get(t).visible}switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return"And"===i},t.OptionalContentConfig=class{constructor(e){if(__privateAdd(this,l),__privateAdd(this,a,null),__privateAdd(this,n,new Map),__privateAdd(this,s,null),__privateAdd(this,o,null),this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,__privateSet(this,o,e.order);for(const t of e.groups)__privateGet(this,n).set(t.id,new p(t.name,t.intent));if("OFF"===e.baseState)for(const e of __privateGet(this,n).values())e._setVisible(u,!1);for(const t of e.on)__privateGet(this,n).get(t)._setVisible(u,!0);for(const t of e.off)__privateGet(this,n).get(t)._setVisible(u,!1);__privateSet(this,s,this.getHash())}}isVisible(e){if(0===__privateGet(this,n).size)return!0;if(!e)return(0,d.warn)("Optional content group not defined."),!0;if("OCG"===e.type)return __privateGet(this,n).has(e.id)?__privateGet(this,n).get(e.id).visible:((0,d.warn)("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return __privateMethod(this,l,c).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!__privateGet(this,n).has(t))return(0,d.warn)("Optional content group not found: ".concat(t)),!0;if(__privateGet(this,n).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!__privateGet(this,n).has(t))return(0,d.warn)("Optional content group not found: ".concat(t)),!0;if(!__privateGet(this,n).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!__privateGet(this,n).has(t))return(0,d.warn)("Optional content group not found: ".concat(t)),!0;if(!__privateGet(this,n).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!__privateGet(this,n).has(t))return(0,d.warn)("Optional content group not found: ".concat(t)),!0;if(__privateGet(this,n).get(t).visible)return!1}return!0}return(0,d.warn)("Unknown optional content policy ".concat(e.policy,".")),!0}return(0,d.warn)("Unknown group type ".concat(e.type,".")),!0}setVisibility(e,t=!0){__privateGet(this,n).has(e)?(__privateGet(this,n).get(e)._setVisible(u,!!t),__privateSet(this,a,null)):(0,d.warn)("Optional content group not found: ".concat(e))}get hasInitialVisibility(){return null===__privateGet(this,s)||this.getHash()===__privateGet(this,s)}getOrder(){return __privateGet(this,n).size?__privateGet(this,o)?__privateGet(this,o).slice():[...__privateGet(this,n).keys()]:null}getGroups(){return __privateGet(this,n).size>0?(0,d.objectFromMap)(__privateGet(this,n)):null}getGroup(e){return __privateGet(this,n).get(e)||null}getHash(){if(null!==__privateGet(this,a))return __privateGet(this,a);const e=new h.MurmurHash3_64;for(const[t,i]of __privateGet(this,n))e.update("".concat(t,":").concat(i.visible));return __privateSet(this,a,e.hexdigest())}}},
/* 18 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var r=i(1),a=i(6);t.PDFDataTransportStream=class{constructor({length:e,initialData:t,progressiveDone:i=!1,contentDispositionFilename:a=null,disableRange:n=!1,disableStream:s=!1},o){if((0,r.assert)(o,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=i,this._contentDispositionFilename=a,(null==t?void 0:t.length)>0){const e=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=o,this._isStreamingSupported=!s,this._isRangeSupported=!n,this._contentLength=e,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),this._pdfDataRangeTransport.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),this._pdfDataRangeTransport.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const t=this._rangeReaders.some((function(t){return t._begin===e&&(t._enqueue(i),!0)}));(0,r.assert)(t,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}_onProgress(e){var t,i,r,a;void 0===e.total?null==(i=null==(t=this._rangeReaders[0])?void 0:t.onProgress)||i.call(t,{loaded:e.loaded}):null==(a=null==(r=this._fullRequestReader)?void 0:r.onProgress)||a.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null==(e=this._fullRequestReader)||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new n(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new s(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;null==(t=this._fullRequestReader)||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}};class n{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=(0,a.isPdfFile)(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class s{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},
/* 19 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var r=i(1),a=i(20);function n(e,t,i){return{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function s(e){const t=new Headers;for(const i in e){const r=e[i];void 0!==r&&t.append(i,r)}return t}function o(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:((0,r.warn)("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}t.PDFFetchStream=class{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new c(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;null==(t=this._fullRequestReader)||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}};class l{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=new r.PromiseCapability,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=s(this._stream.httpHeaders);const i=t.url;fetch(i,n(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,a.validateResponseStatus)(e.status))throw(0,a.createResponseStatusError)(e.status,i);this._reader=e.body.getReader(),this._headersCapability.resolve();const t=t=>e.headers.get(t),{allowRangeRequests:n,suggestedLength:s}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=s||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:o(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}}class c{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const o=e.source;this._withCredentials=o.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!o.disableStream,this._abortController=new AbortController,this._headers=s(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(t,"-").concat(i-1));const l=o.url;fetch(l,n(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,a.validateResponseStatus)(e.status))throw(0,a.createResponseStatusError)(e.status,l);this._readCapability.resolve(),this._reader=e.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:o(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}}},
/* 20 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function(e,t){return 404===e||0===e&&t.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+t+'".'):new r.UnexpectedResponseException("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)},t.extractFilenameFromHeader=function(e){const t=e("Content-Disposition");if(t){let e=(0,a.getFilenameFromContentDispositionHeader)(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(i){}if((0,n.isPdfFile)(e))return e}return null},t.validateRangeRequestCapabilities=function({getResponseHeader:e,isHttp:t,rangeChunkSize:i,disableRange:r}){const a={allowRangeRequests:!1,suggestedLength:void 0},n=parseInt(e("Content-Length"),10);return Number.isInteger(n)?(a.suggestedLength=n,n<=2*i||r||!t||"bytes"!==e("Accept-Ranges")||"identity"!==(e("Content-Encoding")||"identity")||(a.allowRangeRequests=!0),a):a},t.validateResponseStatus=function(e){return 200===e||206===e};var r=i(1),a=i(21),n=i(6)},
/* 21 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){let t=!0,i=a("filename\\*","i").exec(e);if(i){i=i[1];let e=o(i);return e=unescape(e),e=l(e),e=c(e),s(e)}if(i=function(e){const t=[];let i;const r=a("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=r.exec(e));){let[,e,r,a]=i;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[r,a]}const n=[];for(let a=0;a<t.length&&a in t;++a){let[e,i]=t[a];i=o(i),e&&(i=unescape(i),0===a&&(i=l(i))),n.push(i)}return n.join("")}(e),i)return s(c(i));if(i=a("filename","i").exec(e),i){i=i[1];let e=o(i);return e=c(e),s(e)}function a(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function n(e,i){if(e){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const a=new TextDecoder(e,{fatal:!0}),n=(0,r.stringToBytes)(i);i=a.decode(n),t=!1}catch(a){}}return i}function s(e){return t&&/[\x80-\xff]/.test(e)&&(e=n("utf-8",e),t&&(e=n("iso-8859-1",e))),e}function o(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const i=t[e].indexOf('"');-1!==i&&(t[e]=t[e].slice(0,i),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function l(e){const t=e.indexOf("'");return-1===t?e:n(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function c(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,i,r){if("q"===i||"Q"===i)return n(t,r=(r=r.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{r=atob(r)}catch(a){}return n(t,r)}))}return""};var r=i(1)},
/* 22 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r=i(1),a=i(20);class n{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const a in i)r[a]=i[a];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const a in this.httpHeaders){const e=this.httpHeaders[a];void 0!==e&&t.setRequestHeader(a,e)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(i){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var i;const r=this.pendingRequests[e];r&&(null==(i=r.onProgress)||i.call(r,t))}onStateChange(e,t){var i,a,n;const s=this.pendingRequests[e];if(!s)return;const o=s.xhr;if(o.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),4!==o.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===o.status&&this.isHttp)return void(null==(i=s.onError)||i.call(s,o.status));const l=o.status||200;if((200!==l||206!==s.expectedStatus)&&l!==s.expectedStatus)return void(null==(a=s.onError)||a.call(s,o.status));const c=function(e){const t=e.response;return"string"!=typeof t?t:(0,r.stringToBytes)(t).buffer}(o);if(206===l){const e=o.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);s.onDone({begin:parseInt(t[1],10),chunk:c})}else c?s.onDone({begin:0,chunk:c}):null==(n=s.onError)||n.call(s,o.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}t.PDFNetworkStream=class{constructor(e){this._source=e,this._manager=new n(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new s(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new o(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;null==(t=this._fullRequestReader)||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}};class s{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=e=>t.getResponseHeader(e),{allowRangeRequests:r,suggestedLength:n}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=n||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=(0,a.createResponseStatusError)(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class o{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;null==(e=this.onClosed)||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=(0,a.createResponseStatusError)(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||null==(t=this.onProgress)||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new r.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},
/* 23 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var r=i(1),a=i(20);const n=/^file:\/\/\/[a-zA-Z]:\//;t.PDFNodeStream=class{constructor(e){this.source=e,this.url=function(e){const t=require$$5,i=t.parse(e);return"file:"===i.protocol||i.host?i:/^[a-z]:[/\\]/i.test(e)?t.parse("file:///".concat(e)):(i.host||(i.protocol="file:"),i)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new h(this):new c(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new u(this,e,t):new d(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;null==(t=this._fullRequestReader)||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}};class s{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class o{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class c extends s{constructor(e){super(e);const t=t=>{if(404===t.statusCode){const e=new r.MissingPDFException('Missing PDF "'.concat(this._url,'".'));return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const i=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:n,suggestedLength:s}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=s||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(i)};if(this._request=null,"http:"===this._url.protocol){const i=require$$5;this._request=i.request(l(this._url,e.httpHeaders),t)}else{const i=require$$5;this._request=i.request(l(this._url,e.httpHeaders),t)}this._request.on("error",(e=>{this._storedError=e,this._headersCapability.reject(e)})),this._request.end()}}class d extends o{constructor(e,t,i){super(e),this._httpHeaders={};for(const r in e.httpHeaders){const t=e.httpHeaders[r];void 0!==t&&(this._httpHeaders[r]=t)}this._httpHeaders.Range="bytes=".concat(t,"-").concat(i-1);const a=e=>{if(404!==e.statusCode)this._setReadableStream(e);else{const e=new r.MissingPDFException('Missing PDF "'.concat(this._url,'".'));this._storedError=e}};if(this._request=null,"http:"===this._url.protocol){const e=require$$5;this._request=e.request(l(this._url,this._httpHeaders),a)}else{const e=require$$5;this._request=e.request(l(this._url,this._httpHeaders),a)}this._request.on("error",(e=>{this._storedError=e})),this._request.end()}}class h extends s{constructor(e){super(e);let t=decodeURIComponent(this._url.path);n.test(this._url.href)&&(t=t.replace(/^\//,""));const i=require$$5;i.lstat(t,((e,a)=>{if(e)return"ENOENT"===e.code&&(e=new r.MissingPDFException('Missing PDF "'.concat(t,'".'))),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=a.size,this._setReadableStream(i.createReadStream(t)),this._headersCapability.resolve()}))}}class u extends o{constructor(e,t,i){super(e);let r=decodeURIComponent(this._url.path);n.test(this._url.href)&&(r=r.replace(/^\//,""));const a=require$$5;this._setReadableStream(a.createReadStream(r,{start:t,end:i-1}))}}},
/* 24 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var r=i(6),a=i(1);const n="normal",s="normal",o="#000000",l=["butt","round","square"],c=["miter","round","bevel"],d=function(e,t="",i=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!i)return URL.createObjectURL(new Blob([e],{type:t}));const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let a="data:".concat(t,";base64,");for(let n=0,s=e.length;n<s;n+=3){const t=255&e[n],i=255&e[n+1],o=255&e[n+2];a+=r[t>>2]+r[(3&t)<<4|i>>4]+r[n+1<s?(15&i)<<2|o>>6:64]+r[n+2<s?63&o:64]}return a},h=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),t=new Int32Array(256);for(let a=0;a<256;a++){let e=a;for(let t=0;t<8;t++)e=1&e?3988292384^e>>1&2147483647:e>>1&2147483647;t[a]=e}function i(e,i,r,a){let n=a;const s=i.length;r[n]=s>>24&255,r[n+1]=s>>16&255,r[n+2]=s>>8&255,r[n+3]=255&s,n+=4,r[n]=255&e.charCodeAt(0),r[n+1]=255&e.charCodeAt(1),r[n+2]=255&e.charCodeAt(2),r[n+3]=255&e.charCodeAt(3),n+=4,r.set(i,n),n+=i.length;const o=function(e,i,r){let a=-1;for(let n=i;n<r;n++){const i=255&(a^e[n]);a=a>>>8^t[i]}return-1^a}(r,a+4,n);r[n]=o>>24&255,r[n+1]=o>>16&255,r[n+2]=o>>8&255,r[n+3]=255&o}function r(e){let t=e.length;const i=65535,r=Math.ceil(t/i),a=new Uint8Array(2+t+5*r+4);let n=0;a[n++]=120,a[n++]=156;let s=0;for(;t>i;)a[n++]=0,a[n++]=255,a[n++]=255,a[n++]=0,a[n++]=0,a.set(e.subarray(s,s+i),n),n+=i,s+=i,t-=i;a[n++]=1,a[n++]=255&t,a[n++]=t>>8&255,a[n++]=255&~t,a[n++]=(65535&~t)>>8&255,a.set(e.subarray(s),n),n+=e.length-s;const o=function(e,t,i){let r=1,a=0;for(let n=t;n<i;++n)r=(r+(255&e[n]))%65521,a=(a+r)%65521;return a<<16|r}(e,0,e.length);return a[n++]=o>>24&255,a[n++]=o>>16&255,a[n++]=o>>8&255,a[n++]=255&o,a}function n(t,n,s,o){const l=t.width,c=t.height;let h,u,p;const _=t.data;switch(n){case a.ImageKind.GRAYSCALE_1BPP:u=0,h=1,p=l+7>>3;break;case a.ImageKind.RGB_24BPP:u=2,h=8,p=3*l;break;case a.ImageKind.RGBA_32BPP:u=6,h=8,p=4*l;break;default:throw new Error("invalid format")}const f=new Uint8Array((1+p)*c);let g=0,m=0;for(let e=0;e<c;++e)f[g++]=0,f.set(_.subarray(m,m+p),g),m+=p,g+=p;if(n===a.ImageKind.GRAYSCALE_1BPP&&o){g=0;for(let e=0;e<c;e++){g++;for(let e=0;e<p;e++)f[g++]^=255}}const v=new Uint8Array([l>>24&255,l>>16&255,l>>8&255,255&l,c>>24&255,c>>16&255,c>>8&255,255&c,h,u,0,0,0]),b=function(e){if(!a.isNodeJS)return r(e);try{const t=parseInt(process.versions.node)>=8?e:Buffer.from(e),i=require$$5.deflateSync(t,{level:9});return i instanceof Uint8Array?i:new Uint8Array(i)}catch(t){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return r(e)}(f),y=e.length+36+v.length+b.length,A=new Uint8Array(y);let w=0;return A.set(e,w),w+=e.length,i("IHDR",v,A,w),w+=12+v.length,i("IDATA",b,A,w),w+=12+b.length,i("IEND",new Uint8Array(0),A,w),d(A,"image/png",s)}return function(e,t,i){return n(e,void 0===e.kind?a.ImageKind.GRAYSCALE_1BPP:e.kind,t,i)}}();class u{constructor(){this.fontSizeScale=1,this.fontWeight=s,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=o,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,t){this.x=e,this.y=t}}function p(e){if(Number.isInteger(e))return e.toString();const t=e.toFixed(10);let i=t.length-1;if("0"!==t[i])return t;do{i--}while("0"===t[i]);return t.substring(0,"."===t[i]?i:i+1)}function _(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":"scale(".concat(p(e[0])," ").concat(p(e[3]),")");if(e[0]===e[3]&&e[1]===-e[2]){const t=180*Math.acos(e[0])/Math.PI;return"rotate(".concat(p(t),")")}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return"translate(".concat(p(e[4])," ").concat(p(e[5]),")");return"matrix(".concat(p(e[0])," ").concat(p(e[1])," ").concat(p(e[2])," ").concat(p(e[3])," ").concat(p(e[4])," ")+"".concat(p(e[5]),")")}let f=0,g=0,m=0;t.SVGGraphics=class{constructor(e,t,i=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new u,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i,this._operatorIdMapping=[];for(const r in a.OPS)this._operatorIdMapping[a.OPS[r]]=r}getObject(e,t=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const t=e.fnArray,i=e.argsArray;for(let r=0,n=t.length;r<n;r++)if(t[r]===a.OPS.dependency)for(const e of i[r]){const t=e.startsWith("g_")?this.commonObjs:this.objs,i=new Promise((i=>{t.get(e,i)}));this.current.dependencies.push(i)}return Promise.all(this.current.dependencies)}transform(e,t,i,r,n,s){const o=[e,t,i,r,n,s];this.transformMatrix=a.Util.transform(this.transformMatrix,o),this.tgrp=null}getSVG(e,t){this.viewport=t;const i=this._initialize(t);return this.loadDependencies(e).then((()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),i)))}convertOpList(e){const t=this._operatorIdMapping,i=e.argsArray,r=e.fnArray,a=[];for(let n=0,s=r.length;n<s;n++){const e=r[n];a.push({fnId:e,fn:t[e],args:i[n]})}return function(e){let t=[];const i=[];for(const r of e)"save"!==r.fn?"restore"===r.fn?t=i.pop():t.push(r):(t.push({fnId:92,fn:"group",items:[]}),i.push(t),t=t.at(-1).items);return t}(a)}executeOpTree(e){for(const t of e){const e=t.fn,i=t.fnId,r=t.args;switch(0|i){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(r);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(r[0],r[1]);break;case a.OPS.setFont:this.setFont(r);break;case a.OPS.showText:case a.OPS.showSpacedText:this.showText(r[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(r[0],r[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(r[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(r[0]);break;case a.OPS.setHScale:this.setHScale(r[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(r[0],r[1],r[2],r[3],r[4],r[5]);break;case a.OPS.setTextRise:this.setTextRise(r[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(r[0]);break;case a.OPS.setLineWidth:this.setLineWidth(r[0]);break;case a.OPS.setLineJoin:this.setLineJoin(r[0]);break;case a.OPS.setLineCap:this.setLineCap(r[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(r[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(r[0],r[1],r[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(r[0],r[1],r[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(r);break;case a.OPS.setFillColorN:this.setFillColorN(r);break;case a.OPS.shadingFill:this.shadingFill(r[0]);break;case a.OPS.setDash:this.setDash(r[0],r[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(r[0]);break;case a.OPS.setFlatness:this.setFlatness(r[0]);break;case a.OPS.setGState:this.setGState(r[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(r[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(r[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(r[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(r[0],r[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(r[0],r[1],r[2],r[3],r[4],r[5]);break;case a.OPS.constructPath:this.constructPath(r[0],r[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,a.warn)("Unimplemented operator ".concat(e))}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,t,i,r,a,n){const s=this.current;s.textMatrix=s.lineMatrix=[e,t,i,r,a,n],s.textMatrixScale=Math.hypot(e,t),s.x=s.lineX=0,s.y=s.lineY=0,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size","".concat(p(s.fontSize),"px")),s.tspan.setAttributeNS(null,"y",p(-s.y)),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtElement.append(s.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=a.IDENTITY_MATRIX,e.lineMatrix=a.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,t){const i=this.current;i.x=i.lineX+=e,i.y=i.lineY+=t,i.xcoords=[],i.ycoords=[],i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size","".concat(p(i.fontSize),"px")),i.tspan.setAttributeNS(null,"y",p(-i.y))}showText(e){const t=this.current,i=t.font,r=t.fontSize;if(0===r)return;const l=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,h=t.fontDirection,u=t.textHScale*h,f=i.vertical,g=f?1:-1,m=i.defaultVMetrics,v=r*t.fontMatrix[0];let b=0;for(const a of e){if(null===a){b+=h*d;continue}if("number"==typeof a){b+=g*a*r/1e3;continue}const e=(a.isSpace?d:0)+c,n=a.fontChar;let s,o,u=a.width;if(f){let e;const t=a.vmetric||m;e=a.vmetric?t[1]:.5*u,e=-e*v;const i=t[2]*v;u=t?-t[0]:u,s=e/l,o=(b+i)/l}else s=b/l,o=0;(a.isInFont||i.missingFile)&&(t.xcoords.push(t.x+s),f&&t.ycoords.push(-t.y+o),t.tspan.textContent+=n),b+=f?u*v-e*h:u*v+e*h}t.tspan.setAttributeNS(null,"x",t.xcoords.map(p).join(" ")),f?t.tspan.setAttributeNS(null,"y",t.ycoords.map(p).join(" ")):t.tspan.setAttributeNS(null,"y",p(-t.y)),f?t.y-=b:t.x+=b*u,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size","".concat(p(t.fontSize),"px")),t.fontStyle!==n&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==s&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);const y=t.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(y===a.TextRenderingMode.FILL||y===a.TextRenderingMode.FILL_STROKE?(t.fillColor!==o&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),y===a.TextRenderingMode.STROKE||y===a.TextRenderingMode.FILL_STROKE){const e=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,e)}let A=t.textMatrix;0!==t.textRise&&(A=A.slice(),A[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform","".concat(_(A)," scale(").concat(p(u),", -1)")),t.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.txtElement.append(t.tspan),t.txtgrp.append(t.txtElement),this._ensureTransformGroup().append(t.txtElement)}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const t=d(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(e.loadedName,'";')+" src: url(".concat(t,"); }\n")}setFont(e){const t=this.current,i=this.commonObjs.get(e[0]);let r=e[1];t.font=i,!this.embedFonts||i.missingFile||this.embeddedFonts[i.loadedName]||(this.addFontStyle(i),this.embeddedFonts[i.loadedName]=i),t.fontMatrix=i.fontMatrix||a.FONT_IDENTITY_MATRIX;let n="normal";i.black?n="900":i.bold&&(n="bold");const s=i.italic?"italic":"normal";r<0?(r=-r,t.fontDirection=-1):t.fontDirection=1,t.fontSize=r,t.fontFamily=i.loadedName,t.fontWeight=n,t.fontStyle=s,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",p(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){var e;const t=this.current;t.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&(null==(e=t.txtElement)?void 0:e.hasChildNodes())&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=l[e]}setLineJoin(e){this.current.lineJoin=c[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,t,i){this.current.strokeColor=a.Util.makeHexColor(e,t,i)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,t,i){this.current.fillColor=a.Util.makeHexColor(e,t,i),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const{width:t,height:i}=this.viewport,r=a.Util.inverseTransform(this.transformMatrix),[n,s,o,l]=a.Util.getAxialAlignedBoundingBox([0,0,t,i],r),c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",n),c.setAttributeNS(null,"y",s),c.setAttributeNS(null,"width",o-n),c.setAttributeNS(null,"height",l-s),c.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&c.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(c)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const t=e[1],i=e[2],r=e[3]||a.IDENTITY_MATRIX,[n,s,o,l]=e[4],c=e[5],d=e[6],h=e[7],u="shading".concat(m++),[p,_,f,g]=a.Util.normalizeRect([...a.Util.applyTransform([n,s],r),...a.Util.applyTransform([o,l],r)]),[v,b]=a.Util.singularValueDecompose2dScale(r),y=c*v,A=d*b,w=this.svgFactory.createElement("svg:pattern");w.setAttributeNS(null,"id",u),w.setAttributeNS(null,"patternUnits","userSpaceOnUse"),w.setAttributeNS(null,"width",y),w.setAttributeNS(null,"height",A),w.setAttributeNS(null,"x","".concat(p)),w.setAttributeNS(null,"y","".concat(_));const S=this.svg,k=this.transformMatrix,x=this.current.fillColor,C=this.current.strokeColor,E=this.svgFactory.create(f-p,g-_);if(this.svg=E,this.transformMatrix=r,2===h){const e=a.Util.makeHexColor(...t);this.current.fillColor=e,this.current.strokeColor=e}return this.executeOpTree(this.convertOpList(i)),this.svg=S,this.transformMatrix=k,this.current.fillColor=x,this.current.strokeColor=C,w.append(E.childNodes[0]),this.defs.append(w),"url(#".concat(u,")")}_makeShadingPattern(e){switch("string"==typeof e&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const t="shading".concat(m++),i=e[3];let r;switch(e[1]){case"axial":const i=e[4],a=e[5];r=this.svgFactory.createElement("svg:linearGradient"),r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"x1",i[0]),r.setAttributeNS(null,"y1",i[1]),r.setAttributeNS(null,"x2",a[0]),r.setAttributeNS(null,"y2",a[1]);break;case"radial":const n=e[4],s=e[5],o=e[6],l=e[7];r=this.svgFactory.createElement("svg:radialGradient"),r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"cx",s[0]),r.setAttributeNS(null,"cy",s[1]),r.setAttributeNS(null,"r",l),r.setAttributeNS(null,"fx",n[0]),r.setAttributeNS(null,"fy",n[1]),r.setAttributeNS(null,"fr",o);break;default:throw new Error("Unknown RadialAxial type: ".concat(e[1]))}for(const e of i){const t=this.svgFactory.createElement("svg:stop");t.setAttributeNS(null,"offset",e[0]),t.setAttributeNS(null,"stop-color",e[1]),r.append(t)}return this.defs.append(r),"url(#".concat(t,")");case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(e[0]))}}setDash(e,t){this.current.dashArray=e,this.current.dashPhase=t}constructPath(e,t){const i=this.current;let r=i.x,n=i.y,s=[],o=0;for(const l of e)switch(0|l){case a.OPS.rectangle:r=t[o++],n=t[o++];const e=r+t[o++],i=n+t[o++];s.push("M",p(r),p(n),"L",p(e),p(n),"L",p(e),p(i),"L",p(r),p(i),"Z");break;case a.OPS.moveTo:r=t[o++],n=t[o++],s.push("M",p(r),p(n));break;case a.OPS.lineTo:r=t[o++],n=t[o++],s.push("L",p(r),p(n));break;case a.OPS.curveTo:r=t[o+4],n=t[o+5],s.push("C",p(t[o]),p(t[o+1]),p(t[o+2]),p(t[o+3]),p(r),p(n)),o+=6;break;case a.OPS.curveTo2:s.push("C",p(r),p(n),p(t[o]),p(t[o+1]),p(t[o+2]),p(t[o+3])),r=t[o+2],n=t[o+3],o+=4;break;case a.OPS.curveTo3:r=t[o+2],n=t[o+3],s.push("C",p(t[o]),p(t[o+1]),p(r),p(n),p(r),p(n)),o+=4;break;case a.OPS.closePath:s.push("Z")}s=s.join(" "),i.path&&e.length>0&&e[0]!==a.OPS.rectangle&&e[0]!==a.OPS.moveTo?s=i.path.getAttributeNS(null,"d")+s:(i.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(i.path)),i.path.setAttributeNS(null,"d",s),i.path.setAttributeNS(null,"fill","none"),i.element=i.path,i.setCurrentPoint(r,n)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element)return void(this.pendingClip=null);const t="clippath".concat(f++),i=this.svgFactory.createElement("svg:clipPath");i.setAttributeNS(null,"id",t),i.setAttributeNS(null,"transform",_(this.transformMatrix));const r=e.element.cloneNode(!0);if("evenodd"===this.pendingClip?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,i.append(r),this.defs.append(i),e.activeClipUrl){e.clipGroup=null;for(const e of this.extraStack)e.clipGroup=null;i.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl="url(#".concat(t,")"),this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const t="".concat(e.path.getAttributeNS(null,"d"),"Z");e.path.setAttributeNS(null,"d",t)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i);break;case"CA":this.setStrokeAlpha(i);break;case"ca":this.setFillAlpha(i);break;default:(0,a.warn)("Unimplemented graphic state operator ".concat(t))}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,t=1){const i=this.current;let r=i.dashArray;1!==t&&r.length>0&&(r=r.map((function(e){return t*e}))),e.setAttributeNS(null,"stroke",i.strokeColor),e.setAttributeNS(null,"stroke-opacity",i.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",p(i.miterLimit)),e.setAttributeNS(null,"stroke-linecap",i.lineCap),e.setAttributeNS(null,"stroke-linejoin",i.lineJoin),e.setAttributeNS(null,"stroke-width",p(t*i.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",r.map(p).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",p(t*i.dashPhase)+"px")}eoFill(){var e;null==(e=this.current.element)||e.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var e;null==(e=this.current.element)||e.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,a.warn)("Dependent image with object ID ".concat(e," is not ready yet"))}paintInlineImageXObject(e,t){const i=e.width,r=e.height,a=h(e,this.forceDataSchema,!!t),n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width",p(i)),n.setAttributeNS(null,"height",p(r)),this.current.element=n,this.clip("nonzero");const s=this.svgFactory.createElement("svg:image");s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y",p(-r)),s.setAttributeNS(null,"width",p(i)+"px"),s.setAttributeNS(null,"height",p(r)+"px"),s.setAttributeNS(null,"transform","scale(".concat(p(1/i)," ").concat(p(-1/r),")")),t?t.append(s):this._ensureTransformGroup().append(s)}paintImageMaskXObject(e){const t=this.getObject(e.data,e);if(t.bitmap)return void(0,a.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const i=this.current,r=t.width,n=t.height,s=i.fillColor;i.maskId="mask".concat(g++);const o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",i.maskId);const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",p(r)),l.setAttributeNS(null,"height",p(n)),l.setAttributeNS(null,"fill",s),l.setAttributeNS(null,"mask","url(#".concat(i.maskId,")")),this.defs.append(o),this._ensureTransformGroup().append(l),this.paintInlineImageXObject(t,o)}paintFormXObjectBegin(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){const e=t[2]-t[0],i=t[3]-t[1],r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x",t[0]),r.setAttributeNS(null,"y",t[1]),r.setAttributeNS(null,"width",p(e)),r.setAttributeNS(null,"height",p(i)),this.current.element=r,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const t=this.svgFactory.create(e.width,e.height),i=this.svgFactory.createElement("svg:defs");t.append(i),this.defs=i;const r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",_(e.transform)),t.append(r),this.svg=r,t}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",_(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}},
/* 25 */
/***/
(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class i{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};return function e(r){var a;if(!r)return;let n=null;const s=r.name;if("#text"===s)n=r.value;else{if(!i.shouldBuildText(s))return;(null==(a=null==r?void 0:r.attributes)?void 0:a.textContent)?n=r.attributes.textContent:r.value&&(n=r.value)}if(null!==n&&t.push({str:n}),r.children)for(const t of r.children)e(t)}(e),r}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}t.XfaText=i},
/* 26 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=function(e){e.textContentSource||!e.textContent&&!e.textContentStream||((0,a.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),e.textContentSource=e.textContent||e.textContentStream);const{container:t,viewport:i}=e,r=getComputedStyle(t),n=r.getPropertyValue("visibility"),s=parseFloat(r.getPropertyValue("--scale-factor"));"visible"===n&&(!s||Math.abs(s-i.scale));const o=new h(e);return o._render(),o},t.updateTextLayer=function({container:e,viewport:t,textDivs:i,textDivProperties:r,isOffscreenCanvasSupported:n,mustRotate:s=!0,mustRescale:o=!0}){if(s&&(0,a.setLayerDimensions)(e,{rotation:t.rotation}),o){const e=l(0,n),a={prevFontSize:null,prevFontFamily:null,div:null,scale:t.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:e};for(const t of i)a.properties=r.get(t),a.div=t,d(a)}};var r=i(1),a=i(6);const n=30,s=.8,o=new Map;function l(e,t){let i;if(t&&r.FeatureTest.isOffscreenCanvasSupported)i=new OffscreenCanvas(e,e).getContext("2d",{alpha:!1});else{const t=document.createElement("canvas");t.width=t.height=e,i=t.getContext("2d",{alpha:!1})}return i}function c(e,t,i){const a=document.createElement("span"),c={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};e._textDivs.push(a);const d=r.Util.transform(e._transform,t.transform);let h=Math.atan2(d[1],d[0]);const u=i[t.fontName];u.vertical&&(h+=Math.PI/2);const p=Math.hypot(d[2],d[3]),_=p*function(e,t){const i=o.get(e);if(i)return i;const r=l(n,t);r.font="".concat(n,"px ").concat(e);const a=r.measureText("");let c=a.fontBoundingBoxAscent,d=Math.abs(a.fontBoundingBoxDescent);if(c){const t=c/(c+d);return o.set(e,t),r.canvas.width=r.canvas.height=0,t}r.strokeStyle="red",r.clearRect(0,0,n,n),r.strokeText("g",0,0);let h=r.getImageData(0,0,n,n).data;d=0;for(let s=h.length-1-3;s>=0;s-=4)if(h[s]>0){d=Math.ceil(s/4/n);break}r.clearRect(0,0,n,n),r.strokeText("A",0,n),h=r.getImageData(0,0,n,n).data,c=0;for(let s=0,o=h.length;s<o;s+=4)if(h[s]>0){c=n-Math.floor(s/4/n);break}if(r.canvas.width=r.canvas.height=0,c){const t=c/(c+d);return o.set(e,t),t}return o.set(e,s),s}(u.fontFamily,e._isOffscreenCanvasSupported);let f,g;0===h?(f=d[4],g=d[5]-_):(f=d[4]+_*Math.sin(h),g=d[5]-_*Math.cos(h));const m="calc(var(--scale-factor)*",v=a.style;e._container===e._rootContainer?(v.left="".concat((100*f/e._pageWidth).toFixed(2),"%"),v.top="".concat((100*g/e._pageHeight).toFixed(2),"%")):(v.left="".concat(m).concat(f.toFixed(2),"px)"),v.top="".concat(m).concat(g.toFixed(2),"px)")),v.fontSize="".concat(m).concat(p.toFixed(2),"px)"),v.fontFamily=u.fontFamily,c.fontSize=p,a.setAttribute("role","presentation"),a.textContent=t.str,a.dir=t.dir,e._fontInspectorEnabled&&(a.dataset.fontName=t.fontName),0!==h&&(c.angle=h*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),i=Math.abs(t.transform[3]);e!==i&&Math.max(e,i)/Math.min(e,i)>1.5&&(b=!0)}b&&(c.canvasWidth=u.vertical?t.height:t.width),e._textDivProperties.set(a,c),e._isReadableStream&&e._layoutText(a)}function d(e){const{div:t,scale:i,properties:r,ctx:a,prevFontSize:n,prevFontFamily:s}=e,{style:o}=t;let l="";if(0!==r.canvasWidth&&r.hasText){const{fontFamily:c}=o,{canvasWidth:d,fontSize:h}=r;n===h&&s===c||(a.font="".concat(h*i,"px ").concat(c),e.prevFontSize=h,e.prevFontFamily=c);const{width:u}=a.measureText(t.textContent);u>0&&(l="scaleX(".concat(d*i/u,")"))}0!==r.angle&&(l="rotate(".concat(r.angle,"deg) ").concat(l)),l.length>0&&(o.transform=l)}class h{constructor({textContentSource:e,container:t,viewport:i,textDivs:n,textDivProperties:s,textContentItemsStr:o,isOffscreenCanvasSupported:c}){var d;this._textContentSource=e,this._isReadableStream=e instanceof ReadableStream,this._container=this._rootContainer=t,this._textDivs=n||[],this._textContentItemsStr=o||[],this._isOffscreenCanvasSupported=c,this._fontInspectorEnabled=!!(null==(d=globalThis.FontInspector)?void 0:d.enabled),this._reader=null,this._textDivProperties=s||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:i.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:l(0,c)};const{pageWidth:h,pageHeight:u,pageX:p,pageY:_}=i.rawDims;this._transform=[1,0,0,-1,-p,_+u],this._pageWidth=h,this._pageHeight=u,(0,a.setLayerDimensions)(t,i),this._capability.promise.finally((()=>{this._layoutTextParams=null})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(e,t){for(const i of e)if(void 0!==i.str)this._textContentItemsStr.push(i.str),c(this,i,t);else if("beginMarkedContentProps"===i.type||"beginMarkedContent"===i.type){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==i.id&&this._container.setAttribute("id","".concat(i.id)),e.append(this._container)}else"endMarkedContent"===i.type&&(this._container=this._container.parentNode)}_layoutText(e){const t=this._layoutTextParams.properties=this._textDivProperties.get(e);if(this._layoutTextParams.div=e,d(this._layoutTextParams),t.hasText&&this._container.append(e),t.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),this._container.append(e)}}_render(){const e=new r.PromiseCapability;let t=Object.create(null);if(this._isReadableStream){const i=()=>{this._reader.read().then((({value:r,done:a})=>{a?e.resolve():(Object.assign(t,r.styles),this._processItems(r.items,t),i())}),e.reject)};this._reader=this._textContentSource.getReader(),i()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:t,styles:i}=this._textContentSource;this._processItems(t,i),e.resolve()}}e.promise.then((()=>{t=null,function(e){if(e._canceled)return;const t=e._textDivs,i=e._capability;if(t.length>1e5)i.resolve();else{if(!e._isReadableStream)for(const i of t)e._layoutText(i);i.resolve()}}(this)}),this._capability.reject)}}t.TextLayerRenderTask=h},
/* 27 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var A=i(1),w=i(4),S=i(28),k=i(33),x=i(6),C=i(34);const E=class e{constructor({uiManager:t,pageIndex:i,div:_,accessibilityManager:g,annotationLayer:v,viewport:y,l10n:A}){__privateAdd(this,p),__privateAdd(this,f),__privateAdd(this,m),__privateAdd(this,b),__privateAdd(this,r,void 0),__privateAdd(this,a,!1),__privateAdd(this,n,null),__privateAdd(this,s,this.pointerup.bind(this)),__privateAdd(this,o,this.pointerdown.bind(this)),__privateAdd(this,l,new Map),__privateAdd(this,c,!1),__privateAdd(this,d,!1),__privateAdd(this,h,!1),__privateAdd(this,u,void 0);const w=[S.FreeTextEditor,k.InkEditor,C.StampEditor];if(!e._initialized){e._initialized=!0;for(const e of w)e.initialize(A)}t.registerEditorTypes(w),__privateSet(this,u,t),this.pageIndex=i,this.div=_,__privateSet(this,r,g),__privateSet(this,n,v),this.viewport=y,__privateGet(this,u).addLayer(this)}get isEmpty(){return 0===__privateGet(this,l).size}updateToolbar(e){__privateGet(this,u).updateToolbar(e)}updateMode(e=__privateGet(this,u).getMode()){__privateMethod(this,b,y).call(this),e===A.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),e!==A.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",e===A.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",e===A.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",e===A.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(e){if(e||__privateGet(this,u).getMode()===A.AnnotationEditorType.INK){if(!e)for(const e of __privateGet(this,l).values())if(e.isEmpty())return void e.setInBackground();__privateMethod(this,f,g).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(e){__privateGet(this,u).setEditingState(e)}addCommands(e){__privateGet(this,u).addCommands(e)}enable(){this.div.style.pointerEvents="auto";const e=new Set;for(const i of __privateGet(this,l).values())i.enableEditing(),i.annotationElementId&&e.add(i.annotationElementId);if(!__privateGet(this,n))return;const t=__privateGet(this,n).getEditableAnnotations();for(const i of t){if(i.hide(),__privateGet(this,u).isDeletedAnnotationElement(i.data.id))continue;if(e.has(i.data.id))continue;const t=this.deserialize(i);t&&(this.addOrRebuild(t),t.enableEditing())}}disable(){var e;__privateSet(this,h,!0),this.div.style.pointerEvents="none";const t=new Set;for(const i of __privateGet(this,l).values())i.disableEditing(),i.annotationElementId&&null===i.serialize()?(null==(e=this.getEditableAnnotation(i.annotationElementId))||e.show(),i.remove()):t.add(i.annotationElementId);if(__privateGet(this,n)){const e=__privateGet(this,n).getEditableAnnotations();for(const i of e){const{id:e}=i.data;t.has(e)||__privateGet(this,u).isDeletedAnnotationElement(e)||i.show()}}__privateMethod(this,b,y).call(this),this.isEmpty&&(this.div.hidden=!0),__privateSet(this,h,!1)}getEditableAnnotation(e){var t;return(null==(t=__privateGet(this,n))?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){__privateGet(this,u).getActive()!==e&&__privateGet(this,u).setActiveEditor(e)}enableClick(){this.div.addEventListener("pointerdown",__privateGet(this,o)),this.div.addEventListener("pointerup",__privateGet(this,s))}disableClick(){this.div.removeEventListener("pointerdown",__privateGet(this,o)),this.div.removeEventListener("pointerup",__privateGet(this,s))}attach(e){__privateGet(this,l).set(e.id,e);const{annotationElementId:t}=e;t&&__privateGet(this,u).isDeletedAnnotationElement(t)&&__privateGet(this,u).removeDeletedAnnotationElement(e)}detach(e){var t;__privateGet(this,l).delete(e.id),null==(t=__privateGet(this,r))||t.removePointerInTextLayer(e.contentDiv),!__privateGet(this,h)&&e.annotationElementId&&__privateGet(this,u).addDeletedAnnotationElement(e)}remove(e){this.detach(e),__privateGet(this,u).removeEditor(e),e.div.contains(document.activeElement)&&setTimeout((()=>{__privateGet(this,u).focusMainContainer()}),0),e.div.remove(),e.isAttachedToDOM=!1,__privateGet(this,d)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.annotationElementId&&(__privateGet(this,u).addDeletedAnnotationElement(e.annotationElementId),w.AnnotationEditor.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null==(t=e.parent)||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(this.changeParent(e),__privateGet(this,u).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),__privateGet(this,u).addToAnnotationStorage(e)}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:i}=document;e.div.contains(i)&&(e._focusEventsAllowed=!1,setTimeout((()=>{e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",(()=>{e._focusEventsAllowed=!0}),{once:!0}),i.focus())}),0)),e._structTreeParentId=null==(t=__privateGet(this,r))?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?e.rebuild():this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return __privateGet(this,u).getId()}pasteEditor(e,t){__privateGet(this,u).updateToolbar(e),__privateGet(this,u).updateMode(e);const{offsetX:i,offsetY:r}=__privateMethod(this,m,v).call(this),a=this.getNextId(),n=__privateMethod(this,p,_).call(this,{parent:this,id:a,x:i,y:r,uiManager:__privateGet(this,u),isCentered:!0,...t});n&&this.add(n)}deserialize(e){var t;switch(null!=(t=e.annotationType)?t:e.annotationEditorType){case A.AnnotationEditorType.FREETEXT:return S.FreeTextEditor.deserialize(e,this,__privateGet(this,u));case A.AnnotationEditorType.INK:return k.InkEditor.deserialize(e,this,__privateGet(this,u));case A.AnnotationEditorType.STAMP:return C.StampEditor.deserialize(e,this,__privateGet(this,u))}return null}addNewEditor(){__privateMethod(this,f,g).call(this,__privateMethod(this,m,v).call(this),!0)}setSelected(e){__privateGet(this,u).setSelected(e)}toggleSelected(e){__privateGet(this,u).toggleSelected(e)}isSelected(e){return __privateGet(this,u).isSelected(e)}unselect(e){__privateGet(this,u).unselect(e)}pointerup(e){const{isMac:t}=A.FeatureTest.platform;0!==e.button||e.ctrlKey&&t||e.target===this.div&&__privateGet(this,c)&&(__privateSet(this,c,!1),__privateGet(this,a)?__privateGet(this,u).getMode()!==A.AnnotationEditorType.STAMP?__privateMethod(this,f,g).call(this,e,!1):__privateGet(this,u).unselectAll():__privateSet(this,a,!0))}pointerdown(e){if(__privateGet(this,c))return void __privateSet(this,c,!1);const{isMac:t}=A.FeatureTest.platform;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;__privateSet(this,c,!0);const i=__privateGet(this,u).getActive();__privateSet(this,a,!i||i.isEmpty())}findNewParent(e,t,i){const r=__privateGet(this,u).findParent(t,i);return null!==r&&r!==this&&(r.changeParent(e),!0)}destroy(){var e,t;(null==(e=__privateGet(this,u).getActive())?void 0:e.parent)===this&&(__privateGet(this,u).commitOrRemove(),__privateGet(this,u).setActiveEditor(null));for(const i of __privateGet(this,l).values())null==(t=__privateGet(this,r))||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,__privateGet(this,l).clear(),__privateGet(this,u).removeLayer(this)}render({viewport:e}){this.viewport=e,(0,x.setLayerDimensions)(this.div,e);for(const t of __privateGet(this,u).getEditors(this.pageIndex))this.add(t);this.updateMode()}update({viewport:e}){__privateGet(this,u).commitOrRemove(),this.viewport=e,(0,x.setLayerDimensions)(this.div,{rotation:e.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}};r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakSet,_=function(e){switch(__privateGet(this,u).getMode()){case A.AnnotationEditorType.FREETEXT:return new S.FreeTextEditor(e);case A.AnnotationEditorType.INK:return new k.InkEditor(e);case A.AnnotationEditorType.STAMP:return new C.StampEditor(e)}return null},f=new WeakSet,g=function(e,t){const i=this.getNextId(),r=__privateMethod(this,p,_).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:__privateGet(this,u),isCentered:t});return r&&this.add(r),r},m=new WeakSet,v=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),a=Math.max(0,e),n=Math.max(0,t),s=(a+Math.min(window.innerWidth,e+i))/2-e,o=(n+Math.min(window.innerHeight,t+r))/2-t,[l,c]=this.viewport.rotation%180==0?[s,o]:[o,s];return{offsetX:l,offsetY:c}},b=new WeakSet,y=function(){__privateSet(this,d,!0);for(const e of __privateGet(this,l).values())e.isEmpty()&&e.remove();__privateSet(this,d,!1)},__publicField(E,"_initialized",!1);let P=E;t.AnnotationEditorLayer=P},
/* 28 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S,k,x;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var C=i(1),E=i(5),P=i(4),M=i(29);const T=class e extends P.AnnotationEditor{constructor(t){super({...t,name:"freeTextEditor"}),__privateAdd(this,u),__privateAdd(this,_),__privateAdd(this,g),__privateAdd(this,v),__privateAdd(this,y),__privateAdd(this,w),__privateAdd(this,k),__privateAdd(this,r,this.editorDivBlur.bind(this)),__privateAdd(this,a,this.editorDivFocus.bind(this)),__privateAdd(this,n,this.editorDivInput.bind(this)),__privateAdd(this,s,this.editorDivKeydown.bind(this)),__privateAdd(this,o,void 0),__privateAdd(this,l,""),__privateAdd(this,c,"".concat(this.id,"-editor")),__privateAdd(this,d,void 0),__privateAdd(this,h,null),__privateSet(this,o,t.color||e._defaultColor||P.AnnotationEditor._defaultLineColor),__privateSet(this,d,t.fontSize||e._defaultFontSize)}static get _keyboardManager(){const t=e.prototype,i=e=>e.isEmpty(),r=E.AnnotationEditorUIManager.TRANSLATE_SMALL,a=E.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,C.shadow)(this,"_keyboardManager",new E.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:i}]]))}static initialize(e){P.AnnotationEditor.initialize(e,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case C.AnnotationEditorParamsType.FREETEXT_SIZE:e._defaultFontSize=i;break;case C.AnnotationEditorParamsType.FREETEXT_COLOR:e._defaultColor=i}}updateParams(e,t){switch(e){case C.AnnotationEditorParamsType.FREETEXT_SIZE:__privateMethod(this,u,p).call(this,t);break;case C.AnnotationEditorParamsType.FREETEXT_COLOR:__privateMethod(this,_,f).call(this,t)}}static get defaultPropertiesToUpdate(){return[[C.AnnotationEditorParamsType.FREETEXT_SIZE,e._defaultFontSize],[C.AnnotationEditorParamsType.FREETEXT_COLOR,e._defaultColor||P.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[C.AnnotationEditorParamsType.FREETEXT_SIZE,__privateGet(this,d)],[C.AnnotationEditorParamsType.FREETEXT_COLOR,__privateGet(this,o)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const t=this.parentScale;return[-e._internalPadding*t,-(e._internalPadding+__privateGet(this,d))*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(C.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",__privateGet(this,s)),this.editorDiv.addEventListener("focus",__privateGet(this,a)),this.editorDiv.addEventListener("blur",__privateGet(this,r)),this.editorDiv.addEventListener("input",__privateGet(this,n)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",__privateGet(this,c)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",__privateGet(this,s)),this.editorDiv.removeEventListener("focus",__privateGet(this,a)),this.editorDiv.removeEventListener("blur",__privateGet(this,r)),this.editorDiv.removeEventListener("input",__privateGet(this,n)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width?__privateMethod(this,k,x).call(this):(this.enableEditMode(),this.editorDiv.focus(),(null==(e=this._initialOptions)?void 0:e.isCentered)&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=__privateGet(this,l),t=__privateSet(this,l,__privateMethod(this,g,m).call(this).trimEnd());if(e===t)return;const i=e=>{__privateSet(this,l,e),e?(__privateMethod(this,y,A).call(this),this._uiManager.rebuild(this),__privateMethod(this,v,b).call(this)):this.remove()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),__privateMethod(this,v,b).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(t){e._keyboardManager.exec(this,t)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",__privateGet(this,c)),this.enableEditing(),P.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then((e=>{var t;return null==(t=this.editorDiv)?void 0:t.setAttribute("aria-label",e)})),P.AnnotationEditor._l10nPromise.get("free_text2_default_content").then((e=>{var t;return null==(t=this.editorDiv)?void 0:t.setAttribute("default-content",e)})),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize="calc(".concat(__privateGet(this,d),"px * var(--scale-factor))"),i.color=__privateGet(this,o),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,E.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[i,r]=this.parentDimensions;if(this.annotationElementId){const{position:a}=__privateGet(this,h);let[n,s]=this.getInitialTranslation();[n,s]=this.pageTranslationToScreen(n,s);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let u,p;switch(this.rotation){case 0:u=e+(a[0]-c)/o,p=t+this.height-(a[1]-d)/l;break;case 90:u=e+(a[0]-c)/o,p=t-(a[1]-d)/l,[n,s]=[s,-n];break;case 180:u=e-this.width+(a[0]-c)/o,p=t-(a[1]-d)/l,[n,s]=[-n,-s];break;case 270:u=e+(a[0]-c-this.height*l)/o,p=t+(a[1]-d-this.width*o)/l,[n,s]=[-s,n]}this.setAt(u*i,p*r,n,s)}else this.setAt(e*i,t*r,this.width*i,this.height*r);__privateMethod(this,y,A).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(e,t,i){let r=null;if(e instanceof M.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:t,fontColor:i},rect:a,rotation:n,id:s},textContent:o,textPosition:l,parent:{page:{pageNumber:c}}}=e;if(!o||0===o.length)return null;r=e={annotationType:C.AnnotationEditorType.FREETEXT,color:Array.from(i),fontSize:t,value:o.join("\n"),position:l,pageIndex:c-1,rect:a,rotation:n,id:s,deleted:!1}}const a=super.deserialize(e,t,i);return __privateSet(a,d,e.fontSize),__privateSet(a,o,C.Util.makeHexColor(...e.color)),__privateSet(a,l,e.value),a.annotationElementId=e.id||null,__privateSet(a,h,r),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const i=e._internalPadding*this.parentScale,r=this.getRect(i,i),a=P.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:__privateGet(this,o)),n={annotationType:C.AnnotationEditorType.FREETEXT,color:a,fontSize:__privateGet(this,d),value:__privateGet(this,l),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?n:this.annotationElementId&&!__privateMethod(this,w,S).call(this,n)?null:(n.id=this.annotationElementId,n)}};r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakSet,p=function(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--scale-factor))"),this.translate(0,-(e-__privateGet(this,d))*this.parentScale),__privateSet(this,d,e),__privateMethod(this,v,b).call(this)},i=__privateGet(this,d);this.addCommands({cmd:()=>{t(e)},undo:()=>{t(i)},mustExec:!0,type:C.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},_=new WeakSet,f=function(e){const t=__privateGet(this,o);this.addCommands({cmd:()=>{__privateSet(this,o,this.editorDiv.style.color=e)},undo:()=>{__privateSet(this,o,this.editorDiv.style.color=t)},mustExec:!0,type:C.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,m=function(){const e=this.editorDiv.getElementsByTagName("div");if(0===e.length)return this.editorDiv.innerText;const t=[];for(const i of e)t.push(i.innerText.replace(/\r\n?|\n/,""));return t.join("\n")},v=new WeakSet,b=function(){const[e,t]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,r=t.style.display;t.style.display="hidden",e.div.append(this.div),i=t.getBoundingClientRect(),t.remove(),t.style.display=r}this.rotation%180==this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()},y=new WeakSet,A=function(){if(this.editorDiv.replaceChildren(),__privateGet(this,l))for(const e of __privateGet(this,l).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}},w=new WeakSet,S=function(e){const{value:t,fontSize:i,color:r,rect:a,pageIndex:n}=__privateGet(this,h);return e.value!==t||e.fontSize!==i||e.rect.some(((e,t)=>Math.abs(e-a[t])>=1))||e.color.some(((e,t)=>e!==r[t]))||e.pageIndex!==n},k=new WeakSet,x=function(e=!1){if(!this.annotationElementId)return;if(__privateMethod(this,v,b).call(this),!e&&(0===this.width||0===this.height))return void setTimeout((()=>__privateMethod(this,k,x).call(this,!0)),0);const t=T._internalPadding*this.parentScale;__privateGet(this,h).rect=this.getRect(t,t)},__publicField(T,"_freeTextDefaultContent",""),__publicField(T,"_internalPadding",0),__publicField(T,"_defaultColor",null),__publicField(T,"_defaultFontSize",10),__publicField(T,"_type","freetext");let I=T;t.FreeTextEditor=I},
/* 29 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S,k,x,C,E,P,M,T,I,D,R,L,F,N,O,B,G,W,j,V,U,z,H,q,X;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var K=i(1),$=i(6),Y=i(3),Z=i(30),J=i(31),Q=i(32);const ee=1e3,te=new WeakSet;function ie(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class re{static create(e){switch(e.data.annotationType){case K.AnnotationType.LINK:return new ne(e);case K.AnnotationType.TEXT:return new se(e);case K.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new le(e);case"Btn":return e.data.radioButton?new he(e):e.data.checkBox?new de(e):new ue(e);case"Ch":return new pe(e);case"Sig":return new ce(e)}return new oe(e);case K.AnnotationType.POPUP:return new _e(e);case K.AnnotationType.FREETEXT:return new ge(e);case K.AnnotationType.LINE:return new me(e);case K.AnnotationType.SQUARE:return new ve(e);case K.AnnotationType.CIRCLE:return new be(e);case K.AnnotationType.POLYLINE:return new ye(e);case K.AnnotationType.CARET:return new we(e);case K.AnnotationType.INK:return new Se(e);case K.AnnotationType.POLYGON:return new Ae(e);case K.AnnotationType.HIGHLIGHT:return new ke(e);case K.AnnotationType.UNDERLINE:return new xe(e);case K.AnnotationType.SQUIGGLY:return new Ce(e);case K.AnnotationType.STRIKEOUT:return new Ee(e);case K.AnnotationType.STAMP:return new Pe(e);case K.AnnotationType.FILEATTACHMENT:return new Me(e);default:return new ae(e)}}}r=new WeakMap;let ae=class e{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){__privateAdd(this,r,!1),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!((null==e?void 0:e.str)||(null==t?void 0:t.str)||(null==i?void 0:i.str))}get hasPopupData(){return e._hasPopupData(this.data)}_createContainer(e){const{data:t,parent:{page:i,viewport:a}}=this,n=document.createElement("section");n.setAttribute("data-annotation-id",t.id),this instanceof oe||(n.tabIndex=ee),n.style.zIndex=this.parent.zIndex++,this.data.popupRef&&n.setAttribute("aria-haspopup","dialog"),t.noRotate&&n.classList.add("norotate");const{pageWidth:s,pageHeight:o,pageX:l,pageY:c}=a.rawDims;if(!t.rect||this instanceof _e){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,n),n}const{width:d,height:h}=ie(t.rect),u=K.Util.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]);if(!e&&t.borderStyle.width>0){n.style.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,i=t.borderStyle.verticalCornerRadius;if(e>0||i>0){const t="calc(".concat(e,"px * var(--scale-factor)) / calc(").concat(i,"px * var(--scale-factor))");n.style.borderRadius=t}else if(this instanceof he){const e="calc(".concat(d,"px * var(--scale-factor)) / calc(").concat(h,"px * var(--scale-factor))");n.style.borderRadius=e}switch(t.borderStyle.style){case K.AnnotationBorderStyleType.SOLID:n.style.borderStyle="solid";break;case K.AnnotationBorderStyleType.DASHED:n.style.borderStyle="dashed";break;case K.AnnotationBorderStyleType.BEVELED:(0,K.warn)("Unimplemented border style: beveled");break;case K.AnnotationBorderStyleType.INSET:(0,K.warn)("Unimplemented border style: inset");break;case K.AnnotationBorderStyleType.UNDERLINE:n.style.borderBottomStyle="solid"}const a=t.borderColor||null;a?(__privateSet(this,r,!0),n.style.borderColor=K.Util.makeHexColor(0|a[0],0|a[1],0|a[2])):n.style.borderWidth=0}n.style.left="".concat(100*(u[0]-l)/s,"%"),n.style.top="".concat(100*(u[1]-c)/o,"%");const{rotation:p}=t;return t.hasOwnCanvas||0===p?(n.style.width="".concat(100*d/s,"%"),n.style.height="".concat(100*h/o,"%")):this.setRotation(p,n),n}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:a,height:n}=ie(this.data.rect);let s,o;e%180==0?(s=100*a/i,o=100*n/r):(s=100*n/i,o=100*a/r),t.style.width="".concat(s,"%"),t.style.height="".concat(o,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,i)=>{const r=i.detail[e],a=r[0],n=r.slice(1);i.target.style[t]=Z.ColorConverters["".concat(a,"_HTML")](n),this.annotationStorage.setValue(this.data.id,{[t]:Z.ColorConverters["".concat(a,"_rgb")](n)})};return(0,K.shadow)(this,"_commonActions",{display:e=>{const{display:t}=e.detail,i=t%2==1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const a=e[r]||i[r];null==a||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,a]of Object.entries(t)){const n=i[r];n&&(n({detail:{[r]:a},target:e}),delete t[r])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,a,n]=this.data.rect;if(1===e.length){const[,{x:r,y:s},{x:o,y:l}]=e[0];if(a===r&&n===s&&t===o&&i===l)return}const{style:s}=this.container;let o;if(__privateGet(this,r)){const{borderColor:e,borderWidth:t}=s;s.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const l=a-t,c=n-i,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const u=d.createElement("defs");h.append(u);const p=d.createElement("clipPath"),_="clippath_".concat(this.data.id);p.setAttribute("id",_),p.setAttribute("clipPathUnits","objectBoundingBox"),u.append(p);for(const[,{x:r,y:f},{x:g,y:m}]of e){const e=d.createElement("rect"),i=(g-t)/l,a=(n-f)/c,s=(r-g)/l,h=(f-m)/c;e.setAttribute("x",i),e.setAttribute("y",a),e.setAttribute("width",s),e.setAttribute("height",h),p.append(e),null==o||o.push('<rect vector-effect="non-scaling-stroke" x="'.concat(i,'" y="').concat(a,'" width="').concat(s,'" height="').concat(h,'"/>'))}__privateGet(this,r)&&(o.push("</g></svg>')"),s.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath="url(#".concat(_,")")}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const i=new _e({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){(0,K.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:e,id:a,exportValues:n}of r){if(-1===e)continue;if(a===t)continue;const r="string"==typeof n?n:null,s=document.querySelector('[data-element-id="'.concat(a,'"]'));!s||te.has(s)?i.push({id:a,exportValue:r,domElement:s}):(0,K.warn)("_getElementsByName - element not allowed: ".concat(a))}return i}for(const r of document.getElementsByName(e)){const{exportValue:e}=r,a=r.getAttribute("data-element-id");a!==t&&te.has(r)&&i.push({id:a,exportValue:e,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),null==(e=this.popup)||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null==(e=this.popup)||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",(()=>{var i;null==(i=this.linkService.eventBus)||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})}))}};class ne extends ae{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!(null==t?void 0:t.ignoreBorder),createQuadrilaterals:!0}),__privateAdd(this,a),__privateAdd(this,s),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(this._bindAttachment(i,e.attachment),r=!0):e.setOCGState?(__privateMethod(this,s,o).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&__privateMethod(this,a,n).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),__privateMethod(this,a,n).call(this)}_bindAttachment(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>{var e;return null==(e=this.downloadManager)||e.openOrDownloadData(this.container,t.content,t.filename),!1},__privateMethod(this,a,n).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const a=i.get(r);a&&(e[a]=()=>{var e;return null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),__privateMethod(this,a,n).call(this)}_bindResetFormAction(e,t){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),__privateMethod(this,a,n).call(this),!this._fieldObjects)return(0,K.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(e.onclick=()=>!1));e.onclick=()=>{var e;null==i||i();const{fields:r,refs:a,include:n}=t,s=[];if(0!==r.length||0!==a.length){const e=new Set(a);for(const t of r){const i=this._fieldObjects[t]||[];for(const{id:t}of i)e.add(t)}for(const t of Object.values(this._fieldObjects))for(const i of t)e.has(i.id)===n&&s.push(i)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const o=this.annotationStorage,l=[];for(const t of s){const{id:e}=t;switch(l.push(e),t.type){case"text":{const i=t.defaultValue||"";o.setValue(e,{value:i});break}case"checkbox":case"radiobutton":{const i=t.defaultValue===t.exportValues;o.setValue(e,{value:i});break}case"combobox":case"listbox":{const i=t.defaultValue||"";o.setValue(e,{value:i});break}default:continue}const i=document.querySelector('[data-element-id="'.concat(e,'"]'));i&&(te.has(i)?i.dispatchEvent(new Event("resetform")):(0,K.warn)("_bindResetFormAction - element not allowed: ".concat(e)))}return this.enableScripting&&(null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}})),!1}}}a=new WeakSet,n=function(){this.container.setAttribute("data-internal-link","")},s=new WeakSet,o=function(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),__privateMethod(this,a,n).call(this)};class se extends ae{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class oe extends ae{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null==(t=e.previousSibling)?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){const{isWin:t,isMac:i}=K.FeatureTest.platform;return t&&e.ctrlKey||i&&e.metaKey}_setEventListener(e,t,i,r,a){i.includes("mouse")?e.addEventListener(i,(e=>{var t;null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(i,(e=>{var n;if("blur"===i){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===i){if(t.focused)return;t.focused=!0}a&&(null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(e)}}))}))}_setEventListeners(e,t,i,r){var a,n,s;for(const[o,l]of i)("Action"===l||(null==(a=this.data.actions)?void 0:a[l]))&&("Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,r),"Focus"!==l||(null==(n=this.data.actions)?void 0:n.Blur)?"Blur"!==l||(null==(s=this.data.actions)?void 0:s.Focus)||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":K.Util.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,a=e.style;let n;const s=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(K.LINE_FACTOR*r))||1);n=Math.min(r,s(t/K.LINE_FACTOR))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);n=Math.min(r,s(e/K.LINE_FACTOR))}a.fontSize="calc(".concat(n,"px * var(--scale-factor))"),a.color=K.Util.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class le extends oe{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,i,r){const a=this.annotationStorage;for(const n of this._getElementsByName(e.name,e.id))n.domElement&&(n.domElement[t]=i),a.setValue(n.id,{[r]:i})}render(){var e,t;const i=this.annotationStorage,r=this.data.id;this.container.classList.add("textWidgetAnnotation");let a=null;if(this.renderForms){const n=i.getValue(r,{value:this.data.fieldValue});let s=n.value||"";const o=i.getValue(r,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let l=n.formattedValue||(null==(e=this.data.textContent)?void 0:e.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:s,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(a=document.createElement("textarea"),a.textContent=null!=l?l:s,this.data.doNotScroll&&(a.style.overflowY="hidden")):(a=document.createElement("input"),a.type="text",a.setAttribute("value",null!=l?l:s),this.data.doNotScroll&&(a.style.overflowX="hidden")),this.data.hasOwnCanvas&&(a.hidden=!0),te.add(a),a.setAttribute("data-element-id",r),a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.tabIndex=ee,this._setRequired(a,this.data.required),o&&(a.maxLength=o),a.addEventListener("input",(e=>{i.setValue(r,{value:e.target.value}),this.setPropertyOnSiblings(a,"value",e.target.value,"value"),c.formattedValue=null})),a.addEventListener("resetform",(e=>{var t;const i=null!=(t=this.data.defaultFieldValue)?t:"";a.value=c.userValue=i,c.formattedValue=null}));let d=e=>{const{formattedValue:t}=c;null!=t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){a.addEventListener("focus",(e=>{if(c.focused)return;const{target:t}=e;c.userValue&&(t.value=c.userValue),c.lastCommittedValue=t.value,c.commitKey=1,c.focused=!0})),a.addEventListener("updatefromsandbox",(e=>{this.showElementAndHideCanvas(e.target);const t={value(e){var t;c.userValue=null!=(t=e.detail.value)?t:"",i.setValue(r,{value:c.userValue.toString()}),e.target.value=c.userValue},formattedValue(e){const{formattedValue:t}=e.detail;c.formattedValue=t,null!=t&&e.target!==document.activeElement&&(e.target.value=t),i.setValue(r,{formattedValue:t})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:e=>{var t;const{charLimit:a}=e.detail,{target:n}=e;if(0===a)return void n.removeAttribute("maxLength");n.setAttribute("maxLength",a);let s=c.userValue;!s||s.length<=a||(s=s.slice(0,a),n.value=c.userValue=s,i.setValue(r,{value:s}),null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:s,willCommit:!0,commitKey:1,selStart:n.selectionStart,selEnd:n.selectionEnd}}))}};this._dispatchEventFromSandbox(t,e)})),a.addEventListener("keydown",(e=>{var t;c.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):i=2,-1===i)return;const{value:a}=e.target;c.lastCommittedValue!==a&&(c.lastCommittedValue=a,c.userValue=a,null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:a,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const e=d;d=null,a.addEventListener("blur",(t=>{var i;if(!c.focused||!t.relatedTarget)return;c.focused=!1;const{value:a}=t.target;c.userValue=a,c.lastCommittedValue!==a&&(null==(i=this.linkService.eventBus)||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:a,willCommit:!0,commitKey:c.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})),e(t)})),(null==(t=this.data.actions)?void 0:t.Keystroke)&&a.addEventListener("beforeinput",(e=>{var t;c.lastCommittedValue=null;const{data:i,target:a}=e,{value:n,selectionStart:s,selectionEnd:o}=a;let l=s,d=o;switch(e.inputType){case"deleteWordBackward":{const e=n.substring(0,s).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=n.substring(s).match(/^[^\w]*\w*/);e&&(d+=e[0].length);break}case"deleteContentBackward":s===o&&(l-=1);break;case"deleteContentForward":s===o&&(d+=1)}e.preventDefault(),null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:n,change:i||"",willCommit:!1,selStart:l,selEnd:d}})})),this._setEventListeners(a,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(d&&a.addEventListener("blur",d),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;a.classList.add("comb"),a.style.letterSpacing="calc(".concat(e,"px * var(--scale-factor) - 1ch)")}}else a=document.createElement("div"),a.textContent=this.data.fieldValue,a.style.verticalAlign="middle",a.style.display="table-cell";return this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class ce extends oe{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class de extends oe{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;"string"==typeof r&&(r="Off"!==r,e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return te.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=ee,a.addEventListener("change",(r=>{const{name:a,checked:n}=r.target;for(const s of this._getElementsByName(a,i)){const i=n&&s.exportValue===t.exportValue;s.domElement&&(s.domElement.checked=i),e.setValue(s.id,{value:i})}e.setValue(i,{value:n})})),a.addEventListener("resetform",(e=>{const i=t.defaultFieldValue||"Off";e.target.checked=i===t.exportValue})),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",(t=>{const r={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(i,{value:t.target.checked})}};this._dispatchEventFromSandbox(r,t)})),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class he extends oe{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;"string"==typeof r&&(r=r!==t.buttonValue,e.setValue(i,{value:r}));const a=document.createElement("input");if(te.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=ee,a.addEventListener("change",(t=>{const{name:r,checked:a}=t.target;for(const n of this._getElementsByName(r,i))e.setValue(n.id,{value:!1});e.setValue(i,{value:a})})),a.addEventListener("resetform",(e=>{const i=t.defaultFieldValue;e.target.checked=null!=i&&i===t.buttonValue})),this.enableScripting&&this.hasJSActions){const r=t.buttonValue;a.addEventListener("updatefromsandbox",(t=>{const a={value:t=>{const a=r===t.detail.value;for(const r of this._getElementsByName(t.target.name)){const t=a&&r.id===i;r.domElement&&(r.domElement.checked=t),e.setValue(r.id,{value:t})}}};this._dispatchEventFromSandbox(a,t)})),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class ue extends ne{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(e.title=this.data.alternativeText);const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({},e)}))),e}}class pe extends oe{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");te.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=ee;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const i of r.options)i.selected=i.value===t}));for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,i.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),a=!1),r.append(e)}let n=null;if(a){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),r.prepend(e),n=()=>{e.remove(),r.removeEventListener("input",n),n=null},r.addEventListener("input",n)}const s=e=>{const t=e?"value":"textContent",{options:i,multiple:a}=r;return a?Array.prototype.filter.call(i,(e=>e.selected)).map((e=>e[t])):-1===i.selectedIndex?null:i[i.selectedIndex][t]};let o=s(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",(i=>{const a={value(i){null==n||n();const a=i.detail.value,l=new Set(Array.isArray(a)?a:[a]);for(const e of r.options)e.selected=l.has(e.value);e.setValue(t,{value:s(!0)}),o=s(!1)},multipleSelection(e){r.multiple=!0},remove(i){const a=r.options,n=i.detail.remove;a[n].selected=!1,r.remove(n),a.length>0&&-1===Array.prototype.findIndex.call(a,(e=>e.selected))&&(a[0].selected=!0),e.setValue(t,{value:s(!0),items:l(i)}),o=s(!1)},clear(i){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),o=s(!1)},insert(i){const{index:a,displayValue:n,exportValue:c}=i.detail.insert,d=r.children[a],h=document.createElement("option");h.textContent=n,h.value=c,d?d.before(h):r.append(h),e.setValue(t,{value:s(!0),items:l(i)}),o=s(!1)},items(i){const{items:a}=i.detail;for(;0!==r.length;)r.remove(0);for(const e of a){const{displayValue:t,exportValue:i}=e,a=document.createElement("option");a.textContent=t,a.value=i,r.append(a)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:s(!0),items:l(i)}),o=s(!1)},indices(i){const r=new Set(i.detail.indices);for(const e of i.target.options)e.selected=r.has(e.index);e.setValue(t,{value:s(!0)}),o=s(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(a,i)})),r.addEventListener("input",(i=>{var r;const a=s(!0);e.setValue(t,{value:a}),i.preventDefault(),null==(r=this.linkService.eventBus)||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,changeEx:a,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(e=>e.target.value))):r.addEventListener("input",(function(i){e.setValue(t,{value:s(!0)})})),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class _e extends ae{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:ae._hasPopupData(t)}),this.elements=i}render(){this.container.classList.add("popupAnnotation");const e=new fe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map((e=>"".concat(K.AnnotationPrefix).concat(e))).join(",")),this.container}}class fe{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:a,contentsObj:n,richText:s,parent:o,rect:R,parentRect:L,open:F}){var N;__privateAdd(this,x),__privateAdd(this,E),__privateAdd(this,M),__privateAdd(this,I),__privateAdd(this,l,null),__privateAdd(this,c,__privateMethod(this,x,C).bind(this)),__privateAdd(this,d,__privateMethod(this,I,D).bind(this)),__privateAdd(this,h,__privateMethod(this,M,T).bind(this)),__privateAdd(this,u,__privateMethod(this,E,P).bind(this)),__privateAdd(this,p,null),__privateAdd(this,_,null),__privateAdd(this,f,null),__privateAdd(this,g,null),__privateAdd(this,m,null),__privateAdd(this,v,null),__privateAdd(this,b,!1),__privateAdd(this,y,null),__privateAdd(this,A,null),__privateAdd(this,w,null),__privateAdd(this,S,null),__privateAdd(this,k,!1),__privateSet(this,_,e),__privateSet(this,S,r),__privateSet(this,f,n),__privateSet(this,w,s),__privateSet(this,m,o),__privateSet(this,p,t),__privateSet(this,A,R),__privateSet(this,v,L),__privateSet(this,g,i);const O=$.PDFDateString.toDateObject(a);O&&__privateSet(this,l,o.l10n.get("annotation_date_string",{date:O.toLocaleDateString(),time:O.toLocaleTimeString()})),this.trigger=i.flatMap((e=>e.getElementsToTriggerPopup()));for(const l of this.trigger)l.addEventListener("click",__privateGet(this,u)),l.addEventListener("mouseenter",__privateGet(this,h)),l.addEventListener("mouseleave",__privateGet(this,d)),l.classList.add("popupTriggerArea");for(const l of i)null==(N=l.container)||N.addEventListener("keydown",__privateGet(this,c));__privateGet(this,_).hidden=!0,F&&__privateMethod(this,E,P).call(this)}render(){if(__privateGet(this,y))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:a}}}=__privateGet(this,m),n=__privateSet(this,y,document.createElement("div"));if(n.className="popup",__privateGet(this,p)){const e=n.style.outlineColor=K.Util.makeHexColor(...__privateGet(this,p));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))n.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)");else{const e=.7;n.style.backgroundColor=K.Util.makeHexColor(...__privateGet(this,p).map((t=>Math.floor(e*(255-t)+t))))}}const s=document.createElement("span");s.className="header";const o=document.createElement("h1");if(s.append(o),({dir:o.dir,str:o.textContent}=__privateGet(this,S)),n.append(s),__privateGet(this,l)){const e=document.createElement("span");e.classList.add("popupDate"),__privateGet(this,l).then((t=>{e.textContent=t})),s.append(e)}const c=__privateGet(this,f),d=__privateGet(this,w);if(!(null==d?void 0:d.str)||(null==c?void 0:c.str)&&c.str!==d.str){const e=this._formatContents(c);n.append(e)}else Q.XfaLayer.render({xfaHtml:d.html,intent:"richText",div:n}),n.lastChild.classList.add("richText","popupContent");let h=!!__privateGet(this,v),u=__privateGet(this,h?v:A);for(const l of __privateGet(this,g))if(!u||null!==K.Util.intersect(l.data.rect,u)){u=l.data.rect,h=!0;break}const b=K.Util.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),k=h?u[2]-u[0]+5:0,x=b[0]+k,C=b[1],{style:E}=__privateGet(this,_);E.left="".concat(100*(x-r)/t,"%"),E.top="".concat(100*(C-a)/i,"%"),__privateGet(this,_).append(n)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let a=0,n=r.length;a<n;++a){const e=r[a];i.append(document.createTextNode(e)),a<n-1&&i.append(document.createElement("br"))}return i}forceHide(){__privateSet(this,k,this.isVisible),__privateGet(this,k)&&(__privateGet(this,_).hidden=!0)}maybeShow(){__privateGet(this,k)&&(__privateSet(this,k,!1),__privateGet(this,_).hidden=!1)}get isVisible(){return!1===__privateGet(this,_).hidden}}l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakMap,_=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,b=new WeakMap,y=new WeakMap,A=new WeakMap,w=new WeakMap,S=new WeakMap,k=new WeakMap,x=new WeakSet,C=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&__privateGet(this,b))&&__privateMethod(this,E,P).call(this)},E=new WeakSet,P=function(){__privateSet(this,b,!__privateGet(this,b)),__privateGet(this,b)?(__privateMethod(this,M,T).call(this),__privateGet(this,_).addEventListener("click",__privateGet(this,u)),__privateGet(this,_).addEventListener("keydown",__privateGet(this,c))):(__privateMethod(this,I,D).call(this),__privateGet(this,_).removeEventListener("click",__privateGet(this,u)),__privateGet(this,_).removeEventListener("keydown",__privateGet(this,c)))},M=new WeakSet,T=function(){__privateGet(this,y)||this.render(),this.isVisible?__privateGet(this,b)&&__privateGet(this,_).classList.add("focused"):(__privateGet(this,_).hidden=!1,__privateGet(this,_).style.zIndex=parseInt(__privateGet(this,_).style.zIndex)+1e3)},I=new WeakSet,D=function(){__privateGet(this,_).classList.remove("focused"),!__privateGet(this,b)&&this.isVisible&&(__privateGet(this,_).hidden=!0,__privateGet(this,_).style.zIndex=parseInt(__privateGet(this,_).style.zIndex)-1e3)};class ge extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=K.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=ge;class me extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),__privateAdd(this,R,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:i}=ie(e.rect),r=this.svgFactory.create(t,i,!0),a=__privateSet(this,R,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return __privateGet(this,R)}addHighlightArea(){this.container.classList.add("highlightArea")}}R=new WeakMap;class ve extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),__privateAdd(this,L,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:i}=ie(e.rect),r=this.svgFactory.create(t,i,!0),a=e.borderStyle.width,n=__privateSet(this,L,this.svgFactory.createElement("svg:rect"));return n.setAttribute("x",a/2),n.setAttribute("y",a/2),n.setAttribute("width",t-a),n.setAttribute("height",i-a),n.setAttribute("stroke-width",a||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),r.append(n),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return __privateGet(this,L)}addHighlightArea(){this.container.classList.add("highlightArea")}}L=new WeakMap;class be extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),__privateAdd(this,F,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:i}=ie(e.rect),r=this.svgFactory.create(t,i,!0),a=e.borderStyle.width,n=__privateSet(this,F,this.svgFactory.createElement("svg:ellipse"));return n.setAttribute("cx",t/2),n.setAttribute("cy",i/2),n.setAttribute("rx",t/2-a/2),n.setAttribute("ry",i/2-a/2),n.setAttribute("stroke-width",a||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),r.append(n),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return __privateGet(this,F)}addHighlightArea(){this.container.classList.add("highlightArea")}}F=new WeakMap;class ye extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),__privateAdd(this,N,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:i}=ie(e.rect),r=this.svgFactory.create(t,i,!0);let a=[];for(const s of e.vertices){const t=s.x-e.rect[0],i=e.rect[3]-s.y;a.push(t+","+i)}a=a.join(" ");const n=__privateSet(this,N,this.svgFactory.createElement(this.svgElementName));return n.setAttribute("points",a),n.setAttribute("stroke-width",e.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),r.append(n),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return __privateGet(this,N)}addHighlightArea(){this.container.classList.add("highlightArea")}}N=new WeakMap;class Ae extends ye{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class we extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Se extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),__privateAdd(this,O,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=K.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:i}=ie(e.rect),r=this.svgFactory.create(t,i,!0);for(const a of e.inkLists){let t=[];for(const r of a){const i=r.x-e.rect[0],a=e.rect[3]-r.y;t.push("".concat(i,",").concat(a))}t=t.join(" ");const i=this.svgFactory.createElement(this.svgElementName);__privateGet(this,O).push(i),i.setAttribute("points",t),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),r.append(i)}return this.container.append(r),this.container}getElementsToTriggerPopup(){return __privateGet(this,O)}addHighlightArea(){this.container.classList.add("highlightArea")}}O=new WeakMap,t.InkAnnotationElement=Se;class ke extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class xe extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Ce extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Ee extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Pe extends ae{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=Pe;class Me extends ae{constructor(e){var t;super(e,{isRenderable:!0}),__privateAdd(this,G),__privateAdd(this,B,null);const{filename:i,content:r}=this.data.file;this.filename=(0,$.getFilenameFromUrl)(i,!0),this.content=r,null==(t=this.linkService.eventBus)||t.dispatch("fileattachmentannotation",{source:this,filename:i,content:r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let i;t.hasAppearance||0===t.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(i.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),i.addEventListener("dblclick",__privateMethod(this,G,W).bind(this)),__privateSet(this,B,i);const{isMac:r}=K.FeatureTest.platform;return e.addEventListener("keydown",(e=>{"Enter"===e.key&&(r?e.metaKey:e.ctrlKey)&&__privateMethod(this,G,W).call(this)})),!t.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return __privateGet(this,B)}addHighlightArea(){this.container.classList.add("highlightArea")}}B=new WeakMap,G=new WeakSet,W=function(){var e;null==(e=this.downloadManager)||e.openOrDownloadData(this.container,this.content,this.filename)},j=new WeakMap,V=new WeakMap,U=new WeakMap,z=new WeakSet,H=function(e,t){var i;const r=e.firstChild||e;r.id="".concat(K.AnnotationPrefix).concat(t),this.div.append(e),null==(i=__privateGet(this,j))||i.moveElementInDOM(this.div,e,r,!1)},q=new WeakSet,X=function(){if(!__privateGet(this,V))return;const e=this.div;for(const[t,i]of __privateGet(this,V)){const r=e.querySelector('[data-annotation-id="'.concat(t,'"]'));if(!r)continue;const{firstChild:a}=r;a?"CANVAS"===a.nodeName?a.replaceWith(i):a.before(i):r.append(i)}__privateGet(this,V).clear()},t.AnnotationLayer=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,l10n:r,page:a,viewport:n}){__privateAdd(this,z),__privateAdd(this,q),__privateAdd(this,j,null),__privateAdd(this,V,null),__privateAdd(this,U,new Map),this.div=e,__privateSet(this,j,t),__privateSet(this,V,i),this.l10n=r,this.page=a,this.viewport=n,this.zIndex=0,this.l10n||(this.l10n=J.NullL10n)}async render(e){const{annotations:t}=e,i=this.div;(0,$.setLayerDimensions)(i,this.viewport);const r=new Map,a={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new $.DOMSVGFactory,annotationStorage:e.annotationStorage||new Y.AnnotationStorage,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const n of t){if(n.noHTML)continue;const e=n.annotationType===K.AnnotationType.POPUP;if(e){const e=r.get(n.id);if(!e)continue;a.elements=e}else{const{width:e,height:t}=ie(n.rect);if(e<=0||t<=0)continue}a.data=n;const t=re.create(a);if(!t.isRenderable)continue;if(!e&&n.popupRef){const e=r.get(n.popupRef);e?e.push(t):r.set(n.popupRef,[t])}t.annotationEditorType>0&&__privateGet(this,U).set(t.data.id,t);const i=t.render();n.hidden&&(i.style.visibility="hidden"),__privateMethod(this,z,H).call(this,i,n.id)}__privateMethod(this,q,X).call(this),await this.l10n.translate(i)}update({viewport:e}){const t=this.div;this.viewport=e,(0,$.setLayerDimensions)(t,{rotation:e.rotation}),__privateMethod(this,q,X).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(__privateGet(this,U).values())}getEditableAnnotation(e){return __privateGet(this,U).get(e)}}},
/* 30 */
/***/
(e,t)=>{function i(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function r(e){return Math.max(0,Math.min(255,255*e))}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0,t.ColorConverters=class{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return[e=r(e),e,e]}static G_HTML([e]){const t=i(e);return"#".concat(t).concat(t).concat(t)}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(r)}static RGB_HTML(e){return"#".concat(e.map(i).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,a]){return[r(1-Math.min(1,e+a)),r(1-Math.min(1,i+a)),r(1-Math.min(1,t+a))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,a=1-t,n=1-i;return["CMYK",r,a,n,Math.min(r,a,n)]}}},
/* 31 */
/***/
(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=r;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};function r(e,t){switch(e){case"find_match_count":e="find_match_count[".concat(1===t.total?"one":"other","]");break;case"find_match_count_limit":e="find_match_count_limit[".concat(1===t.limit?"one":"other","]")}return i[e]||""}i.print_progress_percent="{{progress}}%";const a={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",get:async(e,t=null,i=r(e,t))=>function(e,t){return t?e.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,((e,i)=>i in t?t[i]:"{{"+i+"}}")):e}(i,t),async translate(e){}};t.NullL10n=a},
/* 32 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var r=i(25);t.XfaLayer=class{static setupStorage(e,t,i,r,a){const n=r.getValue(t,{value:null});switch(i.name){case"textarea":if(null!==n.value&&(e.textContent=n.value),"print"===a)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(n.value===i.attributes.xfaOn?e.setAttribute("checked",!0):n.value===i.attributes.xfaOff&&e.removeAttribute("checked"),"print"===a)break;e.addEventListener("change",(e=>{r.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==n.value&&e.setAttribute("value",n.value),"print"===a)break;e.addEventListener("input",(e=>{r.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==n.value){e.setAttribute("value",n.value);for(const e of i.children)e.attributes.value===n.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",(e=>{const i=e.target.options,a=-1===i.selectedIndex?"":i[i.selectedIndex].value;r.setValue(t,{value:a})}))}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:a}){const{attributes:n}=t,s=e instanceof HTMLAnchorElement;"radio"===n.type&&(n.name="".concat(n.name,"-").concat(r));for(const[o,l]of Object.entries(n))if(null!=l)switch(o){case"class":l.length&&e.setAttribute(o,l.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",l);break;case"style":Object.assign(e.style,l);break;case"textContent":e.textContent=l;break;default:(!s||"href"!==o&&"newWindow"!==o)&&e.setAttribute(o,l)}s&&a.addLinkAttributes(e,n.href,n.newWindow),i&&n.dataId&&this.setupStorage(e,n.dataId,t,i)}static render(e){var t;const i=e.annotationStorage,a=e.linkService,n=e.xfaHtml,s=e.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:s,linkService:a});const l=[[n,-1,o]],c=e.div;if(c.append(o),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");c.style.transform=t}"richText"!==s&&c.setAttribute("class","xfaLayer xfaFont");const d=[];for(;l.length>0;){const[e,n,o]=l.at(-1);if(n+1===e.children.length){l.pop();continue}const c=e.children[++l.at(-1)[1]];if(null===c)continue;const{name:h}=c;if("#text"===h){const e=document.createTextNode(c.value);d.push(e),o.append(e);continue}const u=(null==(t=null==c?void 0:c.attributes)?void 0:t.xmlns)?document.createElementNS(c.attributes.xmlns,h):document.createElement(h);if(o.append(u),c.attributes&&this.setAttributes({html:u,element:c,storage:i,intent:s,linkService:a}),c.children&&c.children.length>0)l.push([c,-1,u]);else if(c.value){const e=document.createTextNode(c.value);r.XfaText.shouldBuildText(h)&&d.push(e),u.append(e)}}for(const r of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))r.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}},
/* 33 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S,k,x,C,E,P,M,T,I,D,R,L,F,N,O,B,G,W,j,V,U,z,H,q,X,K,$,Y,Z,J,Q,ee,te,ie,re,ae,ne,se,oe,le,ce,de,he,ue,pe,_e;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var fe=i(1),ge=i(4),me=i(29),ve=i(6),be=i(5);const ye=class e extends ge.AnnotationEditor{constructor(e){super({...e,name:"inkEditor"}),__privateAdd(this,m),__privateAdd(this,b),__privateAdd(this,A),__privateAdd(this,S),__privateAdd(this,x),__privateAdd(this,E),__privateAdd(this,M),__privateAdd(this,I),__privateAdd(this,R),__privateAdd(this,F),__privateAdd(this,O),__privateAdd(this,G),__privateAdd(this,j),__privateAdd(this,U),__privateAdd(this,H),__privateAdd(this,X),__privateAdd(this,$),__privateAdd(this,Z),__privateAdd(this,Q),__privateAdd(this,oe),__privateAdd(this,ce),__privateAdd(this,he),__privateAdd(this,pe),__privateAdd(this,r,0),__privateAdd(this,a,0),__privateAdd(this,n,this.canvasPointermove.bind(this)),__privateAdd(this,s,this.canvasPointerleave.bind(this)),__privateAdd(this,o,this.canvasPointerup.bind(this)),__privateAdd(this,l,this.canvasPointerdown.bind(this)),__privateAdd(this,c,new Path2D),__privateAdd(this,d,!1),__privateAdd(this,h,!1),__privateAdd(this,u,!1),__privateAdd(this,p,null),__privateAdd(this,_,0),__privateAdd(this,f,0),__privateAdd(this,g,null),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e){ge.AnnotationEditor.initialize(e,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(t,i){switch(t){case fe.AnnotationEditorParamsType.INK_THICKNESS:e._defaultThickness=i;break;case fe.AnnotationEditorParamsType.INK_COLOR:e._defaultColor=i;break;case fe.AnnotationEditorParamsType.INK_OPACITY:e._defaultOpacity=i/100}}updateParams(e,t){switch(e){case fe.AnnotationEditorParamsType.INK_THICKNESS:__privateMethod(this,m,v).call(this,t);break;case fe.AnnotationEditorParamsType.INK_COLOR:__privateMethod(this,b,y).call(this,t);break;case fe.AnnotationEditorParamsType.INK_OPACITY:__privateMethod(this,A,w).call(this,t)}}static get defaultPropertiesToUpdate(){return[[fe.AnnotationEditorParamsType.INK_THICKNESS,e._defaultThickness],[fe.AnnotationEditorParamsType.INK_COLOR,e._defaultColor||ge.AnnotationEditor._defaultLineColor],[fe.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*e._defaultOpacity)]]}get propertiesToUpdate(){var t;return[[fe.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||e._defaultThickness],[fe.AnnotationEditorParamsType.INK_COLOR,this.color||e._defaultColor||ge.AnnotationEditor._defaultLineColor],[fe.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!=(t=this.opacity)?t:e._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(__privateMethod(this,H,q).call(this),__privateMethod(this,X,K).call(this)),this.isAttachedToDOM||(this.parent.add(this),__privateMethod(this,$,Y).call(this)),__privateMethod(this,pe,_e).call(this)))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,__privateGet(this,p).disconnect(),__privateSet(this,p,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,i=this.width*e,r=this.height*t;this.setDimensions(i,r)}enableEditMode(){__privateGet(this,d)||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",__privateGet(this,l)))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",__privateGet(this,l)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){__privateGet(this,d)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),__privateSet(this,d,!0),this.div.classList.add("disabled"),__privateMethod(this,pe,_e).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){0===e.button&&this.isInEditMode()&&!__privateGet(this,d)&&(this.setInForeground(),e.preventDefault(),"mouse"!==e.type&&this.div.focus(),__privateMethod(this,E,P).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),__privateMethod(this,M,T).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),__privateMethod(this,U,z).call(this,e)}canvasPointerleave(e){__privateMethod(this,U,z).call(this,e)}get isResizable(){return!this.isEmpty()&&__privateGet(this,d)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),ge.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then((e=>{var t;return null==(t=this.div)?void 0:t.setAttribute("aria-label",e)}));const[i,r,a,n]=__privateMethod(this,S,k).call(this);if(this.setAt(i,r,0,0),this.setDims(a,n),__privateMethod(this,H,q).call(this),this.width){const[i,r]=this.parentDimensions;this.setAspectRatio(this.width*i,this.height*r),this.setAt(e*i,t*r,this.width*i,this.height*r),__privateSet(this,u,!0),__privateMethod(this,$,Y).call(this),this.setDims(this.width*i,this.height*r),__privateMethod(this,j,V).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return __privateMethod(this,X,K).call(this),this.div}setDimensions(e,t){const i=Math.round(e),r=Math.round(t);if(__privateGet(this,_)===i&&__privateGet(this,f)===r)return;__privateSet(this,_,i),__privateSet(this,f,r),this.canvas.style.visibility="hidden";const[a,n]=this.parentDimensions;this.width=e/a,this.height=t/n,this.fixAndSetPosition(),__privateGet(this,d)&&__privateMethod(this,Z,J).call(this,e,t),__privateMethod(this,$,Y).call(this),__privateMethod(this,j,V).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,i,n){var s,o,l;if(t instanceof me.InkAnnotationElement)return null;const c=super.deserialize(t,i,n);c.thickness=t.thickness,c.color=fe.Util.makeHexColor(...t.color),c.opacity=t.opacity;const[h,u]=c.pageDimensions,p=c.width*h,g=c.height*u,m=c.parentScale,v=t.thickness/2;__privateSet(c,d,!0),__privateSet(c,_,Math.round(p)),__privateSet(c,f,Math.round(g));const{paths:b,rect:y,rotation:A}=t;for(let{bezier:r}of b){r=__privateMethod(s=e,ne,se).call(s,r,y,A);const t=[];c.paths.push(t);let i=m*(r[0]-v),a=m*(r[1]-v);for(let e=2,s=r.length;e<s;e+=6){const n=m*(r[e]-v),s=m*(r[e+1]-v),o=m*(r[e+2]-v),l=m*(r[e+3]-v),c=m*(r[e+4]-v),d=m*(r[e+5]-v);t.push([[i,a],[n,s],[o,l],[c,d]]),i=c,a=d}const n=__privateMethod(this,te,ie).call(this,t);c.bezierPath2D.push(n)}const w=__privateMethod(o=c,ce,de).call(o);return __privateSet(c,a,Math.max(ge.AnnotationEditor.MIN_SIZE,w[2]-w[0])),__privateSet(c,r,Math.max(ge.AnnotationEditor.MIN_SIZE,w[3]-w[1])),__privateMethod(l=c,Z,J).call(l,p,g),c}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=ge.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:fe.AnnotationEditorType.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:__privateMethod(this,oe,le).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakMap,_=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakSet,v=function(e){const t=this.thickness;this.addCommands({cmd:()=>{this.thickness=e,__privateMethod(this,pe,_e).call(this)},undo:()=>{this.thickness=t,__privateMethod(this,pe,_e).call(this)},mustExec:!0,type:fe.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},b=new WeakSet,y=function(e){const t=this.color;this.addCommands({cmd:()=>{this.color=e,__privateMethod(this,j,V).call(this)},undo:()=>{this.color=t,__privateMethod(this,j,V).call(this)},mustExec:!0,type:fe.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},A=new WeakSet,w=function(e){e/=100;const t=this.opacity;this.addCommands({cmd:()=>{this.opacity=e,__privateMethod(this,j,V).call(this)},undo:()=>{this.opacity=t,__privateMethod(this,j,V).call(this)},mustExec:!0,type:fe.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,k=function(){const{parentRotation:e,parentDimensions:[t,i]}=this;switch(e){case 90:return[0,i,i,t];case 180:return[t,i,t,i];case 270:return[t,0,i,t];default:return[0,0,t,i]}},x=new WeakSet,C=function(){const{ctx:e,color:t,opacity:i,thickness:r,parentScale:a,scaleFactor:n}=this;e.lineWidth=r*a/n,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle="".concat(t).concat((0,be.opacityToHex)(i))},E=new WeakSet,P=function(e,t){this.canvas.addEventListener("contextmenu",ve.noContextMenu),this.canvas.addEventListener("pointerleave",__privateGet(this,s)),this.canvas.addEventListener("pointermove",__privateGet(this,n)),this.canvas.addEventListener("pointerup",__privateGet(this,o)),this.canvas.removeEventListener("pointerdown",__privateGet(this,l)),this.isEditing=!0,__privateGet(this,u)||(__privateSet(this,u,!0),__privateMethod(this,$,Y).call(this),this.thickness||(this.thickness=ye._defaultThickness),this.color||(this.color=ye._defaultColor||ge.AnnotationEditor._defaultLineColor),null!=this.opacity||(this.opacity=ye._defaultOpacity)),this.currentPath.push([e,t]),__privateSet(this,h,!1),__privateMethod(this,x,C).call(this),__privateSet(this,g,(()=>{__privateMethod(this,F,N).call(this),__privateGet(this,g)&&window.requestAnimationFrame(__privateGet(this,g))})),window.requestAnimationFrame(__privateGet(this,g))},M=new WeakSet,T=function(e,t){const[i,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===i&&t===r)return;const a=this.currentPath;let n=__privateGet(this,c);if(a.push([e,t]),__privateSet(this,h,!0),a.length<=2)return n.moveTo(...a[0]),void n.lineTo(e,t);3===a.length&&(__privateSet(this,c,n=new Path2D),n.moveTo(...a[0])),__privateMethod(this,O,B).call(this,n,...a.at(-3),...a.at(-2),e,t)},I=new WeakSet,D=function(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);__privateGet(this,c).lineTo(...e)},R=new WeakSet,L=function(e,t){let i;if(__privateSet(this,g,null),e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),__privateMethod(this,M,T).call(this,e,t),__privateMethod(this,I,D).call(this),1!==this.currentPath.length)i=__privateMethod(this,G,W).call(this);else{const r=[e,t];i=[[r,r.slice(),r.slice(),r]]}const r=__privateGet(this,c),a=this.currentPath;this.currentPath=[],__privateSet(this,c,new Path2D),this.addCommands({cmd:()=>{this.allRawPaths.push(a),this.paths.push(i),this.bezierPath2D.push(r),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(__privateMethod(this,H,q).call(this),__privateMethod(this,X,K).call(this)),__privateMethod(this,pe,_e).call(this))},mustExec:!0})},F=new WeakSet,N=function(){if(!__privateGet(this,h))return;__privateSet(this,h,!1),Math.ceil(this.thickness*this.parentScale);const e=this.currentPath.slice(-3),t=e.map((e=>e[0])),i=e.map((e=>e[1]));Math.min(...t),Math.max(...t),Math.min(...i),Math.max(...i);const{ctx:r}=this;r.save(),r.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)r.stroke(a);r.stroke(__privateGet(this,c)),r.restore()},O=new WeakSet,B=function(e,t,i,r,a,n,s){const o=(t+r)/2,l=(i+a)/2,c=(r+n)/2,d=(a+s)/2;e.bezierCurveTo(o+2*(r-o)/3,l+2*(a-l)/3,c+2*(r-c)/3,d+2*(a-d)/3,c,d)},G=new WeakSet,W=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let i,[r,a]=e[0];for(i=1;i<e.length-2;i++){const[n,s]=e[i],[o,l]=e[i+1],c=(n+o)/2,d=(s+l)/2,h=[r+2*(n-r)/3,a+2*(s-a)/3],u=[c+2*(n-c)/3,d+2*(s-d)/3];t.push([[r,a],h,u,[c,d]]),[r,a]=[c,d]}const[n,s]=e[i],[o,l]=e[i+1],c=[r+2*(n-r)/3,a+2*(s-a)/3],d=[o+2*(n-o)/3,l+2*(s-l)/3];return t.push([[r,a],c,d,[o,l]]),t},j=new WeakSet,V=function(){if(this.isEmpty())return void __privateMethod(this,Q,ee).call(this);__privateMethod(this,x,C).call(this);const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),__privateMethod(this,Q,ee).call(this);for(const i of this.bezierPath2D)t.stroke(i)},U=new WeakSet,z=function(e){this.canvas.removeEventListener("pointerleave",__privateGet(this,s)),this.canvas.removeEventListener("pointermove",__privateGet(this,n)),this.canvas.removeEventListener("pointerup",__privateGet(this,o)),this.canvas.addEventListener("pointerdown",__privateGet(this,l)),setTimeout((()=>{this.canvas.removeEventListener("contextmenu",ve.noContextMenu)}),10),__privateMethod(this,R,L).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},H=new WeakSet,q=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",ge.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then((e=>{var t;return null==(t=this.canvas)?void 0:t.setAttribute("aria-label",e)})),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},X=new WeakSet,K=function(){__privateSet(this,p,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}))),__privateGet(this,p).observe(this.div)},$=new WeakSet,Y=function(){if(!__privateGet(this,u))return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),__privateMethod(this,Q,ee).call(this)},Z=new WeakSet,J=function(e,t){const i=__privateMethod(this,he,ue).call(this),n=(e-i)/__privateGet(this,a),s=(t-i)/__privateGet(this,r);this.scaleFactor=Math.min(n,s)},Q=new WeakSet,ee=function(){const e=__privateMethod(this,he,ue).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},te=new WeakSet,ie=function(e){const t=new Path2D;for(let i=0,r=e.length;i<r;i++){const[r,a,n,s]=e[i];0===i&&t.moveTo(...r),t.bezierCurveTo(a[0],a[1],n[0],n[1],s[0],s[1])}return t},re=new WeakSet,ae=function(e,t,i){const[r,a,n,s]=t;switch(i){case 0:for(let t=0,i=e.length;t<i;t+=2)e[t]+=r,e[t+1]=s-e[t+1];break;case 90:for(let t=0,i=e.length;t<i;t+=2){const i=e[t];e[t]=e[t+1]+r,e[t+1]=i+a}break;case 180:for(let t=0,i=e.length;t<i;t+=2)e[t]=n-e[t],e[t+1]+=a;break;case 270:for(let t=0,i=e.length;t<i;t+=2){const i=e[t];e[t]=n-e[t+1],e[t+1]=s-i}break;default:throw new Error("Invalid rotation")}return e},ne=new WeakSet,se=function(e,t,i){const[r,a,n,s]=t;switch(i){case 0:for(let t=0,i=e.length;t<i;t+=2)e[t]-=r,e[t+1]=s-e[t+1];break;case 90:for(let t=0,i=e.length;t<i;t+=2){const i=e[t];e[t]=e[t+1]-a,e[t+1]=i-r}break;case 180:for(let t=0,i=e.length;t<i;t+=2)e[t]=n-e[t],e[t+1]-=a;break;case 270:for(let t=0,i=e.length;t<i;t+=2){const i=e[t];e[t]=s-e[t+1],e[t+1]=n-i}break;default:throw new Error("Invalid rotation")}return e},oe=new WeakSet,le=function(e,t,i,r){var a,n;const s=[],o=this.thickness/2,l=e*t+o,c=e*i+o;for(const d of this.paths){const t=[],i=[];for(let r=0,a=d.length;r<a;r++){const[n,s,o,h]=d[r],u=e*n[0]+l,p=e*n[1]+c,_=e*s[0]+l,f=e*s[1]+c,g=e*o[0]+l,m=e*o[1]+c,v=e*h[0]+l,b=e*h[1]+c;0===r&&(t.push(u,p),i.push(u,p)),t.push(_,f,g,m,v,b),i.push(_,f),r===a-1&&i.push(v,b)}s.push({bezier:__privateMethod(a=ye,re,ae).call(a,t,r,this.rotation),points:__privateMethod(n=ye,re,ae).call(n,i,r,this.rotation)})}return s},ce=new WeakSet,de=function(){let e=1/0,t=-1/0,i=1/0,r=-1/0;for(const a of this.paths)for(const[n,s,o,l]of a){const a=fe.Util.bezierBoundingBox(...n,...s,...o,...l);e=Math.min(e,a[0]),i=Math.min(i,a[1]),t=Math.max(t,a[2]),r=Math.max(r,a[3])}return[e,i,t,r]},he=new WeakSet,ue=function(){return __privateGet(this,d)?Math.ceil(this.thickness*this.parentScale):0},pe=new WeakSet,_e=function(e=!1){if(this.isEmpty())return;if(!__privateGet(this,d))return void __privateMethod(this,j,V).call(this);const t=__privateMethod(this,ce,de).call(this),i=__privateMethod(this,he,ue).call(this);__privateSet(this,a,Math.max(ge.AnnotationEditor.MIN_SIZE,t[2]-t[0])),__privateSet(this,r,Math.max(ge.AnnotationEditor.MIN_SIZE,t[3]-t[1]));const n=Math.ceil(i+__privateGet(this,a)*this.scaleFactor),s=Math.ceil(i+__privateGet(this,r)*this.scaleFactor),[o,l]=this.parentDimensions;this.width=n/o,this.height=s/l,this.setAspectRatio(n,s);const c=this.translationX,h=this.translationY;this.translationX=-t[0],this.translationY=-t[1],__privateMethod(this,$,Y).call(this),__privateMethod(this,j,V).call(this),__privateSet(this,_,n),__privateSet(this,f,s),this.setDims(n,s);const u=e?i/this.scaleFactor/2:0;this.translate(c-this.translationX-u,h-this.translationY-u)},__privateAdd(ye,te),__privateAdd(ye,re),__privateAdd(ye,ne),__publicField(ye,"_defaultColor",null),__publicField(ye,"_defaultOpacity",1),__publicField(ye,"_defaultThickness",1),__publicField(ye,"_type","ink");let Ae=ye;t.InkEditor=Ae},
/* 34 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S,k,x,C,E,P,M,T;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var I=i(1),D=i(4),R=i(6),L=i(29);const F=class extends D.AnnotationEditor{constructor(e){super({...e,name:"stampEditor"}),__privateAdd(this,p),__privateAdd(this,f),__privateAdd(this,m),__privateAdd(this,b),__privateAdd(this,A),__privateAdd(this,S),__privateAdd(this,x),__privateAdd(this,E),__privateAdd(this,M),__privateAdd(this,r,null),__privateAdd(this,a,null),__privateAdd(this,n,null),__privateAdd(this,s,null),__privateAdd(this,o,null),__privateAdd(this,l,null),__privateAdd(this,c,null),__privateAdd(this,d,null),__privateAdd(this,h,!1),__privateAdd(this,u,!1),__privateSet(this,s,e.bitmapUrl),__privateSet(this,o,e.bitmapFile)}static initialize(e){D.AnnotationEditor.initialize(e)}static get supportedTypes(){return(0,I.shadow)(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((e=>"image/".concat(e))))}static get supportedTypesStr(){return(0,I.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(I.AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,t;__privateGet(this,a)&&(__privateSet(this,r,null),this._uiManager.imageManager.deleteId(__privateGet(this,a)),null==(e=__privateGet(this,l))||e.remove(),__privateSet(this,l,null),null==(t=__privateGet(this,c))||t.disconnect(),__privateSet(this,c,null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(__privateGet(this,a)&&__privateMethod(this,m,v).call(this),this.isAttachedToDOM||this.parent.add(this))):__privateGet(this,a)&&__privateMethod(this,m,v).call(this)}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(__privateGet(this,n)||__privateGet(this,r)||__privateGet(this,s)||__privateGet(this,o))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,__privateGet(this,r)?__privateMethod(this,b,y).call(this):__privateMethod(this,m,v).call(this),this.width){const[i,r]=this.parentDimensions;this.setAt(e*i,t*r,this.width*i,this.height*r)}return this.div}static deserialize(e,t,i){if(e instanceof L.StampAnnotationElement)return null;const r=super.deserialize(e,t,i),{rect:n,bitmapUrl:o,bitmapId:l,isSvg:c,accessibilityData:d}=e;l&&i.imageManager.isValidId(l)?__privateSet(r,a,l):__privateSet(r,s,o),__privateSet(r,h,c);const[u,p]=r.pageDimensions;return r.width=(n[2]-n[0])/u,r.height=(n[3]-n[1])/p,d&&(r.altTextData=d),r}serialize(e=!1,t=null){if(this.isEmpty())return null;const i={annotationType:I.AnnotationEditorType.STAMP,bitmapId:__privateGet(this,a),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:__privateGet(this,h),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=__privateMethod(this,E,P).call(this,!0),i.accessibilityData=this.altTextData,i;const{decorative:r,altText:n}=this.altTextData;if(!r&&n&&(i.accessibilityData={type:"Figure",alt:n}),null===t)return i;t.stamps||(t.stamps=new Map);const s=__privateGet(this,h)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(t.stamps.has(__privateGet(this,a))){if(__privateGet(this,h)){const e=t.stamps.get(__privateGet(this,a));s>e.area&&(e.area=s,e.serialized.bitmap.close(),e.serialized.bitmap=__privateMethod(this,E,P).call(this,!1))}}else t.stamps.set(__privateGet(this,a),{area:s,serialized:i}),i.bitmap=__privateMethod(this,E,P).call(this,!1);return i}};r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakSet,_=function(e,t=!1){e?(__privateSet(this,r,e.bitmap),t||(__privateSet(this,a,e.id),__privateSet(this,h,e.isSvg)),__privateMethod(this,b,y).call(this)):this.remove()},f=new WeakSet,g=function(){__privateSet(this,n,null),this._uiManager.enableWaiting(!1),__privateGet(this,l)&&this.div.focus()},m=new WeakSet,v=function(){if(__privateGet(this,a))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(__privateGet(this,a)).then((e=>__privateMethod(this,p,_).call(this,e,!0))).finally((()=>__privateMethod(this,f,g).call(this)));if(__privateGet(this,s)){const e=__privateGet(this,s);return __privateSet(this,s,null),this._uiManager.enableWaiting(!0),void __privateSet(this,n,this._uiManager.imageManager.getFromUrl(e).then((e=>__privateMethod(this,p,_).call(this,e))).finally((()=>__privateMethod(this,f,g).call(this))))}if(__privateGet(this,o)){const e=__privateGet(this,o);return __privateSet(this,o,null),this._uiManager.enableWaiting(!0),void __privateSet(this,n,this._uiManager.imageManager.getFromFile(e).then((e=>__privateMethod(this,p,_).call(this,e))).finally((()=>__privateMethod(this,f,g).call(this))))}const e=document.createElement("input");e.type="file",e.accept=F.supportedTypesStr,__privateSet(this,n,new Promise((t=>{e.addEventListener("change",(async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);__privateMethod(this,p,_).call(this,t)}else this.remove();t()})),e.addEventListener("cancel",(()=>{this.remove(),t()}))})).finally((()=>__privateMethod(this,f,g).call(this)))),e.click()},b=new WeakSet,y=function(){const{div:e}=this;let{width:t,height:i}=__privateGet(this,r);const[a,n]=this.pageDimensions,s=.75;if(this.width)t=this.width*a,i=this.height*n;else if(t>s*a||i>s*n){const e=Math.min(s*a/t,s*n/i);t*=e,i*=e}const[o,c]=this.parentDimensions;this.setDims(t*o/a,i*c/n),this._uiManager.enableWaiting(!1);const d=__privateSet(this,l,document.createElement("canvas"));e.append(d),e.hidden=!1,__privateMethod(this,x,C).call(this,t,i),__privateMethod(this,M,T).call(this),__privateGet(this,u)||(this.parent.addUndoableEditor(this),__privateSet(this,u,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},A=new WeakSet,w=function(e,t){var i;const[r,a]=this.parentDimensions;this.width=e/r,this.height=t/a,this.setDims(e,t),(null==(i=this._initialOptions)?void 0:i.isCentered)?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==__privateGet(this,d)&&clearTimeout(__privateGet(this,d)),__privateSet(this,d,setTimeout((()=>{__privateSet(this,d,null),__privateMethod(this,x,C).call(this,e,t)}),200))},S=new WeakSet,k=function(e,t){const{width:i,height:a}=__privateGet(this,r);let n=i,s=a,o=__privateGet(this,r);for(;n>2*e||s>2*t;){const i=n,r=s;n>2*e&&(n=n>=16384?Math.floor(n/2)-1:Math.ceil(n/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const a=new OffscreenCanvas(n,s);a.getContext("2d").drawImage(o,0,0,i,r,0,0,n,s),o=a.transferToImageBitmap()}return o},x=new WeakSet,C=function(e,t){e=Math.ceil(e),t=Math.ceil(t);const i=__privateGet(this,l);if(!i||i.width===e&&i.height===t)return;i.width=e,i.height=t;const a=__privateGet(this,h)?__privateGet(this,r):__privateMethod(this,S,k).call(this,e,t),n=i.getContext("2d");n.filter=this._uiManager.hcmFilter,n.drawImage(a,0,0,a.width,a.height,0,0,e,t)},E=new WeakSet,P=function(e){if(e){if(__privateGet(this,h)){const e=this._uiManager.imageManager.getSvgUrl(__privateGet(this,a));if(e)return e}const e=document.createElement("canvas");return({width:e.width,height:e.height}=__privateGet(this,r)),e.getContext("2d").drawImage(__privateGet(this,r),0,0),e.toDataURL()}if(__privateGet(this,h)){const[e,t]=this.pageDimensions,i=Math.round(this.width*e*R.PixelsPerInch.PDF_TO_CSS_UNITS),a=Math.round(this.height*t*R.PixelsPerInch.PDF_TO_CSS_UNITS),n=new OffscreenCanvas(i,a);return n.getContext("2d").drawImage(__privateGet(this,r),0,0,__privateGet(this,r).width,__privateGet(this,r).height,0,0,i,a),n.transferToImageBitmap()}return structuredClone(__privateGet(this,r))},M=new WeakSet,T=function(){__privateSet(this,c,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&__privateMethod(this,A,w).call(this,t.width,t.height)}))),__privateGet(this,c).observe(this.div)},__publicField(F,"_type","stamp");let N=F;t.StampEditor=N}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={
/******/
// no module.id needed
/******/
// no module.loaded needed
/******/
exports:{}
/******/};return __webpack_modules__[e](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return n.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return s.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return o.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return l.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return i.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return a.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.version}});var t=__w_pdfjs_require__(1),i=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),a=__w_pdfjs_require__(26),n=__w_pdfjs_require__(27),s=__w_pdfjs_require__(5),o=__w_pdfjs_require__(29),l=__w_pdfjs_require__(14),c=__w_pdfjs_require__(32)})(),__webpack_exports__})(),module.exports=root.pdfjsLib=factory()})(pdf);var pdfExports=pdf.exports;const pdfWorder="https://static.tiangong.cn/wwwsite/assets/pdf.worker-BgPpApnW.js";var pdf_viewer={exports:{}},root,factory;root=globalThis,factory=()=>
/******/(()=>{var e=[
/* 1 */
/***/,(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S,k,x,C,E,P,M,T,I,D,R,L,F,N,O,B,G,W,j,V,U,z,H;Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFindController=t.FindState=void 0;var q=i(2),X=i(3),K=i(4);const $={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};t.FindState=$;const Y={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},Z=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let J;const Q=new RegExp("\\p{M}+","gu"),ee=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),te=new RegExp("([^\\p{M}])\\p{M}*$","u"),ie=new RegExp("^\\p{M}*([^\\p{M}])","u"),re=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,ae=new Map,ne=new Map;let se=null,oe=null;function le(e){const t=[];let i,r;for(;null!==(i=re.exec(e));){let{index:e}=i;for(const r of i[0]){let i=ae.get(r);i||(i=r.normalize("NFD").length,ae.set(r,i)),t.push([i,e++])}}if(0===t.length&&se)r=se;else if(t.length>0&&oe)r=oe;else{const e=Object.keys(Y).join(""),i=(0,X.getNormalizeWithNFKC)(),a="(?:\\p{Ideographic}|[぀-ヿ])",n="(?:゙|゚)",s="([".concat(e,"])|([").concat(i,"])|(").concat(n,"\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(").concat(a,"\\n)|(\\n)");r=0===t.length?se=new RegExp(s+"|(\\u0000)","gum"):oe=new RegExp(s+"|(".concat("[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",")"),"gum")}const a=[];for(;null!==(i=Q.exec(e));)a.push([i[0].length,i.index]);let n=e.normalize("NFD");const s=[[0,0]];let o=0,l=0,c=0,d=0,h=0,u=!1;return n=n.replace(r,((e,i,r,n,p,_,f,g,m,v)=>{var b,y,A;if(v-=d,i){const e=Y[i],t=e.length;for(let i=1;i<t;i++)s.push([v-c+i,c-i]);return c-=t-1,e}if(r){let e=ne.get(r);e||(e=r.normalize("NFKC"),ne.set(r,e));const t=e.length;for(let i=1;i<t;i++)s.push([v-c+i,c-i]);return c-=t-1,e}if(n)return u=!0,v+h===(null==(b=a[o])?void 0:b[1])?++o:(s.push([v-1-c+1,c-1]),c-=1,d+=1),s.push([v-c+1,c]),d+=1,h+=1,n.charAt(0);if(p){const e=p.endsWith("\n"),t=e?p.length-2:p.length;u=!0;let i=t;v+h===(null==(y=a[o])?void 0:y[1])&&(i-=a[o][0],++o);for(let r=1;r<=i;r++)s.push([v-1-c+r,c-r]);return c-=i,d+=i,e?(v+=t-1,s.push([v-c+1,1+c]),c+=1,d+=1,h+=1,p.slice(0,t)):p}if(_){const e=_.length-2;return s.push([v-c+e,1+c]),c+=1,d+=1,h+=1,_.slice(0,-2)}if(f){const e=f.length-1;return s.push([v-c+e,c]),d+=1,h+=1,f.slice(0,-1)}if(g)return s.push([v-c+1,c-1]),c-=1,d+=1,h+=1," ";if(v+h===(null==(A=t[l])?void 0:A[1])){const e=t[l][0]-1;++l;for(let t=1;t<=e;t++)s.push([v-(c-t),c-t]);c-=e,d+=e}return m})),s.push([n.length,c]),[n,s,u]}function ce(e,t,i){if(!e)return[t,i];const r=t,a=t+i-1;let n=(0,q.binarySearchFirstItem)(e,(e=>e[0]>=r));e[n][0]>r&&--n;let s=(0,q.binarySearchFirstItem)(e,(e=>e[0]>=a),n);e[s][0]>a&&--s;const o=r+e[n][1];return[o,a+e[s][1]+1-o]}r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakSet,o=function(e){if(!e)return;!1===e.phraseSearch&&"string"==typeof e.query&&(e.query=e.query.match(/\S+/g));const t=this._pdfDocument,{type:i}=e;(null===__privateGet(this,r)||__privateMethod(this,u,p).call(this,e))&&(this._dirtyMatch=!0),__privateSet(this,r,e),"highlightallchange"!==i&&__privateMethod(this,z,H).call(this,$.PENDING),this._firstPageCapability.promise.then((()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t)return;__privateMethod(this,w,S).call(this);const e=!this._highlightMatches,a=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),i?this._dirtyMatch?__privateMethod(this,P,M).call(this):"again"===i?(__privateMethod(this,P,M).call(this),e&&__privateGet(this,r).highlightAll&&__privateMethod(this,C,E).call(this)):"highlightallchange"===i?(a?__privateMethod(this,P,M).call(this):this._highlightMatches=!0,__privateMethod(this,C,E).call(this)):__privateMethod(this,P,M).call(this):this._findTimeout=setTimeout((()=>{__privateMethod(this,P,M).call(this),this._findTimeout=null}),250)}))},l=new WeakSet,c=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],__privateSet(this,n,0),__privateSet(this,r,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new K.PromiseCapability},d=new WeakSet,h=function(){const{query:e}=__privateGet(this,r);return"string"==typeof e?(e!==this._rawQuery&&(this._rawQuery=e,[this._normalizedQuery]=le(e)),this._normalizedQuery):(e||[]).filter((e=>!!e)).map((e=>le(e)[0]))},u=new WeakSet,p=function(e){var t,i;const a=e.query,n=__privateGet(this,r).query,s=typeof a;if(s!==typeof n)return!0;if("string"===s){if(a!==n)return!0}else if(JSON.stringify(a)!==JSON.stringify(n))return!0;switch(e.type){case"again":const e=this._selected.pageIdx+1,r=this._linkService;return e>=1&&e<=r.pagesCount&&e!==r.page&&!(null==(i=null==(t=this.onIsPageVisible)?void 0:t.call(this,e))||i);case"highlightallchange":return!1}return!0},_=new WeakSet,f=function(e,t,i){let r=e.slice(0,t).match(te);if(r){const i=e.charCodeAt(t),a=r[1].charCodeAt(0);if((0,X.getCharacterType)(i)===(0,X.getCharacterType)(a))return!1}if(r=e.slice(t+i).match(ie),r){const a=e.charCodeAt(t+i-1),n=r[1].charCodeAt(0);if((0,X.getCharacterType)(a)===(0,X.getCharacterType)(n))return!1}return!0},g=new WeakSet,m=function(e,t,i,r){const a=this._pageMatches[i]=[],n=this._pageMatchesLength[i]=[];if(!e)return;const s=this._pageDiffs[i];let o;for(;null!==(o=e.exec(r));){if(t&&!__privateMethod(this,_,f).call(this,r,o.index,o[0].length))continue;const[e,i]=ce(s,o.index,o[0].length);i&&(a.push(e),n.push(i))}},v=new WeakSet,b=function(e,t){const{matchDiacritics:i}=__privateGet(this,r);let a=!1;const n="[ ]*";return(e=e.replaceAll(ee,((e,r,n,s,o,l)=>r?"[ ]*\\".concat(r,"[ ]*"):n?"[ ]*".concat(n,"[ ]*"):s?"[ ]+":i?o||l:o?Z.has(o.charCodeAt(0))?o:"":t?(a=!0,"".concat(l,"\\p{M}*")):l))).endsWith(n)&&(e=e.slice(0,e.length-4)),i&&t&&(J||(J=String.fromCharCode(...Z)),a=!0,e="".concat(e,"(?=[").concat(J,"]|[^\\p{M}]|$)")),[a,e]},y=new WeakSet,A=function(e){let t=__privateGet(this,d,h);if(0===t.length)return;const{caseSensitive:i,entireWord:s}=__privateGet(this,r),o=this._pageContents[e],l=this._hasDiacritics[e];let c=!1;"string"==typeof t?[c,t]=__privateMethod(this,v,b).call(this,t,l):t=t.sort().reverse().map((e=>{const[t,i]=__privateMethod(this,v,b).call(this,e,l);return c||(c=t),"(".concat(i,")")})).join("|");const u="g".concat(c?"u":"").concat(i?"":"i");t=t?new RegExp(t,u):null,__privateMethod(this,g,m).call(this,t,s,e,o),__privateGet(this,r).highlightAll&&__privateMethod(this,k,x).call(this,e),this._resumePageIdx===e&&(this._resumePageIdx=null,__privateMethod(this,D,R).call(this));const p=this._pageMatches[e].length;this._matchesCountTotal+=p,__privateGet(this,a)?p>0&&__privateMethod(this,V,U).call(this):++__privateWrapper(this,n)._===this._linkService.pagesCount&&__privateMethod(this,V,U).call(this)},w=new WeakSet,S=function(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve();const t={disableNormalization:!0};for(let i=0,r=this._linkService.pagesCount;i<r;i++){const r=new K.PromiseCapability;this._extractTextPromises[i]=r.promise,e=e.then((()=>this._pdfDocument.getPage(i+1).then((e=>e.getTextContent(t))).then((e=>{const t=[];for(const i of e.items)t.push(i.str),i.hasEOL&&t.push("\n");[this._pageContents[i],this._pageDiffs[i],this._hasDiacritics[i]]=le(t.join("")),r.resolve()}),(e=>{this._pageContents[i]="",this._pageDiffs[i]=null,this._hasDiacritics[i]=!1,r.resolve()}))))}},k=new WeakSet,x=function(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})},C=new WeakSet,E=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},P=new WeakSet,M=function(){const e=__privateGet(this,r).findPrevious,t=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=t,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,__privateSet(this,n,0),this._matchesCountTotal=0,__privateMethod(this,C,E).call(this);for(let e=0;e<i;e++)this._pendingFindMatches.has(e)||(this._pendingFindMatches.add(e),this._extractTextPromises[e].then((()=>{this._pendingFindMatches.delete(e),__privateMethod(this,y,A).call(this,e)})))}if(0===__privateGet(this,d,h).length)return void __privateMethod(this,z,H).call(this,$.FOUND);if(this._resumePageIdx)return;const a=this._offset;if(this._pagesToSearch=i,null!==a.matchIdx){const t=this._pageMatches[a.pageIdx].length;if(!e&&a.matchIdx+1<t||e&&a.matchIdx>0)return a.matchIdx=e?a.matchIdx-1:a.matchIdx+1,void __privateMethod(this,N,O).call(this,!0);__privateMethod(this,L,F).call(this,e)}__privateMethod(this,D,R).call(this)},T=new WeakSet,I=function(e){const t=this._offset,i=e.length,a=__privateGet(this,r).findPrevious;return i?(t.matchIdx=a?i-1:0,__privateMethod(this,N,O).call(this,!0),!0):(__privateMethod(this,L,F).call(this,a),!!(t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0))&&(__privateMethod(this,N,O).call(this,!1),!0))},D=new WeakSet,R=function(){this._resumePageIdx;let e=null;do{const t=this._offset.pageIdx;if(e=this._pageMatches[t],!e){this._resumePageIdx=t;break}}while(!__privateMethod(this,T,I).call(this,e))},L=new WeakSet,F=function(e){const t=this._offset,i=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=i||t.pageIdx<0)&&(t.pageIdx=e?i-1:0,t.wrapped=!0)},N=new WeakSet,O=function(e=!1){let t=$.NOT_FOUND;const i=this._offset.wrapped;if(this._offset.wrapped=!1,e){const e=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,t=i?$.WRAPPED:$.FOUND,-1!==e&&e!==this._selected.pageIdx&&__privateMethod(this,k,x).call(this,e)}__privateMethod(this,z,H).call(this,t,__privateGet(this,r).findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,__privateMethod(this,k,x).call(this,this._selected.pageIdx))},B=new WeakSet,G=function(e){const t=this._pdfDocument;this._firstPageCapability.promise.then((()=>{!this._pdfDocument||t&&this._pdfDocument!==t||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),__privateMethod(this,z,H).call(this,$.FOUND),this._highlightMatches=!1,__privateMethod(this,C,E).call(this))}))},W=new WeakSet,j=function(){var e;const{pageIdx:t,matchIdx:i}=this._selected;let r=0,a=this._matchesCountTotal;if(-1!==i){for(let i=0;i<t;i++)r+=(null==(e=this._pageMatches[i])?void 0:e.length)||0;r+=i+1}return(r<1||r>a)&&(r=a=0),{current:r,total:a}},V=new WeakSet,U=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:__privateMethod(this,W,j).call(this)})},z=new WeakSet,H=function(e,t=!1){var i,s;(__privateGet(this,a)||__privateGet(this,n)===this._linkService.pagesCount&&e!==$.PENDING)&&this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,matchesCount:__privateMethod(this,W,j).call(this),rawQuery:null!=(s=null==(i=__privateGet(this,r))?void 0:i.query)?s:null})},t.PDFFindController=class{constructor({linkService:e,eventBus:t,updateMatchesCountOnProgress:i=!0}){__privateAdd(this,s),__privateAdd(this,l),__privateAdd(this,d),__privateAdd(this,u),__privateAdd(this,_),__privateAdd(this,g),__privateAdd(this,v),__privateAdd(this,y),__privateAdd(this,w),__privateAdd(this,k),__privateAdd(this,C),__privateAdd(this,P),__privateAdd(this,T),__privateAdd(this,D),__privateAdd(this,L),__privateAdd(this,N),__privateAdd(this,B),__privateAdd(this,W),__privateAdd(this,V),__privateAdd(this,z),__privateAdd(this,r,null),__privateAdd(this,a,!0),__privateAdd(this,n,0),this._linkService=e,this._eventBus=t,__privateSet(this,a,i),this.onIsPageVisible=null,__privateMethod(this,l,c).call(this),t._on("find",__privateMethod(this,s,o).bind(this)),t._on("findbarclose",__privateMethod(this,B,G).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return __privateGet(this,r)}setDocument(e){this._pdfDocument&&__privateMethod(this,l,c).call(this),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}scrollMatchIntoView({element:e=null,selectedLeft:t=0,pageIndex:i=-1,matchIndex:r=-1}){if(!this._scrollMatches||!e)return;if(-1===r||r!==this._selected.matchIdx)return;if(-1===i||i!==this._selected.pageIdx)return;this._scrollMatches=!1;const a={top:-50,left:t+-400};(0,q.scrollIntoView)(e,a,!0)}}},
/* 2 */
/***/
(e,t)=>{var i,r,a,n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.animationStarted=t.VERTICAL_PADDING=t.UNKNOWN_SCALE=t.TextLayerMode=t.SpreadMode=t.SidebarView=t.ScrollMode=t.SCROLLBAR_PADDING=t.RenderingStates=t.ProgressBar=t.PresentationModeState=t.OutputScale=t.MIN_SCALE=t.MAX_SCALE=t.MAX_AUTO_SCALE=t.DEFAULT_SCALE_VALUE=t.DEFAULT_SCALE_DELTA=t.DEFAULT_SCALE=t.CursorTool=t.AutoPrintRegExp=void 0,t.apiPageLayoutToViewerModes=function(e){let t=l.VERTICAL,i=c.NONE;switch(e){case"SinglePage":t=l.PAGE;break;case"OneColumn":break;case"TwoPageLeft":t=l.PAGE;case"TwoColumnLeft":i=c.ODD;break;case"TwoPageRight":t=l.PAGE;case"TwoColumnRight":i=c.EVEN}return{scrollMode:t,spreadMode:i}},t.apiPageModeToSidebarView=function(e){switch(e){case"UseNone":return o.NONE;case"UseThumbs":return o.THUMBS;case"UseOutlines":return o.OUTLINE;case"UseAttachments":return o.ATTACHMENTS;case"UseOC":return o.LAYERS}return o.NONE},t.approximateFraction=function(e){if(Math.floor(e)===e)return[e,1];const t=1/e;if(t>8)return[1,8];if(Math.floor(t)===t)return[1,t];const i=e>1?t:e;let r,a=0,n=1,s=1,o=1;for(;;){const e=a+s,t=n+o;if(t>8)break;i<=e/t?(s=e,o=t):(a=e,n=t)}return r=i-a/n<s/o-i?i===e?[a,n]:[n,a]:i===e?[s,o]:[o,s],r},t.backtrackBeforeAllVisibleElements=u,t.binarySearchFirstItem=h,t.docStyle=void 0,t.getActiveOrFocusedElement=function(){let e=document,t=e.activeElement||e.querySelector(":focus");for(;null==t?void 0:t.shadowRoot;)e=t.shadowRoot,t=e.activeElement||e.querySelector(":focus");return t},t.getPageSizeInches=function({view:e,userUnit:t,rotate:i}){const[r,a,n,s]=e,o=i%180!=0,l=(n-r)/72*t,c=(s-a)/72*t;return{width:o?c:l,height:o?l:c}},t.getVisibleElements=function({scrollEl:e,views:t,sortByVisibility:i=!1,horizontal:r=!1,rtl:a=!1}){const n=e.scrollTop,s=n+e.clientHeight,o=e.scrollLeft,l=o+e.clientWidth,c=[],d=new Set,p=t.length;let _=h(t,r?function(e){const t=e.div,i=t.offsetLeft+t.clientLeft,r=i+t.clientWidth;return a?i<l:r>o}:function(e){const t=e.div;return t.offsetTop+t.clientTop+t.clientHeight>n});_>0&&_<p&&!r&&(_=u(_,t,n));let f=r?l:-1;for(let h=_;h<p;h++){const e=t[h],i=e.div,a=i.offsetLeft+i.clientLeft,u=i.offsetTop+i.clientTop,p=i.clientWidth,_=i.clientHeight,g=a+p,m=u+_;if(-1===f)m>=s&&(f=m);else if((r?a:u)>f)break;if(m<=n||u>=s||g<=o||a>=l)continue;const v=Math.max(0,n-u)+Math.max(0,m-s),b=(p-(Math.max(0,o-a)+Math.max(0,g-l)))/p,y=(_-v)/_*b*100|0;c.push({id:e.id,x:a,y:u,view:e,percent:y,widthPercent:100*b|0}),d.add(e.id)}const g=c[0],m=c.at(-1);return i&&c.sort((function(e,t){const i=e.percent-t.percent;return Math.abs(i)>.001?-i:e.id-t.id})),{first:g,last:m,views:c,ids:d}},t.isPortraitOrientation=function(e){return e.width<=e.height},t.isValidRotation=function(e){return Number.isInteger(e)&&e%90==0},t.isValidScrollMode=function(e){return Number.isInteger(e)&&Object.values(l).includes(e)&&e!==l.UNKNOWN},t.isValidSpreadMode=function(e){return Number.isInteger(e)&&Object.values(c).includes(e)&&e!==c.UNKNOWN},t.normalizeWheelEventDelta=function(e){const t=e.deltaMode;let i=p(e);return t===WheelEvent.DOM_DELTA_PIXEL?i/=900:t===WheelEvent.DOM_DELTA_LINE&&(i/=30),i},t.normalizeWheelEventDirection=p,t.parseQueryString=function(e){const t=new Map;for(const[i,r]of new URLSearchParams(e))t.set(i.toLowerCase(),r);return t},t.removeNullCharacters=function(e,t=!1){return"string"!=typeof e?e:(t&&(e=e.replaceAll(d," ")),e.replaceAll("\0",""))},t.roundToDivide=function(e,t){const i=e%t;return 0===i?e:Math.round(e-i+t)},t.scrollIntoView=function(e,t,i=!1){let r=e.offsetParent;if(!r)return;let a=e.offsetTop+e.clientTop,n=e.offsetLeft+e.clientLeft;for(;r.clientHeight===r.scrollHeight&&r.clientWidth===r.scrollWidth||i&&(r.classList.contains("markedContent")||"hidden"===getComputedStyle(r).overflow);)if(a+=r.offsetTop,n+=r.offsetLeft,r=r.offsetParent,!r)return;t&&(void 0!==t.top&&(a+=t.top),void 0!==t.left&&(n+=t.left,r.scrollLeft=n)),r.scrollTop=a},t.toggleCheckedBtn=function(e,t,i=null){e.classList.toggle("toggled",t),e.setAttribute("aria-checked",t),null==i||i.classList.toggle("hidden",!t)},t.toggleExpandedBtn=function(e,t,i=null){e.classList.toggle("toggled",t),e.setAttribute("aria-expanded",t),null==i||i.classList.toggle("hidden",!t)},t.watchScroll=function(e,t){const i=function(i){a||(a=window.requestAnimationFrame((function(){a=null;const i=e.scrollLeft,n=r.lastX;i!==n&&(r.right=i>n),r.lastX=i;const s=e.scrollTop,o=r.lastY;s!==o&&(r.down=s>o),r.lastY=s,t(r)})))},r={right:!0,down:!0,lastX:e.scrollLeft,lastY:e.scrollTop,_eventHandler:i};let a=null;return e.addEventListener("scroll",i,!0),r},t.DEFAULT_SCALE_VALUE="auto",t.DEFAULT_SCALE=1,t.DEFAULT_SCALE_DELTA=1.1,t.MIN_SCALE=.1,t.MAX_SCALE=10,t.UNKNOWN_SCALE=0,t.MAX_AUTO_SCALE=1.25,t.SCROLLBAR_PADDING=40,t.VERTICAL_PADDING=5,t.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},t.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const o={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};t.SidebarView=o,t.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};const l={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};t.ScrollMode=l;const c={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};t.SpreadMode=c,t.CursorTool={SELECT:0,HAND:1,ZOOM:2},t.AutoPrintRegExp=/\bprint\s*\(/,t.OutputScale=class{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}};const d=/[\x01-\x1F]/g;function h(e,t,i=0){let r=i,a=e.length-1;if(a<0||!t(e[a]))return e.length;if(t(e[r]))return r;for(;r<a;){const i=r+a>>1;t(e[i])?a=i:r=i+1}return r}function u(e,t,i){if(e<2)return e;let r=t[e].div,a=r.offsetTop+r.clientTop;a>=i&&(r=t[e-1].div,a=r.offsetTop+r.clientTop);for(let n=e-2;n>=0&&(r=t[n].div,!(r.offsetTop+r.clientTop+r.clientHeight<=a));--n)e=n;return e}function p(e){let t=Math.hypot(e.deltaX,e.deltaY);const i=Math.atan2(e.deltaY,e.deltaX);return-.25*Math.PI<i&&i<.75*Math.PI&&(t=-t),t}const _=new Promise((function(e){window.requestAnimationFrame(e)}));t.animationStarted=_;const f=document.documentElement.style;t.docStyle=f,i=new WeakMap,r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,t.ProgressBar=class{constructor(e){__privateAdd(this,i,null),__privateAdd(this,r,null),__privateAdd(this,a,0),__privateAdd(this,n,null),__privateAdd(this,s,!0),__privateSet(this,i,e.classList),__privateSet(this,n,e.style)}get percent(){return __privateGet(this,a)}set percent(e){var t,r,s;__privateSet(this,a,(t=e,r=0,s=100,Math.min(Math.max(t,r),s))),isNaN(e)?__privateGet(this,i).add("indeterminate"):(__privateGet(this,i).remove("indeterminate"),__privateGet(this,n).setProperty("--progressBar-percent","".concat(__privateGet(this,a),"%")))}setWidth(e){if(!e)return;const t=e.parentNode.offsetWidth-e.offsetWidth;t>0&&__privateGet(this,n).setProperty("--progressBar-end-offset","".concat(t,"px"))}setDisableAutoFetch(e=5e3){isNaN(__privateGet(this,a))||(__privateGet(this,r)&&clearTimeout(__privateGet(this,r)),this.show(),__privateSet(this,r,setTimeout((()=>{__privateSet(this,r,null),this.hide()}),e)))}hide(){__privateGet(this,s)&&(__privateSet(this,s,!1),__privateGet(this,i).add("hidden"))}show(){__privateGet(this,s)||(__privateSet(this,s,!0),__privateGet(this,i).remove("hidden"))}}},
/* 3 */
/***/
(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterType=void 0,t.getCharacterType=function(e){return function(e){return e<11904}(e)?function(e){return 0==(65408&e)}(e)?function(e){return 32===e||9===e||13===e||10===e}(e)?i.SPACE:function(e){return e>=97&&e<=122||e>=65&&e<=90}(e)||function(e){return e>=48&&e<=57}(e)||95===e?i.ALPHA_LETTER:i.PUNCT:function(e){return 3584==(65408&e)}(e)?i.THAI_LETTER:160===e?i.SPACE:i.ALPHA_LETTER:function(e){return e>=13312&&e<=40959||e>=63744&&e<=64255}(e)?i.HAN_LETTER:function(e){return e>=12448&&e<=12543}(e)?i.KATAKANA_LETTER:function(e){return e>=12352&&e<=12447}(e)?i.HIRAGANA_LETTER:function(e){return e>=65376&&e<=65439}(e)?i.HALFWIDTH_KATAKANA_LETTER:i.ALPHA_LETTER},t.getNormalizeWithNFKC=function(){return r||(r=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),r};const i={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};let r;t.CharacterType=i},
/* 4 */
/***/
e=>{e.exports=globalThis.pdfjsLib},
/* 5 */
/***/
(e,t,i)=>{var r,a,n,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleLinkService=t.PDFLinkService=t.LinkTarget=void 0;var l=i(2);const c={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function d(e,{url:t,target:i,rel:r,enabled:a=!0}={}){if(!t||"string"!=typeof t)throw new Error('A valid "url" parameter must provided.');a?e.href=e.title=t:(e.href="",e.title="Disabled: ".concat(t),e.onclick=()=>!1);let n="";switch(i){case c.NONE:break;case c.SELF:n="_self";break;case c.BLANK:n="_blank";break;case c.PARENT:n="_parent";break;case c.TOP:n="_top"}e.target=n,e.rel="string"==typeof r?r:"noopener noreferrer nofollow"}t.LinkTarget=c;const h=class e{constructor({eventBus:e,externalLinkTarget:t=null,externalLinkRel:i=null,ignoreDestinationZoom:n=!1}={}){__privateAdd(this,a),__privateAdd(this,r,new Map),this.eventBus=e,this.externalLinkTarget=t,this.externalLinkRel=i,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=n,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,t=null){this.baseUrl=t,this.pdfDocument=e,__privateGet(this,r).clear()}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(e){this.pdfViewer.currentPageNumber=e}get rotation(){return this.pdfViewer.pagesRotation}set rotation(e){this.pdfViewer.pagesRotation=e}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(e){if(!this.pdfDocument)return;let t,i;"string"==typeof e?(t=e,i=await this.pdfDocument.getDestination(e)):(t=null,i=await e),Array.isArray(i)&&__privateMethod(this,a,n).call(this,e,t,i)}goToPage(e){if(!this.pdfDocument)return;const t="string"==typeof e&&this.pdfViewer.pageLabelToPageNumber(e)||0|e;Number.isInteger(t)&&t>0&&t<=this.pagesCount&&(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(t)),this.pdfViewer.scrollPageIntoView({pageNumber:t}))}addLinkAttributes(e,t,i=!1){d(e,{url:t,target:i?c.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(e){if("string"==typeof e){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length>0)return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(t){var i;if(!this.pdfDocument)return;let r,a;if(t.includes("=")){const e=(0,l.parseQueryString)(t);if(e.has("search")){const t=e.get("search").replaceAll('"',""),i="true"===e.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:i?t:t.match(/\S+/g)})}if(e.has("page")&&(r=0|e.get("page")||1),e.has("zoom")){const t=e.get("zoom").split(","),i=t[0],r=parseFloat(i);i.includes("Fit")?"Fit"===i||"FitB"===i?a=[null,{name:i}]:"FitH"===i||"FitBH"===i||"FitV"===i||"FitBV"===i?a=[null,{name:i},t.length>1?0|t[1]:null]:"FitR"===i&&(5!==t.length||(a=[null,{name:i},0|t[1],0|t[2],0|t[3],0|t[4]])):a=[null,{name:"XYZ"},t.length>1?0|t[1]:null,t.length>2?0|t[2]:null,r?r/100:i]}a?this.pdfViewer.scrollPageIntoView({pageNumber:r||this.page,destArray:a,allowNegativeOffset:!0}):r&&(this.page=r),e.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:e.get("pagemode")}),e.has("nameddest")&&this.goToDestination(e.get("nameddest"))}else{a=unescape(t);try{a=JSON.parse(a),Array.isArray(a)||(a=a.toString())}catch(n){}if("string"==typeof a||__privateMethod(i=e,s,o).call(i,a))return void this.goToDestination(a)}}executeNamedAction(e){var t,i;switch(e){case"GoBack":null==(t=this.pdfHistory)||t.back();break;case"GoForward":null==(i=this.pdfHistory)||i.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}async executeSetOCGState(e){const t=this.pdfDocument,i=await this.pdfViewer.optionalContentConfigPromise;if(t!==this.pdfDocument)return;let r;for(const a of e.state){switch(a){case"ON":case"OFF":case"Toggle":r=a;continue}switch(r){case"ON":i.setVisibility(a,!0);break;case"OFF":i.setVisibility(a,!1);break;case"Toggle":const e=i.getGroup(a);e&&i.setVisibility(a,!e.visible)}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(i)}cachePageRef(e,t){if(!t)return;const i=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);__privateGet(this,r).set(i,e)}_cachedPageNumber(e){if(!e)return null;const t=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return __privateGet(this,r).get(t)||null}};r=new WeakMap,a=new WeakSet,n=function(e,t=null,i){const r=i[0];let s;if("object"==typeof r&&null!==r){if(s=this._cachedPageNumber(r),!s)return void this.pdfDocument.getPageIndex(r).then((s=>{this.cachePageRef(s+1,r),__privateMethod(this,a,n).call(this,e,t,i)})).catch((()=>{}))}else{if(!Number.isInteger(r))return;s=r+1}!s||s<1||s>this.pagesCount||(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:t,explicitDest:i,pageNumber:s})),this.pdfViewer.scrollPageIntoView({pageNumber:s,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom}))},s=new WeakSet,o=function(e){if(!Array.isArray(e))return!1;const t=e.length;if(t<2)return!1;const i=e[0];if(!("object"==typeof i&&Number.isInteger(i.num)&&Number.isInteger(i.gen)||Number.isInteger(i)&&i>=0))return!1;const r=e[1];if("object"!=typeof r||"string"!=typeof r.name)return!1;let a=!0;switch(r.name){case"XYZ":if(5!==t)return!1;break;case"Fit":case"FitB":return 2===t;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==t)return!1;break;case"FitR":if(6!==t)return!1;a=!1;break;default:return!1}for(let n=2;n<t;n++){const t=e[n];if(!("number"==typeof t||a&&null===t))return!1}return!0},__privateAdd(h,s);let u=h;t.PDFLinkService=u,t.SimpleLinkService=class{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(e){}get rotation(){return 0}set rotation(e){}get isInPresentationMode(){return!1}async goToDestination(e){}goToPage(e){}addLinkAttributes(e,t,i=!1){d(e,{url:t,enabled:this.externalLinkEnabled})}getDestinationHash(e){return"#"}getAnchorUrl(e){return"#"}setHash(e){}executeNamedAction(e){}executeSetOCGState(e){}cachePageRef(e,t){}}},
/* 6 */
/***/
(e,t,i)=>{var r,a,n;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayerBuilder=void 0;var s=i(4),o=i(7),l=i(2);r=new WeakMap,a=new WeakSet,n=function(e){if(!this.div)return;let t=!1;switch(e){case l.PresentationModeState.FULLSCREEN:t=!0;break;case l.PresentationModeState.NORMAL:break;default:return}for(const i of this.div.childNodes)i.hasAttribute("data-internal-link")||(i.inert=t)},t.AnnotationLayerBuilder=class{constructor({pageDiv:e,pdfPage:t,linkService:i,downloadManager:n,annotationStorage:s=null,imageResourcesPath:l="",renderForms:c=!0,l10n:d=o.NullL10n,enableScripting:h=!1,hasJSActionsPromise:u=null,fieldObjectsPromise:p=null,annotationCanvasMap:_=null,accessibilityManager:f=null}){__privateAdd(this,a),__privateAdd(this,r,null),this.pageDiv=e,this.pdfPage=t,this.linkService=i,this.downloadManager=n,this.imageResourcesPath=l,this.renderForms=c,this.l10n=d,this.annotationStorage=s,this.enableScripting=h,this._hasJSActionsPromise=u||Promise.resolve(!1),this._fieldObjectsPromise=p||Promise.resolve(null),this._annotationCanvasMap=_,this._accessibilityManager=f,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=i.eventBus}async render(e,t="display"){var i;if(this.div){if(this._cancelled||!this.annotationLayer)return;return void this.annotationLayer.update({viewport:e.clone({dontFlip:!0})})}const[o,c,d]=await Promise.all([this.pdfPage.getAnnotations({intent:t}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;const h=this.div=document.createElement("div");h.className="annotationLayer",this.pageDiv.append(h),0!==o.length?(this.annotationLayer=new s.AnnotationLayer({div:h,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,l10n:this.l10n,page:this.pdfPage,viewport:e.clone({dontFlip:!0})}),await this.annotationLayer.render({annotations:o,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:c,fieldObjects:d}),this.linkService.isInPresentationMode&&__privateMethod(this,a,n).call(this,l.PresentationModeState.FULLSCREEN),__privateGet(this,r)||(__privateSet(this,r,(e=>{__privateMethod(this,a,n).call(this,e.state)})),null==(i=this._eventBus)||i._on("presentationmodechanged",__privateGet(this,r)))):this.hide()}cancel(){var e;this._cancelled=!0,__privateGet(this,r)&&(null==(e=this._eventBus)||e._off("presentationmodechanged",__privateGet(this,r)),__privateSet(this,r,null))}hide(){this.div&&(this.div.hidden=!0)}}},
/* 7 */
/***/
(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=r;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};function r(e,t){switch(e){case"find_match_count":e="find_match_count[".concat(1===t.total?"one":"other","]");break;case"find_match_count_limit":e="find_match_count_limit[".concat(1===t.limit?"one":"other","]")}return i[e]||""}i.print_progress_percent="{{progress}}%";const a={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",get:async(e,t=null,i=r(e,t))=>function(e,t){return t?e.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,((e,i)=>i in t?t[i]:"{{"+i+"}}")):e}(i,t),async translate(e){}};t.NullL10n=a},
/* 8 */
/***/
(e,t,i)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadManager=void 0;var a=i(4);function n(e,t){const i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=e,i.target="_parent","download"in i&&(i.download=t),(document.body||document.documentElement).append(i),i.click(),i.remove()}r=new WeakMap,t.DownloadManager=class{constructor(){__privateAdd(this,r,new WeakMap)}downloadUrl(e,t,i){(0,a.createValidAbsoluteUrl)(e,"http://example.com")&&n(e+"#pdfjs.action=download",t)}downloadData(e,t,i){n(URL.createObjectURL(new Blob([e],{type:i})),t)}openOrDownloadData(e,t,i){const r=(0,a.isPdfFile)(i)?"application/pdf":"";return this.downloadData(t,i,r),!1}download(e,t,i,r){n(URL.createObjectURL(e),i)}}},
/* 9 */
/***/
(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.WaitOnType=t.EventBus=t.AutomationEventBus=void 0,t.waitOnEventOrTimeout=function({target:e,name:t,delay:i=0}){return new Promise((function(n,s){if("object"!=typeof e||!t||"string"!=typeof t||!(Number.isInteger(i)&&i>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function o(i){e instanceof a?e._off(t,l):e.removeEventListener(t,l),d&&clearTimeout(d),n(i)}const l=o.bind(null,r.EVENT);e instanceof a?e._on(t,l):e.addEventListener(t,l);const c=o.bind(null,r.TIMEOUT),d=setTimeout(c,i)}))};const r={EVENT:"event",TIMEOUT:"timeout"};t.WaitOnType=r;class a{constructor(){__privateAdd(this,i,Object.create(null))}on(e,t,i=null){this._on(e,t,{external:!0,once:null==i?void 0:i.once})}off(e,t,i=null){this._off(e,t,{external:!0,once:null==i?void 0:i.once})}dispatch(e,t){const r=__privateGet(this,i)[e];if(!r||0===r.length)return;let a;for(const{listener:i,external:n,once:s}of r.slice(0))s&&this._off(e,i),n?(a||(a=[])).push(i):i(t);if(a){for(const e of a)e(t);a=null}}_on(e,t,r=null){var a;((a=__privateGet(this,i))[e]||(a[e]=[])).push({listener:t,external:!0===(null==r?void 0:r.external),once:!0===(null==r?void 0:r.once)})}_off(e,t,r=null){const a=__privateGet(this,i)[e];if(a)for(let i=0,n=a.length;i<n;i++)if(a[i].listener===t)return void a.splice(i,1)}}i=new WeakMap,t.EventBus=a,t.AutomationEventBus=class extends a{dispatch(e,t){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},
/* 10 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenericL10n=void 0,i(11);var r=i(7);const a={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};t.GenericL10n=class{constructor(e){const{webL10n:t}=document;this._lang=e,this._ready=new Promise(((i,r)=>{var n;t.setLanguage(a[null==(n=e)?void 0:n.toLowerCase()]||n,(()=>{i(t)}))}))}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(e,t=null,i=(0,r.getL10nFallback)(e,t)){return(await this._ready).get(e,t,i)}async translate(e){return(await this._ready).translate(e)}}},
/* 11 */
/***/
()=>{document.webL10n=function(e,t){var i={},r="",a="textContent",n="",s={},o="loading",l=!0;function c(e,t,i){t=t||function(e){},i=i||function(){};var r=new XMLHttpRequest;r.open("GET",e,l),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=utf-8"),r.onreadystatechange=function(){4==r.readyState&&(200==r.status||0===r.status?t(r.responseText):i())},r.onerror=i,r.ontimeout=i;try{r.send(null)}catch(a){i()}}function d(e,t,n,s){var o=e.replace(/[^\/]*$/,"")||"./";function l(e){return e.lastIndexOf("\\")<0?e:e.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}c(e,(function(e){r+=e,function(e,i){var r={},a=/^\s*|\s*$/,n=/^\s*#|^\s*$/,s=/^\s*\[(.*)\]\s*$/,d=/^\s*@import\s+url\((.*)\)\s*$/i,h=/^([^=\s]*)\s*=\s*(.+)$/;function u(e,i,c){var u=e.replace(a,"").split(/[\r\n]+/),_="*",f=t.split("-",1)[0],g=!1,m="";!function e(){for(;;){if(!u.length)return void c();var a=u.shift();if(!n.test(a)){if(i){if(m=s.exec(a)){_=m[1].toLowerCase(),g="*"!==_&&_!==t&&_!==f;continue}if(g)continue;if(m=d.exec(a))return void p(o+m[1],e)}var v=a.match(h);v&&3==v.length&&(r[v[1]]=l(v[2]))}}}()}function p(e,t){c(e,(function(e){u(e,!1,t)}),(function(){t()}))}u(e,!0,(function(){i(r)}))}(e,(function(e){for(var t in e){var r,s,o=t.lastIndexOf(".");o>0?(r=t.substring(0,o),s=t.substring(o+1)):(r=t,s=a),i[r]||(i[r]={}),i[r][s]=e[t]}n&&n()}))}),s)}function h(e,a){e&&(e=e.toLowerCase()),a=a||function(){},i={},r="",n="",n=e;var s=t.querySelectorAll('link[type="application/l10n"]'),l=s.length;if(0!==l){var c,h,u=0;h=function(){++u>=l&&(a(),o="complete")};for(var p=0;p<l;p++)new m(s[p]).load(e,h)}else{var _=(c=t.querySelector('script[type="application/l10n"]'))?JSON.parse(c.innerHTML):null;if(_&&_.locales&&_.default_locale){if(!(i=_.locales[e])){var f=_.default_locale.toLowerCase();for(var g in _.locales){if((g=g.toLowerCase())===e){i=_.locales[e];break}g===f&&(i=_.locales[f])}}a()}o="complete"}function m(e){var t=e.href;this.load=function(e,i){d(t,e,i,(function(){n="",i()}))}}}function u(e,t,r){var a=i[e];if(!a){if(!r)return null;a=r}var n={};for(var s in a){var o=a[s];o=_(o=p(o,t,e,s),t),n[s]=o}return n}function p(e,t,r,a){var n=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(e);if(!n||!n.length)return e;var o,l=n[1],c=n[2];return t&&c in t?o=t[c]:c in i&&(o=i[c]),l in s&&(e=(0,s[l])(e,o,r,a)),e}function _(e,t,r){return e.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(e,r){return t&&r in t?t[r]:r in i?i[r]:e}))}function f(e){var i=function(e){if(!e)return{};var t=e.getAttribute("data-l10n-id"),i=e.getAttribute("data-l10n-args"),r={};if(i)try{r=JSON.parse(i)}catch(a){}return{id:t,args:r}}(e);if(i.id){var r=u(i.id,i.args);if(r){if(r[a]){if(0===function(e){if(e.children)return e.children.length;if(void 0!==e.childElementCount)return e.childElementCount;for(var t=0,i=0;i<e.childNodes.length;i++)t+=1===e.nodeType?1:0;return t}(e))e[a]=r[a];else{for(var n=e.childNodes,s=!1,o=0,l=n.length;o<l;o++)3===n[o].nodeType&&/\S/.test(n[o].nodeValue)&&(s?n[o].nodeValue="":(n[o].nodeValue=r[a],s=!0));if(!s){var c=t.createTextNode(r[a]);e.prepend(c)}}delete r[a]}for(var d in r)e[d]=r[d]}}}return s.plural=function(e,t,r,o){var l=parseFloat(t);if(isNaN(l))return e;if(o!=a)return e;s._pluralRules||(s._pluralRules=function(e){function t(e,t){return-1!==t.indexOf(e)}function i(e,t,i){return t<=e&&e<=i}var r={0:function(e){return"other"},1:function(e){return i(e%100,3,10)?"few":0===e?"zero":i(e%100,11,99)?"many":2==e?"two":1==e?"one":"other"},2:function(e){return 0!==e&&e%10==0?"many":2==e?"two":1==e?"one":"other"},3:function(e){return 1==e?"one":"other"},4:function(e){return i(e,0,1)?"one":"other"},5:function(e){return i(e,0,2)&&2!=e?"one":"other"},6:function(e){return 0===e?"zero":e%10==1&&e%100!=11?"one":"other"},7:function(e){return 2==e?"two":1==e?"one":"other"},8:function(e){return i(e,3,6)?"few":i(e,7,10)?"many":2==e?"two":1==e?"one":"other"},9:function(e){return 0===e||1!=e&&i(e%100,1,19)?"few":1==e?"one":"other"},10:function(e){return i(e%10,2,9)&&!i(e%100,11,19)?"few":e%10!=1||i(e%100,11,19)?"other":"one"},11:function(e){return i(e%10,2,4)&&!i(e%100,12,14)?"few":e%10==0||i(e%10,5,9)||i(e%100,11,14)?"many":e%10==1&&e%100!=11?"one":"other"},12:function(e){return i(e,2,4)?"few":1==e?"one":"other"},13:function(e){return i(e%10,2,4)&&!i(e%100,12,14)?"few":1!=e&&i(e%10,0,1)||i(e%10,5,9)||i(e%100,12,14)?"many":1==e?"one":"other"},14:function(e){return i(e%100,3,4)?"few":e%100==2?"two":e%100==1?"one":"other"},15:function(e){return 0===e||i(e%100,2,10)?"few":i(e%100,11,19)?"many":1==e?"one":"other"},16:function(e){return e%10==1&&11!=e?"one":"other"},17:function(e){return 3==e?"few":0===e?"zero":6==e?"many":2==e?"two":1==e?"one":"other"},18:function(e){return 0===e?"zero":i(e,0,2)&&0!==e&&2!=e?"one":"other"},19:function(e){return i(e,2,10)?"few":i(e,0,1)?"one":"other"},20:function(e){return!i(e%10,3,4)&&e%10!=9||i(e%100,10,19)||i(e%100,70,79)||i(e%100,90,99)?e%1e6==0&&0!==e?"many":e%10!=2||t(e%100,[12,72,92])?e%10!=1||t(e%100,[11,71,91])?"other":"one":"two":"few"},21:function(e){return 0===e?"zero":1==e?"one":"other"},22:function(e){return i(e,0,1)||i(e,11,99)?"one":"other"},23:function(e){return i(e%10,1,2)||e%20==0?"one":"other"},24:function(e){return i(e,3,10)||i(e,13,19)?"few":t(e,[2,12])?"two":t(e,[1,11])?"one":"other"}},a={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[e.replace(/-.*$/,"")];return a in r?r[a]:function(){return"other"}}(n));var c="["+s._pluralRules(l)+"]";return 0===l&&r+"[zero]"in i?e=i[r+"[zero]"][o]:1==l&&r+"[one]"in i?e=i[r+"[one]"][o]:2==l&&r+"[two]"in i?e=i[r+"[two]"][o]:r+c in i?e=i[r+c][o]:r+"[other]"in i&&(e=i[r+"[other]"][o]),e},{get:function(e,t,i){var r,n=e.lastIndexOf("."),s=a;n>0&&(s=e.substring(n+1),e=e.substring(0,n)),i&&((r={})[s]=i);var o=u(e,t,r);return o&&s in o?o[s]:"{{"+e+"}}"},getData:function(){return i},getText:function(){return r},getLanguage:function(){return n},setLanguage:function(e,t){h(e,(function(){t&&t()}))},getDirection:function(){var e=n.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(e)>=0?"rtl":"ltr"},translate:function(e){for(var i=function(e){return e?e.querySelectorAll("*[data-l10n-id]"):[]}(e=e||t.documentElement),r=i.length,a=0;a<r;a++)f(i[a]);f(e)},getReadyState:function(){return o},ready:function(i){i&&("complete"==o||"interactive"==o?e.setTimeout((function(){i()})):t.addEventListener&&t.addEventListener("localized",(function e(){t.removeEventListener("localized",e),i()})))}}}(window,document)},
/* 12 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFHistory=void 0,t.isDestArraysEqual=o,t.isDestHashesEqual=s;var r=i(2),a=i(9);function n(){return document.location.hash}function s(e,t){return"string"==typeof e&&"string"==typeof t&&(e===t||(0,r.parseQueryString)(e).get("nameddest")===t)}function o(e,t){function i(e,t){if(typeof e!=typeof t)return!1;if(Array.isArray(e)||Array.isArray(t))return!1;if(null!==e&&"object"==typeof e&&null!==t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!i(e[r],t[r]))return!1;return!0}return e===t||Number.isNaN(e)&&Number.isNaN(t)}if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(let r=0,a=e.length;r<a;r++)if(!i(e[r],t[r]))return!1;return!0}t.PDFHistory=class{constructor({linkService:e,eventBus:t}){this.linkService=e,this.eventBus=t,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",(()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",(e=>{this._isPagesLoaded=!!e.pagesCount}),{once:!0})}))}initialize({fingerprint:e,resetHistory:t=!1,updateUrl:i=!1}){if(!e||"string"!=typeof e)return;this._initialized&&this.reset();const r=""!==this._fingerprint&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=!0===i,this._initialized=!0,this._bindEvents();const a=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=n(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(a,!0)||t){const{hash:e,page:i,rotation:a}=this._parseCurrentHash(!0);return!e||r||t?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:e,page:i,rotation:a},!0)}const s=a.destination;this._updateInternalState(s,a.uid,!0),void 0!==s.rotation&&(this._initialRotation=s.rotation),s.dest?(this._initialBookmark=JSON.stringify(s.dest),this._destination.page=null):s.hash?this._initialBookmark=s.hash:s.page&&(this._initialBookmark="page=".concat(s.page))}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:t,pageNumber:i}){if(!this._initialized)return;if(e&&"string"!=typeof e)return;if(!Array.isArray(t))return;if(!this._isValidPage(i)&&(null!==i||this._destination))return;const r=e||JSON.stringify(t);if(!r)return;let a=!1;if(this._destination&&(s(this._destination.hash,r)||o(this._destination.dest,t))){if(this._destination.page)return;a=!0}this._popStateInProgress&&!a||(this._pushOrReplaceState({dest:t,hash:r,page:i,rotation:this.linkService.rotation},a),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((()=>{this._popStateInProgress=!1}))))}pushPage(e){var t;this._initialized&&this._isValidPage(e)&&(null==(t=this._destination)?void 0:t.page)!==e&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:"page=".concat(e),page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then((()=>{this._popStateInProgress=!1})))))}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(e,t=!1){const i=t||!this._destination,r={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:e};let a;if(this._updateInternalState(e,r.uid),this._updateUrl&&(null==e?void 0:e.hash)){const t=document.location.href.split("#")[0];t.startsWith("file://")||(a="".concat(t,"#").concat(e.hash))}i?window.history.replaceState(r,"",a):window.history.pushState(r,"",a)}_tryPushCurrentPosition(e=!1){if(!this._position)return;let t=this._position;if(e&&(t=Object.assign(Object.create(null),this._position),t.temporary=!0),!this._destination)return void this._pushOrReplaceState(t);if(this._destination.temporary)return void this._pushOrReplaceState(t,!0);if(this._destination.hash===t.hash)return;if(!this._destination.page&&this._numPositionUpdates<=50)return;let i=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(void 0!==this._destination.dest||!this._destination.first)return;i=!0}this._pushOrReplaceState(t,i)}_isValidPage(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}_isValidState(e,t=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!t)return!1;{if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;const[t]=performance.getEntriesByType("navigation");if("reload"!==(null==t?void 0:t.type))return!1}}return!(!Number.isInteger(e.uid)||e.uid<0)&&null!==e.destination&&"object"==typeof e.destination}_updateInternalState(e,t,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&(null==e?void 0:e.temporary)&&delete e.temporary,this._destination=e,this._uid=t,this._maxUid=Math.max(this._maxUid,t),this._numPositionUpdates=0}_parseCurrentHash(e=!1){const t=unescape(n()).substring(1),i=(0,r.parseQueryString)(t),a=i.get("nameddest")||"";let s=0|i.get("page");return(!this._isValidPage(s)||e&&a.length>0)&&(s=null),{hash:t,page:s,rotation:this.linkService.rotation}}_updateViewarea({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout((()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null}),1e3))}_popState({state:e}){const t=n(),i=this._currentHash!==t;if(this._currentHash=t,!e){this._uid++;const{hash:e,page:t,rotation:i}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:e,page:t,rotation:i},!0)}if(!this._isValidState(e))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,(0,a.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((()=>{this._blockHashChange--})));const s=e.destination;this._updateInternalState(s,e.uid,!0),(0,r.isValidRotation)(s.rotation)&&(this.linkService.rotation=s.rotation),s.dest?this.linkService.goToDestination(s.dest):s.hash?this.linkService.setHash(s.hash):s.page&&(this.linkService.page=s.page),Promise.resolve().then((()=>{this._popStateInProgress=!1}))}_pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},
/* 13 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S,k,x,C,E,P;Object.defineProperty(t,"__esModule",{value:!0}),t.PDFPageView=void 0;var M=i(4),T=i(2),I=i(14),D=i(6),R=i(15),L=i(7),F=i(5),N=i(16),O=i(17),B=i(18),G=i(19),W=i(20);const j=R.compatibilityParams.maxCanvasPixels||16777216,V=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new F.SimpleLinkService}});r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakSet,_=function(){const{viewport:e}=this;if(this.pdfPage){if(__privateGet(this,o)===e.rotation)return;__privateSet(this,o,e.rotation)}(0,M.setLayerDimensions)(this.div,e,!0,!1)},f=new WeakSet,g=async function(){let e=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(t){e=t}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:e})}},m=new WeakSet,v=async function(){let e=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(t){e=t}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:e})}},b=new WeakSet,y=async function(){let e=null;try{const e=await this.xfaLayer.render(this.viewport,"display");(null==e?void 0:e.textDivs)&&this._textHighlighter&&__privateMethod(this,x,C).call(this,e.textDivs)}catch(t){e=t}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:e})}},A=new WeakSet,w=async function(){const{pdfPage:e,textLayer:t,viewport:i}=this;if(!t)return;let r=null;try{if(!t.renderingDone){const i=e.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});t.setTextContentSource(i)}await t.render(i)}catch(a){if(a instanceof M.AbortException)return;r=a}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:t.numTextDivs,error:r}),__privateMethod(this,S,k).call(this)},S=new WeakSet,k=async function(){var e,t,i;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new N.StructTreeLayerBuilder);const r=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),a=null==(e=this.structTreeLayer)?void 0:e.render(r);a&&(null==(t=this.canvas)||t.append(a)),null==(i=this.structTreeLayer)||i.show()},x=new WeakSet,C=async function(e){const t=await this.pdfPage.getTextContent(),i=[];for(const r of t.items)i.push(r.str);this._textHighlighter.setTextMapping(e,i),this._textHighlighter.enable()},E=new WeakSet,P=async function(e,t=null){if(e===this.renderTask&&(this.renderTask=null),t instanceof M.RenderingCancelledException)__privateSet(this,l,null);else if(__privateSet(this,l,t),this.renderingState=T.RenderingStates.FINISHED,this._resetZoomLayer(!0),__privateGet(this,h).regularAnnotations=!e.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:__privateGet(this,l)}),t)throw t},t.PDFPageView=class{constructor(e){var t,i,g,v,y;__privateAdd(this,p),__privateAdd(this,f),__privateAdd(this,m),__privateAdd(this,b),__privateAdd(this,A),__privateAdd(this,S),__privateAdd(this,x),__privateAdd(this,E),__privateAdd(this,r,M.AnnotationMode.ENABLE_FORMS),__privateAdd(this,a,!1),__privateAdd(this,n,null),__privateAdd(this,s,null),__privateAdd(this,o,null),__privateAdd(this,l,null),__privateAdd(this,c,T.RenderingStates.INITIAL),__privateAdd(this,d,T.TextLayerMode.ENABLE),__privateAdd(this,h,{directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0}),__privateAdd(this,u,new WeakMap);const w=e.container,k=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,__privateSet(this,n,e.layerProperties||V),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||T.DEFAULT_SCALE,this.viewport=k,this.pdfPageRotate=k.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,__privateSet(this,d,null!=(t=e.textLayerMode)?t:T.TextLayerMode.ENABLE),__privateSet(this,r,null!=(i=e.annotationMode)?i:M.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=e.imageResourcesPath||"",this.isOffscreenCanvasSupported=null==(g=e.isOffscreenCanvasSupported)||g,this.maxCanvasPixels=null!=(v=e.maxCanvasPixels)?v:j,this.pageColors=e.pageColors||null,this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.l10n=e.l10n||L.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!(null==(y=this.renderingQueue)?void 0:y.hasViewer()),this._container=w,e.useOnlyCssZoom&&(this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const C=document.createElement("div");if(C.className="page",C.setAttribute("data-page-number",this.id),C.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then((e=>{C.setAttribute("aria-label",e)})),this.div=C,__privateMethod(this,p,_).call(this),null==w||w.append(C),this._isStandalone){null==w||w.style.setProperty("--scale-factor",this.scale*M.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:t}=e;t&&t.then((e=>{t===this._optionalContentConfigPromise&&(__privateGet(this,h).initialOptionalContent=e.hasInitialVisibility)}))}}get renderingState(){return __privateGet(this,c)}set renderingState(e){if(e!==__privateGet(this,c))switch(__privateSet(this,c,e),__privateGet(this,s)&&(clearTimeout(__privateGet(this,s)),__privateSet(this,s,null)),e){case T.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case T.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),__privateSet(this,s,setTimeout((()=>{this.div.classList.add("loading"),__privateSet(this,s,null)}),0));break;case T.RenderingStates.INITIAL:case T.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading")}}setPdfPage(e){var t,i,r;!this._isStandalone||"CanvasText"!==(null==(t=this.pageColors)?void 0:t.foreground)&&"Canvas"!==(null==(i=this.pageColors)?void 0:i.background)||null==(r=this._container)||r.style.setProperty("--hcm-highligh-filter",e.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight")),this.pdfPage=e,this.pdfPageRotate=e.rotate;const a=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*M.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:a}),__privateMethod(this,p,_).call(this),this.reset()}destroy(){var e;this.reset(),null==(e=this.pdfPage)||e.cleanup()}get _textHighlighter(){return(0,M.shadow)(this,"_textHighlighter",new B.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:__privateGet(this,n).call(this).findController}))}_resetZoomLayer(e=!1){if(!this.zoomLayer)return;const t=this.zoomLayer.firstChild;__privateGet(this,u).delete(t),t.width=0,t.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:e=!1,keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:i=!1,keepXfaLayer:r=!1,keepTextLayer:a=!1}={}){var n,s,o,l,c;this.cancelRendering({keepAnnotationLayer:t,keepAnnotationEditorLayer:i,keepXfaLayer:r,keepTextLayer:a}),this.renderingState=T.RenderingStates.INITIAL;const d=this.div,h=d.childNodes,p=e&&this.zoomLayer||null,_=t&&(null==(n=this.annotationLayer)?void 0:n.div)||null,f=i&&(null==(s=this.annotationEditorLayer)?void 0:s.div)||null,g=r&&(null==(o=this.xfaLayer)?void 0:o.div)||null,m=a&&(null==(l=this.textLayer)?void 0:l.div)||null;for(let u=h.length-1;u>=0;u--){const e=h[u];switch(e){case p:case _:case f:case g:case m:continue}e.remove()}d.removeAttribute("data-loaded"),_&&this.annotationLayer.hide(),f&&this.annotationEditorLayer.hide(),g&&this.xfaLayer.hide(),m&&this.textLayer.hide(),null==(c=this.structTreeLayer)||c.hide(),p||(this.canvas&&(__privateGet(this,u).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:e=0,rotation:t=null,optionalContentConfigPromise:i=null,drawingDelay:r=-1}){var n;this.scale=e||this.scale,"number"==typeof t&&(this.rotation=t),i instanceof Promise&&(this._optionalContentConfigPromise=i,i.then((e=>{i===this._optionalContentConfigPromise&&(__privateGet(this,h).initialOptionalContent=e.hasInitialVisibility)}))),__privateGet(this,h).directDrawing=!0;const s=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*M.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:s}),__privateMethod(this,p,_).call(this),this._isStandalone&&(null==(n=this._container)||n.style.setProperty("--scale-factor",this.viewport.scale)),this.canvas){let e=!1;if(__privateGet(this,a))if(0===this.maxCanvasPixels)e=!0;else if(this.maxCanvasPixels>0){const{width:t,height:i}=this.viewport,{sx:r,sy:a}=this.outputScale;e=(Math.floor(t)*r|0)*(Math.floor(i)*a|0)>this.maxCanvasPixels}const t=!e&&r>=0&&r<1e3;if(t||e){if(t&&this.renderingState!==T.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:r}),this.renderingState=T.RenderingStates.FINISHED,__privateGet(this,h).directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!t,hideTextLayer:t}),t)return;return void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:__privateGet(this,l)})}this.zoomLayer||this.canvas.hidden||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:t=!1,keepXfaLayer:i=!1,keepTextLayer:r=!1,cancelExtraDelay:a=0}={}){var n;this.renderTask&&(this.renderTask.cancel(a),this.renderTask=null),this.resume=null,!this.textLayer||r&&this.textLayer.div||(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),!this.annotationLayer||e&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),!this.annotationEditorLayer||t&&this.annotationEditorLayer.div||(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),!this.xfaLayer||i&&this.xfaLayer.div||(this.xfaLayer.cancel(),this.xfaLayer=null,null==(n=this._textHighlighter)||n.disable())}cssTransform({target:e,redrawAnnotationLayer:t=!1,redrawAnnotationEditorLayer:i=!1,redrawXfaLayer:r=!1,redrawTextLayer:a=!1,hideTextLayer:n=!1}){var s;if(!e.hasAttribute("zooming")){e.setAttribute("zooming",!0);const{style:t}=e;t.width=t.height=""}const o=__privateGet(this,u).get(e);if(this.viewport!==o){const t=this.viewport.rotation-o.rotation,i=Math.abs(t);let r=1,a=1;if(90===i||270===i){const{width:e,height:t}=this.viewport;r=t/e,a=e/t}e.style.transform="rotate(".concat(t,"deg) scale(").concat(r,", ").concat(a,")")}t&&this.annotationLayer&&__privateMethod(this,f,g).call(this),i&&this.annotationEditorLayer&&__privateMethod(this,m,v).call(this),r&&this.xfaLayer&&__privateMethod(this,b,y).call(this),this.textLayer&&(n?(this.textLayer.hide(),null==(s=this.structTreeLayer)||s.hide()):a&&__privateMethod(this,A,w).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}async draw(){this.renderingState!==T.RenderingStates.INITIAL&&this.reset();const{div:e,l10n:t,pageColors:i,pdfPage:s,viewport:o}=this;if(!s)throw this.renderingState=T.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=T.RenderingStates.RUNNING;const l=document.createElement("div");if(l.classList.add("canvasWrapper"),e.append(l),this.textLayer||__privateGet(this,d)===T.TextLayerMode.DISABLE||s.isPureXfa||(this._accessibilityManager||(this._accessibilityManager=new O.TextAccessibilityManager),this.textLayer=new G.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:__privateGet(this,d)===T.TextLayerMode.ENABLE_PERMISSIONS}),e.append(this.textLayer.div)),!this.annotationLayer&&__privateGet(this,r)!==M.AnnotationMode.DISABLE){const{annotationStorage:i,downloadManager:a,enableScripting:o,fieldObjectsPromise:l,hasJSActionsPromise:c,linkService:d}=__privateGet(this,n).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new D.AnnotationLayerBuilder({pageDiv:e,pdfPage:s,annotationStorage:i,imageResourcesPath:this.imageResourcesPath,renderForms:__privateGet(this,r)===M.AnnotationMode.ENABLE_FORMS,linkService:d,downloadManager:a,l10n:t,enableScripting:o,hasJSActionsPromise:c,fieldObjectsPromise:l,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const{width:c,height:h}=o,p=document.createElement("canvas");p.setAttribute("role","presentation"),p.hidden=!0;const _=!(!(null==i?void 0:i.background)||!(null==i?void 0:i.foreground));let S=e=>{_&&!e||(p.hidden=!1,S=null)};l.append(p),this.canvas=p;const k=p.getContext("2d",{alpha:!1}),x=this.outputScale=new T.OutputScale;if(0===this.maxCanvasPixels){const e=1/this.scale;x.sx*=e,x.sy*=e,__privateSet(this,a,!0)}else if(this.maxCanvasPixels>0){const e=c*h,t=Math.sqrt(this.maxCanvasPixels/e);x.sx>t||x.sy>t?(x.sx=t,x.sy=t,__privateSet(this,a,!0)):__privateSet(this,a,!1)}const C=(0,T.approximateFraction)(x.sx),R=(0,T.approximateFraction)(x.sy);p.width=(0,T.roundToDivide)(c*x.sx,C[0]),p.height=(0,T.roundToDivide)(h*x.sy,R[0]);const{style:L}=p;L.width=(0,T.roundToDivide)(c,C[1])+"px",L.height=(0,T.roundToDivide)(h,R[1])+"px",__privateGet(this,u).set(p,o);const F={canvasContext:k,transform:x.scaled?[x.sx,0,0,x.sy,0,0]:null,viewport:o,annotationMode:__privateGet(this,r),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:i},N=this.renderTask=this.pdfPage.render(F);N.onContinue=e=>{if(null==S||S(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this))return this.renderingState=T.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=T.RenderingStates.RUNNING,e()});e()};const B=N.promise.then((async()=>{var i;if(null==S||S(!0),await __privateMethod(this,E,P).call(this,N),__privateMethod(this,A,w).call(this),this.annotationLayer&&await __privateMethod(this,f,g).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:r}=__privateGet(this,n).call(this);if(!r)return;this.annotationEditorLayer=new I.AnnotationEditorLayerBuilder({uiManager:r,pageDiv:e,pdfPage:s,l10n:t,accessibilityManager:this._accessibilityManager,annotationLayer:null==(i=this.annotationLayer)?void 0:i.annotationLayer})}__privateMethod(this,m,v).call(this)}),(e=>(e instanceof M.RenderingCancelledException||null==S||S(!0),__privateMethod(this,E,P).call(this,N,e))));if(s.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&e.append(this.xfaLayer.div);else{const{annotationStorage:t,linkService:i}=__privateGet(this,n).call(this);this.xfaLayer=new W.XfaLayerBuilder({pageDiv:e,pdfPage:s,annotationStorage:t,linkService:i})}__privateMethod(this,b,y).call(this)}return e.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),B}setPageLabel(e){this.pageLabel="string"==typeof e?e:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:e,initialOptionalContent:t,regularAnnotations:i}=__privateGet(this,h);return e&&t&&i?this.canvas:null}}},
/* 14 */
/***/
(e,t,i)=>{var r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayerBuilder=void 0;var n=i(4),s=i(7);r=new WeakMap,a=new WeakMap,t.AnnotationEditorLayerBuilder=class{constructor(e){__privateAdd(this,r,null),__privateAdd(this,a,void 0),this.pageDiv=e.pageDiv,this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n||s.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,__privateSet(this,a,e.uiManager),__privateSet(this,r,e.annotationLayer||null)}async render(e,t="display"){if("display"!==t)return;if(this._cancelled)return;const i=e.clone({dontFlip:!0});if(this.div)return this.annotationEditorLayer.update({viewport:i}),void this.show();const s=this.div=document.createElement("div");s.className="annotationEditorLayer",s.tabIndex=0,s.hidden=!0,s.dir=__privateGet(this,a).direction,this.pageDiv.append(s),this.annotationEditorLayer=new n.AnnotationEditorLayer({uiManager:__privateGet(this,a),div:s,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:i,annotationLayer:__privateGet(this,r)});const o={viewport:i,div:s,annotations:null,intent:t};this.annotationEditorLayer.render(o),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&!this.annotationEditorLayer.isEmpty&&(this.div.hidden=!1)}}},
/* 15 */
/***/
(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compatibilityParams=t.OptionKind=t.AppOptions=void 0;const i=Object.create(null);t.compatibilityParams=i;{const e=navigator.userAgent||"",t=navigator.platform||"",r=navigator.maxTouchPoints||1,a=/Android/.test(e);(/\b(iPad|iPhone|iPod)(?=;)/.test(e)||"MacIntel"===t&&r>1||a)&&(i.maxCanvasPixels=5242880)}const r={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};t.OptionKind=r;const a={annotationEditorMode:{value:0,kind:r.VIEWER+r.PREFERENCE},annotationMode:{value:2,kind:r.VIEWER+r.PREFERENCE},cursorToolOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},defaultZoomDelay:{value:400,kind:r.VIEWER+r.PREFERENCE},defaultZoomValue:{value:"",kind:r.VIEWER+r.PREFERENCE},disableHistory:{value:!1,kind:r.VIEWER},disablePageLabels:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePermissions:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:r.VIEWER+r.PREFERENCE},enableScripting:{value:!0,kind:r.VIEWER+r.PREFERENCE},enableStampEditor:{value:!0,kind:r.VIEWER+r.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:r.VIEWER},externalLinkTarget:{value:0,kind:r.VIEWER+r.PREFERENCE},historyUpdateUrl:{value:!1,kind:r.VIEWER+r.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:r.VIEWER+r.PREFERENCE},imageResourcesPath:{value:"./images/",kind:r.VIEWER},maxCanvasPixels:{value:16777216,kind:r.VIEWER},forcePageColors:{value:!1,kind:r.VIEWER+r.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:r.VIEWER+r.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:r.VIEWER+r.PREFERENCE},pdfBugEnabled:{value:!1,kind:r.VIEWER+r.PREFERENCE},printResolution:{value:150,kind:r.VIEWER},sidebarViewOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},scrollModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},spreadModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},textLayerMode:{value:1,kind:r.VIEWER+r.PREFERENCE},viewerCssTheme:{value:0,kind:r.VIEWER+r.PREFERENCE},viewOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},cMapPacked:{value:!0,kind:r.API},cMapUrl:{value:"../web/cmaps/",kind:r.API},disableAutoFetch:{value:!1,kind:r.API+r.PREFERENCE},disableFontFace:{value:!1,kind:r.API+r.PREFERENCE},disableRange:{value:!1,kind:r.API+r.PREFERENCE},disableStream:{value:!1,kind:r.API+r.PREFERENCE},docBaseUrl:{value:"",kind:r.API},enableXfa:{value:!0,kind:r.API+r.PREFERENCE},fontExtraProperties:{value:!1,kind:r.API},isEvalSupported:{value:!0,kind:r.API},isOffscreenCanvasSupported:{value:!0,kind:r.API},maxImageSize:{value:-1,kind:r.API},pdfBug:{value:!1,kind:r.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:r.API},verbosity:{value:1,kind:r.API},workerPort:{value:null,kind:r.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:r.WORKER}};a.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:r.VIEWER},a.disablePreferences={value:!1,kind:r.VIEWER},a.locale={value:navigator.language||"en-US",kind:r.VIEWER},a.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:r.VIEWER};const n=Object.create(null);class s{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){var t;const r=n[e];if(void 0!==r)return r;const s=a[e];return void 0!==s?null!=(t=i[e])?t:s.value:void 0}static getAll(e=null){var t;const s=Object.create(null);for(const o in a){const l=a[o];if(e){if(0==(e&l.kind))continue;if(e===r.PREFERENCE){const e=l.value,t=typeof e;if("boolean"===t||"string"===t||"number"===t&&Number.isInteger(e)){s[o]=e;continue}throw new Error("Invalid type for preference: ".concat(o))}}const c=n[o];s[o]=void 0!==c?c:null!=(t=i[o])?t:l.value}return s}static set(e,t){n[e]=t}static setAll(e){for(const t in e)n[t]=e[t]}static remove(e){delete n[e]}}t.AppOptions=s,s._hasUserOptions=function(){return Object.keys(n).length>0}},
/* 16 */
/***/
(e,t,i)=>{var r,a,n,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.StructTreeLayerBuilder=void 0;var l=i(2);const c={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},d=/^H(\d+)$/;r=new WeakMap,a=new WeakSet,n=function(e,t){const{alt:i,id:r,lang:a}=e;void 0!==i&&t.setAttribute("aria-label",(0,l.removeNullCharacters)(i)),void 0!==r&&t.setAttribute("aria-owns",r),void 0!==a&&t.setAttribute("lang",(0,l.removeNullCharacters)(a,!0))},s=new WeakSet,o=function(e){if(!e)return null;const t=document.createElement("span");if("role"in e){const{role:i}=e,r=i.match(d);r?(t.setAttribute("role","heading"),t.setAttribute("aria-level",r[1])):c[i]&&t.setAttribute("role",c[i])}if(__privateMethod(this,a,n).call(this,e,t),e.children)if(1===e.children.length&&"id"in e.children[0])__privateMethod(this,a,n).call(this,e.children[0],t);else for(const i of e.children)t.append(__privateMethod(this,s,o).call(this,i));return t},t.StructTreeLayerBuilder=class{constructor(){__privateAdd(this,a),__privateAdd(this,s),__privateAdd(this,r,void 0)}get renderingDone(){return void 0!==__privateGet(this,r)}render(e){if(void 0!==__privateGet(this,r))return __privateGet(this,r);const t=__privateMethod(this,s,o).call(this,e);return null==t||t.classList.add("structTree"),__privateSet(this,r,t)}hide(){__privateGet(this,r)&&!__privateGet(this,r).hidden&&(__privateGet(this,r).hidden=!0)}show(){var e;(null==(e=__privateGet(this,r))?void 0:e.hidden)&&(__privateGet(this,r).hidden=!1)}}},
/* 17 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d;Object.defineProperty(t,"__esModule",{value:!0}),t.TextAccessibilityManager=void 0;var h=i(2);const u=class e{constructor(){__privateAdd(this,c),__privateAdd(this,r,!1),__privateAdd(this,a,null),__privateAdd(this,n,new Map),__privateAdd(this,s,new Map)}setTextMapping(e){__privateSet(this,a,e)}enable(){if(__privateGet(this,r))throw new Error("TextAccessibilityManager is already enabled.");if(!__privateGet(this,a))throw new Error("Text divs and strings have not been set.");if(__privateSet(this,r,!0),__privateSet(this,a,__privateGet(this,a).slice()),__privateGet(this,a).sort(__privateMethod(e,o,l)),__privateGet(this,n).size>0){const e=__privateGet(this,a);for(const[t,i]of __privateGet(this,n))document.getElementById(t)?__privateMethod(this,c,d).call(this,t,e[i]):__privateGet(this,n).delete(t)}for(const[e,t]of __privateGet(this,s))this.addPointerInTextLayer(e,t);__privateGet(this,s).clear()}disable(){__privateGet(this,r)&&(__privateGet(this,s).clear(),__privateSet(this,a,null),__privateSet(this,r,!1))}removePointerInTextLayer(e){if(!__privateGet(this,r))return void __privateGet(this,s).delete(e);const t=__privateGet(this,a);if(!t||0===t.length)return;const{id:i}=e,o=__privateGet(this,n).get(i);if(void 0===o)return;const l=t[o];__privateGet(this,n).delete(i);let c=l.getAttribute("aria-owns");(null==c?void 0:c.includes(i))&&(c=c.split(" ").filter((e=>e!==i)).join(" "),c?l.setAttribute("aria-owns",c):(l.removeAttribute("aria-owns"),l.setAttribute("role","presentation")))}addPointerInTextLayer(t,i){const{id:u}=t;if(!u)return null;if(!__privateGet(this,r))return __privateGet(this,s).set(t,i),null;i&&this.removePointerInTextLayer(t);const p=__privateGet(this,a);if(!p||0===p.length)return null;const _=(0,h.binarySearchFirstItem)(p,(i=>{var r;return __privateMethod(r=e,o,l).call(r,t,i)<0})),f=Math.max(0,_-1),g=p[f];__privateMethod(this,c,d).call(this,u,g),__privateGet(this,n).set(u,f);const m=g.parentNode;return(null==m?void 0:m.classList.contains("markedContent"))?m.id:null}moveElementInDOM(t,i,r,a){const n=this.addPointerInTextLayer(r,a);if(!t.hasChildNodes())return t.append(i),n;const s=Array.from(t.childNodes).filter((e=>e!==i));if(0===s.length)return n;const c=r||i,d=(0,h.binarySearchFirstItem)(s,(t=>{var i;return __privateMethod(i=e,o,l).call(i,c,t)<0}));return 0===d?s[0].before(i):s[d-1].after(i),n}};r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakSet,l=function(e,t){const i=e.getBoundingClientRect(),r=t.getBoundingClientRect();if(0===i.width&&0===i.height)return 1;if(0===r.width&&0===r.height)return-1;const a=i.y,n=i.y+i.height,s=i.y+i.height/2,o=r.y,l=r.y+r.height,c=r.y+r.height/2;return s<=o&&c>=n?-1:c<=a&&s>=l?1:i.x+i.width/2-(r.x+r.width/2)},c=new WeakSet,d=function(e,t){const i=t.getAttribute("aria-owns");(null==i?void 0:i.includes(e))||t.setAttribute("aria-owns",i?"".concat(i," ").concat(e):e),t.removeAttribute("role")},__privateAdd(u,o);let p=u;t.TextAccessibilityManager=p},
/* 18 */
/***/
(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextHighlighter=void 0,t.TextHighlighter=class{constructor({findController:e,eventBus:t,pageIndex:i}){this.findController=e,this.matches=[],this.eventBus=t,this.pageIdx=i,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(e,t){this.textDivs=e,this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=e=>{e.pageIndex!==this.pageIdx&&-1!==e.pageIndex||this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(e,t){if(!e)return[];const{textContentItemsStr:i}=this;let r=0,a=0;const n=i.length-1,s=[];for(let o=0,l=e.length;o<l;o++){let l=e[o];for(;r!==n&&l>=a+i[r].length;)a+=i[r].length,r++;i.length;const c={begin:{divIdx:r,offset:l-a}};for(l+=t[o];r!==n&&l>a+i[r].length;)a+=i[r].length,r++;c.end={divIdx:r,offset:l-a},s.push(c)}return s}_renderMatches(e){if(0===e.length)return;const{findController:t,pageIdx:i}=this,{textContentItemsStr:r,textDivs:a}=this,n=i===t.selected.pageIdx,s=t.selected.matchIdx;let o=null;const l=void 0;function c(e,t){const i=e.divIdx;return a[i].textContent="",d(i,0,e.offset,t)}function d(e,t,i,n){let s=a[e];if(s.nodeType===Node.TEXT_NODE){const t=document.createElement("span");s.before(t),t.append(s),a[e]=t,s=t}const o=r[e].substring(t,i),l=document.createTextNode(o);if(n){const e=document.createElement("span");return e.className="".concat(n," appended"),e.append(l),s.append(e),n.includes("selected")?e.offsetLeft:0}return s.append(l),0}let h=s,u=h+1;if(t.state.highlightAll)h=0,u=e.length;else if(!n)return;let p=-1,_=-1;for(let f=h;f<u;f++){const r=e[f],h=r.begin;if(h.divIdx===p&&h.offset===_)continue;p=h.divIdx,_=h.offset;const u=r.end,g=n&&f===s,m=g?" selected":"";let v=0;if(o&&h.divIdx===o.divIdx?d(o.divIdx,o.offset,h.offset):(null!==o&&d(o.divIdx,o.offset,l),c(h)),h.divIdx===u.divIdx)v=d(h.divIdx,h.offset,u.offset,"highlight"+m);else{v=d(h.divIdx,h.offset,l,"highlight begin"+m);for(let e=h.divIdx+1,t=u.divIdx;e<t;e++)a[e].className="highlight middle"+m;c(u,"highlight end"+m)}o=u,g&&t.scrollMatchIntoView({element:a[h.divIdx],selectedLeft:v,pageIndex:i,matchIndex:s})}o&&d(o.divIdx,o.offset,l)}_updateMatches(e=!1){if(!this.enabled&&!e)return;const{findController:t,matches:i,pageIdx:r}=this,{textContentItemsStr:a,textDivs:n}=this;let s=-1;for(const c of i){for(let e=Math.max(s,c.begin.divIdx),t=c.end.divIdx;e<=t;e++){const t=n[e];t.textContent=a[e],t.className=""}s=c.end.divIdx+1}if(!(null==t?void 0:t.highlightMatches)||e)return;const o=t.pageMatches[r]||null,l=t.pageMatchesLength[r]||null;this.matches=this._convertMatches(o,l),this._renderMatches(this.matches)}}},
/* 19 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d;Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerBuilder=void 0;var h=i(4),u=i(2);r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakSet,l=function(){this.renderingDone=!0;const e=document.createElement("div");e.className="endOfContent",this.div.append(e),__privateMethod(this,c,d).call(this)},c=new WeakSet,d=function(){const{div:e}=this;e.addEventListener("mousedown",(t=>{const i=e.querySelector(".endOfContent");if(!i)return;let r=t.target!==e;if(r&&(r="none"!==getComputedStyle(i).getPropertyValue("-moz-user-select")),r){const r=e.getBoundingClientRect(),a=Math.max(0,(t.pageY-r.top)/r.height);i.style.top=(100*a).toFixed(2)+"%"}i.classList.add("active")})),e.addEventListener("mouseup",(()=>{const t=e.querySelector(".endOfContent");t&&(t.style.top="",t.classList.remove("active"))})),e.addEventListener("copy",(e=>{if(!__privateGet(this,r)){const t=document.getSelection();e.clipboardData.setData("text/plain",(0,u.removeNullCharacters)((0,h.normalizeUnicode)(t.toString())))}e.preventDefault(),e.stopPropagation()}))},t.TextLayerBuilder=class{constructor({highlighter:e=null,accessibilityManager:t=null,isOffscreenCanvasSupported:i=!0,enablePermissions:l=!1}){__privateAdd(this,o),__privateAdd(this,c),__privateAdd(this,r,!1),__privateAdd(this,a,0),__privateAdd(this,n,0),__privateAdd(this,s,null),this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=e,this.accessibilityManager=t,this.isOffscreenCanvasSupported=i,__privateSet(this,r,!0===l),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(e){var t,i,r;if(!__privateGet(this,s))throw new Error('No "textContentSource" parameter specified.');const c=e.scale*(globalThis.devicePixelRatio||1),{rotation:d}=e;if(this.renderingDone){const t=d!==__privateGet(this,a),i=c!==__privateGet(this,n);return(t||i)&&(this.hide(),(0,h.updateTextLayer)({container:this.div,viewport:e,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:i,mustRotate:t}),__privateSet(this,n,c),__privateSet(this,a,d)),void this.show()}this.cancel(),null==(t=this.highlighter)||t.setTextMapping(this.textDivs,this.textContentItemsStr),null==(i=this.accessibilityManager)||i.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,h.renderTextLayer)({textContentSource:__privateGet(this,s),container:this.div,viewport:e,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,__privateMethod(this,o,l).call(this),__privateSet(this,n,c),__privateSet(this,a,d),this.show(),null==(r=this.accessibilityManager)||r.enable()}hide(){var e;this.div.hidden||(null==(e=this.highlighter)||e.disable(),this.div.hidden=!0)}show(){var e;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,null==(e=this.highlighter)||e.enable())}cancel(){var e,t;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null==(e=this.highlighter)||e.disable(),null==(t=this.accessibilityManager)||t.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(e){this.cancel(),__privateSet(this,s,e)}}},
/* 20 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayerBuilder=void 0;var r=i(4);t.XfaLayerBuilder=class{constructor({pageDiv:e,pdfPage:t,annotationStorage:i=null,linkService:r,xfaHtml:a=null}){this.pageDiv=e,this.pdfPage=t,this.annotationStorage=i,this.linkService=r,this.xfaHtml=a,this.div=null,this._cancelled=!1}async render(e,t="display"){if("print"===t){const i={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t},a=document.createElement("div");return this.pageDiv.append(a),i.div=a,r.XfaLayer.render(i)}const i=await this.pdfPage.getXfa();if(this._cancelled||!i)return{textDivs:[]};const a={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};return this.div?r.XfaLayer.update(a):(this.div=document.createElement("div"),this.pageDiv.append(this.div),a.div=this.div,r.XfaLayer.render(a))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},
/* 21 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFScriptingManager=void 0;var r=i(22),a=i(23);class n extends a.PDFScriptingManager{constructor(e){e.externalServices||window.addEventListener("updatefromsandbox",(t=>{e.eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})})),e.externalServices||(e.externalServices={createScripting:({sandboxBundleSrc:e})=>new r.GenericScripting(e)}),e.docProperties||(e.docProperties=e=>(0,r.docProperties)(e)),super(e)}}t.PDFScriptingManager=n},
/* 22 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenericScripting=void 0,t.docProperties=async function(e){const t="".split("#")[0];let{info:i,metadata:a,contentDispositionFilename:n,contentLength:s}=await e.getMetadata();if(!s){const{length:t}=await e.getDownloadInfo();s=t}return{...i,baseURL:t,filesize:s,filename:n||(0,r.getPdfFilenameFromUrl)(""),metadata:null==a?void 0:a.getRaw(),authors:null==a?void 0:a.get("dc:creator"),numPages:e.numPages,URL:""}};var r=i(4);t.GenericScripting=class{constructor(e){this._ready=(0,r.loadScript)(e,!0).then((()=>window.pdfjsSandbox.QuickJSSandbox()))}async createSandbox(e){(await this._ready).create(e)}async dispatchEventInSandbox(e){const t=await this._ready;setTimeout((()=>t.dispatchEvent(e)),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}},
/* 23 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S;Object.defineProperty(t,"__esModule",{value:!0}),t.PDFScriptingManager=void 0;var k=i(2),x=i(4);r=new WeakMap,a=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakMap,_=new WeakSet,f=async function(e){var t,i;const r=__privateGet(this,c),a=r.isInPresentationMode||r.isChangingPresentationMode,{id:n,siblings:o,command:d,value:h}=e;if(!n){switch(d){case"clear":case"error":case"println":break;case"layout":if(!a){const e=(0,k.apiPageLayoutToViewerModes)(h);r.spreadMode=e.spreadMode}break;case"page-num":r.currentPageNumber=h+1;break;case"print":await r.pagesPromise,__privateGet(this,s).dispatch("print",{source:this});break;case"zoom":a||(r.currentScaleValue=h);break;case"SaveAs":__privateGet(this,s).dispatch("download",{source:this});break;case"FirstPage":r.currentPageNumber=1;break;case"LastPage":r.currentPageNumber=r.pagesCount;break;case"NextPage":r.nextPage();break;case"PrevPage":r.previousPage();break;case"ZoomViewIn":a||r.increaseScale();break;case"ZoomViewOut":a||r.decreaseScale();break;case"WillPrintFinished":null==(t=__privateGet(this,p))||t.resolve(),__privateSet(this,p,null)}return}if(a&&e.focus)return;delete e.id,delete e.siblings;const u=o?[n,...o]:[n];for(const s of u){const t=document.querySelector('[data-element-id="'.concat(s,'"]'));t?t.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):null==(i=__privateGet(this,l))||i.annotationStorage.setValue(s,e)}},g=new WeakSet,m=async function(e,t=!1){const i=__privateGet(this,l),a=this._visitedPages;if(t&&__privateSet(this,r,new x.PromiseCapability),!__privateGet(this,r))return;const n=__privateGet(this,c).getPageView(e-1);if((null==n?void 0:n.renderingState)!==k.RenderingStates.FINISHED)return void this._pageOpenPending.add(e);this._pageOpenPending.delete(e);const s=(async()=>{var t,r;const s=await(a.has(e)?null:null==(t=n.pdfPage)?void 0:t.getJSActions());i===__privateGet(this,l)&&await(null==(r=__privateGet(this,u))?void 0:r.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:s}))})();a.set(e,s)},v=new WeakSet,b=async function(e){var t;const i=__privateGet(this,l),a=this._visitedPages;if(!__privateGet(this,r))return;if(this._pageOpenPending.has(e))return;const n=a.get(e);n&&(a.set(e,null),await n,i===__privateGet(this,l)&&await(null==(t=__privateGet(this,u))?void 0:t.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e})))},y=new WeakSet,A=function(){if(__privateSet(this,a,new x.PromiseCapability),__privateGet(this,u))throw new Error("#initScripting: Scripting already exists.");return __privateGet(this,o).createScripting({sandboxBundleSrc:__privateGet(this,h)})},w=new WeakSet,S=async function(){var e,t,i;if(!__privateGet(this,u))return __privateSet(this,l,null),void(null==(e=__privateGet(this,a))||e.resolve());__privateGet(this,r)&&(await Promise.race([__privateGet(this,r).promise,new Promise((e=>{setTimeout(e,1e3)}))]).catch((()=>{})),__privateSet(this,r,null)),__privateSet(this,l,null);try{await __privateGet(this,u).destroySandbox()}catch(n){}null==(t=__privateGet(this,p))||t.reject(new Error("Scripting destroyed.")),__privateSet(this,p,null);for(const[r,a]of this._internalEvents)__privateGet(this,s)._off(r,a);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),__privateSet(this,u,null),__privateSet(this,d,!1),null==(i=__privateGet(this,a))||i.resolve()},t.PDFScriptingManager=class{constructor({eventBus:e,sandboxBundleSrc:t=null,externalServices:i=null,docProperties:f=null}){__privateAdd(this,_),__privateAdd(this,g),__privateAdd(this,v),__privateAdd(this,y),__privateAdd(this,w),__privateAdd(this,r,null),__privateAdd(this,a,null),__privateAdd(this,n,null),__privateAdd(this,s,null),__privateAdd(this,o,null),__privateAdd(this,l,null),__privateAdd(this,c,null),__privateAdd(this,d,!1),__privateAdd(this,h,null),__privateAdd(this,u,null),__privateAdd(this,p,null),__privateSet(this,s,e),__privateSet(this,h,t),__privateSet(this,o,i),__privateSet(this,n,f)}setViewer(e){__privateSet(this,c,e)}async setDocument(e){var t;if(__privateGet(this,l)&&await __privateMethod(this,w,S).call(this),__privateSet(this,l,e),!e)return;const[i,a,o]=await Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(i||o){if(e===__privateGet(this,l)){try{__privateSet(this,u,__privateMethod(this,y,A).call(this))}catch(h){return void(await __privateMethod(this,w,S).call(this))}this._internalEvents.set("updatefromsandbox",(e=>{(null==e?void 0:e.source)===window&&__privateMethod(this,_,f).call(this,e.detail)})),this._internalEvents.set("dispatcheventinsandbox",(e=>{var t;null==(t=__privateGet(this,u))||t.dispatchEventInSandbox(e.detail)})),this._internalEvents.set("pagechanging",(({pageNumber:e,previous:t})=>{e!==t&&(__privateMethod(this,v,b).call(this,t),__privateMethod(this,g,m).call(this,e))})),this._internalEvents.set("pagerendered",(({pageNumber:e})=>{this._pageOpenPending.has(e)&&e===__privateGet(this,c).currentPageNumber&&__privateMethod(this,g,m).call(this,e)})),this._internalEvents.set("pagesdestroy",(async()=>{var e,t;await __privateMethod(this,v,b).call(this,__privateGet(this,c).currentPageNumber),await(null==(e=__privateGet(this,u))?void 0:e.dispatchEventInSandbox({id:"doc",name:"WillClose"})),null==(t=__privateGet(this,r))||t.resolve()}));for(const[e,t]of this._internalEvents)__privateGet(this,s)._on(e,t);try{const t=await __privateGet(this,n).call(this,e);if(e!==__privateGet(this,l))return;await __privateGet(this,u).createSandbox({objects:i,calculationOrder:a,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...t,actions:o}}),__privateGet(this,s).dispatch("sandboxcreated",{source:this})}catch(h){return void(await __privateMethod(this,w,S).call(this))}await(null==(t=__privateGet(this,u))?void 0:t.dispatchEventInSandbox({id:"doc",name:"Open"})),await __privateMethod(this,g,m).call(this,__privateGet(this,c).currentPageNumber,!0),Promise.resolve().then((()=>{e===__privateGet(this,l)&&__privateSet(this,d,!0)}))}}else await __privateMethod(this,w,S).call(this)}async dispatchWillSave(){var e;return null==(e=__privateGet(this,u))?void 0:e.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(){var e;return null==(e=__privateGet(this,u))?void 0:e.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(){var e;if(__privateGet(this,u)){await(null==(e=__privateGet(this,p))?void 0:e.promise),__privateSet(this,p,new x.PromiseCapability);try{await __privateGet(this,u).dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(t){throw __privateGet(this,p).resolve(),__privateSet(this,p,null),t}await __privateGet(this,p).promise}}async dispatchDidPrint(){var e;return null==(e=__privateGet(this,u))?void 0:e.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var e;return(null==(e=__privateGet(this,a))?void 0:e.promise)||null}get ready(){return __privateGet(this,d)}get _internalEvents(){return(0,x.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,x.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,x.shadow)(this,"_visitedPages",new Map)}}},
/* 24 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFSinglePageViewer=void 0;var r=i(2),a=i(25);class n extends a.PDFViewer{_resetView(){super._resetView(),this._scrollMode=r.ScrollMode.PAGE,this._spreadMode=r.SpreadMode.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}t.PDFSinglePageViewer=n},
/* 25 */
/***/
(e,t,i)=>{var r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S,k,x,C,E,P,M,T,I,D,R,L,F,N,O,B,G,W,j,V,U,z,H,q,X,K,$,Y,Z,J,Q;Object.defineProperty(t,"__esModule",{value:!0}),t.PagesCountLimit=t.PDFViewer=t.PDFPageViewBuffer=void 0;var ee=i(4),te=i(2),ie=i(7),re=i(13),ae=i(26),ne=i(5);const se={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function oe(e){return Object.values(ee.AnnotationEditorType).includes(e)&&e!==ee.AnnotationEditorType.DISABLE}t.PagesCountLimit=se;class le{constructor(e){__privateAdd(this,n),__privateAdd(this,r,new Set),__privateAdd(this,a,0),__privateSet(this,a,e)}push(e){const t=__privateGet(this,r);t.has(e)&&t.delete(e),t.add(e),t.size>__privateGet(this,a)&&__privateMethod(this,n,s).call(this)}resize(e,t=null){__privateSet(this,a,e);const i=__privateGet(this,r);if(t){const e=i.size;let r=1;for(const a of i)if(t.has(a.id)&&(i.delete(a),i.add(a)),++r>e)break}for(;i.size>__privateGet(this,a);)__privateMethod(this,n,s).call(this)}has(e){return __privateGet(this,r).has(e)}[Symbol.iterator](){return __privateGet(this,r).keys()}}r=new WeakMap,a=new WeakMap,n=new WeakSet,s=function(){const e=__privateGet(this,r).keys().next().value;null==e||e.destroy(),__privateGet(this,r).delete(e)},t.PDFPageViewBuffer=le,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakMap,_=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,b=new WeakMap,y=new WeakMap,A=new WeakMap,w=new WeakMap,S=new WeakMap,k=new WeakSet,x=function(){const e=this;return{get annotationEditorUIManager(){return __privateGet(e,d)},get annotationStorage(){var t;return null==(t=e.pdfDocument)?void 0:t.annotationStorage},get downloadManager(){return e.downloadManager},get enableScripting(){return!!e._scriptingManager},get fieldObjectsPromise(){var t;return null==(t=e.pdfDocument)?void 0:t.getFieldObjects()},get findController(){return e.findController},get hasJSActionsPromise(){var t;return null==(t=e.pdfDocument)?void 0:t.hasJSActions()},get linkService(){return e.linkService}}},C=new WeakSet,E=function(e){const t={annotationEditorMode:__privateGet(this,c),annotationMode:__privateGet(this,h),textLayerMode:__privateGet(this,S)};return e?(e.includes(ee.PermissionFlag.COPY)||__privateGet(this,S)!==te.TextLayerMode.ENABLE||(t.textLayerMode=te.TextLayerMode.ENABLE_PERMISSIONS),e.includes(ee.PermissionFlag.MODIFY_CONTENTS)||(t.annotationEditorMode=ee.AnnotationEditorType.DISABLE),e.includes(ee.PermissionFlag.MODIFY_ANNOTATIONS)||e.includes(ee.PermissionFlag.FILL_INTERACTIVE_FORMS)||__privateGet(this,h)!==ee.AnnotationMode.ENABLE_FORMS||(t.annotationMode=ee.AnnotationMode.ENABLE),t):t},P=new WeakSet,M=function(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const e=new Promise((e=>{__privateSet(this,A,(()=>{"hidden"===document.visibilityState&&(e(),document.removeEventListener("visibilitychange",__privateGet(this,A)),__privateSet(this,A,null))})),document.addEventListener("visibilitychange",__privateGet(this,A))}));return Promise.race([this._onePageRenderedCapability.promise,e])},T=new WeakSet,I=function(e,t){const i=document.getSelection(),{focusNode:r,anchorNode:a}=i;if(a&&r&&i.containsNode(__privateGet(this,g))){if(__privateGet(this,f)||e===te.TextLayerMode.ENABLE_PERMISSIONS)return t.preventDefault(),void t.stopPropagation();__privateSet(this,f,!0);const i=this.container.style.cursor;this.container.style.cursor="wait";const r=e=>__privateSet(this,m,"Escape"===e.key);window.addEventListener("keydown",r),this.getAllText().then((async e=>{null!==e&&await navigator.clipboard.writeText(e)})).catch((e=>{})).finally((()=>{__privateSet(this,f,!1),__privateSet(this,m,!1),window.removeEventListener("keydown",r),this.container.style.cursor=i})),t.preventDefault(),t.stopPropagation()}},D=new WeakSet,R=function(){if(this._scrollMode!==te.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const e=this._currentPageNumber,t=__privateGet(this,y),i=this.viewer;if(i.textContent="",t.pages.length=0,this._spreadMode!==te.SpreadMode.NONE||this.isInPresentationMode){const r=new Set,a=this._spreadMode-1;-1===a?r.add(e-1):e%2!==a?(r.add(e-1),r.add(e)):(r.add(e-2),r.add(e-1));const n=document.createElement("div");if(n.className="spread",this.isInPresentationMode){const e=document.createElement("div");e.className="dummyPage",n.append(e)}for(const e of r){const i=this._pages[e];i&&(n.append(i.div),t.pages.push(i))}i.append(n)}else{const r=this._pages[e-1];i.append(r.div),t.pages.push(r)}t.scrollDown=e>=t.previousPageNumber,t.previousPageNumber=e},L=new WeakSet,F=function(e,t=null){const{div:i,id:r}=e;if(this._currentPageNumber!==r&&this._setCurrentPageNumber(r),this._scrollMode===te.ScrollMode.PAGE&&(__privateMethod(this,D,R).call(this),this.update()),!t&&!this.isInPresentationMode){const e=i.offsetLeft+i.clientLeft,r=e+i.clientWidth,{scrollLeft:a,clientWidth:n}=this.container;(this._scrollMode===te.ScrollMode.HORIZONTAL||e<a||r>a+n)&&(t={left:0,top:0})}(0,te.scrollIntoView)(i,t),!this._currentScaleValue&&this._location&&(this._location=null)},N=new WeakSet,O=function(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15},B=new WeakSet,G=function(e,t,{noScroll:i=!1,preset:r=!1,drawingDelay:a=-1}){if(this._currentScaleValue=t.toString(),__privateMethod(this,N,O).call(this,e))return void(r&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t}));this.viewer.style.setProperty("--scale-factor",e*ee.PixelsPerInch.PDF_TO_CSS_UNITS);const n=a>=0&&a<1e3;if(this.refresh(!0,{scale:e,drawingDelay:n?a:-1}),n&&__privateSet(this,w,setTimeout((()=>{__privateSet(this,w,null),this.refresh()}),a)),this._currentScale=e,!i){let e,t=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(t=this._location.pageNumber,e=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:t,destArray:e,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:r?t:void 0}),this.defaultRenderingQueue&&this.update()},W=new WeakSet,j=function(){return this._spreadMode!==te.SpreadMode.NONE&&this._scrollMode!==te.ScrollMode.HORIZONTAL?2:1},V=new WeakSet,U=function(e,t){let i=parseFloat(e);if(i>0)t.preset=!1,__privateMethod(this,B,G).call(this,i,e,t);else{const r=this._pages[this._currentPageNumber-1];if(!r)return;let a=te.SCROLLBAR_PADDING,n=te.VERTICAL_PADDING;this.isInPresentationMode?(a=n=4,this._spreadMode!==te.SpreadMode.NONE&&(a*=2)):this.removePageBorders?a=n=0:this._scrollMode===te.ScrollMode.HORIZONTAL&&([a,n]=[n,a]);const s=(this.container.clientWidth-a)/r.width*r.scale/__privateGet(this,W,j),o=(this.container.clientHeight-n)/r.height*r.scale;switch(e){case"page-actual":i=1;break;case"page-width":i=s;break;case"page-height":i=o;break;case"page-fit":i=Math.min(s,o);break;case"auto":const e=(0,te.isPortraitOrientation)(r)?s:Math.min(o,s);i=Math.min(te.MAX_AUTO_SCALE,e);break;default:return}t.preset=!0,__privateMethod(this,B,G).call(this,i,e,t)}},z=new WeakSet,H=function(){const e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&__privateMethod(this,V,U).call(this,this._currentScaleValue,{noScroll:!0}),__privateMethod(this,L,F).call(this,e)},q=new WeakSet,X=async function(e){var t,i;if(e.pdfPage)return e.pdfPage;try{const r=await this.pdfDocument.getPage(e.id);return e.pdfPage||e.setPdfPage(r),(null==(i=(t=this.linkService)._cachedPageNumber)?void 0:i.call(t,r.ref))||this.linkService.cachePageRef(e.id,r.ref),r}catch(r){return null}},K=new WeakSet,$=function(e){var t,i;if(1===(null==(t=e.first)?void 0:t.id))return!0;if((null==(i=e.last)?void 0:i.id)===this.pagesCount)return!1;switch(this._scrollMode){case te.ScrollMode.PAGE:return __privateGet(this,y).scrollDown;case te.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},Y=new WeakSet,Z=function(e=this.container.clientHeight){e!==__privateGet(this,v)&&(__privateSet(this,v,e),te.docStyle.setProperty("--viewer-container-height","".concat(e,"px")))},J=new WeakSet,Q=function(e){for(const t of e)if(t.target===this.container){__privateMethod(this,Y,Z).call(this,Math.floor(t.borderBoxSize[0].blockSize)),__privateSet(this,u,null);break}},t.PDFViewer=class{constructor(e){var t,i,r,a,n,s;__privateAdd(this,k),__privateAdd(this,C),__privateAdd(this,P),__privateAdd(this,T),__privateAdd(this,D),__privateAdd(this,L),__privateAdd(this,N),__privateAdd(this,B),__privateAdd(this,W),__privateAdd(this,V),__privateAdd(this,z),__privateAdd(this,q),__privateAdd(this,K),__privateAdd(this,Y),__privateAdd(this,J),__privateAdd(this,o,null),__privateAdd(this,l,null),__privateAdd(this,c,ee.AnnotationEditorType.NONE),__privateAdd(this,d,null),__privateAdd(this,h,ee.AnnotationMode.ENABLE_FORMS),__privateAdd(this,u,null),__privateAdd(this,p,null),__privateAdd(this,_,!1),__privateAdd(this,f,!1),__privateAdd(this,g,null),__privateAdd(this,m,!1),__privateAdd(this,v,0),__privateAdd(this,b,new ResizeObserver(__privateMethod(this,J,Q).bind(this))),__privateAdd(this,y,null),__privateAdd(this,A,null),__privateAdd(this,w,null),__privateAdd(this,S,te.TextLayerMode.ENABLE);const x="3.11.174";if(ee.version!==x)throw new Error('The API version "'.concat(ee.version,'" does not match the Viewer version "').concat(x,'".'));if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,"DIV"!==(null==(t=this.container)?void 0:t.tagName)||"DIV"!==(null==(i=this.viewer)?void 0:i.tagName))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");__privateGet(this,b).observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new ne.SimpleLinkService,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,__privateSet(this,l,e.altTextManager||null),this.findController&&(this.findController.onIsPageVisible=e=>this._getVisiblePages().ids.has(e)),this._scriptingManager=e.scriptingManager||null,__privateSet(this,S,null!=(r=e.textLayerMode)?r:te.TextLayerMode.ENABLE),__privateSet(this,h,null!=(a=e.annotationMode)?a:ee.AnnotationMode.ENABLE_FORMS),__privateSet(this,c,null!=(n=e.annotationEditorMode)?n:ee.AnnotationEditorType.NONE),this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,e.useOnlyCssZoom&&(e.maxCanvasPixels=0),this.isOffscreenCanvasSupported=null==(s=e.isOffscreenCanvasSupported)||s,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n||ie.NullL10n,__privateSet(this,_,e.enablePermissions||!1),this.pageColors=e.pageColors||null,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new ae.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue,this.scroll=(0,te.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=te.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),__privateMethod(this,Y,Z).call(this),this.eventBus._on("thumbnailrendered",(({pageNumber:e,pdfPage:t})=>{const i=this._pages[e-1];__privateGet(this,o).has(i)||null==t||t.cleanup()}))}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}getCachedPageViews(){return new Set(__privateGet(this,o))}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every((e=>null==e?void 0:e.pdfPage))}get renderForms(){return __privateGet(this,h)===ee.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&this._setCurrentPageNumber(e,!0)}_setCurrentPageNumber(e,t=!1){var i,r;if(this._currentPageNumber===e)return t&&__privateMethod(this,z,H).call(this),!0;if(!(0<e&&e<=this.pagesCount))return!1;const a=this._currentPageNumber;return this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:null!=(r=null==(i=this._pageLabels)?void 0:i[e-1])?r:null,previous:a}),t&&__privateMethod(this,z,H).call(this),!0}get currentPageLabel(){var e,t;return null!=(t=null==(e=this._pageLabels)?void 0:e[this._currentPageNumber-1])?t:null}set currentPageLabel(e){if(!this.pdfDocument)return;let t=0|e;if(this._pageLabels){const i=this._pageLabels.indexOf(e);i>=0&&(t=i+1)}this._setCurrentPageNumber(t,!0)}get currentScale(){return this._currentScale!==te.UNKNOWN_SCALE?this._currentScale:te.DEFAULT_SCALE}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&__privateMethod(this,V,U).call(this,e,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&__privateMethod(this,V,U).call(this,e,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!(0,te.isValidRotation)(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument)return;if((e%=360)<0&&(e+=360),this._pagesRotation===e)return;this._pagesRotation=e;const t=this._currentPageNumber;this.refresh(!0,{rotation:e}),this._currentScaleValue&&__privateMethod(this,V,U).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const e=[],t=[];for(let i=1,r=this.pdfDocument.numPages;i<=r;++i){if(__privateGet(this,m))return null;t.length=0;const r=await this.pdfDocument.getPage(i),{items:a}=await r.getTextContent();for(const e of a)e.str&&t.push(e.str),e.hasEOL&&t.push("\n");e.push((0,te.removeNullCharacters)(t.join("")))}return e.join("\n")}setDocument(e){var t,i;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),null==(t=this.findController)||t.setDocument(null),null==(i=this._scriptingManager)||i.setDocument(null),__privateGet(this,d)&&(__privateGet(this,d).destroy(),__privateSet(this,d,null))),this.pdfDocument=e,!e)return;const r=e.numPages,a=e.getPage(1),n=e.getOptionalContentConfig(),s=__privateGet(this,_)?e.getPermissions():Promise.resolve();if(r>se.FORCE_SCROLL_MODE_PAGE){const e=this._scrollMode=te.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e})}this._pagesCapability.promise.then((()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:r})}),(()=>{})),this._onBeforeDraw=e=>{const t=this._pages[e.pageNumber-1];t&&__privateGet(this,o).push(t)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=e=>{e.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:e.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,__privateGet(this,A)&&(document.removeEventListener("visibilitychange",__privateGet(this,A)),__privateSet(this,A,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([a,s]).then((([t,i])=>{var a,s;if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(t),this._optionalContentConfigPromise=n;const{annotationEditorMode:o,annotationMode:h,textLayerMode:u}=__privateMethod(this,C,E).call(this,i);if(u!==te.TextLayerMode.DISABLE){const e=__privateSet(this,g,document.createElement("div"));e.id="hiddenCopyElement",this.viewer.before(e)}if(o!==ee.AnnotationEditorType.DISABLE){const t=o;e.isPureXfa||oe(t)&&(__privateSet(this,d,new ee.AnnotationEditorUIManager(this.container,this.viewer,__privateGet(this,l),this.eventBus,e,this.pageColors)),t!==ee.AnnotationEditorType.NONE&&__privateGet(this,d).updateMode(t))}const _=__privateMethod(this,k,x).bind(this),f=this._scrollMode===te.ScrollMode.PAGE?null:this.viewer,m=this.currentScale,v=t.getViewport({scale:m*ee.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",v.scale),"CanvasText"!==(null==(a=this.pageColors)?void 0:a.foreground)&&"Canvas"!==(null==(s=this.pageColors)?void 0:s.background)||this.viewer.style.setProperty("--hcm-highligh-filter",e.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let e=1;e<=r;++e){const t=new re.PDFPageView({container:f,eventBus:this.eventBus,id:e,scale:m,defaultViewport:v.clone(),optionalContentConfigPromise:n,renderingQueue:this.renderingQueue,textLayerMode:u,annotationMode:h,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:_});this._pages.push(t)}const b=this._pages[0];b&&(b.setPdfPage(t),this.linkService.cachePageRef(1,t.ref)),this._scrollMode===te.ScrollMode.PAGE?__privateMethod(this,D,R).call(this):this._spreadMode!==te.SpreadMode.NONE&&this._updateSpreadMode(),__privateMethod(this,P,M).call(this).then((async()=>{var t,i;if(null==(t=this.findController)||t.setDocument(e),null==(i=this._scriptingManager)||i.setDocument(e),__privateGet(this,g)&&(__privateSet(this,p,__privateMethod(this,T,I).bind(this,u)),document.addEventListener("copy",__privateGet(this,p))),__privateGet(this,d)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:__privateGet(this,c)}),e.loadingParams.disableAutoFetch||r>se.FORCE_LAZY_PAGE_INIT)return void this._pagesCapability.resolve();let a=r-1;if(a<=0)this._pagesCapability.resolve();else for(let n=2;n<=r;++n){const t=e.getPage(n).then((e=>{const t=this._pages[n-1];t.pdfPage||t.setPdfPage(e),this.linkService.cachePageRef(n,e.ref),0==--a&&this._pagesCapability.resolve()}),(e=>{0==--a&&this._pagesCapability.resolve()}));n%se.PAUSE_EAGER_PAGE_INIT==0&&await t}})),this.eventBus.dispatch("pagesinit",{source:this}),e.getMetadata().then((({info:t})=>{e===this.pdfDocument&&t.Language&&(this.viewer.lang=t.Language)})),this.defaultRenderingQueue&&this.update()})).catch((e=>{this._pagesCapability.reject(e)}))}setPageLabels(e){var t,i;if(this.pdfDocument){e&&Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:this._pageLabels=null;for(let e=0,r=this._pages.length;e<r;e++)this._pages[e].setPageLabel(null!=(i=null==(t=this._pageLabels)?void 0:t[e])?i:null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=te.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,__privateSet(this,o,new le(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new ee.PromiseCapability,this._onePageRenderedCapability=new ee.PromiseCapability,this._pagesCapability=new ee.PromiseCapability,this._scrollMode=te.ScrollMode.VERTICAL,this._previousScrollMode=te.ScrollMode.UNKNOWN,this._spreadMode=te.SpreadMode.NONE,__privateSet(this,y,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),__privateGet(this,A)&&(document.removeEventListener("visibilitychange",__privateGet(this,A)),__privateSet(this,A,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),__privateGet(this,g)&&(document.removeEventListener("copy",__privateGet(this,p)),__privateSet(this,p,null),__privateGet(this,g).remove(),__privateSet(this,g,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}pageLabelToPageNumber(e){if(!this._pageLabels)return null;const t=this._pageLabels.indexOf(e);return t<0?null:t+1}scrollPageIntoView({pageNumber:e,destArray:t=null,allowNegativeOffset:i=!1,ignoreDestinationZoom:r=!1}){if(!this.pdfDocument)return;const a=Number.isInteger(e)&&this._pages[e-1];if(!a)return;if(this.isInPresentationMode||!t)return void this._setCurrentPageNumber(e,!0);let n,s,o=0,l=0,c=0,d=0;const h=a.rotation%180!=0,u=(h?a.height:a.width)/a.scale/ee.PixelsPerInch.PDF_TO_CSS_UNITS,p=(h?a.width:a.height)/a.scale/ee.PixelsPerInch.PDF_TO_CSS_UNITS;let _=0;switch(t[1].name){case"XYZ":o=t[2],l=t[3],_=t[4],o=null!==o?o:0,l=null!==l?l:p;break;case"Fit":case"FitB":_="page-fit";break;case"FitH":case"FitBH":l=t[2],_="page-width",null===l&&this._location?(o=this._location.left,l=this._location.top):("number"!=typeof l||l<0)&&(l=p);break;case"FitV":case"FitBV":o=t[2],c=u,d=p,_="page-height";break;case"FitR":o=t[2],l=t[3],c=t[4]-o,d=t[5]-l;let e=te.SCROLLBAR_PADDING,i=te.VERTICAL_PADDING;this.removePageBorders&&(e=i=0),n=(this.container.clientWidth-e)/c/ee.PixelsPerInch.PDF_TO_CSS_UNITS,s=(this.container.clientHeight-i)/d/ee.PixelsPerInch.PDF_TO_CSS_UNITS,_=Math.min(Math.abs(n),Math.abs(s));break;default:return}if(r||(_&&_!==this._currentScale?this.currentScaleValue=_:this._currentScale===te.UNKNOWN_SCALE&&(this.currentScaleValue=te.DEFAULT_SCALE_VALUE)),"page-fit"===_&&!t[4])return void __privateMethod(this,L,F).call(this,a);const f=[a.viewport.convertToViewportPoint(o,l),a.viewport.convertToViewportPoint(o+c,l+d)];let g=Math.min(f[0][0],f[1][0]),m=Math.min(f[0][1],f[1][1]);i||(g=Math.max(g,0),m=Math.max(m,0)),__privateMethod(this,L,F).call(this,a,{left:g,top:m})}_updateLocation(e){const t=this._currentScale,i=this._currentScaleValue,r=parseFloat(i)===t?Math.round(1e4*t)/100:i,a=e.id,n=this._pages[a-1],s=this.container,o=n.getPagePoint(s.scrollLeft-e.x,s.scrollTop-e.y),l=Math.round(o[0]),c=Math.round(o[1]);let d="#page=".concat(a);this.isInPresentationMode||(d+="&zoom=".concat(r,",").concat(l,",").concat(c)),this._location={pageNumber:a,scale:r,top:c,left:l,rotation:this._pagesRotation,pdfOpenParams:d}}update(){const e=this._getVisiblePages(),t=e.views,i=t.length;if(0===i)return;const r=Math.max(10,2*i+1);__privateGet(this,o).resize(r,e.ids),this.renderingQueue.renderHighestPriority(e);const a=this._spreadMode===te.SpreadMode.NONE&&(this._scrollMode===te.ScrollMode.PAGE||this._scrollMode===te.ScrollMode.VERTICAL),n=this._currentPageNumber;let s=!1;for(const o of t){if(o.percent<100)break;if(o.id===n&&a){s=!0;break}}this._setCurrentPageNumber(s?n:t[0].id),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===te.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===te.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const e=this._scrollMode===te.ScrollMode.PAGE?__privateGet(this,y).pages:this._pages,t=this._scrollMode===te.ScrollMode.HORIZONTAL,i=t&&this._isContainerRtl;return(0,te.getVisibleElements)({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:t,rtl:i})}cleanup(){for(const e of this._pages)e.renderingState!==te.RenderingStates.FINISHED&&e.reset()}_cancelRendering(){for(const e of this._pages)e.cancelRendering()}forceRendering(e){const t=e||this._getVisiblePages(),i=__privateMethod(this,K,$).call(this,t),r=this._spreadMode!==te.SpreadMode.NONE&&this._scrollMode!==te.ScrollMode.HORIZONTAL,a=this.renderingQueue.getHighestPriority(t,this._pages,i,r);return!!a&&(__privateMethod(this,q,X).call(this,a).then((()=>{this.renderingQueue.renderView(a)})),!0)}get hasEqualPageSizes(){const e=this._pages[0];for(let t=1,i=this._pages.length;t<i;++t){const i=this._pages[t];if(i.width!==e.width||i.height!==e.height)return!1}return!0}getPagesOverview(){let e;return this._pages.map((t=>{const i=t.pdfPage.getViewport({scale:1}),r=(0,te.isPortraitOrientation)(i);if(void 0===e)e=r;else if(this.enablePrintAutoRotate&&r!==e)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}}))}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(e));this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=e,this.refresh(!1,{optionalContentConfigPromise:e}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e}))}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!(0,te.isValidScrollMode)(e))throw new Error("Invalid scroll mode: ".concat(e));this.pagesCount>se.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(e=null){const t=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",t===te.ScrollMode.HORIZONTAL),i.classList.toggle("scrollWrapped",t===te.ScrollMode.WRAPPED),this.pdfDocument&&e&&(t===te.ScrollMode.PAGE?__privateMethod(this,D,R).call(this):this._previousScrollMode===te.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&__privateMethod(this,V,U).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!(0,te.isValidSpreadMode)(e))throw new Error("Invalid spread mode: ".concat(e));this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(e=null){if(!this.pdfDocument)return;const t=this.viewer,i=this._pages;if(this._scrollMode===te.ScrollMode.PAGE)__privateMethod(this,D,R).call(this);else if(t.textContent="",this._spreadMode===te.SpreadMode.NONE)for(const r of this._pages)t.append(r.div);else{const e=this._spreadMode-1;let r=null;for(let a=0,n=i.length;a<n;++a)null===r?(r=document.createElement("div"),r.className="spread",t.append(r)):a%2===e&&(r=r.cloneNode(!1),t.append(r)),r.append(i[a].div)}e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&__privateMethod(this,V,U).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}_getPageAdvance(e,t=!1){switch(this._scrollMode){case te.ScrollMode.WRAPPED:{const{views:i}=this._getVisiblePages(),r=new Map;for(const{id:e,y:t,percent:a,widthPercent:n}of i){if(0===a||n<100)continue;let i=r.get(t);i||r.set(t,i||(i=[])),i.push(e)}for(const a of r.values()){const i=a.indexOf(e);if(-1===i)continue;const r=a.length;if(1===r)break;if(t)for(let t=i-1,n=0;t>=n;t--){const i=a[t],r=a[t+1]-1;if(i<r)return e-r}else for(let t=i+1,n=r;t<n;t++){const i=a[t],r=a[t-1]+1;if(i>r)return r-e}if(t){const t=a[0];if(t<e)return e-t+1}else{const t=a[r-1];if(t>e)return t-e+1}break}break}case te.ScrollMode.HORIZONTAL:break;case te.ScrollMode.PAGE:case te.ScrollMode.VERTICAL:{if(this._spreadMode===te.SpreadMode.NONE)break;const i=this._spreadMode-1;if(t&&e%2!==i)break;if(!t&&e%2===i)break;const{views:r}=this._getVisiblePages(),a=t?e-1:e+1;for(const{id:e,percent:t,widthPercent:n}of r)if(e===a){if(t>0&&100===n)return 2;break}break}}return 1}nextPage(){const e=this._currentPageNumber,t=this.pagesCount;if(e>=t)return!1;const i=this._getPageAdvance(e,!1)||1;return this.currentPageNumber=Math.min(e+i,t),!0}previousPage(){const e=this._currentPageNumber;if(e<=1)return!1;const t=this._getPageAdvance(e,!0)||1;return this.currentPageNumber=Math.max(e-t,1),!0}increaseScale({drawingDelay:e,scaleFactor:t,steps:i}={}){if(!this.pdfDocument)return;let r=this._currentScale;if(t>1)r=Math.round(r*t*100)/100;else{null!=i||(i=1);do{r=Math.ceil(10*(r*te.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--i>0&&r<te.MAX_SCALE)}__privateMethod(this,V,U).call(this,Math.min(te.MAX_SCALE,r),{noScroll:!1,drawingDelay:e})}decreaseScale({drawingDelay:e,scaleFactor:t,steps:i}={}){if(!this.pdfDocument)return;let r=this._currentScale;if(t>0&&t<1)r=Math.round(r*t*100)/100;else{null!=i||(i=1);do{r=Math.floor(10*(r/te.DEFAULT_SCALE_DELTA).toFixed(2))/10}while(--i>0&&r>te.MIN_SCALE)}__privateMethod(this,V,U).call(this,Math.max(te.MIN_SCALE,r),{noScroll:!1,drawingDelay:e})}get containerTopLeft(){return __privateGet(this,u)||__privateSet(this,u,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return __privateGet(this,d)?__privateGet(this,c):ee.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:e,editId:t=null}){if(!__privateGet(this,d))throw new Error("The AnnotationEditor is not enabled.");if(__privateGet(this,c)!==e){if(!oe(e))throw new Error("Invalid AnnotationEditor mode: ".concat(e));this.pdfDocument&&(__privateSet(this,c,e),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:e}),__privateGet(this,d).updateMode(e,t))}}set annotationEditorParams({type:e,value:t}){if(!__privateGet(this,d))throw new Error("The AnnotationEditor is not enabled.");__privateGet(this,d).updateParams(e,t)}refresh(e=!1,t=Object.create(null)){if(this.pdfDocument){for(const e of this._pages)e.update(t);null!==__privateGet(this,w)&&(clearTimeout(__privateGet(this,w)),__privateSet(this,w,null)),e||this.update()}}}},
/* 26 */
/***/
(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFRenderingQueue=void 0;var r=i(4),a=i(2);t.PDFRenderingQueue=class{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}renderHighestPriority(e){var t;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(e)||this.isThumbnailViewEnabled&&(null==(t=this.pdfThumbnailViewer)?void 0:t.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(e,t,i,r=!1){const a=e.views,n=a.length;if(0===n)return null;for(let d=0;d<n;d++){const e=a[d].view;if(!this.isViewFinished(e))return e}const s=e.first.id,o=e.last.id;if(o-s+1>n){const r=e.ids;for(let e=1,a=o-s;e<a;e++){const a=i?s+e:o-e;if(r.has(a))continue;const n=t[a-1];if(!this.isViewFinished(n))return n}}let l=i?o:s-2,c=t[l];return c&&!this.isViewFinished(c)||r&&(l+=i?1:-1,c=t[l],c&&!this.isViewFinished(c))?c:null}isViewFinished(e){return e.renderingState===a.RenderingStates.FINISHED}renderView(e){switch(e.renderingState){case a.RenderingStates.FINISHED:return!1;case a.RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case a.RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case a.RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally((()=>{this.renderHighestPriority()})).catch((e=>{r.RenderingCancelledException}))}return!0}}}],t={};function i(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={
/******/
// no module.id needed
/******/
// no module.loaded needed
/******/
exports:{}
/******/};return e[r](n,n.exports,i),n.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return s.AnnotationLayerBuilder}}),Object.defineProperty(e,"DownloadManager",{enumerable:!0,get:function(){return o.DownloadManager}}),Object.defineProperty(e,"EventBus",{enumerable:!0,get:function(){return l.EventBus}}),Object.defineProperty(e,"FindState",{enumerable:!0,get:function(){return t.FindState}}),Object.defineProperty(e,"GenericL10n",{enumerable:!0,get:function(){return c.GenericL10n}}),Object.defineProperty(e,"LinkTarget",{enumerable:!0,get:function(){return a.LinkTarget}}),Object.defineProperty(e,"NullL10n",{enumerable:!0,get:function(){return d.NullL10n}}),Object.defineProperty(e,"PDFFindController",{enumerable:!0,get:function(){return t.PDFFindController}}),Object.defineProperty(e,"PDFHistory",{enumerable:!0,get:function(){return h.PDFHistory}}),Object.defineProperty(e,"PDFLinkService",{enumerable:!0,get:function(){return a.PDFLinkService}}),Object.defineProperty(e,"PDFPageView",{enumerable:!0,get:function(){return u.PDFPageView}}),Object.defineProperty(e,"PDFScriptingManager",{enumerable:!0,get:function(){return p.PDFScriptingManager}}),Object.defineProperty(e,"PDFSinglePageViewer",{enumerable:!0,get:function(){return _.PDFSinglePageViewer}}),Object.defineProperty(e,"PDFViewer",{enumerable:!0,get:function(){return f.PDFViewer}}),Object.defineProperty(e,"ProgressBar",{enumerable:!0,get:function(){return n.ProgressBar}}),Object.defineProperty(e,"RenderingStates",{enumerable:!0,get:function(){return n.RenderingStates}}),Object.defineProperty(e,"ScrollMode",{enumerable:!0,get:function(){return n.ScrollMode}}),Object.defineProperty(e,"SimpleLinkService",{enumerable:!0,get:function(){return a.SimpleLinkService}}),Object.defineProperty(e,"SpreadMode",{enumerable:!0,get:function(){return n.SpreadMode}}),Object.defineProperty(e,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return g.StructTreeLayerBuilder}}),Object.defineProperty(e,"TextLayerBuilder",{enumerable:!0,get:function(){return m.TextLayerBuilder}}),Object.defineProperty(e,"XfaLayerBuilder",{enumerable:!0,get:function(){return v.XfaLayerBuilder}}),Object.defineProperty(e,"parseQueryString",{enumerable:!0,get:function(){return n.parseQueryString}});var t=i(1),a=i(5),n=i(2),s=i(6),o=i(8),l=i(9),c=i(10),d=i(7),h=i(12),u=i(13),p=i(21),_=i(24),f=i(25),g=i(16),m=i(19),v=i(20)})(),r})(),pdf_viewer.exports=root.pdfjsViewer=factory();var pdf_viewerExports=pdf_viewer.exports;const _hoisted_1$4={id:"viewerContainer"},_hoisted_2$4=createBaseVNode("div",{class:"pdfViewer",id:"viewer"},null,-1),_hoisted_3$3=[_hoisted_2$4],DEFAULT_SCALE_VALUE="auto",ENABLE_XFA=!0,CMAP_PACKED=!0,_sfc_main$4=defineComponent({__name:"PdfEmbed",props:{source:{type:String,require:!0,default:""},scale:{type:[String],
// eslint-disable-next-line vue/valid-define-props
default:DEFAULT_SCALE_VALUE,validator:e=>"number"==typeof e||["page-fit","page-width","page-height","auto","page-actual"].includes(e)},page:{type:Number,default:1},search:{type:String,default:""}},emits:["loading-failed","loaded","rendered","status-changed"],setup(e,{expose:t,emit:i}){const r=e,a=i,n=r.source,s=r.search,o=reactive({currentScaleValue:DEFAULT_SCALE_VALUE,currentPageCount:0,currentPageNumber:0});let l,c;onMounted((async()=>{a("loaded"),pdfExports.GlobalWorkerOptions.workerSrc=pdfWorder;const e=document.getElementById("viewerContainer"),t=new pdf_viewerExports.EventBus,i=new pdf_viewerExports.PDFLinkService({eventBus:t}),h=new pdf_viewerExports.PDFFindController({eventBus:t,linkService:i}),u=new pdf_viewerExports.PDFViewer({container:e,eventBus:t,removePageBorders:!0,annotationMode:0,linkService:i,findController:h});i.setViewer(u);const p=pdfExports.getDocument({url:n,cMapUrl:"https://static.tiangong.cn/wwwsite/cmaps/",cMapPacked:CMAP_PACKED,enableXfa:ENABLE_XFA});try{c=await p.promise}catch(_){a("loading-failed",_)}l=u,c&&(u.setDocument(c),i.setDocument(c,null),t.on("pagesinit",(function(){a("rendered"),r.scale&&l&&(l.currentScaleValue=r.scale||o.currentScaleValue),d(r.page),s&&t.dispatch("find",{type:"",query:[s]})})),t.on("updateviewarea",(function(){d()})),t.on("pagenumberchanged",(function(e){e.value&&i.goToPage(e.value),e.value!==u.currentPageNumber.toString()&&e.value!==u.currentPageLabel&&d()})))})),onUnmounted((()=>{l={},c={}})),onErrorCaptured(((e,t,i)=>{}));const d=(e,t)=>{o.currentPageCount=e||(null==c?void 0:c.numPages)||0,o.currentPageNumber=t||(null==l?void 0:l.currentPageNumber)||0};return t({increaseScale:()=>{null==l||l.increaseScale(),o.currentScaleValue=(null==l?void 0:l.currentScaleValue)||DEFAULT_SCALE_VALUE},decreaseScale:()=>{null==l||l.decreaseScale(),o.currentScaleValue=(null==l?void 0:l.currentScaleValue)||DEFAULT_SCALE_VALUE},nextPage:()=>{null==l||l.nextPage(),d()},previousPage:()=>{null==l||l.previousPage(),d()},setPageNum:e=>{null==l||l.eventBus.dispatch("pagenumberchanged",{value:e})},getEventBus:()=>null==l?void 0:l.eventBus,setCurrentScale:e=>{l&&(l.currentScaleValue=e||DEFAULT_SCALE_VALUE)},changeFind:e=>{null==l||l.eventBus.dispatch("find",{type:"",query:e})},status:readonly(o)}),(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1$4,_hoisted_3$3))}});var lib$1={exports:{}},lib={},hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,e=lib,t=require$$1,Object.keys(t).forEach((function(i){e[i]=t[i]})),e.set=function(e,t,i){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,i),i):(e[t]=i,i)},e.del=function(e,t){Array.isArray(e)?e.splice(t,1):delete e[t]},e.Vue=t,e.Vue2=void 0,e.isVue2=!1,e.isVue3=!0,e.install=function(){}),lib;var e,t}lib$1.exports=function(e,t){var i=Object.defineProperty,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o=(e,t)=>{for(var i in t||(t={}))a.call(t,i)&&s(e,i,t[i]);if(r)for(var i of r(t))n.call(t,i)&&s(e,i,t[i]);return e},l=(e,t,i)=>new Promise(((r,a)=>{var n=e=>{try{o(i.next(e))}catch(t){a(t)}},s=e=>{try{o(i.throw(e))}catch(t){a(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,s);o((i=i.apply(e,t)).next())}));void 0===window.setImmediate&&(window.setImmediate=function(e,...t){setTimeout((()=>e(t)))});var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:{},d={exports:{}};function h(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var u,p,_={exports:{}};
/*!
    
    	    JSZip v3.10.1 - A JavaScript class for generating and reading zip files
    	    <http://stuartk.com/jszip>
    
    	    (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
    	    Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
    
    	    JSZip uses the library pako released under the MIT license :
    	    https://github.com/nodeca/pako/blob/main/LICENSE
    	    */function f(){return u||(u=1,e=function(){return function e(t,i,r){function a(s,o){if(!i[s]){if(!t[s]){var l="function"==typeof h&&h;if(!o&&l)return l(s,!0);if(n)return n(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[s]={exports:{}};t[s][0].call(d.exports,(function(e){return a(t[s][1][e]||e)}),d,d.exports,e,t,i,r)}return i[s].exports}for(var n="function"==typeof h&&h,s=0;s<r.length;s++)a(r[s]);return a}({1:[function(e,t,i){var r=e("./utils"),a=e("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(e){for(var t,i,a,s,o,l,c,d=[],h=0,u=e.length,p=u,_="string"!==r.getTypeOf(e);h<e.length;)p=u-h,a=_?(t=e[h++],i=h<u?e[h++]:0,h<u?e[h++]:0):(t=e.charCodeAt(h++),i=h<u?e.charCodeAt(h++):0,h<u?e.charCodeAt(h++):0),s=t>>2,o=(3&t)<<4|i>>4,l=1<p?(15&i)<<2|a>>6:64,c=2<p?63&a:64,d.push(n.charAt(s)+n.charAt(o)+n.charAt(l)+n.charAt(c));return d.join("")},i.decode=function(e){var t,i,r,s,o,l,c=0,d=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var u,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===n.charAt(64)&&p--,e.charAt(e.length-2)===n.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=a.uint8array?new Uint8Array(0|p):new Array(0|p);c<e.length;)t=n.indexOf(e.charAt(c++))<<2|(s=n.indexOf(e.charAt(c++)))>>4,i=(15&s)<<4|(o=n.indexOf(e.charAt(c++)))>>2,r=(3&o)<<6|(l=n.indexOf(e.charAt(c++))),u[d++]=t,64!==o&&(u[d++]=i),64!==l&&(u[d++]=r);return u}},{"./support":30,"./utils":32}],2:[function(e,t,i){var r=e("./external"),a=e("./stream/DataWorker"),n=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function o(e,t,i,r,a){this.compressedSize=e,this.uncompressedSize=t,this.crc32=i,this.compression=r,this.compressedContent=a}o.prototype={getContentWorker:function(){var e=new a(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new a(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,i){return e.pipe(new n).pipe(new s("uncompressedSize")).pipe(t.compressWorker(i)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,i){var r=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,i){var r=e("./utils"),a=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,i,r){var n=a,s=r+i;e^=-1;for(var o=r;o<s;o++)e=e>>>8^n[255&(e^t[o])];return-1^e}(0|t,e,e.length,0):function(e,t,i,r){var n=a,s=r+i;e^=-1;for(var o=r;o<s;o++)e=e>>>8^n[255&(e^t.charCodeAt(o))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,t,i){var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,i){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,a=e("pako"),n=e("./utils"),s=e("./stream/GenericWorker"),o=r?"uint8array":"array";function l(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}i.magic="\b\0",n.inherits(l,s),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(n.transformTo(o,e.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},i.compressWorker=function(e){return new l("Deflate",e)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,i){function r(e,t){var i,r="";for(i=0;i<t;i++)r+=String.fromCharCode(255&e),e>>>=8;return r}function a(e,t,i,a,s,d){var h,u,p=e.file,_=e.compression,f=d!==o.utf8encode,g=n.transformTo("string",d(p.name)),m=n.transformTo("string",o.utf8encode(p.name)),v=p.comment,b=n.transformTo("string",d(v)),y=n.transformTo("string",o.utf8encode(v)),A=m.length!==p.name.length,w=y.length!==v.length,S="",k="",x="",C=p.dir,E=p.date,P={crc32:0,compressedSize:0,uncompressedSize:0};t&&!i||(P.crc32=e.crc32,P.compressedSize=e.compressedSize,P.uncompressedSize=e.uncompressedSize);var M=0;t&&(M|=8),f||!A&&!w||(M|=2048);var T,I,D,R=0,L=0;C&&(R|=16),"UNIX"===s?(L=798,R|=(T=p.unixPermissions,I=C,D=T,T||(D=I?16893:33204),(65535&D)<<16)):(L=20,R|=function(e){return 63&(e||0)}(p.dosPermissions)),h=E.getUTCHours(),h<<=6,h|=E.getUTCMinutes(),h<<=5,h|=E.getUTCSeconds()/2,u=E.getUTCFullYear()-1980,u<<=4,u|=E.getUTCMonth()+1,u<<=5,u|=E.getUTCDate(),A&&(k=r(1,1)+r(l(g),4)+m,S+="up"+r(k.length,2)+k),w&&(x=r(1,1)+r(l(b),4)+y,S+="uc"+r(x.length,2)+x);var F="";return F+="\n\0",F+=r(M,2),F+=_.magic,F+=r(h,2),F+=r(u,2),F+=r(P.crc32,4),F+=r(P.compressedSize,4),F+=r(P.uncompressedSize,4),F+=r(g.length,2),F+=r(S.length,2),{fileRecord:c.LOCAL_FILE_HEADER+F+g+S,dirRecord:c.CENTRAL_FILE_HEADER+r(L,2)+F+r(b.length,2)+"\0\0\0\0"+r(R,4)+r(a,4)+g+S+b}}var n=e("../utils"),s=e("../stream/GenericWorker"),o=e("../utf8"),l=e("../crc32"),c=e("../signature");function d(e,t,i,r){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=i,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(d,s),d.prototype.push=function(e){var t=e.meta.percent||0,i=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:i?(t+100*(i-r-1))/i:100}}))},d.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var i=a(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(e){this.accumulate=!1;var t,i=this.streamFiles&&!e.file.dir,n=a(e,i,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),i)this.push({data:(t=e,c.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var i,a,s,o,l,d,h=this.bytesWritten-e,u=(i=this.dirRecords.length,a=h,s=e,o=this.zipComment,l=this.encodeFileName,d=n.transformTo("string",l(o)),c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(i,2)+r(i,2)+r(a,4)+r(s,4)+r(d.length,2)+d);this.push({data:u,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},d.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var i=0;i<t.length;i++)try{t[i].error(e)}catch(r){}return!0},d.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,i){var r=e("../compressions"),a=e("./ZipFileWorker");i.generateWorker=function(e,t,i){var n=new a(t.streamFiles,i,t.platform,t.encodeFileName),s=0;try{e.forEach((function(e,i){s++;var a=function(e,t){var i=e||t,a=r[i];if(!a)throw new Error(i+" is not a valid compression method !");return a}(i.options.compression,t.compression),o=i.options.compressionOptions||t.compressionOptions||{},l=i.dir,c=i.date;i._compressWorker(a,o).withStreamInfo("file",{name:e,dir:l,date:c,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(n)})),n.entriesCount=s}catch(o){n.error(o)}return n}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,i){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,i){var r=e("./utils"),a=e("./external"),n=e("./utf8"),s=e("./zipEntries"),o=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new a.Promise((function(t,i){var r=e.decompressed.getContentWorker().pipe(new o);r.on("error",(function(e){i(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var i=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),l.isNode&&l.isStream(e)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var i=new s(t);return i.load(e),i})).then((function(e){var i=[a.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var n=0;n<r.length;n++)i.push(c(r[n]));return a.Promise.all(i)})).then((function(e){for(var a=e.shift(),n=a.files,s=0;s<n.length;s++){var o=n[s],l=o.fileNameStr,c=r.resolve(o.fileNameStr);i.file(c,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders}),o.dir||(i.file(c).unsafeOriginalName=l)}return a.zipComment.length&&(i.comment=a.zipComment),i}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,i){var r=e("../utils"),a=e("../stream/GenericWorker");function n(e,t){a.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(n,a),n.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},n.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,i){var r=e("readable-stream").Readable;function a(e,t,i){r.call(this,t),this._helper=e;var a=this;e.on("data",(function(e,t){a.push(e)||a._helper.pause(),i&&i(t)})).on("error",(function(e){a.emit("error",e)})).on("end",(function(){a.push(null)}))}e("../utils").inherits(a,r),a.prototype._read=function(){this._helper.resume()},t.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,t,i){t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,i){function r(e,t,i){var r,a=n.getTypeOf(t),o=n.extend(i||{},l);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(e=f(e)),o.createFolders&&(r=_(e))&&g.call(this,r,!0);var h="string"===a&&!1===o.binary&&!1===o.base64;i&&void 0!==i.binary||(o.binary=!h),(t instanceof c&&0===t.uncompressedSize||o.dir||!t||0===t.length)&&(o.base64=!1,o.binary=!0,t="",o.compression="STORE",a="string");var m=null;m=t instanceof c||t instanceof s?t:u.isNode&&u.isStream(t)?new p(e,t):n.prepareContent(e,t,o.binary,o.optimizedBinaryString,o.base64);var v=new d(e,m,o);this.files[e]=v}var a=e("./utf8"),n=e("./utils"),s=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),d=e("./zipObject"),h=e("./generate"),u=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),_=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},f=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=f(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function m(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,i,r;for(t in this.files)r=this.files[t],(i=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(i,r)},filter:function(e){var t=[];return this.forEach((function(i,r){e(i,r)&&t.push(r)})),t},file:function(e,t,i){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,i),this;if(m(e)){var a=e;return this.filter((function(e,t){return!t.dir&&a.test(e)}))}var n=this.files[this.root+e];return n&&!n.dir?n:null},folder:function(e){if(!e)return this;if(m(e))return this.filter((function(t,i){return i.dir&&e.test(t)}));var t=this.root+e,i=g.call(this,t),r=this.clone();return r.root=i.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var i=this.filter((function(t,i){return i.name.slice(0,e.length)===e})),r=0;r<i.length;r++)delete this.files[i[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,i={};try{if((i=n.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");n.checkSupport(i.type),"darwin"!==i.platform&&"freebsd"!==i.platform&&"linux"!==i.platform&&"sunos"!==i.platform||(i.platform="UNIX"),"win32"===i.platform&&(i.platform="DOS");var r=i.comment||this.comment||"";t=h.generateWorker(this,i,r)}catch(l){(t=new s("error")).error(l)}return new o(t,i.type||"string",i.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,i){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,i){var r=e("./DataReader");function a(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(a,r),a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),i=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),n=this.length-4;0<=n;--n)if(this.data[n]===t&&this.data[n+1]===i&&this.data[n+2]===r&&this.data[n+3]===a)return n-this.zero;return-1},a.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),n=this.readData(4);return t===n[0]&&i===n[1]&&r===n[2]&&a===n[3]},a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,t,i){var r=e("../utils");function a(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,i=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)i=(i<<8)+this.byteAt(t);return this.index+=e,i},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=a},{"../utils":32}],19:[function(e,t,i){var r=e("./Uint8ArrayReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,i){var r=e("./DataReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},a.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,t,i){var r=e("./ArrayReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,i){var r=e("../utils"),a=e("../support"),n=e("./ArrayReader"),s=e("./StringReader"),o=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||a.uint8array?"nodebuffer"===t?new o(e):a.uint8array?new l(r.transformTo("uint8array",e)):new n(r.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,i){var r=e("./GenericWorker"),a=e("../utils");function n(e){r.call(this,"ConvertWorker to "+e),this.destType=e}a.inherits(n,r),n.prototype.processChunk=function(e){this.push({data:a.transformTo(this.destType,e.data),meta:e.meta})},t.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,i){var r=e("./GenericWorker"),a=e("../crc32");function n(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(n,r),n.prototype.processChunk=function(e){this.streamInfo.crc32=a(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,i){var r=e("../utils"),a=e("./GenericWorker");function n(e){a.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(n,a),n.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}a.prototype.processChunk.call(this,e)},t.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,i){var r=e("../utils"),a=e("./GenericWorker");function n(e){a.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(n,a),n.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,i){function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var i=0;i<this._listeners[e].length;i++)this._listeners[e][i].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,i){var r=e("../utils"),a=e("./ConvertWorker"),n=e("./GenericWorker"),s=e("../base64"),o=e("../support"),l=e("../external"),c=null;if(o.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(u){}function d(e,t){return new l.Promise((function(i,a){var n=[],o=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,i){n.push(e),t&&t(i)})).on("error",(function(e){n=[],a(e)})).on("end",(function(){try{var e=function(e,t,i){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),i);case"base64":return s.encode(t);default:return r.transformTo(e,t)}}(l,function(e,t){var i,r=0,a=null,n=0;for(i=0;i<t.length;i++)n+=t[i].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(a=new Uint8Array(n),i=0;i<t.length;i++)a.set(t[i],r),r+=t[i].length;return a;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(o,n),c);i(e)}catch(t){a(t)}n=[]})).resume()}))}function h(e,t,i){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=i,r.checkSupport(s),this._worker=e.pipe(new a(s)),e.lock()}catch(o){this._worker=new n("error"),this._worker.error(o)}}h.prototype={accumulate:function(e){return d(this,e)},on:function(e,t){var i=this;return"data"===e?this._worker.on(e,(function(e){t.call(i,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,i)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var r=new ArrayBuffer(0);try{i.blob=0===new Blob([r],{type:"application/zip"}).size}catch(n){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(r),i.blob=0===a.getBlob("application/zip").size}catch(s){i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch(n){i.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,i){for(var r=e("./utils"),a=e("./support"),n=e("./nodejsUtils"),s=e("./stream/GenericWorker"),o=new Array(256),l=0;l<256;l++)o[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function d(){s.call(this,"utf-8 encode")}o[254]=o[254]=1,i.utf8encode=function(e){return a.nodebuffer?n.newBufferFrom(e,"utf-8"):function(e){var t,i,r,n,s,o=e.length,l=0;for(n=0;n<o;n++)55296==(64512&(i=e.charCodeAt(n)))&&n+1<o&&56320==(64512&(r=e.charCodeAt(n+1)))&&(i=65536+(i-55296<<10)+(r-56320),n++),l+=i<128?1:i<2048?2:i<65536?3:4;for(t=a.uint8array?new Uint8Array(l):new Array(l),n=s=0;s<l;n++)55296==(64512&(i=e.charCodeAt(n)))&&n+1<o&&56320==(64512&(r=e.charCodeAt(n+1)))&&(i=65536+(i-55296<<10)+(r-56320),n++),i<128?t[s++]=i:(i<2048?t[s++]=192|i>>>6:(i<65536?t[s++]=224|i>>>12:(t[s++]=240|i>>>18,t[s++]=128|i>>>12&63),t[s++]=128|i>>>6&63),t[s++]=128|63&i);return t}(e)},i.utf8decode=function(e){return a.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,i,a,n,s=e.length,l=new Array(2*s);for(t=i=0;t<s;)if((a=e[t++])<128)l[i++]=a;else if(4<(n=o[a]))l[i++]=65533,t+=n-1;else{for(a&=2===n?31:3===n?15:7;1<n&&t<s;)a=a<<6|63&e[t++],n--;1<n?l[i++]=65533:a<65536?l[i++]=a:(a-=65536,l[i++]=55296|a>>10&1023,l[i++]=56320|1023&a)}return l.length!==i&&(l.subarray?l=l.subarray(0,i):l.length=i),r.applyFromCharCode(l)}(e=r.transformTo(a.uint8array?"uint8array":"array",e))},r.inherits(c,s),c.prototype.processChunk=function(e){var t=r.transformTo(a.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var n=t;(t=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),t.set(n,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return i<0||0===i?t:i+o[e[i]]>t?i:t}(t),l=t;s!==t.length&&(a.uint8array?(l=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(l=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:i.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=c,r.inherits(d,s),d.prototype.processChunk=function(e){this.push({data:i.utf8encode(e.data),meta:e.meta})},i.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,i){var r=e("./support"),a=e("./base64"),n=e("./nodejsUtils"),s=e("./external");function o(e){return e}function l(e,t){for(var i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t}e("setimmediate"),i.newBlob=function(e,t){i.checkSupport("blob");try{return new Blob([e],{type:t})}catch(a){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(n){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,i){var r=[],a=0,n=e.length;if(n<=i)return String.fromCharCode.apply(null,e);for(;a<n;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(a,Math.min(a+i,n)))):r.push(String.fromCharCode.apply(null,e.subarray(a,Math.min(a+i,n)))),a+=i;return r.join("")},stringifyByChar:function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,n.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var t=65536,r=i.getTypeOf(e),a=!0;if("uint8array"===r?a=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(a=c.applyCanBeUsed.nodebuffer),a)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(n){t=Math.floor(t/2)}return c.stringifyByChar(e)}function h(e,t){for(var i=0;i<e.length;i++)t[i]=e[i];return t}i.applyFromCharCode=d;var u={};u.string={string:o,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return u.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,n.allocBuffer(e.length))}},u.array={string:d,array:o,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return n.newBufferFrom(e)}},u.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:o,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return n.newBufferFrom(new Uint8Array(e))}},u.uint8array={string:d,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:o,nodebuffer:function(e){return n.newBufferFrom(e)}},u.nodebuffer={string:d,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return u.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:o},i.transformTo=function(e,t){if(t=t||"",!e)return t;i.checkSupport(e);var r=i.getTypeOf(t);return u[r][e](t)},i.resolve=function(e){for(var t=e.split("/"),i=[],r=0;r<t.length;r++){var a=t[r];"."===a||""===a&&0!==r&&r!==t.length-1||(".."===a?i.pop():i.push(a))}return i.join("/")},i.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&n.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(e){var t,i,r="";for(i=0;i<(e||"").length;i++)r+="\\x"+((t=e.charCodeAt(i))<16?"0":"")+t.toString(16).toUpperCase();return r},i.delay=function(e,t,i){setImmediate((function(){e.apply(i||null,t||[])}))},i.inherits=function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i},i.extend=function(){var e,t,i={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===i[t]&&(i[t]=arguments[e][t]);return i},i.prepareContent=function(e,t,n,o,c){return s.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,i){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){i(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var d,h=i.getTypeOf(t);return h?("arraybuffer"===h?t=i.transformTo("uint8array",t):"string"===h&&(c?t=a.decode(t):n&&!0!==o&&(t=l(d=t,r.uint8array?new Uint8Array(d.length):new Array(d.length)))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,i){var r=e("./reader/readerFor"),a=e("./utils"),n=e("./signature"),s=e("./zipEntry"),o=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(t)+", expected "+a.pretty(e)+")")}},isSignature:function(e,t){var i=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(i),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",i=a.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,i,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),i=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var r=t-i;if(0<r)this.isSignature(t,n.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,i){var r=e("./reader/readerFor"),a=e("./utils"),n=e("./compressedObject"),s=e("./crc32"),o=e("./utf8"),l=e("./compressions"),c=e("./support");function d(e,t){this.options=e,this.loadOptions=t}d.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,i;if(e.skip(22),this.fileNameLength=e.readInt(2),i=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,i,r,a=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<a;)t=e.readInt(2),i=e.readInt(2),r=e.readData(i),this.extraFields[t]={id:t,length:i,value:r};e.setIndex(a)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var i=a.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var n=a.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,i){function r(e,t,i){this.name=e,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var a=e("./stream/StreamHelper"),n=e("./stream/DataWorker"),s=e("./utf8"),o=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,i="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(i=e.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),t=this._decompressWorker();var n=!this._dataBinary;n&&!r&&(t=t.pipe(new s.Utf8EncodeWorker)),!n&&r&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(o){(t=new l("error")).error(o)}return new a(t,i,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new s.Utf8EncodeWorker)),o.createWorkerFrom(i,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof l?this._data:new n(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<c.length;h++)r.prototype[c[h]]=d;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,i){(function(e){var i,r,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var n=0,s=new a(d),o=e.document.createTextNode("");s.observe(o,{characterData:!0}),i=function(){o.data=n=++n%2}}else if(e.setImmediate||void 0===e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){d(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(d,0)};else{var l=new e.MessageChannel;l.port1.onmessage=d,i=function(){l.port2.postMessage(0)}}var c=[];function d(){var e,t;r=!0;for(var i=c.length;i;){for(t=c,c=[],e=-1;++e<i;)t[e]();i=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||i()}}).call(this,void 0!==c?c:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,i){var r=e("immediate");function a(){}var n={},s=["REJECTED"],o=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==a&&p(this,e)}function d(e,t,i){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function h(e,t,i){r((function(){var r;try{r=t(i)}catch(a){return n.reject(e,a)}r===e?n.reject(e,new TypeError("Cannot resolve promise with itself")):n.resolve(e,r)}))}function u(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var i=!1;function r(t){i||(i=!0,n.reject(e,t))}function a(t){i||(i=!0,n.resolve(e,t))}var s=_((function(){t(a,r)}));"error"===s.status&&r(s.value)}function _(e,t){var i={};try{i.value=e(t),i.status="success"}catch(r){i.status="error",i.value=r}return i}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(i){return t.resolve(e()).then((function(){return i}))}),(function(i){return t.resolve(e()).then((function(){throw i}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===s)return this;var i=new this.constructor(a);return this.state!==l?h(i,this.state===o?e:t,this.outcome):this.queue.push(new d(i,e,t)),i},d.prototype.callFulfilled=function(e){n.resolve(this.promise,e)},d.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},d.prototype.callRejected=function(e){n.reject(this.promise,e)},d.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},n.resolve=function(e,t){var i=_(u,t);if("error"===i.status)return n.reject(e,i.value);var r=i.value;if(r)p(e,r);else{e.state=o,e.outcome=t;for(var a=-1,s=e.queue.length;++a<s;)e.queue[a].callFulfilled(t)}return e},n.reject=function(e,t){e.state=s,e.outcome=t;for(var i=-1,r=e.queue.length;++i<r;)e.queue[i].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:n.resolve(new this(a),e)},c.reject=function(e){var t=new this(a);return n.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,r=!1;if(!i)return this.resolve([]);for(var s=new Array(i),o=0,l=-1,c=new this(a);++l<i;)d(e[l],l);return c;function d(e,a){t.resolve(e).then((function(e){s[a]=e,++o!==i||r||(r=!0,n.resolve(c,s))}),(function(e){r||(r=!0,n.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i,r=e.length,s=!1;if(!r)return this.resolve([]);for(var o=-1,l=new this(a);++o<r;)i=e[o],t.resolve(i).then((function(e){s||(s=!0,n.resolve(l,e))}),(function(e){s||(s=!0,n.reject(l,e))}));return l}},{immediate:36}],38:[function(e,t,i){var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,i){var r=e("./zlib/deflate"),a=e("./utils/common"),n=e("./utils/strings"),s=e("./zlib/messages"),o=e("./zlib/zstream"),l=Object.prototype.toString,c=0,d=-1,h=0,u=8;function p(e){if(!(this instanceof p))return new p(e);this.options=a.assign({level:d,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var i=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==c)throw new Error(s[i]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var _;if(_="string"==typeof t.dictionary?n.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(i=r.deflateSetDictionary(this.strm,_))!==c)throw new Error(s[i]);this._dict_set=!0}}function _(e,t){var i=new p(t);if(i.push(e,!0),i.err)throw i.msg||s[i.err];return i.result}p.prototype.push=function(e,t){var i,s,o=this.strm,d=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=n.string2buf(e):"[object ArrayBuffer]"===l.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new a.Buf8(d),o.next_out=0,o.avail_out=d),1!==(i=r.deflate(o,s))&&i!==c)return this.onEnd(i),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(n.buf2binstring(a.shrinkBuf(o.output,o.next_out))):this.onData(a.shrinkBuf(o.output,o.next_out)))}while((0<o.avail_in||0===o.avail_out)&&1!==i);return 4===s?(i=r.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===c):2!==s||(this.onEnd(c),!(o.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=p,i.deflate=_,i.deflateRaw=function(e,t){return(t=t||{}).raw=!0,_(e,t)},i.gzip=function(e,t){return(t=t||{}).gzip=!0,_(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,i){var r=e("./zlib/inflate"),a=e("./utils/common"),n=e("./utils/strings"),s=e("./zlib/constants"),o=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),d=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=r.inflateInit2(this.strm,t.windowBits);if(i!==s.Z_OK)throw new Error(o[i]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function u(e,t){var i=new h(t);if(i.push(e,!0),i.err)throw i.msg||o[i.err];return i.result}h.prototype.push=function(e,t){var i,o,l,c,h,u,p=this.strm,_=this.options.chunkSize,f=this.options.dictionary,g=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?p.input=n.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new a.Buf8(_),p.next_out=0,p.avail_out=_),(i=r.inflate(p,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&f&&(u="string"==typeof f?n.string2buf(f):"[object ArrayBuffer]"===d.call(f)?new Uint8Array(f):f,i=r.inflateSetDictionary(this.strm,u)),i===s.Z_BUF_ERROR&&!0===g&&(i=s.Z_OK,g=!1),i!==s.Z_STREAM_END&&i!==s.Z_OK)return this.onEnd(i),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&i!==s.Z_STREAM_END&&(0!==p.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=n.utf8border(p.output,p.next_out),c=p.next_out-l,h=n.buf2string(p.output,l),p.next_out=c,p.avail_out=_-c,c&&a.arraySet(p.output,p.output,l,c,0),this.onData(h)):this.onData(a.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&i!==s.Z_STREAM_END);return i===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(i=r.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(p.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=h,i.inflate=u,i.inflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},i.ungzip=u},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,i){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,i,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+r),a);else for(var n=0;n<r;n++)e[a+n]=t[i+n]},flattenChunks:function(e){var t,i,r,a,n,s;for(t=r=0,i=e.length;t<i;t++)r+=e[t].length;for(s=new Uint8Array(r),t=a=0,i=e.length;t<i;t++)n=e[t],s.set(n,a),a+=n.length;return s}},n={arraySet:function(e,t,i,r,a){for(var n=0;n<r;n++)e[a+n]=t[i+n]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,n))},i.setTyped(r)},{}],42:[function(e,t,i){var r=e("./common"),a=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch(c){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(c){n=!1}for(var s=new r.Buf8(256),o=0;o<256;o++)s[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function l(e,t){if(t<65537&&(e.subarray&&n||!e.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var i="",s=0;s<t;s++)i+=String.fromCharCode(e[s]);return i}s[254]=s[254]=1,i.string2buf=function(e){var t,i,a,n,s,o=e.length,l=0;for(n=0;n<o;n++)55296==(64512&(i=e.charCodeAt(n)))&&n+1<o&&56320==(64512&(a=e.charCodeAt(n+1)))&&(i=65536+(i-55296<<10)+(a-56320),n++),l+=i<128?1:i<2048?2:i<65536?3:4;for(t=new r.Buf8(l),n=s=0;s<l;n++)55296==(64512&(i=e.charCodeAt(n)))&&n+1<o&&56320==(64512&(a=e.charCodeAt(n+1)))&&(i=65536+(i-55296<<10)+(a-56320),n++),i<128?t[s++]=i:(i<2048?t[s++]=192|i>>>6:(i<65536?t[s++]=224|i>>>12:(t[s++]=240|i>>>18,t[s++]=128|i>>>12&63),t[s++]=128|i>>>6&63),t[s++]=128|63&i);return t},i.buf2binstring=function(e){return l(e,e.length)},i.binstring2buf=function(e){for(var t=new r.Buf8(e.length),i=0,a=t.length;i<a;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,r,a,n,o=t||e.length,c=new Array(2*o);for(i=r=0;i<o;)if((a=e[i++])<128)c[r++]=a;else if(4<(n=s[a]))c[r++]=65533,i+=n-1;else{for(a&=2===n?31:3===n?15:7;1<n&&i<o;)a=a<<6|63&e[i++],n--;1<n?c[r++]=65533:a<65536?c[r++]=a:(a-=65536,c[r++]=55296|a>>10&1023,c[r++]=56320|1023&a)}return l(c,r)},i.utf8border=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return i<0||0===i?t:i+s[e[i]]>t?i:t}},{"./common":41}],43:[function(e,t,i){t.exports=function(e,t,i,r){for(var a=65535&e|0,n=e>>>16&65535|0,s=0;0!==i;){for(i-=s=2e3<i?2e3:i;n=n+(a=a+t[r++]|0)|0,--s;);a%=65521,n%=65521}return a|n<<16|0}},{}],44:[function(e,t,i){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,i){var r=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t,i,a){var n=r,s=a+i;e^=-1;for(var o=a;o<s;o++)e=e>>>8^n[255&(e^t[o])];return-1^e}},{}],46:[function(e,t,i){var r,a=e("../utils/common"),n=e("./trees"),s=e("./adler32"),o=e("./crc32"),l=e("./messages"),c=0,d=4,h=0,u=-2,p=-1,_=4,f=2,g=8,m=9,v=286,b=30,y=19,A=2*v+1,w=15,S=3,k=258,x=k+S+1,C=42,E=113,P=1,M=2,T=3,I=4;function D(e,t){return e.msg=l[t],t}function R(e){return(e<<1)-(4<e?9:0)}function L(e){for(var t=e.length;0<=--t;)e[t]=0}function F(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(a.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function N(e,t){n._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,F(e.strm)}function O(e,t){e.pending_buf[e.pending++]=t}function B(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function G(e,t){var i,r,a=e.max_chain_length,n=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-x?e.strstart-(e.w_size-x):0,c=e.window,d=e.w_mask,h=e.prev,u=e.strstart+k,p=c[n+s-1],_=c[n+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(i=t)+s]===_&&c[i+s-1]===p&&c[i]===c[n]&&c[++i]===c[n+1]){n+=2,i++;do{}while(c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&n<u);if(r=k-(u-n),n=u-k,s<r){if(e.match_start=t,o<=(s=r))break;p=c[n+s-1],_=c[n+s]}}}while((t=h[t&d])>l&&0!=--a);return s<=e.lookahead?s:e.lookahead}function W(e){var t,i,r,n,l,c,d,h,u,p,_=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=_+(_-x)){for(a.arraySet(e.window,e.window,_,_,0),e.match_start-=_,e.strstart-=_,e.block_start-=_,t=i=e.hash_size;r=e.head[--t],e.head[t]=_<=r?r-_:0,--i;);for(t=i=_;r=e.prev[--t],e.prev[t]=_<=r?r-_:0,--i;);n+=_}if(0===e.strm.avail_in)break;if(c=e.strm,d=e.window,h=e.strstart+e.lookahead,p=void 0,(u=n)<(p=c.avail_in)&&(p=u),i=0===p?0:(c.avail_in-=p,a.arraySet(d,c.input,c.next_in,p,h),1===c.state.wrap?c.adler=s(c.adler,d,p,h):2===c.state.wrap&&(c.adler=o(c.adler,d,p,h)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=i,e.lookahead+e.insert>=S)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+S-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<S)););}while(e.lookahead<x&&0!==e.strm.avail_in)}function j(e,t){for(var i,r;;){if(e.lookahead<x){if(W(e),e.lookahead<x&&t===c)return P;if(0===e.lookahead)break}if(i=0,e.lookahead>=S&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-x&&(e.match_length=G(e,i)),e.match_length>=S)if(r=n._tr_tally(e,e.strstart-e.match_start,e.match_length-S),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=S){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=n._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(N(e,!1),0===e.strm.avail_out))return P}return e.insert=e.strstart<S-1?e.strstart:S-1,t===d?(N(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?P:M}function V(e,t){for(var i,r,a;;){if(e.lookahead<x){if(W(e),e.lookahead<x&&t===c)return P;if(0===e.lookahead)break}if(i=0,e.lookahead>=S&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=S-1,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-x&&(e.match_length=G(e,i),e.match_length<=5&&(1===e.strategy||e.match_length===S&&4096<e.strstart-e.match_start)&&(e.match_length=S-1)),e.prev_length>=S&&e.match_length<=e.prev_length){for(a=e.strstart+e.lookahead-S,r=n._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-S),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+S-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=S-1,e.strstart++,r&&(N(e,!1),0===e.strm.avail_out))return P}else if(e.match_available){if((r=n._tr_tally(e,0,e.window[e.strstart-1]))&&N(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return P}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=n._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<S-1?e.strstart:S-1,t===d?(N(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?P:M}function U(e,t,i,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=r,this.func=a}function z(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*A),this.dyn_dtree=new a.Buf16(2*(2*b+1)),this.bl_tree=new a.Buf16(2*(2*y+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(w+1),this.heap=new a.Buf16(2*v+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*v+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=f,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?C:E,e.adler=2===t.wrap?0:1,t.last_flush=c,n._tr_init(t),h):D(e,u)}function q(e){var t,i=H(e);return i===h&&((t=e.state).window_size=2*t.w_size,L(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=S-1,t.match_available=0,t.ins_h=0),i}function X(e,t,i,r,n,s){if(!e)return u;var o=1;if(t===p&&(t=6),r<0?(o=0,r=-r):15<r&&(o=2,r-=16),n<1||m<n||i!==g||r<8||15<r||t<0||9<t||s<0||_<s)return D(e,u);8===r&&(r=9);var l=new z;return(e.state=l).strm=e,l.wrap=o,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=n+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+S-1)/S),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<n+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=i,q(e)}r=[new U(0,0,0,0,(function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(W(e),0===e.lookahead&&t===c)return P;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+i;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,N(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-x&&(N(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===d?(N(e,!0),0===e.strm.avail_out?T:I):(e.strstart>e.block_start&&(N(e,!1),e.strm.avail_out),P)})),new U(4,4,8,4,j),new U(4,5,16,8,j),new U(4,6,32,32,j),new U(4,4,16,16,V),new U(8,16,32,32,V),new U(8,16,128,128,V),new U(8,32,128,256,V),new U(32,128,258,1024,V),new U(32,258,258,4096,V)],i.deflateInit=function(e,t){return X(e,t,g,15,8,0)},i.deflateInit2=X,i.deflateReset=q,i.deflateResetKeep=H,i.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?u:(e.state.gzhead=t,h):u},i.deflate=function(e,t){var i,a,s,l;if(!e||!e.state||5<t||t<0)return e?D(e,u):u;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||666===a.status&&t!==d)return D(e,0===e.avail_out?-5:u);if(a.strm=e,i=a.last_flush,a.last_flush=t,a.status===C)if(2===a.wrap)e.adler=0,O(a,31),O(a,139),O(a,8),a.gzhead?(O(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),O(a,255&a.gzhead.time),O(a,a.gzhead.time>>8&255),O(a,a.gzhead.time>>16&255),O(a,a.gzhead.time>>24&255),O(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),O(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(O(a,255&a.gzhead.extra.length),O(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=o(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(O(a,0),O(a,0),O(a,0),O(a,0),O(a,0),O(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),O(a,3),a.status=E);else{var p=g+(a.w_bits-8<<4)<<8;p|=(2<=a.strategy||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(p|=32),p+=31-p%31,a.status=E,B(a,p),0!==a.strstart&&(B(a,e.adler>>>16),B(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(s=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),F(e),s=a.pending,a.pending!==a.pending_buf_size));)O(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),F(e),s=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,O(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),0===l&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),F(e),s=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,O(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>s&&(e.adler=o(e.adler,a.pending_buf,a.pending-s,s)),0===l&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&F(e),a.pending+2<=a.pending_buf_size&&(O(a,255&e.adler),O(a,e.adler>>8&255),e.adler=0,a.status=E)):a.status=E),0!==a.pending){if(F(e),0===e.avail_out)return a.last_flush=-1,h}else if(0===e.avail_in&&R(t)<=R(i)&&t!==d)return D(e,-5);if(666===a.status&&0!==e.avail_in)return D(e,-5);if(0!==e.avail_in||0!==a.lookahead||t!==c&&666!==a.status){var _=2===a.strategy?function(e,t){for(var i;;){if(0===e.lookahead&&(W(e),0===e.lookahead)){if(t===c)return P;break}if(e.match_length=0,i=n._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(N(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===d?(N(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?P:M}(a,t):3===a.strategy?function(e,t){for(var i,r,a,s,o=e.window;;){if(e.lookahead<=k){if(W(e),e.lookahead<=k&&t===c)return P;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=S&&0<e.strstart&&(r=o[a=e.strstart-1])===o[++a]&&r===o[++a]&&r===o[++a]){s=e.strstart+k;do{}while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<s);e.match_length=k-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=S?(i=n._tr_tally(e,1,e.match_length-S),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=n._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(N(e,!1),0===e.strm.avail_out))return P}return e.insert=0,t===d?(N(e,!0),0===e.strm.avail_out?T:I):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?P:M}(a,t):r[a.level].func(a,t);if(_!==T&&_!==I||(a.status=666),_===P||_===T)return 0===e.avail_out&&(a.last_flush=-1),h;if(_===M&&(1===t?n._tr_align(a):5!==t&&(n._tr_stored_block(a,0,0,!1),3===t&&(L(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),F(e),0===e.avail_out))return a.last_flush=-1,h}return t!==d?h:a.wrap<=0?1:(2===a.wrap?(O(a,255&e.adler),O(a,e.adler>>8&255),O(a,e.adler>>16&255),O(a,e.adler>>24&255),O(a,255&e.total_in),O(a,e.total_in>>8&255),O(a,e.total_in>>16&255),O(a,e.total_in>>24&255)):(B(a,e.adler>>>16),B(a,65535&e.adler)),F(e),0<a.wrap&&(a.wrap=-a.wrap),0!==a.pending?h:1)},i.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==C&&69!==t&&73!==t&&91!==t&&103!==t&&t!==E&&666!==t?D(e,u):(e.state=null,t===E?D(e,-3):h):u},i.deflateSetDictionary=function(e,t){var i,r,n,o,l,c,d,p,_=t.length;if(!e||!e.state||2===(o=(i=e.state).wrap)||1===o&&i.status!==C||i.lookahead)return u;for(1===o&&(e.adler=s(e.adler,t,_,0)),i.wrap=0,_>=i.w_size&&(0===o&&(L(i.head),i.strstart=0,i.block_start=0,i.insert=0),p=new a.Buf8(i.w_size),a.arraySet(p,t,_-i.w_size,i.w_size,0),t=p,_=i.w_size),l=e.avail_in,c=e.next_in,d=e.input,e.avail_in=_,e.next_in=0,e.input=t,W(i);i.lookahead>=S;){for(r=i.strstart,n=i.lookahead-(S-1);i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+S-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++,--n;);i.strstart=r,i.lookahead=S-1,W(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=S-1,i.match_available=0,e.next_in=c,e.input=d,e.avail_in=l,i.wrap=o,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,i){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,i){t.exports=function(e,t){var i,r,a,n,s,o,l,c,d,h,u,p,_,f,g,m,v,b,y,A,w,S,k,x,C;i=e.state,r=e.next_in,x=e.input,a=r+(e.avail_in-5),n=e.next_out,C=e.output,s=n-(t-e.avail_out),o=n+(e.avail_out-257),l=i.dmax,c=i.wsize,d=i.whave,h=i.wnext,u=i.window,p=i.hold,_=i.bits,f=i.lencode,g=i.distcode,m=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;e:do{_<15&&(p+=x[r++]<<_,_+=8,p+=x[r++]<<_,_+=8),b=f[p&m];t:for(;;){if(p>>>=y=b>>>24,_-=y,0==(y=b>>>16&255))C[n++]=65535&b;else{if(!(16&y)){if(!(64&y)){b=f[(65535&b)+(p&(1<<y)-1)];continue t}if(32&y){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}A=65535&b,(y&=15)&&(_<y&&(p+=x[r++]<<_,_+=8),A+=p&(1<<y)-1,p>>>=y,_-=y),_<15&&(p+=x[r++]<<_,_+=8,p+=x[r++]<<_,_+=8),b=g[p&v];i:for(;;){if(p>>>=y=b>>>24,_-=y,!(16&(y=b>>>16&255))){if(!(64&y)){b=g[(65535&b)+(p&(1<<y)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(w=65535&b,_<(y&=15)&&(p+=x[r++]<<_,(_+=8)<y&&(p+=x[r++]<<_,_+=8)),l<(w+=p&(1<<y)-1)){e.msg="invalid distance too far back",i.mode=30;break e}if(p>>>=y,_-=y,(y=n-s)<w){if(d<(y=w-y)&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(k=u,(S=0)===h){if(S+=c-y,y<A){for(A-=y;C[n++]=u[S++],--y;);S=n-w,k=C}}else if(h<y){if(S+=c+h-y,(y-=h)<A){for(A-=y;C[n++]=u[S++],--y;);if(S=0,h<A){for(A-=y=h;C[n++]=u[S++],--y;);S=n-w,k=C}}}else if(S+=h-y,y<A){for(A-=y;C[n++]=u[S++],--y;);S=n-w,k=C}for(;2<A;)C[n++]=k[S++],C[n++]=k[S++],C[n++]=k[S++],A-=3;A&&(C[n++]=k[S++],1<A&&(C[n++]=k[S++]))}else{for(S=n-w;C[n++]=C[S++],C[n++]=C[S++],C[n++]=C[S++],2<(A-=3););A&&(C[n++]=C[S++],1<A&&(C[n++]=C[S++]))}break}}break}}while(r<a&&n<o);r-=A=_>>3,p&=(1<<(_-=A<<3))-1,e.next_in=r,e.next_out=n,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=n<o?o-n+257:257-(n-o),i.hold=p,i.bits=_}},{}],49:[function(e,t,i){var r=e("../utils/common"),a=e("./adler32"),n=e("./crc32"),s=e("./inffast"),o=e("./inftrees"),l=1,c=2,d=0,h=-2,u=1,p=852,_=592;function f(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=u,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(p),t.distcode=t.distdyn=new r.Buf32(_),t.sane=1,t.back=-1,d):h}function v(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,m(e)):h}function b(e,t){var i,r;return e&&e.state?(r=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?h:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=i,r.wbits=t,v(e))):h}function y(e,t){var i,r;return e?(r=new g,(e.state=r).window=null,(i=b(e,t))!==d&&(e.state=null),i):h}var A,w,S=!0;function k(e){if(S){var t;for(A=new r.Buf32(512),w=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(l,e.lens,0,288,A,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(c,e.lens,0,32,w,0,e.work,{bits:5}),S=!1}e.lencode=A,e.lenbits=9,e.distcode=w,e.distbits=5}function x(e,t,i,a){var n,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new r.Buf8(s.wsize)),a>=s.wsize?(r.arraySet(s.window,t,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(a<(n=s.wsize-s.wnext)&&(n=a),r.arraySet(s.window,t,i-a,n,s.wnext),(a-=n)?(r.arraySet(s.window,t,i-a,a,0),s.wnext=a,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}i.inflateReset=v,i.inflateReset2=b,i.inflateResetKeep=m,i.inflateInit=function(e){return y(e,15)},i.inflateInit2=y,i.inflate=function(e,t){var i,p,_,g,m,v,b,y,A,w,S,C,E,P,M,T,I,D,R,L,F,N,O,B,G=0,W=new r.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;12===(i=e.state).mode&&(i.mode=13),m=e.next_out,_=e.output,b=e.avail_out,g=e.next_in,p=e.input,v=e.avail_in,y=i.hold,A=i.bits,w=v,S=b,N=d;e:for(;;)switch(i.mode){case u:if(0===i.wrap){i.mode=13;break}for(;A<16;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}if(2&i.wrap&&35615===y){W[i.check=0]=255&y,W[1]=y>>>8&255,i.check=n(i.check,W,2,0),A=y=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",i.mode=30;break}if(8!=(15&y)){e.msg="unknown compression method",i.mode=30;break}if(A-=4,F=8+(15&(y>>>=4)),0===i.wbits)i.wbits=F;else if(F>i.wbits){e.msg="invalid window size",i.mode=30;break}i.dmax=1<<F,e.adler=i.check=1,i.mode=512&y?10:12,A=y=0;break;case 2:for(;A<16;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}if(i.flags=y,8!=(255&i.flags)){e.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=y>>8&1),512&i.flags&&(W[0]=255&y,W[1]=y>>>8&255,i.check=n(i.check,W,2,0)),A=y=0,i.mode=3;case 3:for(;A<32;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}i.head&&(i.head.time=y),512&i.flags&&(W[0]=255&y,W[1]=y>>>8&255,W[2]=y>>>16&255,W[3]=y>>>24&255,i.check=n(i.check,W,4,0)),A=y=0,i.mode=4;case 4:for(;A<16;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}i.head&&(i.head.xflags=255&y,i.head.os=y>>8),512&i.flags&&(W[0]=255&y,W[1]=y>>>8&255,i.check=n(i.check,W,2,0)),A=y=0,i.mode=5;case 5:if(1024&i.flags){for(;A<16;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}i.length=y,i.head&&(i.head.extra_len=y),512&i.flags&&(W[0]=255&y,W[1]=y>>>8&255,i.check=n(i.check,W,2,0)),A=y=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(v<(C=i.length)&&(C=v),C&&(i.head&&(F=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),r.arraySet(i.head.extra,p,g,C,F)),512&i.flags&&(i.check=n(i.check,p,C,g)),v-=C,g+=C,i.length-=C),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===v)break e;for(C=0;F=p[g+C++],i.head&&F&&i.length<65536&&(i.head.name+=String.fromCharCode(F)),F&&C<v;);if(512&i.flags&&(i.check=n(i.check,p,C,g)),v-=C,g+=C,F)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===v)break e;for(C=0;F=p[g+C++],i.head&&F&&i.length<65536&&(i.head.comment+=String.fromCharCode(F)),F&&C<v;);if(512&i.flags&&(i.check=n(i.check,p,C,g)),v-=C,g+=C,F)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;A<16;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}if(y!==(65535&i.check)){e.msg="header crc mismatch",i.mode=30;break}A=y=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=12;break;case 10:for(;A<32;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}e.adler=i.check=f(y),A=y=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=m,e.avail_out=b,e.next_in=g,e.avail_in=v,i.hold=y,i.bits=A,2;e.adler=i.check=1,i.mode=12;case 12:if(5===t||6===t)break e;case 13:if(i.last){y>>>=7&A,A-=7&A,i.mode=27;break}for(;A<3;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}switch(i.last=1&y,A-=1,3&(y>>>=1)){case 0:i.mode=14;break;case 1:if(k(i),i.mode=20,6!==t)break;y>>>=2,A-=2;break e;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=30}y>>>=2,A-=2;break;case 14:for(y>>>=7&A,A-=7&A;A<32;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&y,A=y=0,i.mode=15,6===t)break e;case 15:i.mode=16;case 16:if(C=i.length){if(v<C&&(C=v),b<C&&(C=b),0===C)break e;r.arraySet(_,p,g,C,m),v-=C,g+=C,b-=C,m+=C,i.length-=C;break}i.mode=12;break;case 17:for(;A<14;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}if(i.nlen=257+(31&y),y>>>=5,A-=5,i.ndist=1+(31&y),y>>>=5,A-=5,i.ncode=4+(15&y),y>>>=4,A-=4,286<i.nlen||30<i.ndist){e.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;A<3;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}i.lens[j[i.have++]]=7&y,y>>>=3,A-=3}for(;i.have<19;)i.lens[j[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,O={bits:i.lenbits},N=o(0,i.lens,0,19,i.lencode,0,i.work,O),i.lenbits=O.bits,N){e.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;T=(G=i.lencode[y&(1<<i.lenbits)-1])>>>16&255,I=65535&G,!((M=G>>>24)<=A);){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}if(I<16)y>>>=M,A-=M,i.lens[i.have++]=I;else{if(16===I){for(B=M+2;A<B;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}if(y>>>=M,A-=M,0===i.have){e.msg="invalid bit length repeat",i.mode=30;break}F=i.lens[i.have-1],C=3+(3&y),y>>>=2,A-=2}else if(17===I){for(B=M+3;A<B;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}A-=M,F=0,C=3+(7&(y>>>=M)),y>>>=3,A-=3}else{for(B=M+7;A<B;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}A-=M,F=0,C=11+(127&(y>>>=M)),y>>>=7,A-=7}if(i.have+C>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=30;break}for(;C--;)i.lens[i.have++]=F}}if(30===i.mode)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,O={bits:i.lenbits},N=o(l,i.lens,0,i.nlen,i.lencode,0,i.work,O),i.lenbits=O.bits,N){e.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,O={bits:i.distbits},N=o(c,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,O),i.distbits=O.bits,N){e.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===t)break e;case 20:i.mode=21;case 21:if(6<=v&&258<=b){e.next_out=m,e.avail_out=b,e.next_in=g,e.avail_in=v,i.hold=y,i.bits=A,s(e,S),m=e.next_out,_=e.output,b=e.avail_out,g=e.next_in,p=e.input,v=e.avail_in,y=i.hold,A=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;T=(G=i.lencode[y&(1<<i.lenbits)-1])>>>16&255,I=65535&G,!((M=G>>>24)<=A);){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}if(T&&!(240&T)){for(D=M,R=T,L=I;T=(G=i.lencode[L+((y&(1<<D+R)-1)>>D)])>>>16&255,I=65535&G,!(D+(M=G>>>24)<=A);){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}y>>>=D,A-=D,i.back+=D}if(y>>>=M,A-=M,i.back+=M,i.length=I,0===T){i.mode=26;break}if(32&T){i.back=-1,i.mode=12;break}if(64&T){e.msg="invalid literal/length code",i.mode=30;break}i.extra=15&T,i.mode=22;case 22:if(i.extra){for(B=i.extra;A<B;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}i.length+=y&(1<<i.extra)-1,y>>>=i.extra,A-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;T=(G=i.distcode[y&(1<<i.distbits)-1])>>>16&255,I=65535&G,!((M=G>>>24)<=A);){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}if(!(240&T)){for(D=M,R=T,L=I;T=(G=i.distcode[L+((y&(1<<D+R)-1)>>D)])>>>16&255,I=65535&G,!(D+(M=G>>>24)<=A);){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}y>>>=D,A-=D,i.back+=D}if(y>>>=M,A-=M,i.back+=M,64&T){e.msg="invalid distance code",i.mode=30;break}i.offset=I,i.extra=15&T,i.mode=24;case 24:if(i.extra){for(B=i.extra;A<B;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}i.offset+=y&(1<<i.extra)-1,y>>>=i.extra,A-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===b)break e;if(C=S-b,i.offset>C){if((C=i.offset-C)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=30;break}E=C>i.wnext?(C-=i.wnext,i.wsize-C):i.wnext-C,C>i.length&&(C=i.length),P=i.window}else P=_,E=m-i.offset,C=i.length;for(b<C&&(C=b),b-=C,i.length-=C;_[m++]=P[E++],--C;);0===i.length&&(i.mode=21);break;case 26:if(0===b)break e;_[m++]=i.length,b--,i.mode=21;break;case 27:if(i.wrap){for(;A<32;){if(0===v)break e;v--,y|=p[g++]<<A,A+=8}if(S-=b,e.total_out+=S,i.total+=S,S&&(e.adler=i.check=i.flags?n(i.check,_,S,m-S):a(i.check,_,S,m-S)),S=b,(i.flags?y:f(y))!==i.check){e.msg="incorrect data check",i.mode=30;break}A=y=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;A<32;){if(0===v)break e;v--,y+=p[g++]<<A,A+=8}if(y!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=30;break}A=y=0}i.mode=29;case 29:N=1;break e;case 30:N=-3;break e;case 31:return-4;default:return h}return e.next_out=m,e.avail_out=b,e.next_in=g,e.avail_in=v,i.hold=y,i.bits=A,(i.wsize||S!==e.avail_out&&i.mode<30&&(i.mode<27||4!==t))&&x(e,e.output,e.next_out,S-e.avail_out)?(i.mode=31,-4):(w-=e.avail_in,S-=e.avail_out,e.total_in+=w,e.total_out+=S,i.total+=S,i.wrap&&S&&(e.adler=i.check=i.flags?n(i.check,_,S,e.next_out-S):a(i.check,_,S,e.next_out-S)),e.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==w&&0===S||4===t)&&N===d&&(N=-5),N)},i.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,d},i.inflateGetHeader=function(e,t){var i;return e&&e.state&&2&(i=e.state).wrap?((i.head=t).done=!1,d):h},i.inflateSetDictionary=function(e,t){var i,r=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?h:11===i.mode&&a(1,t,r,0)!==i.check?-3:x(e,t,r,r)?(i.mode=31,-4):(i.havedict=1,d):h},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,i){var r=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,l,c,d,h,u){var p,_,f,g,m,v,b,y,A,w=u.bits,S=0,k=0,x=0,C=0,E=0,P=0,M=0,T=0,I=0,D=0,R=null,L=0,F=new r.Buf16(16),N=new r.Buf16(16),O=null,B=0;for(S=0;S<=15;S++)F[S]=0;for(k=0;k<l;k++)F[t[i+k]]++;for(E=w,C=15;1<=C&&0===F[C];C--);if(C<E&&(E=C),0===C)return c[d++]=20971520,c[d++]=20971520,u.bits=1,0;for(x=1;x<C&&0===F[x];x++);for(E<x&&(E=x),S=T=1;S<=15;S++)if(T<<=1,(T-=F[S])<0)return-1;if(0<T&&(0===e||1!==C))return-1;for(N[1]=0,S=1;S<15;S++)N[S+1]=N[S]+F[S];for(k=0;k<l;k++)0!==t[i+k]&&(h[N[t[i+k]]++]=k);if(v=0===e?(R=O=h,19):1===e?(R=a,L-=257,O=n,B-=257,256):(R=s,O=o,-1),S=x,m=d,M=k=D=0,f=-1,g=(I=1<<(P=E))-1,1===e&&852<I||2===e&&592<I)return 1;for(;;){for(b=S-M,A=h[k]<v?(y=0,h[k]):h[k]>v?(y=O[B+h[k]],R[L+h[k]]):(y=96,0),p=1<<S-M,x=_=1<<P;c[m+(D>>M)+(_-=p)]=b<<24|y<<16|A|0,0!==_;);for(p=1<<S-1;D&p;)p>>=1;if(0!==p?(D&=p-1,D+=p):D=0,k++,0==--F[S]){if(S===C)break;S=t[i+h[k]]}if(E<S&&(D&g)!==f){for(0===M&&(M=E),m+=x,T=1<<(P=S-M);P+M<C&&!((T-=F[P+M])<=0);)P++,T<<=1;if(I+=1<<P,1===e&&852<I||2===e&&592<I)return 1;c[f=D&g]=E<<24|P<<16|m-d|0}}return 0!==D&&(c[m+D]=S-M<<24|64<<16|0),u.bits=E,0}},{"../utils/common":41}],51:[function(e,t,i){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,i){var r=e("../utils/common"),a=0,n=1;function s(e){for(var t=e.length;0<=--t;)e[t]=0}var o=0,l=29,c=256,d=c+1+l,h=30,u=19,p=2*d+1,_=15,f=16,g=7,m=256,v=16,b=17,y=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(2*(d+2));s(x);var C=new Array(2*h);s(C);var E=new Array(512);s(E);var P=new Array(256);s(P);var M=new Array(l);s(M);var T,I,D,R=new Array(h);function L(e,t,i,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function F(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function N(e){return e<256?E[e]:E[256+(e>>>7)]}function O(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function B(e,t,i){e.bi_valid>f-i?(e.bi_buf|=t<<e.bi_valid&65535,O(e,e.bi_buf),e.bi_buf=t>>f-e.bi_valid,e.bi_valid+=i-f):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function G(e,t,i){B(e,i[2*t],i[2*t+1])}function W(e,t){for(var i=0;i|=1&e,e>>>=1,i<<=1,0<--t;);return i>>>1}function j(e,t,i){var r,a,n=new Array(_+1),s=0;for(r=1;r<=_;r++)n[r]=s=s+i[r-1]<<1;for(a=0;a<=t;a++){var o=e[2*a+1];0!==o&&(e[2*a]=W(n[o]++,o))}}function V(e){var t;for(t=0;t<d;t++)e.dyn_ltree[2*t]=0;for(t=0;t<h;t++)e.dyn_dtree[2*t]=0;for(t=0;t<u;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*m]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function U(e){8<e.bi_valid?O(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function z(e,t,i,r){var a=2*t,n=2*i;return e[a]<e[n]||e[a]===e[n]&&r[t]<=r[i]}function H(e,t,i){for(var r=e.heap[i],a=i<<1;a<=e.heap_len&&(a<e.heap_len&&z(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!z(t,r,e.heap[a],e.depth));)e.heap[i]=e.heap[a],i=a,a<<=1;e.heap[i]=r}function q(e,t,i){var r,a,n,s,o=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],a=e.pending_buf[e.l_buf+o],o++,0===r?G(e,a,t):(G(e,(n=P[a])+c+1,t),0!==(s=A[n])&&B(e,a-=M[n],s),G(e,n=N(--r),i),0!==(s=w[n])&&B(e,r-=R[n],s)),o<e.last_lit;);G(e,m,t)}function X(e,t){var i,r,a,n=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=p,i=0;i<l;i++)0!==n[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):n[2*i+1]=0;for(;e.heap_len<2;)n[2*(a=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=s[2*a+1]);for(t.max_code=c,i=e.heap_len>>1;1<=i;i--)H(e,n,i);for(a=l;i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],H(e,n,1),r=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=r,n[2*a]=n[2*i]+n[2*r],e.depth[a]=(e.depth[i]>=e.depth[r]?e.depth[i]:e.depth[r])+1,n[2*i+1]=n[2*r+1]=a,e.heap[1]=a++,H(e,n,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,r,a,n,s,o,l=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,h=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,g=t.stat_desc.max_length,m=0;for(n=0;n<=_;n++)e.bl_count[n]=0;for(l[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<p;i++)g<(n=l[2*l[2*(r=e.heap[i])+1]+1]+1)&&(n=g,m++),l[2*r+1]=n,c<r||(e.bl_count[n]++,s=0,f<=r&&(s=u[r-f]),o=l[2*r],e.opt_len+=o*(n+s),h&&(e.static_len+=o*(d[2*r+1]+s)));if(0!==m){do{for(n=g-1;0===e.bl_count[n];)n--;e.bl_count[n]--,e.bl_count[n+1]+=2,e.bl_count[g]--,m-=2}while(0<m);for(n=g;0!==n;n--)for(r=e.bl_count[n];0!==r;)c<(a=e.heap[--i])||(l[2*a+1]!==n&&(e.opt_len+=(n-l[2*a+1])*l[2*a],l[2*a+1]=n),r--)}}(e,t),j(n,c,e.bl_count)}function K(e,t,i){var r,a,n=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(i+1)+1]=65535,r=0;r<=i;r++)a=s,s=t[2*(r+1)+1],++o<l&&a===s||(o<c?e.bl_tree[2*a]+=o:0!==a?(a!==n&&e.bl_tree[2*a]++,e.bl_tree[2*v]++):o<=10?e.bl_tree[2*b]++:e.bl_tree[2*y]++,n=a,c=(o=0)===s?(l=138,3):a===s?(l=6,3):(l=7,4))}function $(e,t,i){var r,a,n=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),r=0;r<=i;r++)if(a=s,s=t[2*(r+1)+1],!(++o<l&&a===s)){if(o<c)for(;G(e,a,e.bl_tree),0!=--o;);else 0!==a?(a!==n&&(G(e,a,e.bl_tree),o--),G(e,v,e.bl_tree),B(e,o-3,2)):o<=10?(G(e,b,e.bl_tree),B(e,o-3,3)):(G(e,y,e.bl_tree),B(e,o-11,7));n=a,c=(o=0)===s?(l=138,3):a===s?(l=6,3):(l=7,4)}}s(R);var Y=!1;function Z(e,t,i,a){var n,s,l,c;B(e,(o<<1)+(a?1:0),3),s=t,l=i,c=!0,U(n=e),c&&(O(n,l),O(n,~l)),r.arraySet(n.pending_buf,n.window,s,l,n.pending),n.pending+=l}i._tr_init=function(e){Y||(function(){var e,t,i,r,a,n=new Array(_+1);for(r=i=0;r<l-1;r++)for(M[r]=i,e=0;e<1<<A[r];e++)P[i++]=r;for(P[i-1]=r,r=a=0;r<16;r++)for(R[r]=a,e=0;e<1<<w[r];e++)E[a++]=r;for(a>>=7;r<h;r++)for(R[r]=a<<7,e=0;e<1<<w[r]-7;e++)E[256+a++]=r;for(t=0;t<=_;t++)n[t]=0;for(e=0;e<=143;)x[2*e+1]=8,e++,n[8]++;for(;e<=255;)x[2*e+1]=9,e++,n[9]++;for(;e<=279;)x[2*e+1]=7,e++,n[7]++;for(;e<=287;)x[2*e+1]=8,e++,n[8]++;for(j(x,d+1,n),e=0;e<h;e++)C[2*e+1]=5,C[2*e]=W(e,5);T=new L(x,A,c+1,d,_),I=new L(C,w,0,h,_),D=new L(new Array(0),S,0,u,g)}(),Y=!0),e.l_desc=new F(e.dyn_ltree,T),e.d_desc=new F(e.dyn_dtree,I),e.bl_desc=new F(e.bl_tree,D),e.bi_buf=0,e.bi_valid=0,V(e)},i._tr_stored_block=Z,i._tr_flush_block=function(e,t,i,r){var s,o,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return n;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return n;return a}(e)),X(e,e.l_desc),X(e,e.d_desc),l=function(e){var t;for(K(e,e.dyn_ltree,e.l_desc.max_code),K(e,e.dyn_dtree,e.d_desc.max_code),X(e,e.bl_desc),t=u-1;3<=t&&0===e.bl_tree[2*k[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),s=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=s&&(s=o)):s=o=i+5,i+4<=s&&-1!==t?Z(e,t,i,r):4===e.strategy||o===s?(B(e,2+(r?1:0),3),q(e,x,C)):(B(e,4+(r?1:0),3),function(e,t,i,r){var a;for(B(e,t-257,5),B(e,i-1,5),B(e,r-4,4),a=0;a<r;a++)B(e,e.bl_tree[2*k[a]+1],3);$(e,e.dyn_ltree,t-1),$(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),q(e,e.dyn_ltree,e.dyn_dtree)),V(e),r&&U(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(P[i]+c+1)]++,e.dyn_dtree[2*N(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){var t;B(e,2,3),G(e,m,x),16===(t=e).bi_valid?(O(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,i){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,i){(function(e){!function(e,t){if(!e.setImmediate){var i,r,a,n,s=1,o={},l=!1,c=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,i="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?(n="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(n+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){u(e.data)},function(e){a.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){u(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(u,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return o[s]=a,i(s),s++},d.clearImmediate=h}function h(e){delete o[e]}function u(e){if(l)setTimeout(u,0,e);else{var i=o[e];if(i){l=!0;try{!function(e){var i=e.callback,r=e.args;switch(r.length){case 0:i();break;case 1:i(r[0]);break;case 2:i(r[0],r[1]);break;case 3:i(r[0],r[1],r[2]);break;default:i.apply(t,r)}}(i)}finally{h(e),l=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(n)&&u(+t.data.slice(n.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==c?c:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},_.exports=e()),_.exports;var e}globalThis,p=e=>(()=>{var t={438:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var r=i(537),a=i.n(r),n=i(645),s=i.n(n),o=i(806),l=i.n(o),c=new URL(i(583),i.b),d=s()(a()),h=l()(c);d.push([e.id,'@namespace "http://www.w3.org/1998/Math/MathML";math{display:inline-block;line-height:initial}mfrac{display:inline-block;vertical-align:-50%;text-align:center}mfrac>:first-child{border-bottom:solid thin currentColor}mfrac>*{display:block}msub>:nth-child(2){font-size:smaller;vertical-align:sub}msup>:nth-child(2){font-size:smaller;vertical-align:super}munder,mover,munderover{display:inline-flex;flex-flow:column nowrap;vertical-align:middle;text-align:center}munder>:not(:first-child),mover>:not(:first-child),munderover>:not(:first-child){font-size:smaller}munderover>:last-child{order:-1}mroot,msqrt{position:relative;display:inline-block;border-top:solid thin currentColor;margin-top:.5px;vertical-align:middle;margin-left:1ch}mroot:before,msqrt:before{content:"";display:inline-block;position:absolute;width:1ch;left:-1ch;top:-1px;bottom:0;background-image:url('.concat(h,")}"),"",{version:3,sources:["webpack://./src/mathml.scss"],names:[],mappings:"AAAA,+CAAA,CAEA,KACI,oBAAA,CACA,mBAAA,CAGJ,MACI,oBAAA,CACA,mBAAA,CACA,iBAAA,CAEA,mBACI,qCAAA,CAGJ,QACI,aAAA,CAKJ,mBACI,iBAAA,CACA,kBAAA,CAKJ,mBACI,iBAAA,CACA,oBAAA,CAIR,wBACI,mBAAA,CACA,uBAAA,CACA,qBAAA,CACA,iBAAA,CAEA,iFACI,iBAAA,CAKJ,uBAAA,QAAA,CAGJ,YACI,iBAAA,CACA,oBAAA,CACA,kCAAA,CACA,eAAA,CACA,qBAAA,CACA,eAAA,CAEA,0BACI,UAAA,CACA,oBAAA,CACA,iBAAA,CACA,SAAA,CACA,SAAA,CACA,QAAA,CACA,QAAA,CACA,wDAAA",sourcesContent:["@namespace \"http://www.w3.org/1998/Math/MathML\";\r\n\r\nmath {\r\n    display: inline-block;\r\n    line-height: initial;\r\n}\r\n\r\nmfrac {\r\n    display: inline-block;\r\n    vertical-align: -50%;\r\n    text-align: center;\r\n\r\n    &>:first-child {\r\n        border-bottom: solid thin currentColor;\r\n    }\r\n\r\n    &>* {\r\n        display: block;\r\n    }\r\n}\r\n\r\nmsub {\r\n    &>:nth-child(2) {\r\n        font-size: smaller;\r\n        vertical-align: sub;\r\n    }\r\n}\r\n\r\nmsup {\r\n    &>:nth-child(2) {\r\n        font-size: smaller;\r\n        vertical-align: super;\r\n    }\r\n}\r\n\r\nmunder, mover, munderover {\r\n    display: inline-flex;\r\n    flex-flow: column nowrap;\r\n    vertical-align: middle;\r\n    text-align: center;\r\n\r\n    &>:not(:first-child) {\r\n        font-size: smaller;\r\n    }\r\n}\r\n\r\nmunderover {\r\n    &>:last-child { order: -1; }\r\n}\r\n\r\nmroot, msqrt {\r\n    position: relative;\r\n    display: inline-block;\r\n    border-top: solid thin currentColor;  \r\n    margin-top: 0.5px;\r\n    vertical-align: middle;  \r\n    margin-left: 1ch; \r\n\r\n    &:before {\r\n        content: \"\";\r\n        display: inline-block;\r\n        position: absolute;\r\n        width: 1ch;\r\n        left: -1ch;\r\n        top: -1px;\r\n        bottom: 0;\r\n        background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 100' preserveAspectRatio='none'%3E%3Cpath d='m0,75 l5,0 l5,25 l10,-100' stroke='black' fill='none' vector-effect='non-scaling-stroke'/%3E%3C/svg%3E\");\r\n    }\r\n}"],sourceRoot:""}]);const u=d.toString()},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",r=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),r&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),r&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,r,a,n){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&s[d[0]]||(void 0!==n&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=n),i&&(d[2]&&(d[1]="@media ".concat(d[2]," {").concat(d[1],"}")),d[2]=i),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},806:e=>{e.exports=function(e,t){return t||(t={}),e&&(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},537:e=>{e.exports=function(e){var t=e[1],i=e[3];if(!i)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),n="/*# ".concat(a," */");return[t].concat([n]).join("\n")}return[t].join("\n")}},522:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OpenXmlPackage=void 0;const r=i(626),a=i(472),n=i(593),s=i(461);class o{constructor(e,t){this._zip=e,this.options=t,this.xmlParser=new a.XmlParser}get(e){return this._zip.files[(t=e,t.startsWith("/")?t.substr(1):t)];var t}update(e,t){this._zip.file(e,t)}static load(e,t){return l(this,null,(function*(){const i=yield r.loadAsync(e);return new o(i,t)}))}save(e="blob"){return this._zip.generateAsync({type:e})}load(e,t="string"){var i,r;return null!==(r=null===(i=this.get(e))||void 0===i?void 0:i.async(t))&&void 0!==r?r:Promise.resolve(null)}loadRelationships(e=null){return l(this,null,(function*(){let t="_rels/.rels";if(null!=e){const[i,r]=(0,n.splitPath)(e);t="".concat(i,"_rels/").concat(r,".rels")}const i=yield this.load(t);return i?(0,s.parseRelationships)(this.parseXmlDocument(i).firstElementChild,this.xmlParser):null}))}parseXmlDocument(e){return(0,a.parseXmlString)(e,this.options.trimXmlDeclaration)}}t.OpenXmlPackage=o},530:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Part=void 0;const r=i(472);t.Part=class{constructor(e,t){this._package=e,this.path=t}load(){return l(this,null,(function*(){this.rels=yield this._package.loadRelationships(this.path);const e=yield this._package.load(this.path),t=this._package.parseXmlDocument(e);this._package.options.keepOrigin&&(this._xmlDocument=t),this.parseXml(t.firstElementChild)}))}save(){this._package.update(this.path,(0,r.serializeXmlString)(this._xmlDocument))}parseXml(e){}}},461:(e,t)=>{var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.parseRelationships=t.RelationshipTypes=void 0,(r=i||(t.RelationshipTypes=i={})).OfficeDocument="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",r.FontTable="http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable",r.Image="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",r.Numbering="http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering",r.Styles="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",r.StylesWithEffects="http://schemas.microsoft.com/office/2007/relationships/stylesWithEffects",r.Theme="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",r.Settings="http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings",r.WebSettings="http://schemas.openxmlformats.org/officeDocument/2006/relationships/webSettings",r.Hyperlink="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",r.Footnotes="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes",r.Endnotes="http://schemas.openxmlformats.org/officeDocument/2006/relationships/endnotes",r.Footer="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",r.Header="http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",r.ExtendedProperties="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",r.CoreProperties="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",r.CustomProperties="http://schemas.openxmlformats.org/package/2006/relationships/metadata/custom-properties",t.parseRelationships=function(e,t){return t.elements(e).map((e=>({id:t.attr(e,"Id"),type:t.attr(e,"Type"),target:t.attr(e,"Target"),targetMode:t.attr(e,"TargetMode")})))}},168:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentParser=t.autos=void 0;const r=i(120),a=i(109),n=i(59),s=i(472),o=i(488),l=i(172),c=i(149),d=i(320);t.autos={shd:"inherit",color:"black",borderColor:"black",highlight:"transparent"};const h=[],u={oMath:r.DomType.MmlMath,oMathPara:r.DomType.MmlMathParagraph,f:r.DomType.MmlFraction,func:r.DomType.MmlFunction,fName:r.DomType.MmlFunctionName,num:r.DomType.MmlNumerator,den:r.DomType.MmlDenominator,rad:r.DomType.MmlRadical,deg:r.DomType.MmlDegree,e:r.DomType.MmlBase,sSup:r.DomType.MmlSuperscript,sSub:r.DomType.MmlSubscript,sPre:r.DomType.MmlPreSubSuper,sup:r.DomType.MmlSuperArgument,sub:r.DomType.MmlSubArgument,d:r.DomType.MmlDelimiter,nary:r.DomType.MmlNary,eqArr:r.DomType.MmlEquationArray,lim:r.DomType.MmlLimit,limLow:r.DomType.MmlLimitLower,m:r.DomType.MmlMatrix,mr:r.DomType.MmlMatrixRow,box:r.DomType.MmlBox,bar:r.DomType.MmlBar,groupChr:r.DomType.MmlGroupChar};t.DocumentParser=class{constructor(e){this.options=Object.assign({ignoreWidth:!1,debug:!1},e)}parseNotes(e,t,i){var r=[];for(let a of s.default.elements(e,t)){const e=new i;e.id=s.default.attr(a,"id"),e.noteType=s.default.attr(a,"type"),e.children=this.parseBodyElements(a),r.push(e)}return r}parseDocumentFile(e){var t=s.default.element(e,"body"),i=s.default.element(e,"background"),a=s.default.element(t,"sectPr");return{type:r.DomType.Document,children:this.parseBodyElements(t),props:a?(0,n.parseSectionProperties)(a,s.default):{},cssStyle:i?this.parseBackground(i):{}}}parseBackground(e){var t={},i=_.colorAttr(e,"color");return i&&(t["background-color"]=i),t}parseBodyElements(e){var t=[];for(let i of s.default.elements(e))switch(i.localName){case"p":t.push(this.parseParagraph(i));break;case"tbl":t.push(this.parseTable(i));break;case"sdt":t.push(...this.parseSdt(i,(e=>this.parseBodyElements(e))))}return t}parseStylesFile(e){var t=[];return _.foreach(e,(e=>{switch(e.localName){case"style":t.push(this.parseStyle(e));break;case"docDefaults":t.push(this.parseDefaultStyles(e))}})),t}parseDefaultStyles(e){var t={id:null,name:null,target:null,basedOn:null,styles:[]};return _.foreach(e,(e=>{switch(e.localName){case"rPrDefault":var i=s.default.element(e,"rPr");i&&t.styles.push({target:"span",values:this.parseDefaultProperties(i,{})});break;case"pPrDefault":var r=s.default.element(e,"pPr");r&&t.styles.push({target:"p",values:this.parseDefaultProperties(r,{})})}})),t}parseStyle(e){var t={id:s.default.attr(e,"styleId"),isDefault:s.default.boolAttr(e,"default"),name:null,target:null,basedOn:null,styles:[],linked:null};switch(s.default.attr(e,"type")){case"paragraph":t.target="p";break;case"table":t.target="table";break;case"character":t.target="span"}return _.foreach(e,(e=>{switch(e.localName){case"basedOn":t.basedOn=s.default.attr(e,"val");break;case"name":t.name=s.default.attr(e,"val");break;case"link":t.linked=s.default.attr(e,"val");break;case"next":t.next=s.default.attr(e,"val");break;case"aliases":t.aliases=s.default.attr(e,"val").split(",");break;case"pPr":t.styles.push({target:"p",values:this.parseDefaultProperties(e,{})}),t.paragraphProps=(0,a.parseParagraphProperties)(e,s.default);break;case"rPr":t.styles.push({target:"span",values:this.parseDefaultProperties(e,{})}),t.runProps=(0,o.parseRunProperties)(e,s.default);break;case"tblPr":case"tcPr":t.styles.push({target:"td",values:this.parseDefaultProperties(e,{})});break;case"tblStylePr":for(let i of this.parseTableStyle(e))t.styles.push(i);break;case"rsid":case"qFormat":case"hidden":case"semiHidden":case"unhideWhenUsed":case"autoRedefine":case"uiPriority":break;default:this.options.debug}})),t}parseTableStyle(e){var t=[],i=s.default.attr(e,"type"),r="",a="";switch(i){case"firstRow":a=".first-row",r="tr.first-row td";break;case"lastRow":a=".last-row",r="tr.last-row td";break;case"firstCol":a=".first-col",r="td.first-col";break;case"lastCol":a=".last-col",r="td.last-col";break;case"band1Vert":a=":not(.no-vband)",r="td.odd-col";break;case"band2Vert":a=":not(.no-vband)",r="td.even-col";break;case"band1Horz":a=":not(.no-hband)",r="tr.odd-row";break;case"band2Horz":a=":not(.no-hband)",r="tr.even-row";break;default:return[]}return _.foreach(e,(e=>{switch(e.localName){case"pPr":t.push({target:"".concat(r," p"),mod:a,values:this.parseDefaultProperties(e,{})});break;case"rPr":t.push({target:"".concat(r," span"),mod:a,values:this.parseDefaultProperties(e,{})});break;case"tblPr":case"tcPr":t.push({target:r,mod:a,values:this.parseDefaultProperties(e,{})})}})),t}parseNumberingFile(e){var t=[],i={},r=[];return _.foreach(e,(e=>{switch(e.localName){case"abstractNum":this.parseAbstractNumbering(e,r).forEach((e=>t.push(e)));break;case"numPicBullet":r.push(this.parseNumberingPicBullet(e));break;case"num":var a=s.default.attr(e,"numId"),n=s.default.elementAttr(e,"abstractNumId","val");i[n]=a}})),t.forEach((e=>e.id=i[e.id])),t}parseNumberingPicBullet(e){var t=s.default.element(e,"pict"),i=t&&s.default.element(t,"shape"),r=i&&s.default.element(i,"imagedata");return r?{id:s.default.intAttr(e,"numPicBulletId"),src:s.default.attr(r,"id"),style:s.default.attr(i,"style")}:null}parseAbstractNumbering(e,t){var i=[],r=s.default.attr(e,"abstractNumId");return _.foreach(e,(e=>{"lvl"===e.localName&&i.push(this.parseNumberingLevel(r,e,t))})),i}parseNumberingLevel(e,t,i){var r={id:e,level:s.default.intAttr(t,"ilvl"),start:1,pStyleName:void 0,pStyle:{},rStyle:{},suff:"tab"};return _.foreach(t,(e=>{switch(e.localName){case"start":r.start=s.default.intAttr(e,"val");break;case"pPr":this.parseDefaultProperties(e,r.pStyle);break;case"rPr":this.parseDefaultProperties(e,r.rStyle);break;case"lvlPicBulletId":var t=s.default.intAttr(e,"val");r.bullet=i.find((e=>e.id==t));break;case"lvlText":r.levelText=s.default.attr(e,"val");break;case"pStyle":r.pStyleName=s.default.attr(e,"val");break;case"numFmt":r.format=s.default.attr(e,"val");break;case"suff":r.suff=s.default.attr(e,"val")}})),r}parseSdt(e,t){const i=s.default.element(e,"sdtContent");return i?t(i):[]}parseInserted(e,t){var i,a;return{type:r.DomType.Inserted,children:null!==(a=null===(i=t(e))||void 0===i?void 0:i.children)&&void 0!==a?a:[]}}parseDeleted(e,t){var i,a;return{type:r.DomType.Deleted,children:null!==(a=null===(i=t(e))||void 0===i?void 0:i.children)&&void 0!==a?a:[]}}parseParagraph(e){var t={type:r.DomType.Paragraph,children:[]};for(let i of s.default.elements(e))switch(i.localName){case"pPr":this.parseParagraphProperties(i,t);break;case"r":t.children.push(this.parseRun(i,t));break;case"hyperlink":t.children.push(this.parseHyperlink(i,t));break;case"bookmarkStart":t.children.push((0,l.parseBookmarkStart)(i,s.default));break;case"bookmarkEnd":t.children.push((0,l.parseBookmarkEnd)(i,s.default));break;case"oMath":case"oMathPara":t.children.push(this.parseMathElement(i));break;case"sdt":t.children.push(...this.parseSdt(i,(e=>this.parseParagraph(e).children)));break;case"ins":t.children.push(this.parseInserted(i,(e=>this.parseParagraph(e))));break;case"del":t.children.push(this.parseDeleted(i,(e=>this.parseParagraph(e))))}return t}parseParagraphProperties(e,t){this.parseDefaultProperties(e,t.cssStyle={},null,(e=>{if((0,a.parseParagraphProperty)(e,t,s.default))return!0;switch(e.localName){case"pStyle":t.styleName=s.default.attr(e,"val");break;case"cnfStyle":t.className=f.classNameOfCnfStyle(e);break;case"framePr":this.parseFrame(e,t);break;case"rPr":break;default:return!1}return!0}))}parseFrame(e,t){"drop"==s.default.attr(e,"dropCap")&&(t.cssStyle.float="left")}parseHyperlink(e,t){var i={type:r.DomType.Hyperlink,parent:t,children:[]},a=s.default.attr(e,"anchor"),n=s.default.attr(e,"id");return a&&(i.href="#"+a),n&&(i.id=n),_.foreach(e,(e=>{"r"===e.localName&&i.children.push(this.parseRun(e,i))})),i}parseRun(e,t){var i={type:r.DomType.Run,parent:t,children:[]};return _.foreach(e,(e=>{switch((e=this.checkAlternateContent(e)).localName){case"t":i.children.push({type:r.DomType.Text,text:e.textContent});break;case"delText":i.children.push({type:r.DomType.DeletedText,text:e.textContent});break;case"fldSimple":i.children.push({type:r.DomType.SimpleField,instruction:s.default.attr(e,"instr"),lock:s.default.boolAttr(e,"lock",!1),dirty:s.default.boolAttr(e,"dirty",!1)});break;case"instrText":i.fieldRun=!0,i.children.push({type:r.DomType.Instruction,text:e.textContent});break;case"fldChar":i.fieldRun=!0,i.children.push({type:r.DomType.ComplexField,charType:s.default.attr(e,"fldCharType"),lock:s.default.boolAttr(e,"lock",!1),dirty:s.default.boolAttr(e,"dirty",!1)});break;case"noBreakHyphen":i.children.push({type:r.DomType.NoBreakHyphen});break;case"br":i.children.push({type:r.DomType.Break,break:s.default.attr(e,"type")||"textWrapping"});break;case"lastRenderedPageBreak":i.children.push({type:r.DomType.Break,break:"lastRenderedPageBreak"});break;case"sym":i.children.push({type:r.DomType.Symbol,font:s.default.attr(e,"font"),char:s.default.attr(e,"char")});break;case"tab":i.children.push({type:r.DomType.Tab});break;case"footnoteReference":i.children.push({type:r.DomType.FootnoteReference,id:s.default.attr(e,"id")});break;case"endnoteReference":i.children.push({type:r.DomType.EndnoteReference,id:s.default.attr(e,"id")});break;case"drawing":let t=this.parseDrawing(e);t&&(i.children=[t]);break;case"pict":i.children.push(this.parseVmlPicture(e));break;case"rPr":this.parseRunProperties(e,i)}})),i}parseMathElement(e){const t="".concat(e.localName,"Pr"),i={type:u[e.localName],children:[]};for(const n of s.default.elements(e))if(u[n.localName])i.children.push(this.parseMathElement(n));else if("r"==n.localName){var a=this.parseRun(n);a.type=r.DomType.MmlRun,i.children.push(a)}else n.localName==t&&(i.props=this.parseMathProperies(n));return i}parseMathProperies(e){const t={};for(const i of s.default.elements(e))switch(i.localName){case"chr":t.char=s.default.attr(i,"val");break;case"vertJc":t.verticalJustification=s.default.attr(i,"val");break;case"pos":t.position=s.default.attr(i,"val");break;case"degHide":t.hideDegree=s.default.boolAttr(i,"val");break;case"begChr":t.beginChar=s.default.attr(i,"val");break;case"endChr":t.endChar=s.default.attr(i,"val")}return t}parseRunProperties(e,t){this.parseDefaultProperties(e,t.cssStyle={},null,(e=>{switch(e.localName){case"rStyle":t.styleName=s.default.attr(e,"val");break;case"vertAlign":t.verticalAlign=f.valueOfVertAlign(e,!0);break;default:return!1}return!0}))}parseVmlPicture(e){const t={type:r.DomType.VmlPicture,children:[]};for(const i of s.default.elements(e)){const e=(0,d.parseVmlElement)(i,this);e&&t.children.push(e)}return t}checkAlternateContent(e){var t;if("AlternateContent"!=e.localName)return e;var i=s.default.element(e,"Choice");if(i){var r=s.default.attr(i,"Requires"),a=e.lookupNamespaceURI(r);if(h.includes(a))return i.firstElementChild}return null===(t=s.default.element(e,"Fallback"))||void 0===t?void 0:t.firstElementChild}parseDrawing(e){for(var t of s.default.elements(e))switch(t.localName){case"inline":case"anchor":return this.parseDrawingWrapper(t)}}parseDrawingWrapper(e){var t,i={type:r.DomType.Drawing,children:[],cssStyle:{}},a="anchor"==e.localName;let n=null,o=s.default.boolAttr(e,"simplePos"),l={relative:"page",align:"left",offset:"0"},d={relative:"page",align:"top",offset:"0"};for(var h of s.default.elements(e))switch(h.localName){case"simplePos":o&&(l.offset=s.default.lengthAttr(h,"x",c.LengthUsage.Emu),d.offset=s.default.lengthAttr(h,"y",c.LengthUsage.Emu));break;case"extent":i.cssStyle.width=s.default.lengthAttr(h,"cx",c.LengthUsage.Emu),i.cssStyle.height=s.default.lengthAttr(h,"cy",c.LengthUsage.Emu);break;case"positionH":case"positionV":if(!o){let e="positionH"==h.localName?l:d;var u=s.default.element(h,"align"),p=s.default.element(h,"posOffset");e.relative=null!==(t=s.default.attr(h,"relativeFrom"))&&void 0!==t?t:e.relative,u&&(e.align=u.textContent),p&&(e.offset=_.sizeValue(p,c.LengthUsage.Emu))}break;case"wrapTopAndBottom":n="wrapTopAndBottom";break;case"wrapNone":n="wrapNone";break;case"graphic":var f=this.parseGraphic(h);f&&i.children.push(f)}return"wrapTopAndBottom"==n?(i.cssStyle.display="block",l.align&&(i.cssStyle["text-align"]=l.align,i.cssStyle.width="100%")):"wrapNone"==n?(i.cssStyle.display="block",i.cssStyle.position="relative",i.cssStyle.width="0px",i.cssStyle.height="0px",l.offset&&(i.cssStyle.left=l.offset),d.offset&&(i.cssStyle.top=d.offset)):!a||"left"!=l.align&&"right"!=l.align||(i.cssStyle.float=l.align),i}parseGraphic(e){var t=s.default.element(e,"graphicData");for(let i of s.default.elements(t))if("pic"===i.localName)return this.parsePicture(i);return null}parsePicture(e){var t={type:r.DomType.Image,src:"",cssStyle:{}},i=s.default.element(e,"blipFill"),a=s.default.element(i,"blip");t.src=s.default.attr(a,"embed");var n=s.default.element(e,"spPr"),o=s.default.element(n,"xfrm");for(var l of(t.cssStyle.position="relative",s.default.elements(o)))switch(l.localName){case"ext":t.cssStyle.width=s.default.lengthAttr(l,"cx",c.LengthUsage.Emu),t.cssStyle.height=s.default.lengthAttr(l,"cy",c.LengthUsage.Emu);break;case"off":t.cssStyle.left=s.default.lengthAttr(l,"x",c.LengthUsage.Emu),t.cssStyle.top=s.default.lengthAttr(l,"y",c.LengthUsage.Emu)}return t}parseTable(e){var t={type:r.DomType.Table,children:[]};return _.foreach(e,(e=>{switch(e.localName){case"tr":t.children.push(this.parseTableRow(e));break;case"tblGrid":t.columns=this.parseTableColumns(e);break;case"tblPr":this.parseTableProperties(e,t)}})),t}parseTableColumns(e){var t=[];return _.foreach(e,(e=>{"gridCol"===e.localName&&t.push({width:s.default.lengthAttr(e,"w")})})),t}parseTableProperties(e,t){switch(t.cssStyle={},t.cellStyle={},this.parseDefaultProperties(e,t.cssStyle,t.cellStyle,(e=>{switch(e.localName){case"tblStyle":t.styleName=s.default.attr(e,"val");break;case"tblLook":t.className=f.classNameOftblLook(e);break;case"tblpPr":this.parseTablePosition(e,t);break;case"tblStyleColBandSize":t.colBandSize=s.default.intAttr(e,"val");break;case"tblStyleRowBandSize":t.rowBandSize=s.default.intAttr(e,"val");break;default:return!1}return!0})),t.cssStyle["text-align"]){case"center":delete t.cssStyle["text-align"],t.cssStyle["margin-left"]="auto",t.cssStyle["margin-right"]="auto";break;case"right":delete t.cssStyle["text-align"],t.cssStyle["margin-left"]="auto"}}parseTablePosition(e,t){var i=s.default.lengthAttr(e,"topFromText"),r=s.default.lengthAttr(e,"bottomFromText"),a=s.default.lengthAttr(e,"rightFromText"),n=s.default.lengthAttr(e,"leftFromText");t.cssStyle.float="left",t.cssStyle["margin-bottom"]=f.addSize(t.cssStyle["margin-bottom"],r),t.cssStyle["margin-left"]=f.addSize(t.cssStyle["margin-left"],n),t.cssStyle["margin-right"]=f.addSize(t.cssStyle["margin-right"],a),t.cssStyle["margin-top"]=f.addSize(t.cssStyle["margin-top"],i)}parseTableRow(e){var t={type:r.DomType.Row,children:[]};return _.foreach(e,(e=>{switch(e.localName){case"tc":t.children.push(this.parseTableCell(e));break;case"trPr":this.parseTableRowProperties(e,t)}})),t}parseTableRowProperties(e,t){t.cssStyle=this.parseDefaultProperties(e,{},null,(e=>{switch(e.localName){case"cnfStyle":t.className=f.classNameOfCnfStyle(e);break;case"tblHeader":t.isHeader=s.default.boolAttr(e,"val");break;default:return!1}return!0}))}parseTableCell(e){var t={type:r.DomType.Cell,children:[]};return _.foreach(e,(e=>{switch(e.localName){case"tbl":t.children.push(this.parseTable(e));break;case"p":t.children.push(this.parseParagraph(e));break;case"tcPr":this.parseTableCellProperties(e,t)}})),t}parseTableCellProperties(e,t){t.cssStyle=this.parseDefaultProperties(e,{},null,(e=>{var i;switch(e.localName){case"gridSpan":t.span=s.default.intAttr(e,"val",null);break;case"vMerge":t.verticalMerge=null!==(i=s.default.attr(e,"val"))&&void 0!==i?i:"continue";break;case"cnfStyle":t.className=f.classNameOfCnfStyle(e);break;default:return!1}return!0}))}parseDefaultProperties(e,i=null,r=null,a=null){return i=i||{},_.foreach(e,(n=>{if(null==a||!a(n))switch(n.localName){case"jc":i["text-align"]=f.valueOfJc(n);break;case"textAlignment":i["vertical-align"]=f.valueOfTextAlignment(n);break;case"color":i.color=_.colorAttr(n,"val",null,t.autos.color);break;case"sz":i["font-size"]=i["min-height"]=s.default.lengthAttr(n,"val",c.LengthUsage.FontSize);break;case"shd":i["background-color"]=_.colorAttr(n,"fill",null,t.autos.shd);break;case"highlight":i["background-color"]=_.colorAttr(n,"val",null,t.autos.highlight);break;case"vertAlign":break;case"position":i.verticalAlign=s.default.lengthAttr(n,"val",c.LengthUsage.FontSize);break;case"tcW":if(this.options.ignoreWidth)break;case"tblW":i.width=f.valueOfSize(n,"w");break;case"trHeight":this.parseTrHeight(n,i);break;case"strike":i["text-decoration"]=s.default.boolAttr(n,"val",!0)?"line-through":"none";break;case"b":i["font-weight"]=s.default.boolAttr(n,"val",!0)?"bold":"normal";break;case"i":i["font-style"]=s.default.boolAttr(n,"val",!0)?"italic":"normal";break;case"caps":i["text-transform"]=s.default.boolAttr(n,"val",!0)?"uppercase":"none";break;case"smallCaps":i["text-transform"]=s.default.boolAttr(n,"val",!0)?"lowercase":"none";break;case"u":this.parseUnderline(n,i);break;case"ind":case"tblInd":this.parseIndentation(n,i);break;case"rFonts":this.parseFont(n,i);break;case"tblBorders":this.parseBorderProperties(n,r||i);break;case"tblCellSpacing":i["border-spacing"]=f.valueOfMargin(n),i["border-collapse"]="separate";break;case"pBdr":this.parseBorderProperties(n,i);break;case"bdr":i.border=f.valueOfBorder(n);break;case"tcBorders":this.parseBorderProperties(n,i);break;case"vanish":s.default.boolAttr(n,"val",!0)&&(i.display="none");break;case"kern":case"noWrap":break;case"tblCellMar":case"tcMar":this.parseMarginProperties(n,r||i);break;case"tblLayout":i["table-layout"]=f.valueOfTblLayout(n);break;case"vAlign":i["vertical-align"]=f.valueOfTextAlignment(n);break;case"spacing":"pPr"==e.localName&&this.parseSpacing(n,i);break;case"wordWrap":s.default.boolAttr(n,"val")&&(i["overflow-wrap"]="break-word");break;case"suppressAutoHyphens":i.hyphens=s.default.boolAttr(n,"val",!0)?"none":"auto";break;case"lang":i.$lang=s.default.attr(n,"val");break;case"bCs":case"iCs":case"szCs":case"tabs":case"outlineLvl":case"contextualSpacing":case"tblStyleColBandSize":case"tblStyleRowBandSize":case"webHidden":case"pageBreakBefore":case"suppressLineNumbers":case"keepLines":case"keepNext":case"widowControl":case"bidi":case"rtl":case"noProof":break;default:this.options.debug}})),i}parseUnderline(e,t){var i=s.default.attr(e,"val");if(null!=i){switch(i){case"dash":case"dashDotDotHeavy":case"dashDotHeavy":case"dashedHeavy":case"dashLong":case"dashLongHeavy":case"dotDash":case"dotDotDash":t["text-decoration-style"]="dashed";break;case"dotted":case"dottedHeavy":t["text-decoration-style"]="dotted";break;case"double":t["text-decoration-style"]="double";break;case"single":case"thick":case"words":t["text-decoration"]="underline";break;case"wave":case"wavyDouble":case"wavyHeavy":t["text-decoration-style"]="wavy";break;case"none":t["text-decoration"]="none"}var r=_.colorAttr(e,"color");r&&(t["text-decoration-color"]=r)}}parseFont(e,t){var i=[s.default.attr(e,"ascii"),f.themeValue(e,"asciiTheme")].filter((e=>e)).join(", ");i.length>0&&(t["font-family"]=i)}parseIndentation(e,t){var i=s.default.lengthAttr(e,"firstLine"),r=s.default.lengthAttr(e,"hanging"),a=s.default.lengthAttr(e,"left"),n=s.default.lengthAttr(e,"start"),o=s.default.lengthAttr(e,"right"),l=s.default.lengthAttr(e,"end");i&&(t["text-indent"]=i),r&&(t["text-indent"]="-".concat(r)),(a||n)&&(t["margin-left"]=a||n),(o||l)&&(t["margin-right"]=o||l)}parseSpacing(e,t){var i=s.default.lengthAttr(e,"before"),r=s.default.lengthAttr(e,"after"),a=s.default.intAttr(e,"line",null),n=s.default.attr(e,"lineRule");if(i&&(t["margin-top"]=i),r&&(t["margin-bottom"]=r),null!==a)switch(n){case"auto":t["line-height"]="".concat((a/240).toFixed(2));break;case"atLeast":t["line-height"]="calc(100% + ".concat(a/20,"pt)");break;default:t["line-height"]=t["min-height"]=a/20+"pt"}}parseMarginProperties(e,t){_.foreach(e,(e=>{switch(e.localName){case"left":t["padding-left"]=f.valueOfMargin(e);break;case"right":t["padding-right"]=f.valueOfMargin(e);break;case"top":t["padding-top"]=f.valueOfMargin(e);break;case"bottom":t["padding-bottom"]=f.valueOfMargin(e)}}))}parseTrHeight(e,t){s.default.attr(e,"hRule"),t.height=s.default.lengthAttr(e,"val")}parseBorderProperties(e,t){_.foreach(e,(e=>{switch(e.localName){case"start":case"left":t["border-left"]=f.valueOfBorder(e);break;case"end":case"right":t["border-right"]=f.valueOfBorder(e);break;case"top":t["border-top"]=f.valueOfBorder(e);break;case"bottom":t["border-bottom"]=f.valueOfBorder(e)}}))}};const p=["black","blue","cyan","darkBlue","darkCyan","darkGray","darkGreen","darkMagenta","darkRed","darkYellow","green","lightGray","magenta","none","red","white","yellow"];class _{static foreach(e,t){for(var i=0;i<e.childNodes.length;i++){let r=e.childNodes[i];r.nodeType==Node.ELEMENT_NODE&&t(r)}}static colorAttr(e,t,i=null,r="black"){var a=s.default.attr(e,t);if(a)return"auto"==a?r:p.includes(a)?a:"#".concat(a);var n=s.default.attr(e,"themeColor");return n?"var(--docx-".concat(n,"-color)"):i}static sizeValue(e,t=c.LengthUsage.Dxa){return(0,c.convertLength)(e.textContent,t)}}class f{static themeValue(e,t){var i=s.default.attr(e,t);return i?"var(--docx-".concat(i,"-font)"):null}static valueOfSize(e,t){var i=c.LengthUsage.Dxa;switch(s.default.attr(e,"type")){case"dxa":break;case"pct":i=c.LengthUsage.Percent;break;case"auto":return"auto"}return s.default.lengthAttr(e,t,i)}static valueOfMargin(e){return s.default.lengthAttr(e,"w")}static valueOfBorder(e){if("nil"==s.default.attr(e,"val"))return"none";var i=_.colorAttr(e,"color");return"".concat(s.default.lengthAttr(e,"sz",c.LengthUsage.Border)," solid ").concat("auto"==i?t.autos.borderColor:i)}static valueOfTblLayout(e){return"fixed"==s.default.attr(e,"val")?"fixed":"auto"}static classNameOfCnfStyle(e){const t=s.default.attr(e,"val");return["first-row","last-row","first-col","last-col","odd-col","even-col","odd-row","even-row","ne-cell","nw-cell","se-cell","sw-cell"].filter(((e,i)=>"1"==t[i])).join(" ")}static valueOfJc(e){var t=s.default.attr(e,"val");switch(t){case"start":case"left":return"left";case"center":return"center";case"end":case"right":return"right";case"both":return"justify"}return t}static valueOfVertAlign(e,t=!1){var i=s.default.attr(e,"val");switch(i){case"subscript":return"sub";case"superscript":return t?"sup":"super"}return t?null:i}static valueOfTextAlignment(e){var t=s.default.attr(e,"val");switch(t){case"auto":case"baseline":return"baseline";case"top":return"top";case"center":return"middle";case"bottom":return"bottom"}return t}static addSize(e,t){return null==e?t:null==t?e:"calc(".concat(e," + ").concat(t,")")}static classNameOftblLook(e){const t=s.default.hexAttr(e,"val",0);let i="";return(s.default.boolAttr(e,"firstRow")||32&t)&&(i+=" first-row"),(s.default.boolAttr(e,"lastRow")||64&t)&&(i+=" last-row"),(s.default.boolAttr(e,"firstColumn")||128&t)&&(i+=" first-col"),(s.default.boolAttr(e,"lastColumn")||256&t)&&(i+=" last-col"),(s.default.boolAttr(e,"noHBand")||512&t)&&(i+=" no-hband"),(s.default.boolAttr(e,"noVBand")||1024&t)&&(i+=" no-vband"),i.trim()}}},162:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CorePropsPart=void 0;const r=i(530),a=i(614);class n extends r.Part{parseXml(e){this.props=(0,a.parseCoreProps)(e,this._package.xmlParser)}}t.CorePropsPart=n},614:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCoreProps=void 0,t.parseCoreProps=function(e,t){const i={};for(let r of t.elements(e))switch(r.localName){case"title":i.title=r.textContent;break;case"description":i.description=r.textContent;break;case"subject":i.subject=r.textContent;break;case"creator":i.creator=r.textContent;break;case"keywords":i.keywords=r.textContent;break;case"language":i.language=r.textContent;break;case"lastModifiedBy":i.lastModifiedBy=r.textContent;break;case"revision":r.textContent&&(i.revision=parseInt(r.textContent))}return i}},177:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CustomPropsPart=void 0;const r=i(530),a=i(821);class n extends r.Part{parseXml(e){this.props=(0,a.parseCustomProps)(e,this._package.xmlParser)}}t.CustomPropsPart=n},821:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCustomProps=void 0,t.parseCustomProps=function(e,t){return t.elements(e,"property").map((e=>{const i=e.firstChild;return{formatId:t.attr(e,"fmtid"),name:t.attr(e,"name"),type:i.nodeName,value:i.textContent}}))}},665:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedPropsPart=void 0;const r=i(530),a=i(668);class n extends r.Part{parseXml(e){this.props=(0,a.parseExtendedProps)(e,this._package.xmlParser)}}t.ExtendedPropsPart=n},668:(e,t)=>{function i(e){if(void 0!==e)return parseInt(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseExtendedProps=void 0,t.parseExtendedProps=function(e,t){const r={};for(let a of t.elements(e))switch(a.localName){case"Template":r.template=a.textContent;break;case"Pages":r.pages=i(a.textContent);break;case"Words":r.words=i(a.textContent);break;case"Characters":r.characters=i(a.textContent);break;case"Application":r.application=a.textContent;break;case"Lines":r.lines=i(a.textContent);break;case"Paragraphs":r.paragraphs=i(a.textContent);break;case"Company":r.company=a.textContent;break;case"AppVersion":r.appVersion=a.textContent}return r}},172:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseBookmarkEnd=t.parseBookmarkStart=void 0;const r=i(120);t.parseBookmarkStart=function(e,t){return{type:r.DomType.BookmarkStart,id:t.attr(e,"id"),name:t.attr(e,"name"),colFirst:t.intAttr(e,"colFirst"),colLast:t.intAttr(e,"colLast")}},t.parseBookmarkEnd=function(e,t){return{type:r.DomType.BookmarkEnd,id:t.attr(e,"id")}}},191:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseBorders=t.parseBorder=void 0;const r=i(149);function a(e,t){return{type:t.attr(e,"val"),color:t.attr(e,"color"),size:t.lengthAttr(e,"sz",r.LengthUsage.Border),offset:t.lengthAttr(e,"space",r.LengthUsage.Point),frame:t.boolAttr(e,"frame"),shadow:t.boolAttr(e,"shadow")}}t.parseBorder=a,t.parseBorders=function(e,t){var i={};for(let r of t.elements(e))switch(r.localName){case"left":i.left=a(r,t);break;case"top":i.top=a(r,t);break;case"right":i.right=a(r,t);break;case"bottom":i.bottom=a(r,t)}return i}},149:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCommonProperty=t.convertPercentage=t.convertBoolean=t.convertLength=t.LengthUsage=t.ns=void 0,t.ns={wordml:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",drawingml:"http://schemas.openxmlformats.org/drawingml/2006/main",picture:"http://schemas.openxmlformats.org/drawingml/2006/picture",compatibility:"http://schemas.openxmlformats.org/markup-compatibility/2006",math:"http://schemas.openxmlformats.org/officeDocument/2006/math"},t.LengthUsage={Dxa:{mul:.05,unit:"pt"},Emu:{mul:7874015748031496e-20,unit:"pt"},FontSize:{mul:.5,unit:"pt"},Border:{mul:.125,unit:"pt"},Point:{mul:1,unit:"pt"},Percent:{mul:.02,unit:"%"},LineHeight:{mul:.004166666666666667,unit:""},VmlEmu:{mul:7874015748031496e-20,unit:""}},t.convertLength=function(e,i=t.LengthUsage.Dxa){return null==e||/.+(p[xt]|[%])$/.test(e)?e:"".concat((parseInt(e)*i.mul).toFixed(2)).concat(i.unit)},t.convertBoolean=function(e,t=!1){switch(e){case"1":case"on":case"true":return!0;case"0":case"off":case"false":return!1;default:return t}},t.convertPercentage=function(e){return e?parseInt(e)/100:null},t.parseCommonProperty=function(e,i,r){if(e.namespaceURI!=t.ns.wordml)return!1;switch(e.localName){case"color":i.color=r.attr(e,"val");break;case"sz":i.fontSize=r.lengthAttr(e,"val",t.LengthUsage.FontSize);break;default:return!1}return!0}},448:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentPart=void 0;const r=i(530);class a extends r.Part{constructor(e,t,i){super(e,t),this._documentParser=i}parseXml(e){this.body=this._documentParser.parseDocumentFile(e)}}t.DocumentPart=a},120:(e,t)=>{var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.OpenXmlElementBase=t.DomType=void 0,(r=i||(t.DomType=i={})).Document="document",r.Paragraph="paragraph",r.Run="run",r.Break="break",r.NoBreakHyphen="noBreakHyphen",r.Table="table",r.Row="row",r.Cell="cell",r.Hyperlink="hyperlink",r.Drawing="drawing",r.Image="image",r.Text="text",r.Tab="tab",r.Symbol="symbol",r.BookmarkStart="bookmarkStart",r.BookmarkEnd="bookmarkEnd",r.Footer="footer",r.Header="header",r.FootnoteReference="footnoteReference",r.EndnoteReference="endnoteReference",r.Footnote="footnote",r.Endnote="endnote",r.SimpleField="simpleField",r.ComplexField="complexField",r.Instruction="instruction",r.VmlPicture="vmlPicture",r.MmlMath="mmlMath",r.MmlMathParagraph="mmlMathParagraph",r.MmlFraction="mmlFraction",r.MmlFunction="mmlFunction",r.MmlFunctionName="mmlFunctionName",r.MmlNumerator="mmlNumerator",r.MmlDenominator="mmlDenominator",r.MmlRadical="mmlRadical",r.MmlBase="mmlBase",r.MmlDegree="mmlDegree",r.MmlSuperscript="mmlSuperscript",r.MmlSubscript="mmlSubscript",r.MmlPreSubSuper="mmlPreSubSuper",r.MmlSubArgument="mmlSubArgument",r.MmlSuperArgument="mmlSuperArgument",r.MmlNary="mmlNary",r.MmlDelimiter="mmlDelimiter",r.MmlRun="mmlRun",r.MmlEquationArray="mmlEquationArray",r.MmlLimit="mmlLimit",r.MmlLimitLower="mmlLimitLower",r.MmlMatrix="mmlMatrix",r.MmlMatrixRow="mmlMatrixRow",r.MmlBox="mmlBox",r.MmlBar="mmlBar",r.MmlGroupChar="mmlGroupChar",r.VmlElement="vmlElement",r.Inserted="inserted",r.Deleted="deleted",r.DeletedText="deletedText",t.OpenXmlElementBase=class{constructor(){this.children=[],this.cssStyle={}}}},931:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseLineSpacing=void 0,t.parseLineSpacing=function(e,t){return{before:t.lengthAttr(e,"before"),after:t.lengthAttr(e,"after"),line:t.intAttr(e,"line"),lineRule:t.attr(e,"lineRule")}}},109:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseNumbering=t.parseTabs=t.parseParagraphProperty=t.parseParagraphProperties=void 0;const r=i(149),a=i(59),n=i(931),s=i(488);function o(e,t,i){if(e.namespaceURI!=r.ns.wordml)return!1;if((0,r.parseCommonProperty)(e,t,i))return!0;switch(e.localName){case"tabs":t.tabs=l(e,i);break;case"sectPr":t.sectionProps=(0,a.parseSectionProperties)(e,i);break;case"numPr":t.numbering=c(e,i);break;case"spacing":return t.lineSpacing=(0,n.parseLineSpacing)(e,i),!1;case"textAlignment":return t.textAlignment=i.attr(e,"val"),!1;case"keepNext":t.keepLines=i.boolAttr(e,"val",!0);break;case"keepNext":t.keepNext=i.boolAttr(e,"val",!0);break;case"pageBreakBefore":t.pageBreakBefore=i.boolAttr(e,"val",!0);break;case"outlineLvl":t.outlineLevel=i.intAttr(e,"val");break;case"pStyle":t.styleName=i.attr(e,"val");break;case"rPr":t.runProps=(0,s.parseRunProperties)(e,i);break;default:return!1}return!0}function l(e,t){return t.elements(e,"tab").map((e=>({position:t.lengthAttr(e,"pos"),leader:t.attr(e,"leader"),style:t.attr(e,"val")})))}function c(e,t){var i={};for(let r of t.elements(e))switch(r.localName){case"numId":i.id=t.attr(r,"val");break;case"ilvl":i.level=t.intAttr(r,"val")}return i}t.parseParagraphProperties=function(e,t){let i={};for(let r of t.elements(e))o(r,i,t);return i},t.parseParagraphProperty=o,t.parseTabs=l,t.parseNumbering=c},488:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseRunProperty=t.parseRunProperties=void 0;const r=i(149);function a(e,t,i){return!!(0,r.parseCommonProperty)(e,t,i)}t.parseRunProperties=function(e,t){let i={};for(let r of t.elements(e))a(r,i,t);return i},t.parseRunProperty=a},59:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseSectionProperties=t.SectionType=void 0;const r=i(472),a=i(191);var n,s;function o(e,t){return{numberOfColumns:t.intAttr(e,"num"),space:t.lengthAttr(e,"space"),separator:t.boolAttr(e,"sep"),equalWidth:t.boolAttr(e,"equalWidth",!0),columns:t.elements(e,"col").map((e=>({width:t.lengthAttr(e,"w"),space:t.lengthAttr(e,"space")})))}}function l(e,t){return{chapSep:t.attr(e,"chapSep"),chapStyle:t.attr(e,"chapStyle"),format:t.attr(e,"fmt"),start:t.intAttr(e,"start")}}function c(e,t){return{id:t.attr(e,"id"),type:t.attr(e,"type")}}(s=n||(t.SectionType=n={})).Continuous="continuous",s.NextPage="nextPage",s.NextColumn="nextColumn",s.EvenPage="evenPage",s.OddPage="oddPage",t.parseSectionProperties=function(e,t=r.default){var i,n,s={};for(let r of t.elements(e))switch(r.localName){case"pgSz":s.pageSize={width:t.lengthAttr(r,"w"),height:t.lengthAttr(r,"h"),orientation:t.attr(r,"orient")};break;case"type":s.type=t.attr(r,"val");break;case"pgMar":s.pageMargins={left:t.lengthAttr(r,"left"),right:t.lengthAttr(r,"right"),top:t.lengthAttr(r,"top"),bottom:t.lengthAttr(r,"bottom"),header:t.lengthAttr(r,"header"),footer:t.lengthAttr(r,"footer"),gutter:t.lengthAttr(r,"gutter")};break;case"cols":s.columns=o(r,t);break;case"headerReference":(null!==(i=s.headerRefs)&&void 0!==i?i:s.headerRefs=[]).push(c(r,t));break;case"footerReference":(null!==(n=s.footerRefs)&&void 0!==n?n:s.footerRefs=[]).push(c(r,t));break;case"titlePg":s.titlePage=t.boolAttr(r,"val",!0);break;case"pgBorders":s.pageBorders=(0,a.parseBorders)(r,t);break;case"pgNumType":s.pageNumber=l(r,t)}return s}},667:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderAsync=t.praseAsync=t.defaultOptions=void 0;const r=i(213),a=i(168),n=i(932);t.defaultOptions={ignoreHeight:!1,ignoreWidth:!1,ignoreFonts:!1,breakPages:!0,debug:!1,experimental:!1,className:"docx",inWrapper:!0,trimXmlDeclaration:!0,ignoreLastRenderedPageBreak:!0,renderHeaders:!0,renderFooters:!0,renderFootnotes:!0,renderEndnotes:!0,useBase64URL:!1,useMathMLPolyfill:!1,renderChanges:!1},t.praseAsync=function(e,i=null){const n=Object.assign(Object.assign({},t.defaultOptions),i);return r.WordDocument.load(e,new a.DocumentParser(n),n)},t.renderAsync=function(e,i,s=null,o=null){return l(this,null,(function*(){const l=Object.assign(Object.assign({},t.defaultOptions),o),c=new n.HtmlRenderer(window.document),d=yield r.WordDocument.load(e,new a.DocumentParser(l),l);return c.render(d,i,s,l),d}))}},380:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontTablePart=void 0;const r=i(530),a=i(512);class n extends r.Part{parseXml(e){this.fonts=(0,a.parseFonts)(e,this._package.xmlParser)}}t.FontTablePart=n},512:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseEmbedFontRef=t.parseFont=t.parseFonts=void 0;const i={embedRegular:"regular",embedBold:"bold",embedItalic:"italic",embedBoldItalic:"boldItalic"};function r(e,t){let i={name:t.attr(e,"name"),embedFontRefs:[]};for(let r of t.elements(e))switch(r.localName){case"family":i.family=t.attr(r,"val");break;case"altName":i.altName=t.attr(r,"val");break;case"embedRegular":case"embedBold":case"embedItalic":case"embedBoldItalic":i.embedFontRefs.push(a(r,t))}return i}function a(e,t){return{id:t.attr(e,"id"),key:t.attr(e,"fontKey"),type:i[e.localName]}}t.parseFonts=function(e,t){return t.elements(e).map((e=>r(e,t)))},t.parseFont=r,t.parseEmbedFontRef=a},984:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WmlFooter=t.WmlHeader=void 0;const r=i(120);class a extends r.OpenXmlElementBase{constructor(){super(...arguments),this.type=r.DomType.Header}}t.WmlHeader=a;class n extends r.OpenXmlElementBase{constructor(){super(...arguments),this.type=r.DomType.Footer}}t.WmlFooter=n},985:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FooterPart=t.HeaderPart=t.BaseHeaderFooterPart=void 0;const r=i(530),a=i(984);class n extends r.Part{constructor(e,t,i){super(e,t),this._documentParser=i}parseXml(e){this.rootElement=this.createRootElement(),this.rootElement.children=this._documentParser.parseBodyElements(e)}}t.BaseHeaderFooterPart=n,t.HeaderPart=class extends n{createRootElement(){return new a.WmlHeader}},t.FooterPart=class extends n{createRootElement(){return new a.WmlFooter}}},932:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlRenderer=void 0;const r=i(120),a=i(593),n=i(630),s=i(438),o="http://www.w3.org/1998/Math/MathML";function l(e,t,i){return d(void 0,e,t,i)}function c(e,t,i){return d("http://www.w3.org/2000/svg",e,t,i)}function d(e,t,i,r){var a=e?document.createElementNS(e,t):document.createElement(t);return Object.assign(a,i),r&&u(a,r),a}function h(e){e.innerHTML=""}function u(e,t){t.forEach((t=>e.appendChild((0,a.isString)(t)?document.createTextNode(t):t)))}function p(e){return l("style",{innerHTML:e})}function _(e,t){e.appendChild(document.createComment(t))}t.HtmlRenderer=class{constructor(e){this.htmlDocument=e,this.className="docx",this.styleMap={},this.currentPart=null,this.tableVerticalMerges=[],this.currentVerticalMerge=null,this.tableCellPositions=[],this.currentCellPosition=null,this.footnoteMap={},this.endnoteMap={},this.currentEndnoteIds=[],this.usedHederFooterParts=[],this.currentTabs=[],this.tabsTimeout=0,this.createElement=l}render(e,t,i=null,r){var n;this.document=e,this.options=r,this.className=r.className,this.rootSelector=r.inWrapper?".".concat(this.className,"-wrapper"):":root",this.styleMap=null,h(i=i||t),h(t),_(i,"docxjs library predefined styles"),i.appendChild(this.renderDefaultStyle()),!window.MathMLElement&&r.useMathMLPolyfill&&(_(i,"docxjs mathml polyfill styles"),i.appendChild(p(s.default))),e.themePart&&(_(i,"docxjs document theme values"),this.renderTheme(e.themePart,i)),null!=e.stylesPart&&(this.styleMap=this.processStyles(e.stylesPart.styles),_(i,"docxjs document styles"),i.appendChild(this.renderStyles(e.stylesPart.styles))),e.numberingPart&&(this.prodessNumberings(e.numberingPart.domNumberings),_(i,"docxjs document numbering styles"),i.appendChild(this.renderNumbering(e.numberingPart.domNumberings,i))),e.footnotesPart&&(this.footnoteMap=(0,a.keyBy)(e.footnotesPart.notes,(e=>e.id))),e.endnotesPart&&(this.endnoteMap=(0,a.keyBy)(e.endnotesPart.notes,(e=>e.id))),e.settingsPart&&(this.defaultTabSize=null===(n=e.settingsPart.settings)||void 0===n?void 0:n.defaultTabStop),!r.ignoreFonts&&e.fontTablePart&&this.renderFontTable(e.fontTablePart,i);var o=this.renderSections(e.documentPart.body);this.options.inWrapper?t.appendChild(this.renderWrapper(o)):u(t,o),this.refreshTabStops()}renderTheme(e,t){var i,r;const a={},n=null===(i=e.theme)||void 0===i?void 0:i.fontScheme;n&&(n.majorFont&&(a["--docx-majorHAnsi-font"]=n.majorFont.latinTypeface),n.minorFont&&(a["--docx-minorHAnsi-font"]=n.minorFont.latinTypeface));const s=null===(r=e.theme)||void 0===r?void 0:r.colorScheme;if(s)for(let[l,c]of Object.entries(s.colors))a["--docx-".concat(l,"-color")]="#".concat(c);const o=this.styleToString(".".concat(this.className),a);t.appendChild(p(o))}renderFontTable(e,t){for(let i of e.fonts)for(let e of i.embedFontRefs)this.document.loadFont(e.id,e.key).then((r=>{const a={"font-family":i.name,src:"url(".concat(r,")")};"bold"!=e.type&&"boldItalic"!=e.type||(a["font-weight"]="bold"),"italic"!=e.type&&"boldItalic"!=e.type||(a["font-style"]="italic"),_(t,"docxjs ".concat(i.name," font"));const n=this.styleToString("@font-face",a);t.appendChild(p(n)),this.refreshTabStops()}))}processStyleName(e){return e?"".concat(this.className,"_").concat((0,a.escapeClassName)(e)):this.className}processStyles(e){const t=(0,a.keyBy)(e.filter((e=>null!=e.id)),(e=>e.id));for(const r of e.filter((e=>e.basedOn))){var i=t[r.basedOn];if(i){r.paragraphProps=(0,a.mergeDeep)(r.paragraphProps,i.paragraphProps),r.runProps=(0,a.mergeDeep)(r.runProps,i.runProps);for(const e of i.styles){const t=r.styles.find((t=>t.target==e.target));t?this.copyStyleProperties(e.values,t.values):r.styles.push(Object.assign(Object.assign({},e),{values:Object.assign({},e.values)}))}}else this.options.debug}for(let r of e)r.cssName=this.processStyleName(r.id);return t}prodessNumberings(e){var t;for(let i of e.filter((e=>e.pStyleName))){const e=this.findStyle(i.pStyleName);null!==(t=null==e?void 0:e.paragraphProps)&&void 0!==t&&t.numbering&&(e.paragraphProps.numbering.level=i.level)}}processElement(e){if(e.children)for(var t of e.children)t.parent=e,t.type==r.DomType.Table?this.processTable(t):this.processElement(t)}processTable(e){for(var t of e.children)for(var i of t.children)i.cssStyle=this.copyStyleProperties(e.cellStyle,i.cssStyle,["border-left","border-right","border-top","border-bottom","padding-left","padding-right","padding-top","padding-bottom"]),this.processElement(i)}copyStyleProperties(e,t,i=null){if(!e)return t;for(var r of(null==t&&(t={}),null==i&&(i=Object.getOwnPropertyNames(e)),i))e.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=e[r]);return t}createSection(e,t){var i=this.createElement("section",{className:e});return t&&(t.pageMargins&&(i.style.paddingLeft=t.pageMargins.left,i.style.paddingRight=t.pageMargins.right,i.style.paddingTop=t.pageMargins.top,i.style.paddingBottom=t.pageMargins.bottom),t.pageSize&&(this.options.ignoreWidth||(i.style.width=t.pageSize.width),this.options.ignoreHeight||(i.style.minHeight=t.pageSize.height)),t.columns&&t.columns.numberOfColumns&&(i.style.columnCount="".concat(t.columns.numberOfColumns),i.style.columnGap=t.columns.space,t.columns.separator&&(i.style.columnRule="1px solid black"))),i}renderSections(e){const t=[];this.processElement(e);const i=this.splitBySection(e.children);let r=null;for(let n=0,s=i.length;n<s;n++){this.currentFootnoteIds=[];const o=i[n],l=o.sectProps||e.props,c=this.createSection(this.className,l);this.renderStyleValues(e.cssStyle,c),this.options.renderHeaders&&this.renderHeaderFooter(l.headerRefs,l,t.length,r!=l,c);var a=this.createElement("article");this.renderElements(o.elements,a),c.appendChild(a),this.options.renderFootnotes&&this.renderNotes(this.currentFootnoteIds,this.footnoteMap,c),this.options.renderEndnotes&&n==s-1&&this.renderNotes(this.currentEndnoteIds,this.endnoteMap,c),this.options.renderFooters&&this.renderHeaderFooter(l.footerRefs,l,t.length,r!=l,c),t.push(c),r=l}return t}renderHeaderFooter(e,t,i,r,a){var n,s;if(e){var o=null!==(s=null!==(n=t.titlePage&&r?e.find((e=>"first"==e.type)):null)&&void 0!==n?n:i%2==1?e.find((e=>"even"==e.type)):null)&&void 0!==s?s:e.find((e=>"default"==e.type)),l=o&&this.document.findPartByRelId(o.id,this.document.documentPart);l&&(this.currentPart=l,this.usedHederFooterParts.includes(l.path)||(this.processElement(l.rootElement),this.usedHederFooterParts.push(l.path)),this.renderElements([l.rootElement],a),this.currentPart=null)}}isPageBreakElement(e){return e.type==r.DomType.Break&&("lastRenderedPageBreak"==e.break?!this.options.ignoreLastRenderedPageBreak:"page"==e.break)}splitBySection(e){var t,i={sectProps:null,elements:[]},a=[i];for(let h of e){if(h.type==r.DomType.Paragraph){const e=this.findStyle(h.styleName);null!==(t=null==e?void 0:e.paragraphProps)&&void 0!==t&&t.pageBreakBefore&&(i.sectProps=n,i={sectProps:null,elements:[]},a.push(i))}if(i.elements.push(h),h.type==r.DomType.Paragraph){const e=h;var n=e.sectionProps,s=-1,o=-1;if(this.options.breakPages&&e.children&&(s=e.children.findIndex((e=>{var t,i;return-1!=(o=null!==(i=null===(t=e.children)||void 0===t?void 0:t.findIndex(this.isPageBreakElement.bind(this)))&&void 0!==i?i:-1)}))),(n||-1!=s)&&(i.sectProps=n,i={sectProps:null,elements:[]},a.push(i)),-1!=s){let t=e.children[s],r=o<t.children.length-1;if(s<e.children.length-1||r){var l=h.children,c=Object.assign(Object.assign({},h),{children:l.slice(s)});if(h.children=l.slice(0,s),i.elements.push(c),r){let e=t.children,i=Object.assign(Object.assign({},t),{children:e.slice(0,o)});h.children.push(i),t.children=e.slice(o)}}}}}let d=null;for(let r=a.length-1;r>=0;r--)null==a[r].sectProps?a[r].sectProps=d:d=a[r].sectProps;return a}renderWrapper(e){return this.createElement("div",{className:"".concat(this.className,"-wrapper")},e)}renderDefaultStyle(){var e=this.className;return p("\n.".concat(e,"-wrapper { background: gray; padding: 30px; padding-bottom: 0px; display: flex; flex-flow: column; align-items: center; } \n.").concat(e,"-wrapper>section.").concat(e," { background: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); margin-bottom: 30px; }\n.").concat(e," { color: black; hyphens: auto; }\nsection.").concat(e," { box-sizing: border-box; display: flex; flex-flow: column nowrap; position: relative; overflow: hidden; }\nsection.").concat(e,">article { margin-bottom: auto; z-index: 1; }\nsection.").concat(e,">footer { z-index: 1; }\n.").concat(e," table { border-collapse: collapse; }\n.").concat(e," table td, .").concat(e," table th { vertical-align: top; }\n.").concat(e," p { margin: 0pt; min-height: 1em; }\n.").concat(e," span { white-space: pre-wrap; overflow-wrap: break-word; }\n.").concat(e," a { color: inherit; text-decoration: inherit; }\n"))}renderNumbering(e,t){var i="",r=[];for(var a of e){var n="p.".concat(this.numberingClass(a.id,a.level)),s="none";if(a.bullet){let e="--".concat(this.className,"-").concat(a.bullet.src).toLowerCase();i+=this.styleToString("".concat(n,":before"),{content:"' '",display:"inline-block",background:"var(".concat(e,")")},a.bullet.style),this.document.loadNumberingImage(a.bullet.src).then((i=>{var r="".concat(this.rootSelector," { ").concat(e,": url(").concat(i,") }");t.appendChild(p(r))}))}else if(a.levelText){let e=this.numberingCounter(a.id,a.level);const t=e+" "+(a.start-1);a.level>0&&(i+=this.styleToString("p.".concat(this.numberingClass(a.id,a.level-1)),{"counter-reset":t})),r.push(t),i+=this.styleToString("".concat(n,":before"),Object.assign({content:this.levelTextToContent(a.levelText,a.suff,a.id,this.numFormatToCssValue(a.format)),"counter-increment":e},a.rStyle))}else s=this.numFormatToCssValue(a.format);i+=this.styleToString(n,Object.assign({display:"list-item","list-style-position":"inside","list-style-type":s},a.pStyle))}return r.length>0&&(i+=this.styleToString(this.rootSelector,{"counter-reset":r.join(" ")})),p(i)}renderStyles(e){var t,i="";const r=this.styleMap,n=(0,a.keyBy)(e.filter((e=>e.isDefault)),(e=>e.target));for(const a of e){var s=a.styles;if(a.linked){var o=a.linked&&r[a.linked];o?s=s.concat(o.styles):this.options.debug}for(const e of s){var l="".concat(null!==(t=a.target)&&void 0!==t?t:"",".").concat(a.cssName);a.target!=e.target&&(l+=" ".concat(e.target)),n[a.target]==a&&(l=".".concat(this.className," ").concat(a.target,", ")+l),i+=this.styleToString(l,e.values)}}return p(i)}renderNotes(e,t,i){var r=e.map((e=>t[e])).filter((e=>e));if(r.length>0){var a=this.createElement("ol",null,this.renderElements(r));i.appendChild(a)}}renderElement(e){switch(e.type){case r.DomType.Paragraph:return this.renderParagraph(e);case r.DomType.BookmarkStart:return this.renderBookmarkStart(e);case r.DomType.BookmarkEnd:return null;case r.DomType.Run:return this.renderRun(e);case r.DomType.Table:return this.renderTable(e);case r.DomType.Row:return this.renderTableRow(e);case r.DomType.Cell:return this.renderTableCell(e);case r.DomType.Hyperlink:return this.renderHyperlink(e);case r.DomType.Drawing:return this.renderDrawing(e);case r.DomType.Image:return this.renderImage(e);case r.DomType.Text:case r.DomType.Text:return this.renderText(e);case r.DomType.DeletedText:return this.renderDeletedText(e);case r.DomType.Tab:return this.renderTab(e);case r.DomType.Symbol:return this.renderSymbol(e);case r.DomType.Break:return this.renderBreak(e);case r.DomType.Footer:return this.renderContainer(e,"footer");case r.DomType.Header:return this.renderContainer(e,"header");case r.DomType.Footnote:case r.DomType.Endnote:return this.renderContainer(e,"li");case r.DomType.FootnoteReference:return this.renderFootnoteReference(e);case r.DomType.EndnoteReference:return this.renderEndnoteReference(e);case r.DomType.NoBreakHyphen:return this.createElement("wbr");case r.DomType.VmlPicture:return this.renderVmlPicture(e);case r.DomType.VmlElement:return this.renderVmlElement(e);case r.DomType.MmlMath:return this.renderContainerNS(e,o,"math",{xmlns:o});case r.DomType.MmlMathParagraph:return this.renderContainer(e,"span");case r.DomType.MmlFraction:return this.renderContainerNS(e,o,"mfrac");case r.DomType.MmlBase:return this.renderContainerNS(e,o,e.parent.type==r.DomType.MmlMatrixRow?"mtd":"mrow");case r.DomType.MmlNumerator:case r.DomType.MmlDenominator:case r.DomType.MmlFunction:case r.DomType.MmlLimit:case r.DomType.MmlBox:return this.renderContainerNS(e,o,"mrow");case r.DomType.MmlGroupChar:return this.renderMmlGroupChar(e);case r.DomType.MmlLimitLower:return this.renderContainerNS(e,o,"munder");case r.DomType.MmlMatrix:return this.renderContainerNS(e,o,"mtable");case r.DomType.MmlMatrixRow:return this.renderContainerNS(e,o,"mtr");case r.DomType.MmlRadical:return this.renderMmlRadical(e);case r.DomType.MmlSuperscript:return this.renderContainerNS(e,o,"msup");case r.DomType.MmlSubscript:return this.renderContainerNS(e,o,"msub");case r.DomType.MmlDegree:case r.DomType.MmlSuperArgument:case r.DomType.MmlSubArgument:return this.renderContainerNS(e,o,"mn");case r.DomType.MmlFunctionName:return this.renderContainerNS(e,o,"ms");case r.DomType.MmlDelimiter:return this.renderMmlDelimiter(e);case r.DomType.MmlRun:return this.renderMmlRun(e);case r.DomType.MmlNary:return this.renderMmlNary(e);case r.DomType.MmlPreSubSuper:return this.renderMmlPreSubSuper(e);case r.DomType.MmlBar:return this.renderMmlBar(e);case r.DomType.MmlEquationArray:return this.renderMllList(e);case r.DomType.Inserted:return this.renderInserted(e);case r.DomType.Deleted:return this.renderDeleted(e)}return null}renderChildren(e,t){return this.renderElements(e.children,t)}renderElements(e,t){if(null==e)return null;var i=e.flatMap((e=>this.renderElement(e))).filter((e=>null!=e));return t&&u(t,i),i}renderContainer(e,t,i){return this.createElement(t,i,this.renderChildren(e))}renderContainerNS(e,t,i,r){return d(t,i,r,this.renderChildren(e))}renderParagraph(e){var t,i,r,a,n=this.createElement("p");const s=this.findStyle(e.styleName);null!==(t=e.tabs)&&void 0!==t||(e.tabs=null===(i=null==s?void 0:s.paragraphProps)||void 0===i?void 0:i.tabs),this.renderClass(e,n),this.renderChildren(e,n),this.renderStyleValues(e.cssStyle,n),this.renderCommonProperties(n.style,e);const o=null!==(r=e.numbering)&&void 0!==r?r:null===(a=null==s?void 0:s.paragraphProps)||void 0===a?void 0:a.numbering;return o&&n.classList.add(this.numberingClass(o.id,o.level)),n}renderRunProperties(e,t){this.renderCommonProperties(e,t)}renderCommonProperties(e,t){null!=t&&(t.color&&(e.color=t.color),t.fontSize&&(e["font-size"]=t.fontSize))}renderHyperlink(e){var t=this.createElement("a");if(this.renderChildren(e,t),this.renderStyleValues(e.cssStyle,t),e.href)t.href=e.href;else if(e.id){const i=this.document.documentPart.rels.find((t=>t.id==e.id&&"External"===t.targetMode));t.href=null==i?void 0:i.target}return t}renderDrawing(e){var t=this.createElement("div");return t.style.display="inline-block",t.style.position="relative",t.style.textIndent="0px",this.renderChildren(e,t),this.renderStyleValues(e.cssStyle,t),t}renderImage(e){let t=this.createElement("img");return this.renderStyleValues(e.cssStyle,t),this.document&&this.document.loadDocumentImage(e.src,this.currentPart).then((e=>{t.src=e})),t}renderText(e){return this.htmlDocument.createTextNode(e.text)}renderDeletedText(e){return this.options.renderEndnotes?this.htmlDocument.createTextNode(e.text):null}renderBreak(e){return"textWrapping"==e.break?this.createElement("br"):null}renderInserted(e){return this.options.renderChanges?this.renderContainer(e,"ins"):this.renderChildren(e)}renderDeleted(e){return this.options.renderChanges?this.renderContainer(e,"del"):null}renderSymbol(e){var t=this.createElement("span");return t.style.fontFamily=e.font,t.innerHTML="&#x".concat(e.char,";"),t}renderFootnoteReference(e){var t=this.createElement("sup");return this.currentFootnoteIds.push(e.id),t.textContent="".concat(this.currentFootnoteIds.length),t}renderEndnoteReference(e){var t=this.createElement("sup");return this.currentEndnoteIds.push(e.id),t.textContent="".concat(this.currentEndnoteIds.length),t}renderTab(e){var t,i=this.createElement("span");if(i.innerHTML="&emsp;",this.options.experimental){i.className=this.tabStopClass();var a=null===(t=function(e,t){for(var i=e.parent;null!=i&&i.type!=t;)i=i.parent;return i}(e,r.DomType.Paragraph))||void 0===t?void 0:t.tabs;this.currentTabs.push({stops:a,span:i})}return i}renderBookmarkStart(e){var t=this.createElement("span");return t.id=e.name,t}renderRun(e){if(e.fieldRun)return null;const t=this.createElement("span");if(e.id&&(t.id=e.id),this.renderClass(e,t),this.renderStyleValues(e.cssStyle,t),e.verticalAlign){const i=this.createElement(e.verticalAlign);this.renderChildren(e,i),t.appendChild(i)}else this.renderChildren(e,t);return t}renderTable(e){let t=this.createElement("table");return this.tableCellPositions.push(this.currentCellPosition),this.tableVerticalMerges.push(this.currentVerticalMerge),this.currentVerticalMerge={},this.currentCellPosition={col:0,row:0},e.columns&&t.appendChild(this.renderTableColumns(e.columns)),this.renderClass(e,t),this.renderChildren(e,t),this.renderStyleValues(e.cssStyle,t),this.currentVerticalMerge=this.tableVerticalMerges.pop(),this.currentCellPosition=this.tableCellPositions.pop(),t}renderTableColumns(e){let t=this.createElement("colgroup");for(let i of e){let e=this.createElement("col");i.width&&(e.style.width=i.width),t.appendChild(e)}return t}renderTableRow(e){let t=this.createElement("tr");return this.currentCellPosition.col=0,this.renderClass(e,t),this.renderChildren(e,t),this.renderStyleValues(e.cssStyle,t),this.currentCellPosition.row++,t}renderTableCell(e){let t=this.createElement("td");const i=this.currentCellPosition.col;return e.verticalMerge?"restart"==e.verticalMerge?(this.currentVerticalMerge[i]=t,t.rowSpan=1):this.currentVerticalMerge[i]&&(this.currentVerticalMerge[i].rowSpan+=1,t.style.display="none"):this.currentVerticalMerge[i]=null,this.renderClass(e,t),this.renderChildren(e,t),this.renderStyleValues(e.cssStyle,t),e.span&&(t.colSpan=e.span),this.currentCellPosition.col+=t.colSpan,t}renderVmlPicture(e){var t=l("div");return this.renderChildren(e,t),t}renderVmlElement(e){var t,i,r=c("svg");r.setAttribute("style",e.cssStyleText);const a=this.renderVmlChildElement(e);return!(null===(t=e.imageHref)||void 0===t)&&t.id&&(null===(i=this.document)||void 0===i||i.loadDocumentImage(e.imageHref.id,this.currentPart).then((e=>a.setAttribute("href",e)))),r.appendChild(a),requestAnimationFrame((()=>{const e=r.firstElementChild.getBBox();r.setAttribute("width","".concat(Math.ceil(e.x+e.width))),r.setAttribute("height","".concat(Math.ceil(e.y+e.height)))})),r}renderVmlChildElement(e){const t=c(e.tagName);Object.entries(e.attrs).forEach((([e,i])=>t.setAttribute(e,i)));for(let i of e.children)i.type==r.DomType.VmlElement?t.appendChild(this.renderVmlChildElement(i)):t.appendChild(...(0,a.asArray)(this.renderElement(i)));return t}renderMmlRadical(e){var t;const i=e.children.find((e=>e.type==r.DomType.MmlBase));if(null!==(t=e.props)&&void 0!==t&&t.hideDegree)return d(o,"msqrt",null,this.renderElements([i]));const a=e.children.find((e=>e.type==r.DomType.MmlDegree));return d(o,"mroot",null,this.renderElements([i,a]))}renderMmlDelimiter(e){var t,i;const r=[];return r.push(d(o,"mo",null,[null!==(t=e.props.beginChar)&&void 0!==t?t:"("])),r.push(...this.renderElements(e.children)),r.push(d(o,"mo",null,[null!==(i=e.props.endChar)&&void 0!==i?i:")"])),d(o,"mrow",null,r)}renderMmlNary(e){var t,i;const n=[],s=(0,a.keyBy)(e.children,(e=>e.type)),l=s[r.DomType.MmlSuperArgument],c=s[r.DomType.MmlSubArgument],h=l?d(o,"mo",null,(0,a.asArray)(this.renderElement(l))):null,u=c?d(o,"mo",null,(0,a.asArray)(this.renderElement(c))):null,p=d(o,"mo",null,[null!==(i=null===(t=e.props)||void 0===t?void 0:t.char)&&void 0!==i?i:"∫"]);return h||u?n.push(d(o,"munderover",null,[p,u,h])):h?n.push(d(o,"mover",null,[p,h])):u?n.push(d(o,"munder",null,[p,u])):n.push(p),n.push(...this.renderElements(s[r.DomType.MmlBase].children)),d(o,"mrow",null,n)}renderMmlPreSubSuper(e){const t=[],i=(0,a.keyBy)(e.children,(e=>e.type)),n=i[r.DomType.MmlSuperArgument],s=i[r.DomType.MmlSubArgument],l=n?d(o,"mo",null,(0,a.asArray)(this.renderElement(n))):null,c=s?d(o,"mo",null,(0,a.asArray)(this.renderElement(s))):null,h=d(o,"mo",null);return t.push(d(o,"msubsup",null,[h,c,l])),t.push(...this.renderElements(i[r.DomType.MmlBase].children)),d(o,"mrow",null,t)}renderMmlGroupChar(e){const t="bot"===e.props.verticalJustification?"mover":"munder",i=this.renderContainerNS(e,o,t);return e.props.char&&i.appendChild(d(o,"mo",null,[e.props.char])),i}renderMmlBar(e){const t=this.renderContainerNS(e,o,"mrow");switch(e.props.position){case"top":t.style.textDecoration="overline";break;case"bottom":t.style.textDecoration="underline"}return t}renderMmlRun(e){const t=d(o,"ms");return this.renderClass(e,t),this.renderStyleValues(e.cssStyle,t),this.renderChildren(e,t),t}renderMllList(e){const t=d(o,"mtable");this.renderClass(e,t),this.renderStyleValues(e.cssStyle,t),this.renderChildren(e);for(let i of this.renderChildren(e))t.appendChild(d(o,"mtr",null,[d(o,"mtd",null,[i])]));return t}renderStyleValues(e,t){for(let i in e)i.startsWith("$")?t.setAttribute(i.slice(1),e[i]):t.style[i]=e[i]}renderClass(e,t){e.className&&(t.className=e.className),e.styleName&&t.classList.add(this.processStyleName(e.styleName))}findStyle(e){var t;return e&&(null===(t=this.styleMap)||void 0===t?void 0:t[e])}numberingClass(e,t){return"".concat(this.className,"-num-").concat(e,"-").concat(t)}tabStopClass(){return"".concat(this.className,"-tab-stop")}styleToString(e,t,i=null){let r="".concat(e," {\r\n");for(const a in t)a.startsWith("$")||(r+="  ".concat(a,": ").concat(t[a],";\r\n"));return i&&(r+=i),r+"}\r\n"}numberingCounter(e,t){return"".concat(this.className,"-num-").concat(e,"-").concat(t)}levelTextToContent(e,t,i,r){var a;return'"'.concat(e.replace(/%\d*/g,(e=>{let t=parseInt(e.substring(1),10)-1;return'"counter('.concat(this.numberingCounter(i,t),", ").concat(r,')"')}))).concat(null!==(a={tab:"\\9",space:"\\a0"}[t])&&void 0!==a?a:"",'"')}numFormatToCssValue(e){var t;return null!==(t={none:"none",bullet:"disc",decimal:"decimal",lowerLetter:"lower-alpha",upperLetter:"upper-alpha",lowerRoman:"lower-roman",upperRoman:"upper-roman",decimalZero:"decimal-leading-zero",aiueo:"katakana",aiueoFullWidth:"katakana",chineseCounting:"simp-chinese-informal",chineseCountingThousand:"simp-chinese-informal",chineseLegalSimplified:"simp-chinese-formal",chosung:"hangul-consonant",ideographDigital:"cjk-ideographic",ideographTraditional:"cjk-heavenly-stem",ideographLegalTraditional:"trad-chinese-formal",ideographZodiac:"cjk-earthly-branch",iroha:"katakana-iroha",irohaFullWidth:"katakana-iroha",japaneseCounting:"japanese-informal",japaneseDigitalTenThousand:"cjk-decimal",japaneseLegal:"japanese-formal",thaiNumbers:"thai",koreanCounting:"korean-hangul-formal",koreanDigital:"korean-hangul-formal",koreanDigital2:"korean-hanja-informal",hebrew1:"hebrew",hebrew2:"hebrew",hindiNumbers:"devanagari",ganada:"hangul",taiwaneseCounting:"cjk-ideographic",taiwaneseCountingThousand:"cjk-ideographic",taiwaneseDigital:"cjk-decimal"}[e])&&void 0!==t?t:e}refreshTabStops(){this.options.experimental&&(clearTimeout(this.tabsTimeout),this.tabsTimeout=setTimeout((()=>{const e=(0,n.computePixelToPoint)();for(let t of this.currentTabs)(0,n.updateTabStop)(t.span,t.stops,this.defaultTabSize,e)}),500))}}},630:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateTabStop=t.computePixelToPoint=void 0;const i={pos:0,leader:"none",style:"left"};function r(e){return parseFloat(e)}t.computePixelToPoint=function(e=document.body){const t=document.createElement("div");t.style.width="100pt",e.appendChild(t);const i=100/t.offsetWidth;return e.removeChild(t),i},t.updateTabStop=function(e,t,a,n=.75){const s=e.closest("p"),o=e.getBoundingClientRect(),l=s.getBoundingClientRect(),c=getComputedStyle(s),d=(null==t?void 0:t.length)>0?t.map((e=>({pos:r(e.position),leader:e.leader,style:e.style}))).sort(((e,t)=>e.pos-t.pos)):[i],h=d[d.length-1],u=l.width*n,p=r(a);let _=h.pos+p;if(_<u)for(;_<u&&d.length<50;_+=p)d.push(Object.assign(Object.assign({},i),{pos:_}));const f=parseFloat(c.marginLeft),g=l.left+f,m=(o.left-g)*n,v=d.find((e=>"clear"!=e.style&&e.pos>m));if(null==v)return;let b=1;if("right"==v.style||"center"==v.style){const t=Array.from(s.querySelectorAll(".".concat(e.className))),i=t.indexOf(e)+1,r=document.createRange();r.setStart(e,1),i<t.length?r.setEndBefore(t[i]):r.setEndAfter(s);const a="center"==v.style?.5:1,o=r.getBoundingClientRect(),c=o.left+a*o.width-(l.left-f);b=v.pos-c*n}else b=v.pos-m;switch(e.innerHTML="&nbsp;",e.style.textDecoration="inherit",e.style.wordSpacing="".concat(b.toFixed(0),"pt"),v.leader){case"dot":case"middleDot":e.style.textDecoration="underline",e.style.textDecorationStyle="dotted";break;case"hyphen":case"heavy":case"underscore":e.style.textDecoration="underline"}}},881:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WmlEndnote=t.WmlFootnote=t.WmlBaseNote=void 0;const r=i(120);class a{}t.WmlBaseNote=a,t.WmlFootnote=class extends a{constructor(){super(...arguments),this.type=r.DomType.Footnote}},t.WmlEndnote=class extends a{constructor(){super(...arguments),this.type=r.DomType.Endnote}}},735:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EndnotesPart=t.FootnotesPart=t.BaseNotePart=void 0;const r=i(530),a=i(881);class n extends r.Part{constructor(e,t,i){super(e,t),this._documentParser=i}}t.BaseNotePart=n,t.FootnotesPart=class extends n{constructor(e,t,i){super(e,t,i)}parseXml(e){this.notes=this._documentParser.parseNotes(e,"footnote",a.WmlFootnote)}},t.EndnotesPart=class extends n{constructor(e,t,i){super(e,t,i)}parseXml(e){this.notes=this._documentParser.parseNotes(e,"endnote",a.WmlEndnote)}}},527:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NumberingPart=void 0;const r=i(530),a=i(682);class n extends r.Part{constructor(e,t,i){super(e,t),this._documentParser=i}parseXml(e){Object.assign(this,(0,a.parseNumberingPart)(e,this._package.xmlParser)),this.domNumberings=this._documentParser.parseNumberingFile(e)}}t.NumberingPart=n},682:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseNumberingBulletPicture=t.parseNumberingLevelOverrride=t.parseNumberingLevel=t.parseAbstractNumbering=t.parseNumbering=t.parseNumberingPart=void 0;const r=i(109),a=i(488);function n(e,t){let i={id:t.attr(e,"numId"),overrides:[]};for(let r of t.elements(e))switch(r.localName){case"abstractNumId":i.abstractId=t.attr(r,"val");break;case"lvlOverride":i.overrides.push(l(r,t))}return i}function s(e,t){let i={id:t.attr(e,"abstractNumId"),levels:[]};for(let r of t.elements(e))switch(r.localName){case"name":i.name=t.attr(r,"val");break;case"multiLevelType":i.multiLevelType=t.attr(r,"val");break;case"numStyleLink":i.numberingStyleLink=t.attr(r,"val");break;case"styleLink":i.styleLink=t.attr(r,"val");break;case"lvl":i.levels.push(o(r,t))}return i}function o(e,t){let i={level:t.intAttr(e,"ilvl")};for(let n of t.elements(e))switch(n.localName){case"start":i.start=t.attr(n,"val");break;case"lvlRestart":i.restart=t.intAttr(n,"val");break;case"numFmt":i.format=t.attr(n,"val");break;case"lvlText":i.text=t.attr(n,"val");break;case"lvlJc":i.justification=t.attr(n,"val");break;case"lvlPicBulletId":i.bulletPictureId=t.attr(n,"val");break;case"pStyle":i.paragraphStyle=t.attr(n,"val");break;case"pPr":i.paragraphProps=(0,r.parseParagraphProperties)(n,t);break;case"rPr":i.runProps=(0,a.parseRunProperties)(n,t)}return i}function l(e,t){let i={level:t.intAttr(e,"ilvl")};for(let r of t.elements(e))switch(r.localName){case"startOverride":i.start=t.intAttr(r,"val");break;case"lvl":i.numberingLevel=o(r,t)}return i}function c(e,t){var i=t.element(e,"pict"),r=i&&t.element(i,"shape"),a=r&&t.element(r,"imagedata");return a?{id:t.attr(e,"numPicBulletId"),referenceId:t.attr(a,"id"),style:t.attr(r,"style")}:null}t.parseNumberingPart=function(e,t){let i={numberings:[],abstractNumberings:[],bulletPictures:[]};for(let r of t.elements(e))switch(r.localName){case"num":i.numberings.push(n(r,t));break;case"abstractNum":i.abstractNumberings.push(s(r,t));break;case"numPicBullet":i.bulletPictures.push(c(r,t))}return i},t.parseNumbering=n,t.parseAbstractNumbering=s,t.parseNumberingLevel=o,t.parseNumberingLevelOverrride=l,t.parseNumberingBulletPicture=c},472:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XmlParser=t.serializeXmlString=t.parseXmlString=void 0;const r=i(149);t.parseXmlString=function(e,t=!1){var i;t&&(e=e.replace(/<[?].*[?]>/,"")),e=65279===(i=e).charCodeAt(0)?i.substring(1):i;const r=(new DOMParser).parseFromString(e,"application/xml"),a=null===(n=r.getElementsByTagName("parsererror")[0])||void 0===n?void 0:n.textContent;var n;if(a)throw new Error(a);return r},t.serializeXmlString=function(e){return(new XMLSerializer).serializeToString(e)};class a{elements(e,t=null){const i=[];for(let r=0,a=e.childNodes.length;r<a;r++){let a=e.childNodes.item(r);1!=a.nodeType||null!=t&&a.localName!=t||i.push(a)}return i}element(e,t){for(let i=0,r=e.childNodes.length;i<r;i++){let r=e.childNodes.item(i);if(1==r.nodeType&&r.localName==t)return r}return null}elementAttr(e,t,i){var r=this.element(e,t);return r?this.attr(r,i):void 0}attrs(e){return Array.from(e.attributes)}attr(e,t){for(let i=0,r=e.attributes.length;i<r;i++){let r=e.attributes.item(i);if(r.localName==t)return r.value}return null}intAttr(e,t,i=null){var r=this.attr(e,t);return r?parseInt(r):i}hexAttr(e,t,i=null){var r=this.attr(e,t);return r?parseInt(r,16):i}floatAttr(e,t,i=null){var r=this.attr(e,t);return r?parseFloat(r):i}boolAttr(e,t,i=null){return(0,r.convertBoolean)(this.attr(e,t),i)}lengthAttr(e,t,i=r.LengthUsage.Dxa){return(0,r.convertLength)(this.attr(e,t),i)}}t.XmlParser=a;const n=new a;t.default=n},287:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsPart=void 0;const r=i(530),a=i(846);class n extends r.Part{constructor(e,t){super(e,t)}parseXml(e){this.settings=(0,a.parseSettings)(e,this._package.xmlParser)}}t.SettingsPart=n},846:(e,t)=>{function i(e,t){var i={defaultNoteIds:[]};for(let r of t.elements(e))switch(r.localName){case"numFmt":i.nummeringFormat=t.attr(r,"val");break;case"footnote":case"endnote":i.defaultNoteIds.push(t.attr(r,"id"))}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.parseNoteProperties=t.parseSettings=void 0,t.parseSettings=function(e,t){var r={};for(let a of t.elements(e))switch(a.localName){case"defaultTabStop":r.defaultTabStop=t.lengthAttr(a,"val");break;case"footnotePr":r.footnoteProps=i(a,t);break;case"endnotePr":r.endnoteProps=i(a,t);break;case"autoHyphenation":r.autoHyphenation=t.boolAttr(a,"val")}return r},t.parseNoteProperties=i},240:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StylesPart=void 0;const r=i(530);class a extends r.Part{constructor(e,t,i){super(e,t),this._documentParser=i}parseXml(e){this.styles=this._documentParser.parseStylesFile(e)}}t.StylesPart=a},893:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThemePart=void 0;const r=i(530),a=i(55);class n extends r.Part{constructor(e,t){super(e,t)}parseXml(e){this.theme=(0,a.parseTheme)(e,this._package.xmlParser)}}t.ThemePart=n},55:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseFontInfo=t.parseFontScheme=t.parseColorScheme=t.parseTheme=t.DmlTheme=void 0;class i{}function r(e,t){var i={name:t.attr(e,"name"),colors:{}};for(let n of t.elements(e)){var r=t.element(n,"srgbClr"),a=t.element(n,"sysClr");r?i.colors[n.localName]=t.attr(r,"val"):a&&(i.colors[n.localName]=t.attr(a,"lastClr"))}return i}function a(e,t){var i={name:t.attr(e,"name")};for(let r of t.elements(e))switch(r.localName){case"majorFont":i.majorFont=n(r,t);break;case"minorFont":i.minorFont=n(r,t)}return i}function n(e,t){return{latinTypeface:t.elementAttr(e,"latin","typeface"),eaTypeface:t.elementAttr(e,"ea","typeface"),csTypeface:t.elementAttr(e,"cs","typeface")}}t.DmlTheme=i,t.parseTheme=function(e,t){var n=new i,s=t.element(e,"themeElements");for(let i of t.elements(s))switch(i.localName){case"clrScheme":n.colorScheme=r(i,t);break;case"fontScheme":n.fontScheme=a(i,t)}return n},t.parseColorScheme=r,t.parseFontScheme=a,t.parseFontInfo=n},593:(e,t)=>{function i(e){return e&&"object"==typeof e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.asArray=t.formatCssRules=t.parseCssRules=t.mergeDeep=t.isString=t.isObject=t.blobToBase64=t.keyBy=t.resolvePath=t.splitPath=t.escapeClassName=void 0,t.escapeClassName=function(e){return null==e?void 0:e.replace(/[ .]+/g,"-").replace(/[&]+/g,"and").toLowerCase()},t.splitPath=function(e){let t=e.lastIndexOf("/")+1;return[0==t?"":e.substring(0,t),0==t?e:e.substring(t)]},t.resolvePath=function(e,t){try{const i="http://docx/";return new URL(e,i+t).toString().substring(i.length)}catch(i){return"".concat(t).concat(e)}},t.keyBy=function(e,t){return e.reduce(((e,i)=>(e[t(i)]=i,e)),{})},t.blobToBase64=function(e){return new Promise(((t,i)=>{const r=new FileReader;r.onloadend=()=>t(r.result),r.onerror=()=>i(),r.readAsDataURL(e)}))},t.isObject=i,t.isString=function(e){return"string"==typeof e||e instanceof String},t.mergeDeep=function e(t,...r){var a;if(!r.length)return t;const n=r.shift();if(i(t)&&i(n))for(const s in n)i(n[s])?e(null!==(a=t[s])&&void 0!==a?a:t[s]={},n[s]):t[s]=n[s];return e(t,...r)},t.parseCssRules=function(e){const t={};for(const i of e.split(";")){const[e,r]=i.split(":");t[e]=r}return t},t.formatCssRules=function(e){return Object.entries(e).map(((e,t)=>"".concat(e,": ").concat(t))).join(";")},t.asArray=function(e){return Array.isArray(e)?e:[e]}},320:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseVmlElement=t.VmlElement=void 0;const r=i(149),a=i(120),n=i(472);class s extends a.OpenXmlElementBase{constructor(){super(...arguments),this.type=a.DomType.VmlElement,this.attrs={}}}function o(e){var t;return{stroke:n.default.attr(e,"color"),"stroke-width":null!==(t=n.default.lengthAttr(e,"weight",r.LengthUsage.Emu))&&void 0!==t?t:"1px"}}function l(e){return e.split(",")}t.VmlElement=s,t.parseVmlElement=function e(t,i){var r=new s;switch(t.localName){case"rect":r.tagName="rect",Object.assign(r.attrs,{width:"100%",height:"100%"});break;case"oval":r.tagName="ellipse",Object.assign(r.attrs,{cx:"50%",cy:"50%",rx:"50%",ry:"50%"});break;case"line":r.tagName="line";break;case"shape":r.tagName="g";break;case"textbox":r.tagName="foreignObject",Object.assign(r.attrs,{width:"100%",height:"100%"});break;default:return null}for(const a of n.default.attrs(t))switch(a.localName){case"style":r.cssStyleText=a.value;break;case"fillcolor":r.attrs.fill=a.value;break;case"from":const[e,t]=l(a.value);Object.assign(r.attrs,{x1:e,y1:t});break;case"to":const[i,n]=l(a.value);Object.assign(r.attrs,{x2:i,y2:n})}for(const a of n.default.elements(t))switch(a.localName){case"stroke":Object.assign(r.attrs,o(a));break;case"fill":Object.assign(r.attrs,{});break;case"imagedata":r.tagName="image",Object.assign(r.attrs,{width:"100%",height:"100%"}),r.imageHref={id:n.default.attr(a,"id"),title:n.default.attr(a,"title")};break;case"txbxContent":r.children.push(...i.parseBodyElements(a));break;default:const t=e(a,i);t&&r.children.push(t)}return r}},213:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deobfuscate=t.WordDocument=void 0;const r=i(461),a=i(380),n=i(522),s=i(448),o=i(593),c=i(527),d=i(240),h=i(985),u=i(665),p=i(162),_=i(893),f=i(735),g=i(287),m=i(177),v=[{type:r.RelationshipTypes.OfficeDocument,target:"word/document.xml"},{type:r.RelationshipTypes.ExtendedProperties,target:"docProps/app.xml"},{type:r.RelationshipTypes.CoreProperties,target:"docProps/core.xml"},{type:r.RelationshipTypes.CustomProperties,target:"docProps/custom.xml"}];class b{constructor(){this.parts=[],this.partsMap={}}static load(e,t,i){return l(this,null,(function*(){var r=new b;return r._options=i,r._parser=t,r._package=yield n.OpenXmlPackage.load(e,i),r.rels=yield r._package.loadRelationships(),yield Promise.all(v.map((e=>{var t;const i=null!==(t=r.rels.find((t=>t.type===e.type)))&&void 0!==t?t:e;return r.loadRelationshipPart(i.target,i.type)}))),r}))}save(e="blob"){return this._package.save(e)}loadRelationshipPart(e,t){return l(this,null,(function*(){var i;if(this.partsMap[e])return this.partsMap[e];if(!this._package.get(e))return null;let n=null;switch(t){case r.RelationshipTypes.OfficeDocument:this.documentPart=n=new s.DocumentPart(this._package,e,this._parser);break;case r.RelationshipTypes.FontTable:this.fontTablePart=n=new a.FontTablePart(this._package,e);break;case r.RelationshipTypes.Numbering:this.numberingPart=n=new c.NumberingPart(this._package,e,this._parser);break;case r.RelationshipTypes.Styles:this.stylesPart=n=new d.StylesPart(this._package,e,this._parser);break;case r.RelationshipTypes.Theme:this.themePart=n=new _.ThemePart(this._package,e);break;case r.RelationshipTypes.Footnotes:this.footnotesPart=n=new f.FootnotesPart(this._package,e,this._parser);break;case r.RelationshipTypes.Endnotes:this.endnotesPart=n=new f.EndnotesPart(this._package,e,this._parser);break;case r.RelationshipTypes.Footer:n=new h.FooterPart(this._package,e,this._parser);break;case r.RelationshipTypes.Header:n=new h.HeaderPart(this._package,e,this._parser);break;case r.RelationshipTypes.CoreProperties:this.corePropsPart=n=new p.CorePropsPart(this._package,e);break;case r.RelationshipTypes.ExtendedProperties:this.extendedPropsPart=n=new u.ExtendedPropsPart(this._package,e);break;case r.RelationshipTypes.CustomProperties:n=new m.CustomPropsPart(this._package,e);break;case r.RelationshipTypes.Settings:this.settingsPart=n=new g.SettingsPart(this._package,e)}if(null==n)return Promise.resolve(null);if(this.partsMap[e]=n,this.parts.push(n),yield n.load(),(null===(i=n.rels)||void 0===i?void 0:i.length)>0){const[e]=(0,o.splitPath)(n.path);yield Promise.all(n.rels.map((t=>this.loadRelationshipPart((0,o.resolvePath)(t.target,e),t.type))))}return n}))}loadDocumentImage(e,t){return l(this,null,(function*(){const i=yield this.loadResource(null!=t?t:this.documentPart,e,"blob");return this.blobToURL(i)}))}loadNumberingImage(e){return l(this,null,(function*(){const t=yield this.loadResource(this.numberingPart,e,"blob");return this.blobToURL(t)}))}loadFont(e,t){return l(this,null,(function*(){const i=yield this.loadResource(this.fontTablePart,e,"uint8array");return i&&this.blobToURL(new Blob([y(i,t)]))}))}blobToURL(e){return e?this._options.useBase64URL?(0,o.blobToBase64)(e):URL.createObjectURL(e):null}findPartByRelId(e,t=null){var i,r=(null!==(i=t.rels)&&void 0!==i?i:this.rels).find((t=>t.id==e));const a=t?(0,o.splitPath)(t.path)[0]:"";return r?this.partsMap[(0,o.resolvePath)(r.target,a)]:null}getPathById(e,t){const i=e.rels.find((e=>e.id==t)),[r]=(0,o.splitPath)(e.path);return i?(0,o.resolvePath)(i.target,r):null}loadResource(e,t,i){const r=this.getPathById(e,t);return r?this._package.load(r,i):Promise.resolve(null)}}function y(e,t){const i=t.replace(/{|}|-/g,""),r=new Array(16);for(let a=0;a<16;a++)r[16-a-1]=parseInt(i.substr(2*a,2),16);for(let a=0;a<32;a++)e[a]=e[a]^r[a%16];return e}t.WordDocument=b,t.deobfuscate=y},583:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 100%27 preserveAspectRatio=%27none%27%3E%3Cpath d=%27m0,75 l5,0 l5,25 l10,-100%27 stroke=%27black%27 fill=%27none%27 vector-effect=%27non-scaling-stroke%27/%3E%3C/svg%3E"},626:t=>{t.exports=e}},i={};function r(e){var a=i[e];if(void 0!==a)return a.exports;var n=i[e]={id:e,exports:{}};return t[e](n,n.exports,r),n.exports}return r.m=t,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.b=document.baseURI||self.location.href,r(667)})(),d.exports=p(f());var g=d.exports;const m={ignoreLastRenderedPageBreak:!1};function v(e,t={}){return"string"==typeof e?b(e,t):Promise.resolve(e)}function b(e,t){return fetch(e,t).then((e=>200!==e.status?Promise.reject(e):e))}function y(e){return l(this,null,(function*(){let t;return e instanceof Blob?t=e:e instanceof Response?t=yield e.blob():e instanceof ArrayBuffer&&(t=new Blob([e])),t}))}function A(e,t,i={}){if(!e)return t.innerHTML="",Promise.resolve();let r;return e instanceof Blob?r=e:e instanceof Response?r=e.blob():e instanceof ArrayBuffer&&(r=new Blob([e])),g.renderAsync(r,t,t,o(o({},m),i))}const w={getData:v,render:A,getBlob:y};function S(e,t){return l(this,null,(function*(){t&&(t instanceof ArrayBuffer&&(t=new Blob([t])),k(e,URL.createObjectURL(t)))}))}function k(e,t){let i=document.createElement("a");i.download=e,i.style.display="none",i.href=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}const x=(e,t)=>{const i=e.__vccOpts||e;for(const[r,a]of t)i[r]=a;return i},C=e.defineComponent({name:"VueOfficeDocx",props:{src:[String,ArrayBuffer,Blob],requestOptions:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})}},emits:["rendered","error"],setup(t,{emit:i}){const r=e.ref(null);let a=null;function n(){let e=r.value;w.getData(t.src,t.requestOptions).then((r=>l(this,null,(function*(){a=yield w.getBlob(r),w.render(a,e,t.options).then((()=>{i("rendered")})).catch((r=>{w.render("",e,t.options),i("error",r)}))})))).catch((r=>{w.render("",e,t.options),i("error",r)}))}function s(e){S(e||"vue-office-docx-".concat((new Date).getTime(),".docx"),a)}return e.onMounted((()=>{t.src&&n()})),e.watch((()=>t.src),(()=>{t.src?n():w.render("",r.value,t.options).then((()=>{i("rendered")}))})),{rootRef:r,save:s}}}),E={class:"vue-office-docx"},P={class:"vue-office-docx-main",ref:"rootRef"};function M(e,i,r,a,n,s){return t.openBlock(),t.createElementBlock("div",E,[t.createElementVNode("div",P,null,512)])}const T=x(C,[["render",M]]);return T.install=function(e){e.component(T.name,T)},T}(requireLib(),require$$1);var libExports=lib$1.exports;const VueOfficeDocx=getDefaultExportFromCjs(libExports),_hoisted_1$3={class:"mt-3r bg-white-100 pt-3r shadow-desktop relative h-[calc(100vh-10.84rem)] overflow-hidden"},_hoisted_2$3={key:0,class:"text-main-black flex flex-col items-center text-xs leading-6"},_hoisted_3$2=createBaseVNode("span",{class:"mt-5r"},"抱歉，解析过程遇到了一点小问题，",-1),_hoisted_4$1=createBaseVNode("span",null,"请重新上传文档或添加网址吧～",-1),_hoisted_5$1={key:3,class:"mx-4r h-[calc(100vh-48px)] overflow-scroll rounded-xl"},_hoisted_6$1={class:"bg-white-100 p-5r mb-[48px] rounded-xl"},_hoisted_7$1={key:4,class:"absolute bottom-2 left-1/2 z-10 flex h-10 w-72 -translate-x-1/2 select-none items-center justify-between rounded-lg bg-white px-5 py-2 shadow"},_hoisted_8$1={class:"flex items-center text-sm font-medium text-gray-400"},_hoisted_9$1={class:"mr-1 text-slate-950"},_hoisted_10$1={class:"ml-1"},_hoisted_11$1={class:"flex items-center"},_hoisted_12$1={class:"text-sm font-semibold"},_sfc_main$3=defineComponent({__name:"FilePreview",props:{source:{type:String,required:!0},error:{type:String,default:""},currentFileType:{type:String,required:!0}},setup(e){const t=useAgentStore(),i=e,r=ref(""),a=ref(),n=computed((()=>{var e;return null==(e=a.value)?void 0:e.status.currentPageNumber})),s=computed((()=>{var e;return null==(e=a.value)?void 0:e.status.currentPageCount})),o=computed((()=>{var e;return null==(e=a.value)?void 0:e.status.currentScaleValue})),l=t.currentAgentId,c=()=>{a.value.nextPage(),alTracker().reportImmediate({event:"agent_chat_page_read_page_flip_click",event_info:{origin:"agent_chat_page",entity:"read_page_flip",event:"click",action:"down",agent_id:l}})},d=()=>{a.value.previousPage(),alTracker().reportImmediate({event:"agent_chat_page_read_page_flip_click",event_info:{origin:"agent_chat_page",entity:"read_page_flip",event:"click",action:"up",agent_id:l}})},h=()=>{a.value.increaseScale(),alTracker().reportImmediate({event:"agent_chat_page_read_page_zoom_click",event_info:{origin:"agent_chat_page",entity:"read_page_zoom",event:"click",action:"in",agent_id:l}})},u=()=>{a.value.decreaseScale(),alTracker().reportImmediate({event:"agent_chat_page_read_page_zoom_click",event_info:{origin:"agent_chat_page",entity:"read_page_zoom",event:"click",action:"out",agent_id:l}})},p=()=>{alTracker().reportImmediate({event:"agent_chat_page_read_page_show",event_info:{origin:"agent_chat_page",entity:"read_page",event:"show",agent_id:l}})};return watch((()=>i.source),(e=>{e.includes("http")&&"txt"===i.currentFileType&&fetch(i.source).then((e=>e.text())).then((e=>{r.value=e,p()}))}),{immediate:!0}),(t,i)=>{const l=_sfc_main$g,_=__unplugin_components_1;return openBlock(),createElementBlock("div",_hoisted_1$3,[e.error?(openBlock(),createElementBlock("div",_hoisted_2$3,[createVNode(l,{class:"!h-16r !w-16r mt-[4.625rem]",name:"error"}),_hoisted_3$2,_hoisted_4$1])):["url","pdf","doc"].includes(e.currentFileType)&&e.source.includes("http")?(openBlock(),createBlock(_sfc_main$4,{key:1,class:"!bottom-5r !top-4r !left-0",ref_key:"pdfRef",ref:a,source:e.source,scale:"page-fit",onRendered:p},null,8,["source"])):["docx"].includes(e.currentFileType)?(openBlock(),createBlock(unref(VueOfficeDocx),{key:2,src:e.source,style:{height:"100%",overflow:"scroll"},onRendered:p},null,8,["src"])):"txt"===e.currentFileType?(openBlock(),createElementBlock("div",_hoisted_5$1,[createBaseVNode("div",_hoisted_6$1,toDisplayString(unref(r)),1)])):createCommentVNode("",!0),["url","pdf","doc"].includes(e.currentFileType)?(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("div",_hoisted_8$1,[createVNode(_,{callback:d,disabled:1===unref(n),name:"ic_left","class-names":"mr-2.5"},null,8,["disabled"]),createBaseVNode("span",_hoisted_9$1,toDisplayString(unref(n)),1),createTextVNode(" / "),createBaseVNode("span",_hoisted_10$1,toDisplayString(unref(s)),1),createVNode(_,{callback:c,disabled:unref(n)===unref(s),name:"ic_right","class-names":"ml-2.5"},null,8,["disabled"])]),createBaseVNode("div",_hoisted_11$1,[createVNode(_,{callback:u,disabled:unref(o)<=.1,name:"ic_minus","class-names":"mr-2.5"},null,8,["disabled"]),createBaseVNode("span",_hoisted_12$1,toDisplayString("auto"===unref(o)?"auto":Math.floor(100*unref(o))+"%"),1),createVNode(_,{callback:h,disabled:unref(o)>=10,name:"ic_add","class-names":"ml-2.5"},null,8,["disabled"])])])):createCommentVNode("",!0)])}}}),_hoisted_1$2={class:"mt-5 text-base"},_hoisted_2$2={key:0,class:"mt-3 flex flex-wrap justify-center gap-2"},_sfc_main$2=defineComponent({__name:"AgentInfo",props:{agentConfig:{}},setup(e){const t=e,i=useRouter();function r(){var e,r,a,n;alTracker().reportImmediate({event:"agent_chat_page_section_detail_edit_click",event_info:{origin:"agent_chat_page",entity:"section_detail_edit",event:"click",agent_id:t.agentConfig.id,tag:(null==(r=null==(e=t.agentConfig)?void 0:e.labels)?void 0:r.length)?null==(n=null==(a=t.agentConfig)?void 0:a.labels)?void 0:n.join(","):""}}),i.push("/agent/edit?id="+t.agentConfig.id)}return onMounted((()=>{var e,i,r,a;alTracker().reportImmediate({event:"agent_chat_page_section_detail_show",event_info:{origin:"agent_chat_page",entity:"section_detail",event:"show",agent_id:t.agentConfig.id,tag:(null==(i=null==(e=t.agentConfig)?void 0:e.labels)?void 0:i.length)?null==(a=null==(r=t.agentConfig)?void 0:r.labels)?void 0:a.join(","):""}})})),(e,i)=>{var a,n,s,o;const l=ElButton;return openBlock(),createElementBlock("div",null,[createVNode(AvatarInfo,{class:"mt-10",position:"right",agentProfile:e.agentConfig},null,8,["agentProfile"]),createBaseVNode("p",_hoisted_1$2,toDisplayString(e.agentConfig.description),1),(null==(a=t.agentConfig)?void 0:a.labels)&&(null==(s=null==(n=t.agentConfig)?void 0:n.labels)?void 0:s.length)>0?(openBlock(),createElementBlock("div",_hoisted_2$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.agentConfig.labels,((e,t)=>(openBlock(),createElementBlock("span",{class:"inline-block rounded bg-white px-2 py-[2px] text-xs leading-5 text-icon-text-3",key:t},toDisplayString(e),1)))),128))])):createCommentVNode("",!0),(null==(o=t.agentConfig)?void 0:o.is_owner)?(openBlock(),createElementBlock("div",{key:1,class:"mt-6 text-center",onClick:r},[createVNode(l,{class:"edit-btn",type:"primary",size:"large"},{default:withCtx((()=>[createTextVNode("编辑智能体")])),_:1})])):createCommentVNode("",!0)])}}}),AgentInfo=_export_sfc(_sfc_main$2,[["__scopeId","data-v-ed5602ac"]]),_hoisted_1$1={class:"flex w-full flex-col items-center justify-center"},_hoisted_2$1={class:"text-center text-base font-medium leading-normal text-slate-950"},_hoisted_3$1={class:"mt-3 flex items-center justify-center gap-3"},_sfc_main$1=defineComponent({__name:"AgentHasOffedOrDelete",props:{message:{}},emits:["known"],setup(e,{emit:t}){const i=t;return(e,t)=>{const r=_sfc_main$g,a=_sfc_main$k;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$1,[createVNode(r,{class:"h-[150px] w-[150px]",name:"agent_has_delete"}),createBaseVNode("span",_hoisted_2$1,toDisplayString(e.message),1)]),createBaseVNode("div",_hoisted_3$1,[createVNode(a,{onClick:t[0]||(t[0]=e=>i("known")),kind:"primary"},{default:withCtx((()=>[createTextVNode("我知道了")])),_:1})])],64)}}}),_hoisted_1={class:"chat relative"},_hoisted_2={class:"main relative pb-[108px]"},_hoisted_3={key:0,class:"clearContext"},_hoisted_4=["id","value"],_hoisted_5=["for","onClick","id"],_hoisted_6={class:"footer absolute bottom-0 left-0 right-0 bg-fill-3 pt-2"},_hoisted_7={class:"relative flex h-full w-full justify-center"},_hoisted_8={key:0,class:"side-panel"},_hoisted_9={class:"panel-header pb-4"},_hoisted_10={class:"title"},_hoisted_11={key:0},_hoisted_12={class:"panel-body"},_sfc_main=defineComponent({__name:"Chat",emits:["update:share-visible"],setup(e,{emit:t}){const i=useEmitter();let r,a=0;const n=[CardType.read_file,CardType.image_gen_text],s=ref(),o=ref(),l=ref(!1),c=ref("no_scroll"),d=ref(!1),h=reactive({isShow:!1,name:"",source:"",error:"",currentFileType:""}),u=ref(0),p=ref(),_=ref(),f=ref();i.on("downloadImage",(e=>{alTracker().reportImmediate({event:"agent_chat_page_pic_download_click",event_info:{origin:"agent_chat_page",entity:"pic_download",event:"click",agent_id:S.value,ask_id:f.value,url:e}})}));const g=ref(!1),m=useAgentStore(),{updateChatHistory:v,switchAgent:b,repeatMessage:y,sendSelectTemplateMessage:A,setCurrentAgentWsServerUrl:w}=m,{currentAgentId:S,currentAgentType:k,currentAgentInfo:x,currentAgentConfig:C,latestChatRecord:E}=storeToRefs(m),P=useWriteStore(),{checkTemplateList:M,setTemplateVisible:T,setEditorVisible:I}=P,{templateVisible:D,editorVisible:R,editorExpanded:L}=storeToRefs(P),{checkedChange:F,checked:N,checkAll:O,isCheckAll:B}=useCheckbox(),{showMenu:G}=useContextMenu(),W=useRoute(),j=useRouter(),V=computed((()=>{var e;return((null==(e=x.value)?void 0:e.detailList)||[]).slice().reverse().map((e=>{var t;const i=!!(null==(t=e.data)?void 0:t.find((e=>{var t;let i=e.content;if(e.type===CardType.markdown){if("string"==typeof e.content)try{i=JSON.parse(e.content)}catch(r){}return!!(null==(t=get(i,"[0].messages[0].text",""))?void 0:t.trim())}return e.type===CardType.text_gen_picture})));return{...e,isCanShare:i}}))})),U=computed((()=>V.value.filter((e=>{var t;return null==(t=N.value)?void 0:t.includes(e.askId)})).map((e=>{var t;const i=null==(t=e.data)?void 0:t.find((e=>"user"===e.type));return(null==i?void 0:i.content)||""})).join(","))),z=computed((()=>!V.value||V.value.length<=1)),H=computed((()=>{var e,t,i;return(null==(e=x.value)?void 0:e.status)===MessageStatus.send||(null==(t=x.value)?void 0:t.status)===MessageStatus.start||(null==(i=x.value)?void 0:i.status)===MessageStatus.loading}));function q(e){let t=e[0];return(null==t?void 0:t.type)!==CardType.user&&(t=e.find((e=>e.type===CardType.user))),(null==t?void 0:t.content)||""}function X(e,t){for(let i=0;i<t.length;i++){if(t[i].type===CardType.search_schedule)return e.type===CardType.search_schedule;if(t[i].type===CardType.search_result)return e.type===CardType.search_result;if(t[i].type===CardType.markdown)return e.type===CardType.markdown;if(t[i].type===CardType.agent_confirm)return e.type===CardType.agent_confirm;if(t[i].type===CardType.text_gen_picture)return e.type===CardType.text_gen_picture}return!1}function K(){Y(),T(!1),I(!1)}function $(e){K(),u.value=1,"head"===e&&alTracker().reportImmediate({event:"agent_chat_page_head_click",event_info:{origin:"agent_chat_page",entity:"head",event:"click",agent_id:S.value}})}function Y(){u.value=0}function Z(e){K(),"speed_writing"===k.value?M(TEMPLATE_AGENT_TYPE_WRITING,S.value):"text_gen_image"===k.value&&M(TEMPLATE_AGENT_TYPE_IMAGE,S.value),e&&alTracker().reportImmediate({event:"agent_chat_page_template_click",event_info:{origin:"agent_chat_page",entity:"template",event:"click",agent_id:S.value}})}watch((()=>W.params),(e=>{const t=e.id,i=e.type;if(!t||!i)return showMessage("链接参数不正确",{icon:"info"}),void j.replace("/");d.value=!1,b({agentId:t,agentType:i}),Z(),alTracker().reportImmediate({event:"agent_chat_page_page_show",event_info:{origin:"agent_chat_page",entity:"page",event:"show",agent_id:S.value}}),apiOcpcReportData("content_view",{content:"agent",agent_id:S.value}),g.value&&ee()}),{immediate:!0,deep:!0}),watch(H,((e,t)=>{e&&!t?Q("2"):t&&!e&&setTimeout((()=>{Q()}),500)})),watch(S,((e,t)=>{z.value||e!==t&&nextTick((()=>{var e,t;a=null==(t=null==(e=s.value)?void 0:e.wrapRef)?void 0:t.scrollHeight,Q("1")}))}),{immediate:!0}),watch(E,((e,t)=>{z.value||(e&&!t&&nextTick((()=>{var e,t;a=null==(t=null==(e=s.value)?void 0:e.wrapRef)?void 0:t.scrollHeight,Q("1")})),nextTick((()=>{Q()})))}),{deep:!0});const J=useThrottleFn((e=>{x.value.status!==MessageStatus.start&&x.value.status!==MessageStatus.loading?A(e.prompt):showMessage("正在回答，请稍后再试",{icon:"info"})}),1e3);function Q(e){var t;let i=null==(t=s.value)?void 0:t.wrapRef;i&&("1"===e?setTimeout((()=>{i.scrollTop=i.scrollHeight,nextTick((()=>{s.value.handleScroll()}))})):"2"===e?setTimeout((()=>{i.scrollTop=i.scrollHeight})):nextTick((()=>{"no_scroll"===c.value&&i.scrollHeight-i.scrollTop-i.offsetHeight<450&&setTimeout((()=>{var e;null==(e=_.value)||e.scrollIntoView({behavior:"smooth",block:"start"})}),200)})))}useEventListener(o,"click",(e=>{var t,r,a,n,s,o,l;const c=e.target;if(!d.value&&"img"===c.tagName.toLowerCase()&&(c.className.includes("tg-image")||(null==(r=null==(t=c.parentElement)?void 0:t.className)?void 0:r.includes("tg-image")))){i.emit("imageViewer",{urlList:[c.src],isDownload:null==(n=null==(a=c.parentElement)?void 0:a.className)?void 0:n.includes("download")});const e=(null==(s=c.parentElement)?void 0:s.getAttribute("data-ask"))||(null==(l=null==(o=c.parentElement)?void 0:o.parentElement)?void 0:l.getAttribute("data-ask"))||"";f.value=e,alTracker().reportImmediate({event:"agent_chat_page_pic_preview_show",event_info:{origin:"agent_chat_page",entity:"pic_preview",event:"show",agent_id:S.value,ask_id:e,url:c.src}})}}));const ee=()=>{const e=W.params.id,t=W.params.type;apiGetCurrentAgentServerUrl({agent_id:e,type:t}).then((e=>{w(e.data.service_url),g.value=!0}))};useAgentStore$1(+W.params.id);const te=ref(),ie=ref(!1),re=ref(!1);watchEffect((async()=>{var e;await(async()=>{var e;const t=await apiGetAgentStatus(+W.params.id);te.value=null==(e=t.data)?void 0:e.status})();const t=0!==(null==(e=V.value.filter((e=>98!==e.recordType&&99!==e.recordType)))?void 0:e.length);if(3!==te.value){if(4===te.value){if(t)ie.value=!0,showMessage("当前智能体已被作者删除",{icon:"info"});else{const e=openDialog({customClass:"w-[400px]",closeVisible:!1,body:createVNode(_sfc_main$1,{message:"当前智能体已被作者删除",onKnown:()=>{j.push("/agent-home"),e()}},null)})}return}if(t)re.value=!0,showMessage("当前智能体已下架",{icon:"info"});else{const e=openDialog({customClass:"w-[400px]",closeVisible:!1,body:createVNode(_sfc_main$1,{message:"当前智能体已下架",onKnown:()=>{e(),j.push("/agent-home")}},null)})}}})),watchEffect((()=>{})),onMounted((()=>{ee()}));const ae=computed((()=>{var e;return["speed_writing","text_gen_image"].includes(null==(e=C.value)?void 0:e.type)})),ne=computed((()=>{const{id:e,type:t}=C.value;return e&&t?"https://".concat(window.location.host,"/chat/").concat(t,"/").concat(e,"?share=1&app_version=").concat("1.5.4"):""})),{copy:se,copied:oe}=useClipboard({source:ne,legacy:!0});async function le(){if(alTracker().reportImmediate({event:"agent_chat_page_agent_share_click",event_info:{origin:"agent_chat_page",entity:"agent_share",event:"click",url:ne.value}}),ne.value)try{const{id:e}=C.value;if(!e)return;const t=await apiGenerateShareLink(e,ne.value);if(!t.data)return;se(t.data.shareLink),oe&&showMessage("已复制当前智能体链接，快去发给小伙伴们吧",{icon:"success"})}catch(e){e.response.data.msg&&showMessage(e.response.data.msg,{icon:"error"})}}const ce=e=>{if(e){if(H.value)return void showMessage("正在回答，请稍后再试",{icon:"info"});p.value=e}O([]),d.value=!d.value,nextTick((()=>{var e;p.value&&(null==(e=document.querySelector("#q_".concat(p.value)))||e.scrollIntoView(!0))}))},de=()=>{B.value?O([]):O(V.value.map((e=>e.askId)))};async function he(e){var t,i;K(),u.value=2,h.name=e.name;try{const r=await loginHttpClient.get("".concat(apiUrl.agentFileInfo).concat(e.id,"/url"));0===r.code&&(null==(t=null==r?void 0:r.data)?void 0:t.url)?(h.isShow=!0,h.source=null==(i=null==r?void 0:r.data)?void 0:i.url,h.error="",h.currentFileType=e.contentType):h.error="预览出错"}catch(r){h.error="预览出错"}}return(e,t)=>{var i;const p=_sfc_main$g,f=ElTooltip,g=_sfc_main$g,m=ElScrollbar,b=__unplugin_components_4,A=resolveDirective("login");return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createVNode(Header,{class:"header",agentId:unref(S)},{content:withCtx((()=>[unref(z)?createCommentVNode("",!0):(openBlock(),createBlock(AvatarInfo,{key:0,position:"title",agentProfile:unref(C),onAvatarClick:t[0]||(t[0]=e=>$("head"))},null,8,["agentProfile"]))])),extra:withCtx((()=>[unref(ae)&&!unref(D)?(openBlock(),createBlock(f,{key:0,effect:"dark",content:"模板","show-after":100},{default:withCtx((()=>[withDirectives((openBlock(),createElementBlock("button",{class:"btn",onClick:t[1]||(t[1]=e=>Z(!0))},[createVNode(p,{class:"btn-icon",name:"template"})])),[[A]])])),_:1})):createCommentVNode("",!0),createVNode(f,{effect:"dark",content:"分享智能体","show-after":100},{default:withCtx((()=>[withDirectives((openBlock(),createElementBlock("button",{class:"btn",onClick:le},[createVNode(p,{class:"btn-icon",name:"share"})])),[[A]])])),_:1})])),_:1},8,["agentId"]),createVNode(m,{class:"mainContainer",ref_key:"scrollBoxRef",ref:s,onScroll:t[2]||(t[2]=()=>{nextTick((()=>{var e,t;if(l.value)return;let i=null==(e=s.value)?void 0:e.wrapRef;i&&(null==(t=x.value)?void 0:t.hashMore)&&i.scrollTop<=150&&(l.value=!0,v({callback:function(){l.value=!1,nextTick((()=>{let e=i.scrollHeight,t=e-a;i.scrollTo(0,t),a=e,0===t&&s.value.handleScroll()}))}}))})),c.value="is_scroll",r&&(clearTimeout(r),r=null),r=window.setTimeout((()=>{c.value="no_scroll"}),30)})},{default:withCtx((()=>[createBaseVNode("div",{class:normalizeClass(["inner",{sharing:unref(d)}]),ref_key:"contentRef",ref:o},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(V),((e,t)=>{var i;return openBlock(),createElementBlock("div",{class:"chatList",key:e.askId},[e.recordType===unref(RecordType).clear_context?(openBlock(),createElementBlock("div",_hoisted_3,[createBaseVNode("span",null,toDisplayString("已".concat((null==(i=unref(C))?void 0:i.clean_context_text)||"清除上下文")),1)])):(openBlock(),createElementBlock(Fragment,{key:1},[!unref(d)||e.isCanShare?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("input",{class:"hidden",type:"checkbox",name:"checkbox",id:e.askId,value:e.askId},null,8,_hoisted_4),createBaseVNode("label",{class:normalizeClass(["min-w-[270px] max-w-[var(--search-max-width)] flex-1",[unref(d)?"cursor-pointer select-none":"cursor-default select-auto"]]),for:e.askId,onClick:t=>unref(d)&&(e=>{var t,i;const r=e.askId,a=q(e.data||[]),n=N.value.includes(r)?0:1;F(r),alTracker().reportImmediate({event:"agent_chat_page_answer_select_click",event_info:{origin:"agent_chat_page",entity:"answer_select",event:"click",agent_id:S.value,ask_id:r,query:a,action:n,conversation_id:null==(i=null==(t=x.value)?void 0:t.session)?void 0:i.conversation_id}})})(e),id:"q_".concat(e.askId)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.data,((i,r)=>{var a,s,o,l;return openBlock(),createElementBlock(Fragment,{key:"chatLi_".concat(e.askId,"_").concat(r)},[i.type===unref(CardType).user&&i.content&&e.recordType!==unref(RecordType).greeting||n.includes(i.type)?(openBlock(),createElementBlock(Fragment,{key:0},[unref(d)&&i.type===unref(CardType).user?(openBlock(),createBlock(g,{key:0,class:"absolute left-0 top-2 z-10 h-6 w-6 cursor-pointer text-[28px]",name:unref(N).includes(e.askId)?"i_check_circle_fill":"i_circle_chat"},null,8,["name"])):createCommentVNode("",!0),createVNode(QuestionCard,{class:"pb-3",msgData:i,askId:e.askId,isLastGroup:t===unref(V).length-1,onPreviewFile:he},null,8,["msgData","askId","isLastGroup"])],64)):i.type!==unref(CardType).greetings&&i.type!==unref(CardType).template||unref(d)?i.type!==unref(CardType).suggestion||unref(d)||unref(H)?i.type!==unref(CardType).tips||unref(d)?(null==(o=null==(s=e.data)?void 0:s[r-1])?void 0:o.type)!==i.type&&X(i,null!=(l=e.data)?l:[])?(openBlock(),createBlock(AnswerCard,{key:4,agentStatus:unref(x).status,status:e.status,uniqueId:"".concat(e.askId,"_").concat(r),isLastGroup:t===unref(V).length-1,groupData:e.data||[],showOprBar:!(t===unref(V).length-1&&unref(H)||unref(d)||i.type==unref(CardType).agent_confirm),canRefresh:t===unref(V).length-1,like:e.like,conversationId:e.conversation_id,askId:e.askId,docId:e.doc_id,source:unref(S),ask:q(e.data||[]),type:i.type,level:r,isShare:unref(d),"onUpdate:shareVisible":t=>ce(e.askId),onAskAgain:unref(y),onMouseRight:t=>unref(G)({event:t,ask_id:e.askId,conversation_id:e.conversation_id||"",docId:e.doc_id,agent_id:unref(S)})},null,8,["agentStatus","status","uniqueId","isLastGroup","groupData","showOprBar","canRefresh","like","conversationId","askId","docId","source","ask","type","level","isShare","onUpdate:shareVisible","onAskAgain","onMouseRight"])):createCommentVNode("",!0):(openBlock(),createBlock(ThinkingCard,{key:3,agentId:unref(S),ask:q(e.data||[]),askId:e.askId,content:i.content,isLastGroup:t===unref(V).length-1,isLastInGroup:r===(null!=(a=e.data)?a:[]).length-1,status:e.status},null,8,["agentId","ask","askId","content","isLastGroup","isLastInGroup","status"])):(openBlock(),createBlock(SuggestionCard,{key:2,agentId:unref(S),agentStatus:unref(x).status,content:i.content,isLastGroup:t===unref(V).length-1,askId:e.askId,conversationId:e.conversation_id||"",ask:q(e.data||[])},null,8,["agentId","agentStatus","content","isLastGroup","askId","conversationId","ask"])):(openBlock(),createBlock(GreetingCard,{key:1,content:i.content,askId:e.askId,agentId:unref(S),agentType:unref(k),agentStatus:unref(x).status,agentProfile:unref(C),scrollBottom:Q,isOnlyGreeting:unref(z),isFirstGroup:0===t,hasDelete:unref(ie),hasOffed:unref(re),onAvatarClick:$},null,8,["content","askId","agentId","agentType","agentStatus","agentProfile","isOnlyGreeting","isFirstGroup","hasDelete","hasOffed"]))],64)})),128))],10,_hoisted_5)],64)):createCommentVNode("",!0)],64))])})),128)),createBaseVNode("div",{ref_key:"bottomRef",ref:_},null,512)],2)])),_:1},512),createBaseVNode("div",_hoisted_6,[createBaseVNode("div",_hoisted_7,[unref(d)?(openBlock(),createBlock(_sfc_main$l,{key:0,class:"absolute z-20 w-full min-w-[500px] max-w-[670px] bg-fill-3 duration-300 ease-in",isAllChecked:unref(V).length===unref(N).length,checkedIds:unref(N),"conversation-id":null==(i=unref(x).session)?void 0:i.conversation_id,origin:"agent_chat_page",query:unref(U),"onUpdate:checkedAll":de,"onCancel:share":ce},null,8,["isAllChecked","checkedIds","conversation-id","query"])):createCommentVNode("",!0),createVNode(b,{class:"w-full",hasDelete:unref(ie),hasOffed:unref(re),style:normalizeStyle({visibility:unref(d)?"hidden":"visible"})},null,8,["hasDelete","hasOffed","style"])])])]),!unref(R)&&unref(u)?(openBlock(),createElementBlock("div",_hoisted_8,[createBaseVNode("div",_hoisted_9,[createBaseVNode("div",_hoisted_10,[2===unref(u)?(openBlock(),createElementBlock("span",_hoisted_11,toDisplayString(unref(h).name),1)):createCommentVNode("",!0)]),createVNode(p,{class:"close",name:"closePanel",onClick:Y})]),createBaseVNode("div",_hoisted_12,[1===unref(u)?(openBlock(),createBlock(AgentInfo,{key:0,agentConfig:unref(C)},null,8,["agentConfig"])):2===unref(u)?(openBlock(),createBlock(_sfc_main$3,{class:"file-preview",key:unref(h).source,source:unref(h).source,error:unref(h).error,currentFileType:unref(h).currentFileType},null,8,["source","error","currentFileType"])):createCommentVNode("",!0)])])):createCommentVNode("",!0),createVNode(Editor,{class:normalizeClass({"expand-in-chat":unref(L)})},null,8,["class"]),createVNode(TemplateList,{onTemplateClick:unref(J)},null,8,["onTemplateClick"]),createVNode(_sfc_main$m)])}}}),Chat=_export_sfc(_sfc_main,[["__scopeId","data-v-adf9bd51"]]);export{Chat as default};
