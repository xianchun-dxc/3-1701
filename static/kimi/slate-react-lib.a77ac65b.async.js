"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7357],{71410:function(e,t,r){r.d(t,{BU:function(){return $t},CX:function(){return Et},F3:function(){return Me},mH:function(){return jt}});var n=r(50490),a=r.n(n),o=r(23368),i=r.n(o),l=r(71032),s=r.n(l),d=r(63313),c=r.n(d),u=r(78682),f=r(10554),h=r(94663),v=r(58386),p=r(74012),g=r.n(p);function m(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function b(e){var t=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===w(t)?t:String(t)}function y(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=(0,d.createContext)(null),x=()=>{var e=(0,d.useContext)(M);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},k=parseInt(c().version.split(".")[0],10),C="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,O="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),E="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),L="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),D="undefined"!=typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),S="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),P="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),B="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),T=E&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),R="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),F="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),N="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),j=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),W=(!B||!T)&&!S&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,A=new WeakMap,I=new WeakMap,q=new WeakMap,Y=new WeakMap,$=new WeakMap,U=new WeakMap,_=new WeakMap,z=new WeakMap,V=new WeakMap,H=new WeakMap,K=new WeakMap,X=new WeakMap,J=new WeakMap,Z=new WeakMap,G=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,re=new WeakMap,ne=new WeakMap,ae=new WeakMap,oe=Symbol("placeholder"),ie=Symbol("mark-placeholder"),le=globalThis.Text,se=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,de=e=>ce(e)&&1===e.nodeType,ce=e=>{var t=se(e);return!!t&&e instanceof t.Node},ue=e=>{var t=e&&e.anchorNode&&se(e.anchorNode);return!!t&&e instanceof t.Selection},fe=e=>ce(e)&&3===e.nodeType,he=(e,t,r)=>{for(var n,{childNodes:a}=e,o=a[t],i=t,l=!1,s=!1;(ce(n=o)&&8===n.nodeType||de(o)&&0===o.childNodes.length||de(o)&&"false"===o.getAttribute("contenteditable"))&&(!l||!s);)i>=a.length?(l=!0,i=t-1,r="backward"):i<0?(s=!0,i=t+1,r="forward"):(o=a[i],t=i,i+="forward"===r?1:-1);return[o,t]},ve=(e,t,r)=>{var[n]=he(e,t,r);return n},pe=e=>{var t="";if(fe(e)&&e.nodeValue)return e.nodeValue;if(de(e)){for(var r of Array.from(e.childNodes))t+=pe(r);var n=getComputedStyle(e).getPropertyValue("display");"block"!==n&&"list"!==n&&"BR"!==e.tagName||(t+="\n")}return t},ge=/data-slate-fragment="(.+?)"/m,me=e=>{var t=e.getData("text/html"),[,r]=t.match(ge)||[];return r},we=(e,t,r)=>{var{target:n}=t;if(de(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:a}=Me.getWindow(e);if(a.contains(n))return Me.hasDOMNode(e,n,{editable:!0});var o=r.find((e=>{var{addedNodes:t,removedNodes:r}=e;for(var a of t)if(a===n||a.contains(n))return!0;for(var o of r)if(o===n||o.contains(n))return!0}));return!(!o||o===t)&&we(e,o,r)},be=0;class ye{constructor(){y(this,"id",void 0),this.id="".concat(be++)}}var Me={androidPendingDiffs:e=>te.get(e),androidScheduleFlush:e=>{var t;null===(t=G.get(e))||void 0===t||t()},blur:e=>{var t=Me.toDOMNode(e,e),r=Me.findDocumentOrShadowRoot(e);K.set(e,!1),r.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,r=Me.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&f.YR.deselect(e)},findDocumentOrShadowRoot:e=>{var t=Me.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:n,target:a}=t;if(null==r||null==n)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var o,i=Me.toSlateNode(e,t.target),l=Me.findPath(e,i);if(f.W_.isElement(i)&&f.ML.isVoid(e,i)){var s=a.getBoundingClientRect(),d=e.isInline(i)?r-s.left<s.left+s.width-r:n-s.top<s.top+s.height-n,c=f.ML.point(e,l,{edge:d?"start":"end"}),u=d?f.ML.before(e,c):f.ML.after(e,c);if(u)return f.ML.range(e,u)}var{document:h}=Me.getWindow(e);if(h.caretRangeFromPoint)o=h.caretRangeFromPoint(r,n);else{var v=h.caretPositionFromPoint(r,n);v&&((o=h.createRange()).setStart(v.offsetNode,v.offset),o.setEnd(v.offsetNode,v.offset))}if(!o)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return Me.toSlateRange(e,o,{exactMatch:!1,suppressThrow:!1})},findKey:(e,t)=>{var r=z.get(t);return r||(r=new ye,z.set(t,r)),r},findPath:(e,t)=>{for(var r=[],n=t;;){var a=I.get(n);if(null==a){if(f.ML.isEditor(n))return r;break}var o=A.get(n);if(null==o)break;r.unshift(o),n=a}throw new Error("Unable to find the path for Slate node: ".concat(f.o4.stringify(t)))},focus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{retries:5};if(!K.get(e)){if(t.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0)setTimeout((()=>{Me.focus(e,{retries:t.retries-1})}),10);else{var r=Me.toDOMNode(e,e),n=Me.findDocumentOrShadowRoot(e);if(n.activeElement!==r){if(e.selection&&n instanceof Document){var a=n.getSelection(),o=Me.toDOMRange(e,e.selection);null==a||a.removeAllRanges(),null==a||a.addRange(o)}e.selection||(f.YR.select(e,f.ML.start(e,[])),e.onChange()),r.focus({preventScroll:!0}),K.set(e,!0)}}}},getWindow:e=>{var t=q.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:a=!1}=n,o=Me.toDOMNode(e,e);try{r=de(t)?t:t.parentElement}catch(e){if(e instanceof Error&&!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&!(r.closest("[data-slate-editor]")!==o||a&&!r.isContentEditable&&("boolean"!=typeof r.isContentEditable||r.closest('[contenteditable="false"]')!==o)&&!r.getAttribute("data-slate-zero-width"))},hasEditableTarget:(e,t)=>ce(t)&&Me.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:r,focus:n}=t;return f.ML.hasPath(e,r.path)&&f.ML.hasPath(e,n.path)},hasSelectableTarget:(e,t)=>Me.hasEditableTarget(e,t)||Me.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>ce(t)&&Me.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!X.get(e),isFocused:e=>!!K.get(e),isReadOnly:e=>!!H.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(H.get(e))return!1;var r=Me.hasTarget(e,t)&&Me.toSlateNode(e,t);return f.W_.isElement(r)&&f.ML.isVoid(e,r)},setFragmentData:(e,t,r)=>e.setFragmentData(t,r),toDOMNode:(e,t)=>{var r=V.get(e),n=f.ML.isEditor(t)?Y.get(e):null==r?void 0:r.get(Me.findKey(e,t));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(f.o4.stringify(t)));return n},toDOMPoint:(e,t)=>{var r,[n]=f.ML.node(e,t.path),a=Me.toDOMNode(e,n);f.ML.void(e,{at:t})&&(t={path:t.path,offset:0});for(var o=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),i=0,l=0;l<o.length;l++){var s=o[l],d=s.childNodes[0];if(null!=d&&null!=d.textContent){var{length:c}=d.textContent,u=s.getAttribute("data-slate-length"),h=i+(null==u?c:parseInt(u,10)),v=o[l+1];if(t.offset===h&&null!=v&&v.hasAttribute("data-slate-mark-placeholder")){var p,g=v.childNodes[0];r=[g instanceof le?g:v,null!==(p=v.textContent)&&void 0!==p&&p.startsWith("\ufeff")?1:0];break}if(t.offset<=h){r=[d,Math.min(c,Math.max(0,t.offset-i))];break}i=h}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(f.o4.stringify(t)));return r},toDOMRange:(e,t)=>{var{anchor:r,focus:n}=t,a=f.e6.isBackward(t),o=Me.toDOMPoint(e,r),i=f.e6.isCollapsed(t)?o:Me.toDOMPoint(e,n),l=Me.getWindow(e).document.createRange(),[s,d]=a?i:o,[c,u]=a?o:i,h=!!(de(s)?s:s.parentElement).getAttribute("data-slate-zero-width"),v=!!(de(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return l.setStart(s,h?1:d),l.setEnd(c,v?1:u),l},toSlateNode:(e,t)=>{var r=de(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?U.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(e,t,r)=>{var{exactMatch:n,suppressThrow:a}=r,[o,i]=n?t:(e=>{var[t,r]=e;if(de(t)&&t.childNodes.length){var n=r===t.childNodes.length,a=n?r-1:r;for([t,a]=he(t,a,n?"backward":"forward"),n=a<r;de(t)&&t.childNodes.length;){var o=n?t.childNodes.length-1:0;t=ve(t,o,n?"backward":"forward")}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),l=o.parentNode,s=null,d=0;if(l){var c,u,h=Me.toDOMNode(e,e),v=l.closest('[data-slate-void="true"]'),p=v&&h.contains(v)?v:null,g=l.closest("[data-slate-leaf]"),m=null;if(g){if(s=g.closest('[data-slate-node="text"]')){var w=Me.getWindow(e).document.createRange();w.setStart(s,0),w.setEnd(o,i);var b=w.cloneContents();[...Array.prototype.slice.call(b.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(b.querySelectorAll("[contenteditable=false]"))].forEach((e=>{E&&!n&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\ufeff"!==e.textContext?e.textContent.startsWith("\ufeff")&&(e.textContent=e.textContent.slice(1)):e.parentNode.removeChild(e)})),d=b.textContent.length,m=s}}else if(p){for(var y=p.querySelectorAll("[data-slate-leaf]"),M=0;M<y.length;M++){var x=y[M];if(Me.hasDOMNode(e,x)){g=x;break}}g?(s=g.closest('[data-slate-node="text"]'),d=(m=g).textContent.length,m.querySelectorAll("[data-slate-zero-width]").forEach((e=>{d-=e.textContent.length}))):d=1}m&&d===m.textContent.length&&E&&"z"===m.getAttribute("data-slate-zero-width")&&null!==(c=m.textContent)&&void 0!==c&&c.startsWith("\ufeff")&&(l.hasAttribute("data-slate-zero-width")||L&&null!==(u=m.textContent)&&void 0!==u&&u.endsWith("\n\n"))&&d--}if(E&&!s&&!n){var k=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(k&&Me.hasDOMNode(e,k,{editable:!0})){var C=Me.toSlateNode(e,k),{path:O,offset:D}=f.ML.start(e,Me.findPath(e,C));return k.querySelector("[data-slate-leaf]")||(D=i),{path:O,offset:D}}}if(!s){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var S=Me.toSlateNode(e,s);return{path:Me.findPath(e,S),offset:d}},toSlateRange:(e,t,r)=>{var n,a,o,i,l,s,d,{exactMatch:c,suppressThrow:u}=r;if(ue(t)?t.anchorNode:t.startContainer)if(ue(t)){if(L&&t.rangeCount>1){i=t.focusNode;var h=t.getRangeAt(0),v=t.getRangeAt(t.rangeCount-1);if(i instanceof HTMLTableRowElement&&h.startContainer instanceof HTMLTableRowElement&&v.startContainer instanceof HTMLTableRowElement){function x(e){return e.childElementCount>0?x(e.children[0]):e}var p=h.startContainer,g=v.startContainer,m=x(p.children[h.startOffset]),w=x(g.children[v.startOffset]);l=0,a=w.childNodes.length>0?w.childNodes[0]:w,i=m.childNodes.length>0?m.childNodes[0]:m,o=w instanceof HTMLElement?w.innerHTML.length:0}else h.startContainer===i?(a=v.endContainer,o=v.endOffset,l=h.startOffset):(a=h.startContainer,o=h.endOffset,l=v.startOffset)}else a=t.anchorNode,o=t.anchorOffset,i=t.focusNode,l=t.focusOffset;s=P&&(e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1})(a)||L?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed}else a=t.startContainer,o=t.startOffset,i=t.endContainer,l=t.endOffset,s=t.collapsed;if(null==a||null==i||null==o||null==l)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));(L&&null!==(n=i.textContent)&&void 0!==n&&n.endsWith("\n\n")&&l===i.textContent.length&&l--,"getAttribute"in i&&"false"===i.getAttribute("contenteditable")&&"true"!==i.getAttribute("data-slate-void"))&&(i=a,l=(null===(d=a.textContent)||void 0===d?void 0:d.length)||0);var b=Me.toSlatePoint(e,[a,o],{exactMatch:c,suppressThrow:u});if(!b)return null;var y=s?b:Me.toSlatePoint(e,[i,l],{exactMatch:c,suppressThrow:u});if(!y)return null;var M={anchor:b,focus:y};return f.e6.isExpanded(M)&&f.e6.isForward(M)&&de(i)&&f.ML.void(e,{at:M.focus,mode:"highest"})&&(M=f.ML.unhangRange(e,M,{voids:!0})),M}};function xe(e,t){var{path:r,diff:n}=t;if(!f.ML.hasPath(e,r))return!1;var a=f.NB.get(e,r);if(!f.xv.isText(a))return!1;if(n.start!==a.text.length||0===n.text.length)return a.text.slice(n.start,n.start+n.text.length)===n.text;var o=f.y$.next(r);if(!f.ML.hasPath(e,o))return!1;var i=f.NB.get(e,o);return f.xv.isText(i)&&i.text.startsWith(n.text)}function ke(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce(((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end)),e)}function Ce(e,t){var{start:r,end:n,text:a}=t,o=e.slice(r,n),i=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return r}(o,a),l=function(e,t,r){for(var n=Math.min(e.length,t.length,r),a=0;a<n;a++)if(e.charAt(e.length-a-1)!==t.charAt(t.length-a-1))return a;return n}(o,a,Math.min(o.length-i,a.length-i)),s={start:r+i,end:n-l,text:a.slice(i,a.length-l)};return s.start===s.end&&0===s.text.length?null:s}function Oe(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}function Ee(e,t){var{path:r,offset:n}=t;if(!f.ML.hasPath(e,r))return null;var a=f.NB.get(e,r);if(!f.xv.isText(a))return null;var o=f.ML.above(e,{match:t=>f.W_.isElement(t)&&f.ML.isBlock(e,t),at:r});if(!o)return null;for(;n>a.text.length;){var i=f.ML.next(e,{at:r,match:f.xv.isText});if(!i||!f.y$.isDescendant(i[1],o[1]))return null;n-=a.text.length,a=i[0],r=i[1]}return{path:r,offset:n}}function Le(e,t){var r=Ee(e,t.anchor);if(!r)return null;if(f.e6.isCollapsed(t))return{anchor:r,focus:r};var n=Ee(e,t.focus);return n?{anchor:r,focus:n}:null}function De(e,t,r){var n=te.get(e),a=null==n?void 0:n.find((e=>{var{path:r}=e;return f.y$.equals(r,t.path)}));if(!a||t.offset<=a.diff.start)return f.E9.transform(t,r,{affinity:"backward"});var{diff:o}=a;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},l=f.E9.transform(i,r,{affinity:"backward"});return l?{path:l.path,offset:l.offset+t.offset-o.start}:null}var s={path:t.path,offset:t.offset-o.text.length+o.end-o.start},d=f.E9.transform(s,r,{affinity:"backward"});return d?"split_node"===r.type&&f.y$.equals(r.path,t.path)&&s.offset<r.position&&o.start<r.position?d:{path:d.path,offset:d.offset+o.text.length-o.end+o.start}:null}function Se(e,t,r){var n=De(e,t.anchor,r);if(!n)return null;if(f.e6.isCollapsed(t))return{anchor:n,focus:n};var a=De(e,t.focus,r);return a?{anchor:n,focus:a}:null}function Pe(e,t){var{path:r,diff:n,id:a}=e;switch(t.type){case"insert_text":return!f.y$.equals(t.path,r)||t.offset>=n.end?e:t.offset<=n.start?{diff:{start:t.text.length+n.start,end:t.text.length+n.end,text:n.text},id:a,path:r}:{diff:{start:n.start,end:n.end+t.text.length,text:n.text},id:a,path:r};case"remove_text":return!f.y$.equals(t.path,r)||t.offset>=n.end?e:t.offset+t.text.length<=n.start?{diff:{start:n.start-t.text.length,end:n.end-t.text.length,text:n.text},id:a,path:r}:{diff:{start:n.start,end:n.end-t.text.length,text:n.text},id:a,path:r};case"split_node":return!f.y$.equals(t.path,r)||t.position>=n.end?{diff:n,id:a,path:f.y$.transform(r,t,{affinity:"backward"})}:t.position>n.start?{diff:{start:n.start,end:Math.min(t.position,n.end),text:n.text},id:a,path:r}:{diff:{start:n.start-t.position,end:n.end-t.position,text:n.text},id:a,path:f.y$.transform(r,t,{affinity:"forward"})};case"merge_node":return f.y$.equals(t.path,r)?{diff:{start:n.start+t.position,end:n.end+t.position,text:n.text},id:a,path:f.y$.transform(r,t)}:{diff:n,id:a,path:f.y$.transform(r,t)}}var o=f.y$.transform(r,t);return o?{diff:n,path:o,id:a}:null}function Be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Re(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=e,a=!1,o=null,i=null,l=null,s=0,d=!1,c=()=>{var e=ne.get(t);if(ne.delete(t),e){var{selection:r}=t,n=Le(t,e);!n||r&&f.e6.equals(n,r)||f.YR.select(t,n)}},u=()=>{if(i&&(clearTimeout(i),i=null),l&&(clearTimeout(l),l=null),m()||g()){a||(a=!0,setTimeout((()=>a=!1))),g()&&(a="action");var e=t.selection&&f.ML.rangeRef(t,t.selection,{affinity:"forward"});ee.set(t,t.marks),re.get(t),te.get(t);for(var o,s=m();o=null===(u=te.get(t))||void 0===u?void 0:u[0];){var u,h,v=Q.get(t);void 0!==v&&(Q.delete(t),t.marks=v),v&&!1===d&&(d=null);var p=Oe(o);t.selection&&f.e6.equals(t.selection,p)||f.YR.select(t,p),o.diff.text?f.ML.insertText(t,o.diff.text):f.ML.deleteFragment(t),te.set(t,null===(h=te.get(t))||void 0===h?void 0:h.filter((e=>{var{id:t}=e;return t!==o.id}))),xe(t,o)||(s=!1,re.delete(t),ee.delete(t),a="action",ne.delete(t),r.cancel(),n.cancel(),null==e||e.unref())}var w=null==e?void 0:e.unref();if(!w||ne.get(t)||t.selection&&f.e6.equals(w,t.selection)||f.YR.select(t,w),g())(()=>{var e=re.get(t);if(re.delete(t),e){if(e.at){var r=f.E9.isPoint(e.at)?Ee(t,e.at):Le(t,e.at);if(!r)return;var n=f.ML.range(t,r);t.selection&&f.e6.equals(t.selection,n)||f.YR.select(t,r)}e.run()}})();else{s&&r(),r.flush(),n.flush(),c();var b=ee.get(t);ee.delete(t),void 0!==b&&(t.marks=b,t.onChange())}}else c()},h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=$.get(t);r&&(m()||e?r.style.display="none":r.style.removeProperty("display"))},v=(e,r)=>{var n,a=null!==(n=te.get(t))&&void 0!==n?n:[];te.set(t,a);var o=f.NB.leaf(t,e),i=a.findIndex((t=>f.y$.equals(t.path,e)));if(i<0)return Ce(o.text,r)&&a.push({path:e,diff:r,id:s++}),void h();var l,d,c,u,v,p,g,m,w=(l=o.text,d=a[i].diff,c=r,u=Math.min(d.start,c.start),v=Math.max(0,Math.min(d.start+d.text.length,c.end)-c.start),p=ke(l,d,c),g=Math.max(c.start+c.text.length,d.start+d.text.length+(d.start+d.text.length>c.start?c.text.length:0)-v),m=p.slice(u,g),Ce(l,{start:u,end:Math.max(d.end,c.end-d.text.length+(d.end-d.start)),text:m}));if(!w)return a.splice(i,1),void h();a[i]=Te(Te({},a[i]),{},{diff:w})},p=function(e){var{at:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=!1,ne.delete(t),r.cancel(),n.cancel(),g()&&u(),re.set(t,{at:a,run:e}),l=setTimeout(u)},g=()=>!!re.get(t),m=()=>{var e;return!(null===(e=te.get(t))||void 0===e||!e.length)},w=e=>{ne.set(t,e),i&&(clearTimeout(i),i=null);var{selection:r}=t;if(e){var n=!r||!f.y$.equals(r.anchor.path,e.anchor.path),a=!r||!f.y$.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(n&&d||a)&&(d=!1),(n||m())&&(i=setTimeout(u,200))}},b=()=>{g()||(l=setTimeout(u))};return{flush:u,scheduleFlush:b,hasPendingDiffs:m,hasPendingAction:g,hasPendingChanges:()=>g()||m(),isFlushing:()=>a,handleUserSelect:w,handleCompositionEnd:e=>{o&&clearTimeout(o),o=setTimeout((()=>{X.set(t,!1),u()}),25)},handleCompositionStart:e=>{X.set(t,!0),o&&(clearTimeout(o),o=null)},handleDOMBeforeInput:e=>{var r;i&&(clearTimeout(i),i=null);var{inputType:n}=e,a=null,o=e.dataTransfer||e.data||void 0;!1!==d&&"insertText"!==n&&"insertCompositionText"!==n&&(d=!1);var[l]=e.getTargetRanges();l&&(a=Me.toSlateRange(t,l,{exactMatch:!1,suppressThrow:!0}));var s=Me.getWindow(t).getSelection();if(!a&&s&&(l=s,a=Me.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0})),a=null!==(r=a)&&void 0!==r?r:t.selection){var c,u=!0;if(n.startsWith("delete")){if(f.e6.isExpanded(a)){var[h,g]=f.e6.edges(a);if(f.NB.leaf(t,h.path).text.length===h.offset&&0===g.offset){var m=f.ML.next(t,{at:h.path,match:f.xv.isText});m&&f.y$.equals(m[1],g.path)&&(a={anchor:g,focus:g})}}var y=n.endsWith("Backward")?"backward":"forward",[M,x]=f.e6.edges(a),[k,C]=f.ML.leaf(t,M.path),O={text:"",start:M.offset,end:x.offset},E=te.get(t),L=null==E?void 0:E.find((e=>f.y$.equals(e.path,C))),D=L?[L.diff,O]:[O];if(0===ke(k.text,...D).length&&(u=!1),f.e6.isExpanded(a)){if(u&&f.y$.equals(a.anchor.path,a.focus.path)){var S={path:a.anchor.path,offset:M.offset},P=f.ML.range(t,S,S);return w(P),v(a.anchor.path,{text:"",end:x.offset,start:M.offset})}return p((()=>f.ML.deleteFragment(t,{direction:y})),{at:a})}}switch(n){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return p((()=>f.ML.deleteFragment(t)),{at:a});case"deleteContent":case"deleteContentForward":var{anchor:B}=a;if(u&&f.e6.isCollapsed(a)){var T=f.NB.leaf(t,B.path);if(B.offset<T.text.length)return v(B.path,{text:"",start:B.offset,end:B.offset+1})}return p((()=>f.ML.deleteForward(t)),{at:a});case"deleteContentBackward":var R,{anchor:F}=a,N=ue(l)?l.isCollapsed:!(null===(R=l)||void 0===R||!R.collapsed);return u&&N&&f.e6.isCollapsed(a)&&F.offset>0?v(F.path,{text:"",start:F.offset-1,end:F.offset}):p((()=>f.ML.deleteBackward(t)),{at:a});case"deleteEntireSoftLine":return p((()=>{f.ML.deleteBackward(t,{unit:"line"}),f.ML.deleteForward(t,{unit:"line"})}),{at:a});case"deleteHardLineBackward":return p((()=>f.ML.deleteBackward(t,{unit:"block"})),{at:a});case"deleteSoftLineBackward":return p((()=>f.ML.deleteBackward(t,{unit:"line"})),{at:a});case"deleteHardLineForward":return p((()=>f.ML.deleteForward(t,{unit:"block"})),{at:a});case"deleteSoftLineForward":return p((()=>f.ML.deleteForward(t,{unit:"line"})),{at:a});case"deleteWordBackward":return p((()=>f.ML.deleteBackward(t,{unit:"word"})),{at:a});case"deleteWordForward":return p((()=>f.ML.deleteForward(t,{unit:"word"})),{at:a});case"insertLineBreak":return p((()=>f.ML.insertSoftBreak(t)),{at:a});case"insertParagraph":return p((()=>f.ML.insertBreak(t)),{at:a});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if("DataTransfer"===(null==(c=o)?void 0:c.constructor.name))return p((()=>Me.insertData(t,o)),{at:a});var j=null!=o?o:"";if(Q.get(t)&&(j=j.replace("\ufeff","")),"insertText"===n&&/.*\n.*\n$/.test(j)&&(j=j.slice(0,-1)),j.includes("\n"))return p((()=>{var e=j.split("\n");e.forEach(((r,n)=>{r&&f.ML.insertText(t,r),n!==e.length-1&&f.ML.insertSoftBreak(t)}))}),{at:a});if(f.y$.equals(a.anchor.path,a.focus.path)){var[W,A]=f.e6.edges(a),I={start:W.offset,end:A.offset,text:j};if(j&&d&&"insertCompositionText"===n){var q=d.start+d.text.search(/\S|$/);I.start+I.text.search(/\S|$/)===q+1&&I.end===d.start+d.text.length?(I.start-=1,d=null,b()):d=!1}else d="insertText"===n&&(null===d?I:!(!d||!f.e6.isCollapsed(a)||d.end+d.text.length!==W.offset)&&Te(Te({},d),{},{text:d.text+j}));if(u)return void v(W.path,I)}return p((()=>f.ML.insertText(t,j)),{at:a})}}},handleKeyDown:e=>{m()||(h(!0),setTimeout(h))},handleDomMutations:e=>{var r;m()||g()||e.some((r=>we(t,r,e)))&&(null===(r=ae.get(t))||void 0===r||r())},handleInput:()=>{!g()&&m()||u()}}}var Fe=j?d.useLayoutEffect:d.useEffect;var Ne=["node"];function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var We={subtree:!0,childList:!0,characterData:!0},Ae=E?e=>{var{node:t}=e,r=m(e,Ne);if(!E)return null;var n,a=x(),o=(n=(0,d.useRef)(!1),(0,d.useEffect)((()=>(n.current=!0,()=>{n.current=!1})),[]),n.current),[i]=(0,d.useState)((()=>Re(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({editor:a},r))));return function(e,t,r){var[n]=(0,d.useState)((()=>new MutationObserver(t)));Fe((()=>{n.takeRecords()})),(0,d.useEffect)((()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,r),()=>n.disconnect()}),[n,e,r])}(t,i.handleDomMutations,We),G.set(a,i.scheduleFlush),o&&i.flush(),i}:()=>null,Ie=["anchor","focus"],qe=["anchor","focus"],Ye=(e,t)=>{var r,n,a=m(e,Ie),o=m(t,qe);return e[oe]===t[oe]&&(r=a,n=o,Object.keys(r).length===Object.keys(n).length&&Object.keys(r).every((e=>n.hasOwnProperty(e)&&r[e]===n[e])))};function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ue=e=>{var{isLast:t,leaf:r,parent:n,text:a}=e,o=x(),i=Me.findPath(o,a),l=f.y$.parent(i),s=Boolean(r[ie]);return o.isVoid(n)?c().createElement(Ve,{length:f.NB.string(n).length}):""!==r.text||n.children[n.children.length-1]!==a||o.isInline(n)||""!==f.ML.string(o,l)?""===r.text?c().createElement(Ve,{isMarkPlaceholder:s}):t&&"\n"===r.text.slice(-1)?c().createElement(_e,{isTrailing:!0,text:r.text}):c().createElement(_e,{text:r.text}):c().createElement(Ve,{isLineBreak:!0,isMarkPlaceholder:s})},_e=e=>{var{text:t,isTrailing:r=!1}=e,n=(0,d.useRef)(null),a=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[o]=(0,d.useState)(a);return Fe((()=>{var e=a();n.current&&n.current.textContent!==e&&(n.current.textContent=e)})),c().createElement(ze,{ref:n},o)},ze=(0,d.memo)((0,d.forwardRef)(((e,t)=>c().createElement("span",{"data-slate-string":!0,ref:t},e.children)))),Ve=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=e,a={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return n&&(a["data-slate-mark-placeholder"]=!0),c().createElement("span",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},a),E&&r?null:"\ufeff",r?c().createElement("br",null):null)};function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xe=E?300:0;function Je(e){e.current&&(clearTimeout(e.current),e.current=null)}var Ze=e=>{var{leaf:t,isLast:r,text:n,parent:a,renderPlaceholder:o,renderLeaf:i=(e=>c().createElement(Qe,Ke({},e)))}=e,l=x(),s=(0,d.useRef)(null),u=(0,d.useRef)(null),[f,v]=(0,d.useState)(!1),p=(0,d.useRef)(null),g=(0,d.useCallback)((e=>{if(function(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}(s,null==e),null==e){var r;$.delete(l),null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,null)}else{if($.set(l,e),!s.current){var n=window.ResizeObserver||h.do;s.current=new n((()=>{var r;null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,e)}))}s.current.observe(e),u.current=e}}),[u,t,l]),m=c().createElement(Ue,{isLast:r,leaf:t,parent:a,text:n}),w=Boolean(t[oe]);if((0,d.useEffect)((()=>(w?p.current||(p.current=setTimeout((()=>{v(!0),p.current=null}),Xe)):(Je(p),v(!1)),()=>Je(p))),[w,v]),w&&f){var b={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:D?"inherit":void 0},contentEditable:!1,ref:g}};m=c().createElement(c().Fragment,null,o(b),m)}return i({attributes:{"data-slate-leaf":!0},children:m,leaf:t,text:n})},Ge=c().memo(Ze,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&f.xv.equals(t.leaf,e.leaf)&&t.leaf[oe]===e.leaf[oe])),Qe=e=>{var{attributes:t,children:r}=e;return c().createElement("span",Ke({},t),r)},et=e=>{for(var{decorations:t,isLast:r,parent:n,renderPlaceholder:a,renderLeaf:o,text:i}=e,l=x(),s=(0,d.useRef)(null),u=f.xv.decorations(i,t),h=Me.findKey(l,i),v=[],p=0;p<u.length;p++){var g=u[p];v.push(c().createElement(Ge,{isLast:r&&p===u.length-1,key:"".concat(h.id,"-").concat(p),renderPlaceholder:a,leaf:g,text:i,parent:n,renderLeaf:o}))}var m=(0,d.useCallback)((e=>{var t=V.get(l);e?(null==t||t.set(h,e),_.set(i,e),U.set(e,i)):(null==t||t.delete(h),_.delete(i),s.current&&U.delete(s.current)),s.current=e}),[s,l,h,i]);return c().createElement("span",{"data-slate-node":"text",ref:m},v)},tt=c().memo(et,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&((e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(n.anchor.offset!==a.anchor.offset||n.focus.offset!==a.focus.offset||!Ye(n,a))return!1}return!0})(t.decorations,e.decorations)));function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var at=e=>{var{decorations:t,element:r,renderElement:n=(e=>c().createElement(it,nt({},e))),renderPlaceholder:o,renderLeaf:i,selection:l}=e,s=x(),u=ut(),h=s.isInline(r),v=Me.findKey(s,r),p=(0,d.useCallback)((e=>{var t=V.get(s);e?(null==t||t.set(v,e),_.set(r,e),U.set(e,r)):(null==t||t.delete(v),_.delete(r))}),[s,v,r]),g=dt({decorations:t,node:r,renderElement:n,renderPlaceholder:o,renderLeaf:i,selection:l}),m={"data-slate-node":"element",ref:p};if(h&&(m["data-slate-inline"]=!0),!h&&f.ML.hasInlines(s,r)){var w=f.NB.string(r),b=a()(w);"rtl"===b&&(m.dir=b)}if(f.ML.isVoid(s,r)){m["data-slate-void"]=!0,!u&&h&&(m.contentEditable=!1);var y=h?"span":"div",[[M]]=f.NB.texts(r);g=c().createElement(y,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},c().createElement(tt,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:M})),A.set(M,0),I.set(M,r)}return n({attributes:m,children:g,element:r})},ot=c().memo(at,((e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&((e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r];if(!f.e6.equals(n,a)||!Ye(n,a))return!1}return!0})(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&f.e6.equals(e.selection,t.selection)))),it=e=>{var{attributes:t,children:r,element:n}=e,a=x().isInline(n)?"span":"div";return c().createElement(a,nt(nt({},t),{},{style:{position:"relative"}}),r)},lt=(0,d.createContext)((()=>[])),st=(0,d.createContext)(!1),dt=e=>{for(var{decorations:t,node:r,renderElement:n,renderPlaceholder:a,renderLeaf:o,selection:i}=e,l=(0,d.useContext)(lt),s=x(),u=Me.findPath(s,r),h=[],v=f.W_.isElement(r)&&!s.isInline(r)&&f.ML.hasInlines(s,r),p=0;p<r.children.length;p++){var g=u.concat(p),m=r.children[p],w=Me.findKey(s,m),b=f.ML.range(s,g),y=i&&f.e6.intersection(b,i),M=l([m,g]);for(var k of t){var C=f.e6.intersection(k,b);C&&M.push(C)}f.W_.isElement(m)?h.push(c().createElement(st.Provider,{key:"provider-".concat(w.id),value:!!y},c().createElement(ot,{decorations:M,element:m,key:w.id,renderElement:n,renderPlaceholder:a,renderLeaf:o,selection:y}))):h.push(c().createElement(tt,{decorations:M,key:w.id,isLast:v&&p===r.children.length-1,parent:r,renderPlaceholder:a,renderLeaf:o,text:m})),A.set(m,p),I.set(m,r)}return h},ct=(0,d.createContext)(!1),ut=()=>(0,d.useContext)(ct),ft=(0,d.createContext)(null);var ht={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},vt={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},pt={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},gt=e=>{var t=ht[e],r=vt[e],n=pt[e],a=t&&(0,v.P6)(t),o=r&&(0,v.P6)(r),i=n&&(0,v.P6)(n);return e=>!(!a||!a(e))||(!!(O&&o&&o(e))||!(O||!i||!i(e)))},mt={isBold:gt("bold"),isCompose:gt("compose"),isMoveBackward:gt("moveBackward"),isMoveForward:gt("moveForward"),isDeleteBackward:gt("deleteBackward"),isDeleteForward:gt("deleteForward"),isDeleteLineBackward:gt("deleteLineBackward"),isDeleteLineForward:gt("deleteLineForward"),isDeleteWordBackward:gt("deleteWordBackward"),isDeleteWordForward:gt("deleteWordForward"),isExtendBackward:gt("extendBackward"),isExtendForward:gt("extendForward"),isExtendLineBackward:gt("extendLineBackward"),isExtendLineForward:gt("extendLineForward"),isItalic:gt("italic"),isMoveLineBackward:gt("moveLineBackward"),isMoveLineForward:gt("moveLineForward"),isMoveWordBackward:gt("moveWordBackward"),isMoveWordForward:gt("moveWordForward"),isRedo:gt("redo"),isSoftBreak:gt("insertSoftBreak"),isSplitBlock:gt("splitBlock"),isTransposeCharacter:gt("transposeCharacter"),isUndo:gt("undo")},wt={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class bt extends d.Component{constructor(){super(...arguments),y(this,"context",null),y(this,"manager",null),y(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,wt)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=((e,t)=>{var r=[],n=()=>{r=[]};return{registerMutations:n=>{if(t.current){var a=n.filter((t=>we(e,t,n)));r.push(...a)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach((e=>{"characterData"!==e.type&&(e.removedNodes.forEach((t=>{e.target.insertBefore(t,e.nextSibling)})),e.addedNodes.forEach((t=>{e.target.removeChild(t)})))})),n())},clear:n}})(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,n,a=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();null!=a&&a.length&&(null===(n=this.manager)||void 0===n||n.registerMutations(a));return null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}}y(bt,"contextType",M);var yt=E?bt:e=>{var{children:t}=e;return c().createElement(c().Fragment,null,t)},Mt=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],xt=["text"];function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ot=e=>c().createElement(c().Fragment,null,dt(e)),Et=e=>{var t=(0,d.useCallback)((e=>c().createElement(Lt,Ct({},e))),[]),{autoFocus:r,decorate:n=Dt,onDOMBeforeInput:o,placeholder:l,readOnly:u=!1,renderElement:h,renderLeaf:v,renderPlaceholder:p=t,scrollSelectionIntoView:g=St,style:w={},as:b="div",disableDefaultStyles:y=!1}=e,M=m(e,Mt),k=(()=>{var e=(0,d.useContext)(ft);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t})(),[O,S]=(0,d.useState)(!1),B=(0,d.useRef)(null),T=(0,d.useRef)([]),[A,I]=(0,d.useState)(),{onUserInput:$,receivedUserInput:z}=function(){var e=x(),t=(0,d.useRef)(!1),r=(0,d.useRef)(0),n=(0,d.useCallback)((()=>{if(!t.current){t.current=!0;var n=Me.getWindow(e);n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame((()=>{t.current=!1}))}}),[e]);return(0,d.useEffect)((()=>()=>cancelAnimationFrame(r.current)),[]),{receivedUserInput:t,onUserInput:n}}(),[,V]=(0,d.useReducer)((e=>e+1),0);ae.set(k,V),H.set(k,u);var Z=(0,d.useMemo)((()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1})),[]);(0,d.useEffect)((()=>{B.current&&r&&B.current.focus()}),[r]);var G=(0,d.useRef)(),te=(0,d.useMemo)((()=>s()((()=>{var e=G.current;if((E||!Me.isComposing(k))&&(!Z.isUpdatingSelection||null!=e&&e.isFlushing())&&!Z.isDraggingInternally){var t=Me.findDocumentOrShadowRoot(k),{activeElement:r}=t,n=Me.toDOMNode(k,k),a=t.getSelection();if(r===n?(Z.latestElement=r,K.set(k,!0)):K.delete(k),!a)return f.YR.deselect(k);var{anchorNode:o,focusNode:i}=a,l=Me.hasEditableTarget(k,o)||Me.isTargetInsideNonReadonlyVoid(k,o),s=Me.hasEditableTarget(k,i)||Me.isTargetInsideNonReadonlyVoid(k,i);if(l&&s){var d=Me.toSlateRange(k,a,{exactMatch:!1,suppressThrow:!0});d&&(Me.isComposing(k)||null!=e&&e.hasPendingChanges()||null!=e&&e.isFlushing()?null==e||e.handleUserSelect(d):f.YR.select(k,d))}!u||l&&s||f.YR.deselect(k)}}),100)),[k,u,Z]),re=(0,d.useMemo)((()=>i()(te,0)),[te]);G.current=Ae({node:B,onDOMSelectionChange:te,scheduleOnDOMSelectionChange:re}),Fe((()=>{var e,t,r;B.current&&(r=se(B.current))?(q.set(k,r),Y.set(k,B.current),_.set(k,B.current),U.set(B.current,k)):_.delete(k);var{selection:n}=k,a=Me.findDocumentOrShadowRoot(k).getSelection();if(a&&Me.isFocused(k)&&(null===(e=G.current)||void 0===e||!e.hasPendingAction())){var o=e=>{var t="None"!==a.type;if(n||t){var r,o=a.focusNode;if(L&&a.rangeCount>1){var i=a.getRangeAt(0),l=a.getRangeAt(a.rangeCount-1);r=i.startContainer===o?l.endContainer:i.startContainer}else r=a.anchorNode;var s=Y.get(k),d=!1;if(s.contains(r)&&s.contains(o)&&(d=!0),t&&d&&n&&!e){var c=Me.toSlateRange(k,a,{exactMatch:!0,suppressThrow:!0});if(c&&f.e6.equals(c,n)){var u;if(!Z.hasMarkPlaceholder)return;if(null!==(u=r)&&void 0!==u&&null!==(u=u.parentElement)&&void 0!==u&&u.hasAttribute("data-slate-mark-placeholder"))return}}if(!n||Me.hasRange(k,n)){Z.isUpdatingSelection=!0;var h=n&&Me.toDOMRange(k,n);return h?(Me.isComposing(k)&&!E?a.collapseToEnd():f.e6.isBackward(n)?a.setBaseAndExtent(h.endContainer,h.endOffset,h.startContainer,h.startOffset):a.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),g(k,h)):a.removeAllRanges(),h}k.selection=Me.toSlateRange(k,a,{exactMatch:!1,suppressThrow:!0})}};a.rangeCount<=1&&o();var i="action"===(null===(t=G.current)||void 0===t?void 0:t.isFlushing());if(E&&i){var l=null,s=requestAnimationFrame((()=>{if(i){var e=e=>{try{Me.toDOMNode(k,k).focus(),o(e)}catch(e){}};e(),l=setTimeout((()=>{e(!0),Z.isUpdatingSelection=!1}))}}));return()=>{cancelAnimationFrame(s),l&&clearTimeout(l)}}setTimeout((()=>{Z.isUpdatingSelection=!1}))}}));var ne=(0,d.useCallback)((e=>{if($(),!u&&Me.hasEditableTarget(k,e.target)&&!Tt(e,o)){var t;if(G.current)return G.current.handleDOMBeforeInput(e);re.flush(),te.flush();var{selection:r}=k,{inputType:n}=e,a=e.dataTransfer||e.data||void 0,i="insertCompositionText"===n||"deleteCompositionText"===n;if(i&&Me.isComposing(k))return;var l=!1;if("insertText"===n&&r&&f.e6.isCollapsed(r)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==r.anchor.offset){var s,d;l=!0,k.marks&&(l=!1);var{anchor:c}=r,[h,v]=Me.toDOMPoint(k,c),p=null===(s=h.parentElement)||void 0===s?void 0:s.closest("a"),g=Me.getWindow(k);if(l&&p&&Me.hasDOMNode(k,p)){var m,w=null==g?void 0:g.document.createTreeWalker(p,NodeFilter.SHOW_TEXT).lastChild();w===h&&(null===(m=w.textContent)||void 0===m?void 0:m.length)===v&&(l=!1)}if(l&&h.parentElement&&"pre"===(null==g||null===(d=g.getComputedStyle(h.parentElement))||void 0===d?void 0:d.whiteSpace)){var b=f.ML.above(k,{at:c.path,match:e=>f.W_.isElement(e)&&f.ML.isBlock(k,e)});b&&f.NB.string(b[0]).includes("\t")&&(l=!1)}}if(!n.startsWith("delete")||n.startsWith("deleteBy")){var[y]=e.getTargetRanges();if(y){var M=Me.toSlateRange(k,y,{exactMatch:!1,suppressThrow:!1});if(!r||!f.e6.equals(r,M)){l=!1;var x=!i&&k.selection&&f.ML.rangeRef(k,k.selection);f.YR.select(k,M),x&&J.set(k,x)}}}if(i)return;if(l||e.preventDefault(),r&&f.e6.isExpanded(r)&&n.startsWith("delete")){var C=n.endsWith("Backward")?"backward":"forward";return void f.ML.deleteFragment(k,{direction:C})}switch(n){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":f.ML.deleteFragment(k);break;case"deleteContent":case"deleteContentForward":f.ML.deleteForward(k);break;case"deleteContentBackward":f.ML.deleteBackward(k);break;case"deleteEntireSoftLine":f.ML.deleteBackward(k,{unit:"line"}),f.ML.deleteForward(k,{unit:"line"});break;case"deleteHardLineBackward":f.ML.deleteBackward(k,{unit:"block"});break;case"deleteSoftLineBackward":f.ML.deleteBackward(k,{unit:"line"});break;case"deleteHardLineForward":f.ML.deleteForward(k,{unit:"block"});break;case"deleteSoftLineForward":f.ML.deleteForward(k,{unit:"line"});break;case"deleteWordBackward":f.ML.deleteBackward(k,{unit:"word"});break;case"deleteWordForward":f.ML.deleteForward(k,{unit:"word"});break;case"insertLineBreak":f.ML.insertSoftBreak(k);break;case"insertParagraph":f.ML.insertBreak(k);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===n&&Me.isComposing(k)&&(S(!1),X.set(k,!1)),"DataTransfer"===(null==a?void 0:a.constructor.name)?Me.insertData(k,a):"string"==typeof a&&(l?T.current.push((()=>f.ML.insertText(k,a))):f.ML.insertText(k,a))}var O=null===(t=J.get(k))||void 0===t?void 0:t.unref();J.delete(k),!O||k.selection&&f.e6.equals(k.selection,O)||f.YR.select(k,O)}}),[k,te,$,o,u,re]),le=(0,d.useCallback)((e=>{null==e?(te.cancel(),re.cancel(),Y.delete(k),_.delete(k),B.current&&W&&B.current.removeEventListener("beforeinput",ne)):W&&e.addEventListener("beforeinput",ne),B.current=e}),[te,re,k,ne]);Fe((()=>{var e=Me.getWindow(k);return e.document.addEventListener("selectionchange",re),()=>{e.document.removeEventListener("selectionchange",re)}}),[re]);var ue=n([k,[]]),fe=l&&1===k.children.length&&1===Array.from(f.NB.texts(k)).length&&""===f.NB.string(k)&&!O,he=(0,d.useCallback)((e=>{var t;e&&fe?I(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height):I(void 0)}),[fe]);if(fe){var ve=f.ML.start(k,[]);ue.push({[oe]:!0,placeholder:l,onPlaceholderResize:he,anchor:ve,focus:ve})}var{marks:pe}=k;if(Z.hasMarkPlaceholder=!1,k.selection&&f.e6.isCollapsed(k.selection)&&pe){var{anchor:ge}=k.selection,me=f.NB.leaf(k,ge.path),we=m(me,xt);if(!f.xv.equals(me,pe,{loose:!0})){Z.hasMarkPlaceholder=!0;var be=Object.fromEntries(Object.keys(we).map((e=>[e,null])));ue.push(Ct(Ct(Ct({[ie]:!0},be),pe),{},{anchor:ge,focus:ge}))}}return(0,d.useEffect)((()=>{setTimeout((()=>{var{selection:e}=k;if(e){var{anchor:t}=e,r=f.NB.leaf(k,t.path);if(pe&&!f.xv.equals(r,pe,{loose:!0}))return void Q.set(k,pe)}Q.delete(k)}))})),c().createElement(ct.Provider,{value:u},c().createElement(lt.Provider,{value:n},c().createElement(yt,{node:B,receivedUserInput:z},c().createElement(b,Ct(Ct({role:u?void 0:"textbox","aria-multiline":!u||void 0},M),{},{spellCheck:!(!W&&j)&&M.spellCheck,autoCorrect:W||!j?M.autoCorrect:"false",autoCapitalize:W||!j?M.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!u,zindex:-1,suppressContentEditableWarning:!0,ref:le,style:Ct(Ct({},y?{}:Ct({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},A?{minHeight:A}:{})),w),onBeforeInput:(0,d.useCallback)((e=>{if(!W&&!u&&!Pt(e,M.onBeforeInput)&&Me.hasSelectableTarget(k,e.target)&&(e.preventDefault(),!Me.isComposing(k))){var t=e.data;f.ML.insertText(k,t)}}),[M.onBeforeInput,k,u]),onInput:(0,d.useCallback)((e=>{if(!Pt(e,M.onInput))if(G.current)G.current.handleInput();else{for(var t of T.current)t();T.current=[]}}),[M.onInput]),onBlur:(0,d.useCallback)((e=>{if(!u&&!Z.isUpdatingSelection&&Me.hasSelectableTarget(k,e.target)&&!Pt(e,M.onBlur)){var t=Me.findDocumentOrShadowRoot(k);if(Z.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===Me.toDOMNode(k,k)||de(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&ce(r)&&Me.hasDOMNode(k,r)){var n=Me.toSlateNode(k,r);if(f.W_.isElement(n)&&!k.isVoid(n))return}if(D){var a=t.getSelection();null==a||a.removeAllRanges()}K.delete(k)}}}}),[u,Z.isUpdatingSelection,Z.latestElement,k,M.onBlur]),onClick:(0,d.useCallback)((e=>{if(Me.hasTarget(k,e.target)&&!Pt(e,M.onClick)&&ce(e.target)){var t=Me.toSlateNode(k,e.target),r=Me.findPath(k,t);if(!f.ML.hasPath(k,r)||f.NB.get(k,r)!==t)return;if(3===e.detail&&r.length>=1){var n=r;if(!f.W_.isElement(t)||!f.ML.isBlock(k,t)){var a,o=f.ML.above(k,{match:e=>f.W_.isElement(e)&&f.ML.isBlock(k,e),at:r});n=null!==(a=null==o?void 0:o[1])&&void 0!==a?a:r.slice(0,1)}var i=f.ML.range(k,n);return void f.YR.select(k,i)}if(u)return;var l=f.ML.start(k,r),s=f.ML.end(k,r),d=f.ML.void(k,{at:l}),c=f.ML.void(k,{at:s});if(d&&c&&f.y$.equals(d[1],c[1])){var h=f.ML.range(k,l);f.YR.select(k,h)}}}),[k,M.onClick,u]),onCompositionEnd:(0,d.useCallback)((e=>{if(Me.hasSelectableTarget(k,e.target)){var t;if(Me.isComposing(k)&&Promise.resolve().then((()=>{S(!1),X.set(k,!1)})),null===(t=G.current)||void 0===t||t.handleCompositionEnd(e),Pt(e,M.onCompositionEnd)||E)return;if(!D&&!R&&!C&&!N&&!F&&e.data){var r=Q.get(k);Q.delete(k),void 0!==r&&(ee.set(k,k.marks),k.marks=r),f.ML.insertText(k,e.data);var n=ee.get(k);ee.delete(k),void 0!==n&&(k.marks=n)}}}),[M.onCompositionEnd,k]),onCompositionUpdate:(0,d.useCallback)((e=>{Me.hasSelectableTarget(k,e.target)&&!Pt(e,M.onCompositionUpdate)&&(Me.isComposing(k)||(S(!0),X.set(k,!0)))}),[M.onCompositionUpdate,k]),onCompositionStart:(0,d.useCallback)((e=>{if(Me.hasSelectableTarget(k,e.target)){var t;if(null===(t=G.current)||void 0===t||t.handleCompositionStart(e),Pt(e,M.onCompositionStart)||E)return;S(!0);var{selection:r}=k;if(r){if(f.e6.isExpanded(r))return void f.ML.deleteFragment(k);var n=f.ML.above(k,{match:e=>f.W_.isElement(e)&&f.ML.isInline(k,e),mode:"highest"});if(n){var[,a]=n;if(f.ML.isEnd(k,r.anchor,a)){var o=f.ML.after(k,a);f.YR.setSelection(k,{anchor:o,focus:o})}}}}}),[M.onCompositionStart,k]),onCopy:(0,d.useCallback)((e=>{!Me.hasSelectableTarget(k,e.target)||Pt(e,M.onCopy)||Bt(e)||(e.preventDefault(),Me.setFragmentData(k,e.clipboardData,"copy"))}),[M.onCopy,k]),onCut:(0,d.useCallback)((e=>{if(!u&&Me.hasSelectableTarget(k,e.target)&&!Pt(e,M.onCut)&&!Bt(e)){e.preventDefault(),Me.setFragmentData(k,e.clipboardData,"cut");var{selection:t}=k;if(t)if(f.e6.isExpanded(t))f.ML.deleteFragment(k);else{var r=f.NB.parent(k,t.anchor.path);f.ML.isVoid(k,r)&&f.YR.delete(k)}}}),[u,k,M.onCut]),onDragOver:(0,d.useCallback)((e=>{if(Me.hasTarget(k,e.target)&&!Pt(e,M.onDragOver)){var t=Me.toSlateNode(k,e.target);f.W_.isElement(t)&&f.ML.isVoid(k,t)&&e.preventDefault()}}),[M.onDragOver,k]),onDragStart:(0,d.useCallback)((e=>{if(!u&&Me.hasTarget(k,e.target)&&!Pt(e,M.onDragStart)){var t=Me.toSlateNode(k,e.target),r=Me.findPath(k,t);if(f.W_.isElement(t)&&f.ML.isVoid(k,t)||f.ML.void(k,{at:r,voids:!0})){var n=f.ML.range(k,r);f.YR.select(k,n)}Z.isDraggingInternally=!0,Me.setFragmentData(k,e.dataTransfer,"drag")}}),[u,k,M.onDragStart,Z]),onDrop:(0,d.useCallback)((e=>{if(!u&&Me.hasTarget(k,e.target)&&!Pt(e,M.onDrop)){e.preventDefault();var t=k.selection,r=Me.findEventRange(k,e),n=e.dataTransfer;f.YR.select(k,r),Z.isDraggingInternally&&(!t||f.e6.equals(t,r)||f.ML.void(k,{at:r,voids:!0})||f.YR.delete(k,{at:t})),Me.insertData(k,n),Me.isFocused(k)||Me.focus(k)}Z.isDraggingInternally=!1}),[u,k,M.onDrop,Z]),onDragEnd:(0,d.useCallback)((e=>{!u&&Z.isDraggingInternally&&M.onDragEnd&&Me.hasTarget(k,e.target)&&M.onDragEnd(e),Z.isDraggingInternally=!1}),[u,Z,M,k]),onFocus:(0,d.useCallback)((e=>{if(!u&&!Z.isUpdatingSelection&&Me.hasEditableTarget(k,e.target)&&!Pt(e,M.onFocus)){var t=Me.toDOMNode(k,k),r=Me.findDocumentOrShadowRoot(k);if(Z.latestElement=r.activeElement,L&&e.target!==t)return void t.focus();K.set(k,!0)}}),[u,Z,k,M.onFocus]),onKeyDown:(0,d.useCallback)((e=>{if(!u&&Me.hasEditableTarget(k,e.target)){var t;null===(t=G.current)||void 0===t||t.handleKeyDown(e);var{nativeEvent:r}=e;if(Me.isComposing(k)&&!1===r.isComposing&&(X.set(k,!1),S(!1)),Pt(e,M.onKeyDown)||Me.isComposing(k))return;var{selection:n}=k,o=k.children[null!==n?n.focus.path[0]:0],i="rtl"===a()(f.NB.string(o));if(mt.isRedo(r)){e.preventDefault();var l=k;return void("function"==typeof l.redo&&l.redo())}if(mt.isUndo(r)){e.preventDefault();var s=k;return void("function"==typeof s.undo&&s.undo())}if(mt.isMoveLineBackward(r))return e.preventDefault(),void f.YR.move(k,{unit:"line",reverse:!0});if(mt.isMoveLineForward(r))return e.preventDefault(),void f.YR.move(k,{unit:"line"});if(mt.isExtendLineBackward(r))return e.preventDefault(),void f.YR.move(k,{unit:"line",edge:"focus",reverse:!0});if(mt.isExtendLineForward(r))return e.preventDefault(),void f.YR.move(k,{unit:"line",edge:"focus"});if(mt.isMoveBackward(r))return e.preventDefault(),void(n&&f.e6.isCollapsed(n)?f.YR.move(k,{reverse:!i}):f.YR.collapse(k,{edge:i?"end":"start"}));if(mt.isMoveForward(r))return e.preventDefault(),void(n&&f.e6.isCollapsed(n)?f.YR.move(k,{reverse:i}):f.YR.collapse(k,{edge:i?"start":"end"}));if(mt.isMoveWordBackward(r))return e.preventDefault(),n&&f.e6.isExpanded(n)&&f.YR.collapse(k,{edge:"focus"}),void f.YR.move(k,{unit:"word",reverse:!i});if(mt.isMoveWordForward(r))return e.preventDefault(),n&&f.e6.isExpanded(n)&&f.YR.collapse(k,{edge:"focus"}),void f.YR.move(k,{unit:"word",reverse:i});if(W){if((P||D)&&n&&(mt.isDeleteBackward(r)||mt.isDeleteForward(r))&&f.e6.isCollapsed(n)){var d=f.NB.parent(k,n.anchor.path);if(f.W_.isElement(d)&&f.ML.isVoid(k,d)&&(f.ML.isInline(k,d)||f.ML.isBlock(k,d)))return e.preventDefault(),void f.ML.deleteBackward(k,{unit:"block"})}}else{if(mt.isBold(r)||mt.isItalic(r)||mt.isTransposeCharacter(r))return void e.preventDefault();if(mt.isSoftBreak(r))return e.preventDefault(),void f.ML.insertSoftBreak(k);if(mt.isSplitBlock(r))return e.preventDefault(),void f.ML.insertBreak(k);if(mt.isDeleteBackward(r))return e.preventDefault(),void(n&&f.e6.isExpanded(n)?f.ML.deleteFragment(k,{direction:"backward"}):f.ML.deleteBackward(k));if(mt.isDeleteForward(r))return e.preventDefault(),void(n&&f.e6.isExpanded(n)?f.ML.deleteFragment(k,{direction:"forward"}):f.ML.deleteForward(k));if(mt.isDeleteLineBackward(r))return e.preventDefault(),void(n&&f.e6.isExpanded(n)?f.ML.deleteFragment(k,{direction:"backward"}):f.ML.deleteBackward(k,{unit:"line"}));if(mt.isDeleteLineForward(r))return e.preventDefault(),void(n&&f.e6.isExpanded(n)?f.ML.deleteFragment(k,{direction:"forward"}):f.ML.deleteForward(k,{unit:"line"}));if(mt.isDeleteWordBackward(r))return e.preventDefault(),void(n&&f.e6.isExpanded(n)?f.ML.deleteFragment(k,{direction:"backward"}):f.ML.deleteBackward(k,{unit:"word"}));if(mt.isDeleteWordForward(r))return e.preventDefault(),void(n&&f.e6.isExpanded(n)?f.ML.deleteFragment(k,{direction:"forward"}):f.ML.deleteForward(k,{unit:"word"}))}}}),[u,k,M.onKeyDown]),onPaste:(0,d.useCallback)((e=>{u||!Me.hasEditableTarget(k,e.target)||Pt(e,M.onPaste)||(!W||(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||D)&&(e.preventDefault(),Me.insertData(k,e.clipboardData))}),[u,k,M.onPaste])}),c().createElement(Ot,{decorations:ue,node:k,renderElement:h,renderPlaceholder:p,renderLeaf:v,selection:k.selection})))))},Lt=e=>{var{attributes:t,children:r}=e;return c().createElement("span",Ct({},t),r,E&&c().createElement("br",null))},Dt=()=>[],St=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&f.e6.isCollapsed(e.selection))){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),(0,u.Z)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},Pt=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},Bt=e=>ce(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),Tt=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},Rt=(0,d.createContext)(!1);var Ft=(0,d.createContext)({});var Nt=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],jt=e=>{var{editor:t,children:r,onChange:n,onSelectionChange:a,onValueChange:o,initialValue:i}=e,l=m(e,Nt),[s,u]=c().useState((()=>{if(!f.NB.isNodeList(i))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(f.o4.stringify(i)));if(!f.ML.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(f.o4.stringify(t)));return t.children=i,Object.assign(t,l),{v:0,editor:t}})),{selectorContext:h,onChange:v}=function(e){var t=(0,d.useRef)([]).current,r=(0,d.useRef)({editor:e}).current,n=(0,d.useCallback)((e=>{r.editor=e,t.forEach((t=>t(e)))}),[t,r]);return{selectorContext:(0,d.useMemo)((()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})})),[t,r]),onChange:n}}(t),p=(0,d.useCallback)((e=>{var r;if(n&&n(t.children),"set_selection"===(null==e||null===(r=e.operation)||void 0===r?void 0:r.type))null==a||a(t.selection);else null==o||o(t.children);u((e=>({v:e.v+1,editor:t}))),v(t)}),[t,v,n,a,o]);(0,d.useEffect)((()=>(Z.set(t,p),()=>{Z.set(t,(()=>{}))})),[t,p]);var[g,w]=(0,d.useState)(Me.isFocused(t));return(0,d.useEffect)((()=>{w(Me.isFocused(t))}),[t]),Fe((()=>{var e=()=>w(Me.isFocused(t));return k>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})}),[]),c().createElement(Ft.Provider,{value:h},c().createElement(ft.Provider,{value:s},c().createElement(M.Provider,{value:s.editor},c().createElement(Rt.Provider,{value:g},r))))},Wt=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},At=(e,t,r)=>{var n=Me.toDOMRange(e,t).getBoundingClientRect(),a=Me.toDOMRange(e,r).getBoundingClientRect();return Wt(n,a)&&Wt(a,n)},It=(e,t)=>{var r=f.ML.range(e,f.e6.end(t)),n=Array.from(f.ML.positions(e,{at:t})),a=0,o=n.length,i=Math.floor(o/2);if(At(e,f.ML.range(e,n[a]),r))return f.ML.range(e,n[a],r);if(n.length<2)return f.ML.range(e,n[n.length-1],r);for(;i!==n.length&&i!==a;)At(e,f.ML.range(e,n[i]),r)?o=i:a=i,i=Math.floor((a+o)/2);return f.ML.range(e,n[o],r)};function qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",r=e,{apply:n,onChange:a,deleteBackward:o,addMark:i,removeMark:l}=r;return V.set(r,new WeakMap),r.addMark=(e,t)=>{var n,a;null===(n=G.get(r))||void 0===n||n(),!Q.get(r)&&null!==(a=te.get(r))&&void 0!==a&&a.length&&Q.set(r,null),ee.delete(r),i(e,t)},r.removeMark=e=>{var t;!Q.get(r)&&null!==(t=te.get(r))&&void 0!==t&&t.length&&Q.set(r,null),ee.delete(r),l(e)},r.deleteBackward=e=>{if("line"!==e)return o(e);if(r.selection&&f.e6.isCollapsed(r.selection)){var t=f.ML.above(r,{match:e=>f.W_.isElement(e)&&f.ML.isBlock(r,e),at:r.selection});if(t){var[,n]=t,a=f.ML.range(r,n,r.selection.anchor),i=It(r,a);f.e6.isCollapsed(i)||f.YR.delete(r,{at:i})}}},r.apply=t=>{var a=[],o=[],i=te.get(r);if(null!=i&&i.length){var l=i.map((e=>Pe(e,t))).filter(Boolean);te.set(r,l)}var s=ne.get(r);s&&ne.set(r,Se(r,s,t));var d=re.get(r);if(null!=d&&d.at){var c=f.E9.isPoint(null==d?void 0:d.at)?De(r,d.at,t):Se(r,d.at,t);re.set(r,c?Yt(Yt({},d),{},{at:c}):null)}switch(t.type){case"insert_text":case"remove_text":case"set_node":case"split_node":a.push(...Ut(r,t.path));break;case"set_selection":var u;null===(u=J.get(r))||void 0===u||u.unref(),J.delete(r);break;case"insert_node":case"remove_node":a.push(...Ut(r,f.y$.parent(t.path)));break;case"merge_node":var h=f.y$.previous(t.path);a.push(...Ut(r,h));break;case"move_node":var v,p=f.y$.common(f.y$.parent(t.path),f.y$.parent(t.newPath));a.push(...Ut(r,p)),f.y$.isBefore(t.path,t.newPath)?(a.push(...Ut(r,f.y$.parent(t.path))),v=t.newPath):(a.push(...Ut(r,f.y$.parent(t.newPath))),v=t.path);var g=f.NB.get(e,f.y$.parent(v)),m=Me.findKey(r,g),w=f.ML.pathRef(r,f.y$.parent(v));o.push([w,m])}for(var[b,y]of(n(t),a)){var[M]=f.ML.node(r,b);z.set(M,y)}for(var[x,k]of o)if(x.current){var[C]=f.ML.node(r,x.current);z.set(C,k)}},r.setFragmentData=e=>{var{selection:n}=r;if(n){var[a,o]=f.e6.edges(n),i=f.ML.void(r,{at:a.path}),l=f.ML.void(r,{at:o.path});if(!f.e6.isCollapsed(n)||i){var s=Me.toDOMRange(r,n),d=s.cloneContents(),c=d.childNodes[0];if(d.childNodes.forEach((e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)})),l){var[u]=l,h=s.cloneRange(),v=Me.toDOMNode(r,u);h.setEndAfter(v),d=h.cloneContents()}if(i&&(c=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach((e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),fe(c)){var p=c.ownerDocument.createElement("span");p.style.whiteSpace="pre",p.appendChild(c),d.appendChild(p),c=p}var g=r.getFragment(),m=JSON.stringify(g),w=window.btoa(encodeURIComponent(m));c.setAttribute("data-slate-fragment",w),e.setData("application/".concat(t),w);var b=d.ownerDocument.createElement("div");return b.appendChild(d),b.setAttribute("hidden","true"),d.ownerDocument.body.appendChild(b),e.setData("text/html",b.innerHTML),e.setData("text/plain",pe(b)),d.ownerDocument.body.removeChild(b),e}}},r.insertData=e=>{r.insertFragmentData(e)||r.insertTextData(e)},r.insertFragmentData=e=>{var n=e.getData("application/".concat(t))||me(e);if(n){var a=decodeURIComponent(window.atob(n)),o=JSON.parse(a);return r.insertFragment(o),!0}return!1},r.insertTextData=e=>{var t=e.getData("text/plain");if(t){var n=t.split(/\r\n|\r|\n/),a=!1;for(var o of n)a&&f.YR.splitNodes(r,{always:!0}),r.insertText(o),a=!0;return!0}return!1},r.onChange=e=>{(k<18?g().unstable_batchedUpdates:e=>e())((()=>{var t=Z.get(r);t&&t(e),a(e)}))},r},Ut=(e,t)=>{var r=[];for(var[n,a]of f.ML.levels(e,{at:t})){var o=Me.findKey(e,n);r.push([a,o])}return r}}}]);